(self.webpackChunkshell=self.webpackChunkshell||[]).push([[179],{5970:function(ye,ce,j){var C=j(8926).default;!function(N){"use strict";const we="137",mn=1e3,Hi=1001,ta=1002,sn=1003,ri=1006,is=1008,vr=1009,na=1012,ra=1014,Mo=1015,gs=1016,sa=1020,_i=1023,lr=1026,bo=1027,Tr=33776,Ct=33777,An=33778,Zn=33779,Ar=2300,Au=2301,Zi=2400,Ru=2401,Df=2402,Dl=3e3,Ai=3001,Iu=35044,Ur=35048,Tv="300 es";class ja{addEventListener(n,i){void 0===this._listeners&&(this._listeners={});const c=this._listeners;void 0===c[n]&&(c[n]=[]),-1===c[n].indexOf(i)&&c[n].push(i)}hasEventListener(n,i){if(void 0===this._listeners)return!1;const c=this._listeners;return void 0!==c[n]&&-1!==c[n].indexOf(i)}removeEventListener(n,i){if(void 0===this._listeners)return;const f=this._listeners[n];if(void 0!==f){const _=f.indexOf(i);-1!==_&&f.splice(_,1)}}dispatchEvent(n){if(void 0===this._listeners)return;const c=this._listeners[n.type];if(void 0!==c){n.target=this;const f=c.slice(0);for(let _=0,v=f.length;_<v;_++)f[_].call(this,n);n.target=null}}}const dr=[];for(let p=0;p<256;p++)dr[p]=(p<16?"0":"")+p.toString(16);let di=1234567;const Ec=Math.PI/180,xc=180/Math.PI;function kr(){const p=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0,c=4294967295*Math.random()|0;return(dr[255&p]+dr[p>>8&255]+dr[p>>16&255]+dr[p>>24&255]+"-"+dr[255&n]+dr[n>>8&255]+"-"+dr[n>>16&15|64]+dr[n>>24&255]+"-"+dr[63&i|128]+dr[i>>8&255]+"-"+dr[i>>16&255]+dr[i>>24&255]+dr[255&c]+dr[c>>8&255]+dr[c>>16&255]+dr[c>>24&255]).toUpperCase()}function si(p,n,i){return Math.max(n,Math.min(i,p))}function ym(p,n){return(p%n+n)%n}function Dr(p,n,i){return(1-i)*p+i*n}function Em(p){return 0==(p&p-1)&&0!==p}function xm(p){return Math.pow(2,Math.ceil(Math.log(p)/Math.LN2))}function E_(p){return Math.pow(2,Math.floor(Math.log(p)/Math.LN2))}var nt=Object.freeze({__proto__:null,DEG2RAD:Ec,RAD2DEG:xc,generateUUID:kr,clamp:si,euclideanModulo:ym,mapLinear:function vm(p,n,i,c,f){return c+(p-n)*(f-c)/(i-n)},inverseLerp:function Rl(p,n,i){return p!==n?(i-p)/(n-p):0},lerp:Dr,damp:function ch(p,n,i,c){return Dr(p,n,1-Math.exp(-i*c))},pingpong:function Ou(p,n=1){return n-Math.abs(ym(p,2*n)-n)},smoothstep:function g_(p,n,i){return p<=n?0:p>=i?1:(p=(p-n)/(i-n))*p*(3-2*p)},smootherstep:function $a(p,n,i){return p<=n?0:p>=i?1:(p=(p-n)/(i-n))*p*p*(p*(6*p-15)+10)},randInt:function Lu(p,n){return p+Math.floor(Math.random()*(n-p+1))},randFloat:function If(p,n){return p+Math.random()*(n-p)},randFloatSpread:function _n(p){return p*(.5-Math.random())},seededRandom:function __(p){return void 0!==p&&(di=p%2147483647),di=16807*di%2147483647,(di-1)/2147483646},degToRad:function y_(p){return p*Ec},radToDeg:function v_(p){return p*xc},isPowerOfTwo:Em,ceilPowerOfTwo:xm,floorPowerOfTwo:E_,setQuaternionFromProperEuler:function Av(p,n,i,c,f){const _=Math.cos,v=Math.sin,E=_(i/2),w=v(i/2),S=_((n+c)/2),R=v((n+c)/2),D=_((n-c)/2),I=v((n-c)/2),O=_((c-n)/2),B=v((c-n)/2);switch(f){case"XYX":p.set(E*R,w*D,w*I,E*S);break;case"YZY":p.set(w*I,E*R,w*D,E*S);break;case"ZXZ":p.set(w*D,w*I,E*R,E*S);break;case"XZX":p.set(E*R,w*B,w*O,E*S);break;case"YXY":p.set(w*O,E*R,w*B,E*S);break;case"ZYZ":p.set(w*B,w*O,E*R,E*S);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+f)}}});class Ne{constructor(n=0,i=0){this.x=n,this.y=i}get width(){return this.x}set width(n){this.x=n}get height(){return this.y}set height(n){this.y=n}set(n,i){return this.x=n,this.y=i,this}setScalar(n){return this.x=n,this.y=n,this}setX(n){return this.x=n,this}setY(n){return this.y=n,this}setComponent(n,i){switch(n){case 0:this.x=i;break;case 1:this.y=i;break;default:throw new Error("index is out of range: "+n)}return this}getComponent(n){switch(n){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+n)}}clone(){return new this.constructor(this.x,this.y)}copy(n){return this.x=n.x,this.y=n.y,this}add(n,i){return void 0!==i?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(n,i)):(this.x+=n.x,this.y+=n.y,this)}addScalar(n){return this.x+=n,this.y+=n,this}addVectors(n,i){return this.x=n.x+i.x,this.y=n.y+i.y,this}addScaledVector(n,i){return this.x+=n.x*i,this.y+=n.y*i,this}sub(n,i){return void 0!==i?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(n,i)):(this.x-=n.x,this.y-=n.y,this)}subScalar(n){return this.x-=n,this.y-=n,this}subVectors(n,i){return this.x=n.x-i.x,this.y=n.y-i.y,this}multiply(n){return this.x*=n.x,this.y*=n.y,this}multiplyScalar(n){return this.x*=n,this.y*=n,this}divide(n){return this.x/=n.x,this.y/=n.y,this}divideScalar(n){return this.multiplyScalar(1/n)}applyMatrix3(n){const i=this.x,c=this.y,f=n.elements;return this.x=f[0]*i+f[3]*c+f[6],this.y=f[1]*i+f[4]*c+f[7],this}min(n){return this.x=Math.min(this.x,n.x),this.y=Math.min(this.y,n.y),this}max(n){return this.x=Math.max(this.x,n.x),this.y=Math.max(this.y,n.y),this}clamp(n,i){return this.x=Math.max(n.x,Math.min(i.x,this.x)),this.y=Math.max(n.y,Math.min(i.y,this.y)),this}clampScalar(n,i){return this.x=Math.max(n,Math.min(i,this.x)),this.y=Math.max(n,Math.min(i,this.y)),this}clampLength(n,i){const c=this.length();return this.divideScalar(c||1).multiplyScalar(Math.max(n,Math.min(i,c)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(n){return this.x*n.x+this.y*n.y}cross(n){return this.x*n.y-this.y*n.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(n){return Math.sqrt(this.distanceToSquared(n))}distanceToSquared(n){const i=this.x-n.x,c=this.y-n.y;return i*i+c*c}manhattanDistanceTo(n){return Math.abs(this.x-n.x)+Math.abs(this.y-n.y)}setLength(n){return this.normalize().multiplyScalar(n)}lerp(n,i){return this.x+=(n.x-this.x)*i,this.y+=(n.y-this.y)*i,this}lerpVectors(n,i,c){return this.x=n.x+(i.x-n.x)*c,this.y=n.y+(i.y-n.y)*c,this}equals(n){return n.x===this.x&&n.y===this.y}fromArray(n,i=0){return this.x=n[i],this.y=n[i+1],this}toArray(n=[],i=0){return n[i]=this.x,n[i+1]=this.y,n}fromBufferAttribute(n,i,c){return void 0!==c&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=n.getX(i),this.y=n.getY(i),this}rotateAround(n,i){const c=Math.cos(i),f=Math.sin(i),_=this.x-n.x,v=this.y-n.y;return this.x=_*c-v*f+n.x,this.y=_*f+v*c+n.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}Ne.prototype.isVector2=!0;class hr{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(n,i,c,f,_,v,E,w,S){const R=this.elements;return R[0]=n,R[1]=f,R[2]=E,R[3]=i,R[4]=_,R[5]=w,R[6]=c,R[7]=v,R[8]=S,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(n){const i=this.elements,c=n.elements;return i[0]=c[0],i[1]=c[1],i[2]=c[2],i[3]=c[3],i[4]=c[4],i[5]=c[5],i[6]=c[6],i[7]=c[7],i[8]=c[8],this}extractBasis(n,i,c){return n.setFromMatrix3Column(this,0),i.setFromMatrix3Column(this,1),c.setFromMatrix3Column(this,2),this}setFromMatrix4(n){const i=n.elements;return this.set(i[0],i[4],i[8],i[1],i[5],i[9],i[2],i[6],i[10]),this}multiply(n){return this.multiplyMatrices(this,n)}premultiply(n){return this.multiplyMatrices(n,this)}multiplyMatrices(n,i){const c=n.elements,f=i.elements,_=this.elements,v=c[0],E=c[3],w=c[6],S=c[1],R=c[4],D=c[7],I=c[2],O=c[5],B=c[8],V=f[0],$=f[3],U=f[6],L=f[1],Y=f[4],z=f[7],Q=f[2],re=f[5],ae=f[8];return _[0]=v*V+E*L+w*Q,_[3]=v*$+E*Y+w*re,_[6]=v*U+E*z+w*ae,_[1]=S*V+R*L+D*Q,_[4]=S*$+R*Y+D*re,_[7]=S*U+R*z+D*ae,_[2]=I*V+O*L+B*Q,_[5]=I*$+O*Y+B*re,_[8]=I*U+O*z+B*ae,this}multiplyScalar(n){const i=this.elements;return i[0]*=n,i[3]*=n,i[6]*=n,i[1]*=n,i[4]*=n,i[7]*=n,i[2]*=n,i[5]*=n,i[8]*=n,this}determinant(){const n=this.elements,i=n[0],c=n[1],f=n[2],_=n[3],v=n[4],E=n[5],w=n[6],S=n[7],R=n[8];return i*v*R-i*E*S-c*_*R+c*E*w+f*_*S-f*v*w}invert(){const n=this.elements,i=n[0],c=n[1],f=n[2],_=n[3],v=n[4],E=n[5],w=n[6],S=n[7],R=n[8],D=R*v-E*S,I=E*w-R*_,O=S*_-v*w,B=i*D+c*I+f*O;if(0===B)return this.set(0,0,0,0,0,0,0,0,0);const V=1/B;return n[0]=D*V,n[1]=(f*S-R*c)*V,n[2]=(E*c-f*v)*V,n[3]=I*V,n[4]=(R*i-f*w)*V,n[5]=(f*_-E*i)*V,n[6]=O*V,n[7]=(c*w-S*i)*V,n[8]=(v*i-c*_)*V,this}transpose(){let n;const i=this.elements;return n=i[1],i[1]=i[3],i[3]=n,n=i[2],i[2]=i[6],i[6]=n,n=i[5],i[5]=i[7],i[7]=n,this}getNormalMatrix(n){return this.setFromMatrix4(n).invert().transpose()}transposeIntoArray(n){const i=this.elements;return n[0]=i[0],n[1]=i[3],n[2]=i[6],n[3]=i[1],n[4]=i[4],n[5]=i[7],n[6]=i[2],n[7]=i[5],n[8]=i[8],this}setUvTransform(n,i,c,f,_,v,E){const w=Math.cos(_),S=Math.sin(_);return this.set(c*w,c*S,-c*(w*v+S*E)+v+n,-f*S,f*w,-f*(-S*v+w*E)+E+i,0,0,1),this}scale(n,i){const c=this.elements;return c[0]*=n,c[3]*=n,c[6]*=n,c[1]*=i,c[4]*=i,c[7]*=i,this}rotate(n){const i=Math.cos(n),c=Math.sin(n),f=this.elements,_=f[0],v=f[3],E=f[6],w=f[1],S=f[4],R=f[7];return f[0]=i*_+c*w,f[3]=i*v+c*S,f[6]=i*E+c*R,f[1]=-c*_+i*w,f[4]=-c*v+i*S,f[7]=-c*E+i*R,this}translate(n,i){const c=this.elements;return c[0]+=n*c[2],c[3]+=n*c[5],c[6]+=n*c[8],c[1]+=i*c[2],c[4]+=i*c[5],c[7]+=i*c[8],this}equals(n){const i=this.elements,c=n.elements;for(let f=0;f<9;f++)if(i[f]!==c[f])return!1;return!0}fromArray(n,i=0){for(let c=0;c<9;c++)this.elements[c]=n[c+i];return this}toArray(n=[],i=0){const c=this.elements;return n[i]=c[0],n[i+1]=c[1],n[i+2]=c[2],n[i+3]=c[3],n[i+4]=c[4],n[i+5]=c[5],n[i+6]=c[6],n[i+7]=c[7],n[i+8]=c[8],n}clone(){return(new this.constructor).fromArray(this.elements)}}function Fi(p){for(let n=p.length-1;n>=0;--n)if(p[n]>65535)return!0;return!1}hr.prototype.isMatrix3=!0;const Of={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function da(p,n){return new Of[p](n)}function ss(p){return document.createElementNS("http://www.w3.org/1999/xhtml",p)}const Lf={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ps={h:0,s:0,l:0},Mm={h:0,s:0,l:0};function Ff(p,n,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?p+6*(n-p)*i:i<.5?n:i<2/3?p+6*(n-p)*(2/3-i):p}function qa(p){return p<.04045?.0773993808*p:Math.pow(.9478672986*p+.0521327014,2.4)}function Fu(p){return p<.0031308?12.92*p:1.055*Math.pow(p,.41666)-.055}let _s,vt=(()=>{class p{constructor(i,c,f){return void 0===c&&void 0===f?this.set(i):this.setRGB(i,c,f)}set(i){return i&&i.isColor?this.copy(i):"number"==typeof i?this.setHex(i):"string"==typeof i&&this.setStyle(i),this}setScalar(i){return this.r=i,this.g=i,this.b=i,this}setHex(i){return i=Math.floor(i),this.r=(i>>16&255)/255,this.g=(i>>8&255)/255,this.b=(255&i)/255,this}setRGB(i,c,f){return this.r=i,this.g=c,this.b=f,this}setHSL(i,c,f){if(i=ym(i,1),c=si(c,0,1),f=si(f,0,1),0===c)this.r=this.g=this.b=f;else{const _=f<=.5?f*(1+c):f+c-f*c,v=2*f-_;this.r=Ff(v,_,i+1/3),this.g=Ff(v,_,i),this.b=Ff(v,_,i-1/3)}return this}setStyle(i){function c(_){void 0!==_&&parseFloat(_)<1&&console.warn("THREE.Color: Alpha component of "+i+" will be ignored.")}let f;if(f=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(i)){let _;const E=f[2];switch(f[1]){case"rgb":case"rgba":if(_=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(E))return this.r=Math.min(255,parseInt(_[1],10))/255,this.g=Math.min(255,parseInt(_[2],10))/255,this.b=Math.min(255,parseInt(_[3],10))/255,c(_[4]),this;if(_=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(E))return this.r=Math.min(100,parseInt(_[1],10))/100,this.g=Math.min(100,parseInt(_[2],10))/100,this.b=Math.min(100,parseInt(_[3],10))/100,c(_[4]),this;break;case"hsl":case"hsla":if(_=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(E)){const w=parseFloat(_[1])/360,S=parseInt(_[2],10)/100,R=parseInt(_[3],10)/100;return c(_[4]),this.setHSL(w,S,R)}}}else if(f=/^\#([A-Fa-f\d]+)$/.exec(i)){const _=f[1],v=_.length;if(3===v)return this.r=parseInt(_.charAt(0)+_.charAt(0),16)/255,this.g=parseInt(_.charAt(1)+_.charAt(1),16)/255,this.b=parseInt(_.charAt(2)+_.charAt(2),16)/255,this;if(6===v)return this.r=parseInt(_.charAt(0)+_.charAt(1),16)/255,this.g=parseInt(_.charAt(2)+_.charAt(3),16)/255,this.b=parseInt(_.charAt(4)+_.charAt(5),16)/255,this}return i&&i.length>0?this.setColorName(i):this}setColorName(i){const c=Lf[i.toLowerCase()];return void 0!==c?this.setHex(c):console.warn("THREE.Color: Unknown color "+i),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(i){return this.r=i.r,this.g=i.g,this.b=i.b,this}copySRGBToLinear(i){return this.r=qa(i.r),this.g=qa(i.g),this.b=qa(i.b),this}copyLinearToSRGB(i){return this.r=Fu(i.r),this.g=Fu(i.g),this.b=Fu(i.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(i){const c=this.r,f=this.g,_=this.b,v=Math.max(c,f,_),E=Math.min(c,f,_);let w,S;const R=(E+v)/2;if(E===v)w=0,S=0;else{const D=v-E;switch(S=R<=.5?D/(v+E):D/(2-v-E),v){case c:w=(f-_)/D+(f<_?6:0);break;case f:w=(_-c)/D+2;break;case _:w=(c-f)/D+4}w/=6}return i.h=w,i.s=S,i.l=R,i}getStyle(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}offsetHSL(i,c,f){return this.getHSL(Ps),Ps.h+=i,Ps.s+=c,Ps.l+=f,this.setHSL(Ps.h,Ps.s,Ps.l),this}add(i){return this.r+=i.r,this.g+=i.g,this.b+=i.b,this}addColors(i,c){return this.r=i.r+c.r,this.g=i.g+c.g,this.b=i.b+c.b,this}addScalar(i){return this.r+=i,this.g+=i,this.b+=i,this}sub(i){return this.r=Math.max(0,this.r-i.r),this.g=Math.max(0,this.g-i.g),this.b=Math.max(0,this.b-i.b),this}multiply(i){return this.r*=i.r,this.g*=i.g,this.b*=i.b,this}multiplyScalar(i){return this.r*=i,this.g*=i,this.b*=i,this}lerp(i,c){return this.r+=(i.r-this.r)*c,this.g+=(i.g-this.g)*c,this.b+=(i.b-this.b)*c,this}lerpColors(i,c,f){return this.r=i.r+(c.r-i.r)*f,this.g=i.g+(c.g-i.g)*f,this.b=i.b+(c.b-i.b)*f,this}lerpHSL(i,c){this.getHSL(Ps),i.getHSL(Mm);const f=Dr(Ps.h,Mm.h,c),_=Dr(Ps.s,Mm.s,c),v=Dr(Ps.l,Mm.l,c);return this.setHSL(f,_,v),this}equals(i){return i.r===this.r&&i.g===this.g&&i.b===this.b}fromArray(i,c=0){return this.r=i[c],this.g=i[c+1],this.b=i[c+2],this}toArray(i=[],c=0){return i[c]=this.r,i[c+1]=this.g,i[c+2]=this.b,i}fromBufferAttribute(i,c){return this.r=i.getX(c),this.g=i.getY(c),this.b=i.getZ(c),!0===i.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}return p.NAMES=Lf,p})();vt.prototype.isColor=!0,vt.prototype.r=1,vt.prototype.g=1,vt.prototype.b=1;class Xa{static getDataURL(n){if(/^data:/i.test(n.src)||"undefined"==typeof HTMLCanvasElement)return n.src;let i;if(n instanceof HTMLCanvasElement)i=n;else{void 0===_s&&(_s=ss("canvas")),_s.width=n.width,_s.height=n.height;const c=_s.getContext("2d");n instanceof ImageData?c.putImageData(n,0,0):c.drawImage(n,0,0,n.width,n.height),i=_s}return i.width>2048||i.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",n),i.toDataURL("image/jpeg",.6)):i.toDataURL("image/png")}static sRGBToLinear(n){if("undefined"!=typeof HTMLImageElement&&n instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&n instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&n instanceof ImageBitmap){const i=ss("canvas");i.width=n.width,i.height=n.height;const c=i.getContext("2d");c.drawImage(n,0,0,n.width,n.height);const f=c.getImageData(0,0,n.width,n.height),_=f.data;for(let v=0;v<_.length;v++)_[v]=255*qa(_[v]/255);return c.putImageData(f,0,0),i}if(n.data){const i=n.data.slice(0);for(let c=0;c<i.length;c++)i[c]=i instanceof Uint8Array||i instanceof Uint8ClampedArray?Math.floor(255*qa(i[c]/255)):qa(i[c]);return{data:i,width:n.width,height:n.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),n}}let Nu=0;class li extends ja{constructor(n=li.DEFAULT_IMAGE,i=li.DEFAULT_MAPPING,c=Hi,f=Hi,_=ri,v=is,E=_i,w=vr,S=1,R=Dl){super(),Object.defineProperty(this,"id",{value:Nu++}),this.uuid=kr(),this.name="",this.image=n,this.mipmaps=[],this.mapping=i,this.wrapS=c,this.wrapT=f,this.magFilter=_,this.minFilter=v,this.anisotropy=S,this.format=E,this.internalFormat=null,this.type=w,this.offset=new Ne(0,0),this.repeat=new Ne(1,1),this.center=new Ne(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new hr,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=R,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(n){return this.name=n.name,this.image=n.image,this.mipmaps=n.mipmaps.slice(0),this.mapping=n.mapping,this.wrapS=n.wrapS,this.wrapT=n.wrapT,this.magFilter=n.magFilter,this.minFilter=n.minFilter,this.anisotropy=n.anisotropy,this.format=n.format,this.internalFormat=n.internalFormat,this.type=n.type,this.offset.copy(n.offset),this.repeat.copy(n.repeat),this.center.copy(n.center),this.rotation=n.rotation,this.matrixAutoUpdate=n.matrixAutoUpdate,this.matrix.copy(n.matrix),this.generateMipmaps=n.generateMipmaps,this.premultiplyAlpha=n.premultiplyAlpha,this.flipY=n.flipY,this.unpackAlignment=n.unpackAlignment,this.encoding=n.encoding,this.userData=JSON.parse(JSON.stringify(n.userData)),this}toJSON(n){const i=void 0===n||"string"==typeof n;if(!i&&void 0!==n.textures[this.uuid])return n.textures[this.uuid];const c={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){const f=this.image;if(void 0===f.uuid&&(f.uuid=kr()),!i&&void 0===n.images[f.uuid]){let _;if(Array.isArray(f)){_=[];for(let v=0,E=f.length;v<E;v++)_.push(wm(f[v].isDataTexture?f[v].image:f[v]))}else _=wm(f);n.images[f.uuid]={uuid:f.uuid,url:_}}c.image=f.uuid}return"{}"!==JSON.stringify(this.userData)&&(c.userData=this.userData),i||(n.textures[this.uuid]=c),c}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(n){if(300!==this.mapping)return n;if(n.applyMatrix3(this.matrix),n.x<0||n.x>1)switch(this.wrapS){case mn:n.x=n.x-Math.floor(n.x);break;case Hi:n.x=n.x<0?0:1;break;case ta:n.x=1===Math.abs(Math.floor(n.x)%2)?Math.ceil(n.x)-n.x:n.x-Math.floor(n.x)}if(n.y<0||n.y>1)switch(this.wrapT){case mn:n.y=n.y-Math.floor(n.y);break;case Hi:n.y=n.y<0?0:1;break;case ta:n.y=1===Math.abs(Math.floor(n.y)%2)?Math.ceil(n.y)-n.y:n.y-Math.floor(n.y)}return this.flipY&&(n.y=1-n.y),n}set needsUpdate(n){!0===n&&this.version++}}function wm(p){return"undefined"!=typeof HTMLImageElement&&p instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&p instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&p instanceof ImageBitmap?Xa.getDataURL(p):p.data?{data:Array.prototype.slice.call(p.data),width:p.width,height:p.height,type:p.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}li.DEFAULT_IMAGE=void 0,li.DEFAULT_MAPPING=300,li.prototype.isTexture=!0;class ei{constructor(n=0,i=0,c=0,f=1){this.x=n,this.y=i,this.z=c,this.w=f}get width(){return this.z}set width(n){this.z=n}get height(){return this.w}set height(n){this.w=n}set(n,i,c,f){return this.x=n,this.y=i,this.z=c,this.w=f,this}setScalar(n){return this.x=n,this.y=n,this.z=n,this.w=n,this}setX(n){return this.x=n,this}setY(n){return this.y=n,this}setZ(n){return this.z=n,this}setW(n){return this.w=n,this}setComponent(n,i){switch(n){case 0:this.x=i;break;case 1:this.y=i;break;case 2:this.z=i;break;case 3:this.w=i;break;default:throw new Error("index is out of range: "+n)}return this}getComponent(n){switch(n){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+n)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(n){return this.x=n.x,this.y=n.y,this.z=n.z,this.w=void 0!==n.w?n.w:1,this}add(n,i){return void 0!==i?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(n,i)):(this.x+=n.x,this.y+=n.y,this.z+=n.z,this.w+=n.w,this)}addScalar(n){return this.x+=n,this.y+=n,this.z+=n,this.w+=n,this}addVectors(n,i){return this.x=n.x+i.x,this.y=n.y+i.y,this.z=n.z+i.z,this.w=n.w+i.w,this}addScaledVector(n,i){return this.x+=n.x*i,this.y+=n.y*i,this.z+=n.z*i,this.w+=n.w*i,this}sub(n,i){return void 0!==i?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(n,i)):(this.x-=n.x,this.y-=n.y,this.z-=n.z,this.w-=n.w,this)}subScalar(n){return this.x-=n,this.y-=n,this.z-=n,this.w-=n,this}subVectors(n,i){return this.x=n.x-i.x,this.y=n.y-i.y,this.z=n.z-i.z,this.w=n.w-i.w,this}multiply(n){return this.x*=n.x,this.y*=n.y,this.z*=n.z,this.w*=n.w,this}multiplyScalar(n){return this.x*=n,this.y*=n,this.z*=n,this.w*=n,this}applyMatrix4(n){const i=this.x,c=this.y,f=this.z,_=this.w,v=n.elements;return this.x=v[0]*i+v[4]*c+v[8]*f+v[12]*_,this.y=v[1]*i+v[5]*c+v[9]*f+v[13]*_,this.z=v[2]*i+v[6]*c+v[10]*f+v[14]*_,this.w=v[3]*i+v[7]*c+v[11]*f+v[15]*_,this}divideScalar(n){return this.multiplyScalar(1/n)}setAxisAngleFromQuaternion(n){this.w=2*Math.acos(n.w);const i=Math.sqrt(1-n.w*n.w);return i<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=n.x/i,this.y=n.y/i,this.z=n.z/i),this}setAxisAngleFromRotationMatrix(n){let i,c,f,_;const w=n.elements,S=w[0],R=w[4],D=w[8],I=w[1],O=w[5],B=w[9],V=w[2],$=w[6],U=w[10];if(Math.abs(R-I)<.01&&Math.abs(D-V)<.01&&Math.abs(B-$)<.01){if(Math.abs(R+I)<.1&&Math.abs(D+V)<.1&&Math.abs(B+$)<.1&&Math.abs(S+O+U-3)<.1)return this.set(1,0,0,0),this;i=Math.PI;const Y=(S+1)/2,z=(O+1)/2,Q=(U+1)/2,re=(R+I)/4,ae=(D+V)/4,ve=(B+$)/4;return Y>z&&Y>Q?Y<.01?(c=0,f=.707106781,_=.707106781):(c=Math.sqrt(Y),f=re/c,_=ae/c):z>Q?z<.01?(c=.707106781,f=0,_=.707106781):(f=Math.sqrt(z),c=re/f,_=ve/f):Q<.01?(c=.707106781,f=.707106781,_=0):(_=Math.sqrt(Q),c=ae/_,f=ve/_),this.set(c,f,_,i),this}let L=Math.sqrt(($-B)*($-B)+(D-V)*(D-V)+(I-R)*(I-R));return Math.abs(L)<.001&&(L=1),this.x=($-B)/L,this.y=(D-V)/L,this.z=(I-R)/L,this.w=Math.acos((S+O+U-1)/2),this}min(n){return this.x=Math.min(this.x,n.x),this.y=Math.min(this.y,n.y),this.z=Math.min(this.z,n.z),this.w=Math.min(this.w,n.w),this}max(n){return this.x=Math.max(this.x,n.x),this.y=Math.max(this.y,n.y),this.z=Math.max(this.z,n.z),this.w=Math.max(this.w,n.w),this}clamp(n,i){return this.x=Math.max(n.x,Math.min(i.x,this.x)),this.y=Math.max(n.y,Math.min(i.y,this.y)),this.z=Math.max(n.z,Math.min(i.z,this.z)),this.w=Math.max(n.w,Math.min(i.w,this.w)),this}clampScalar(n,i){return this.x=Math.max(n,Math.min(i,this.x)),this.y=Math.max(n,Math.min(i,this.y)),this.z=Math.max(n,Math.min(i,this.z)),this.w=Math.max(n,Math.min(i,this.w)),this}clampLength(n,i){const c=this.length();return this.divideScalar(c||1).multiplyScalar(Math.max(n,Math.min(i,c)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(n){return this.x*n.x+this.y*n.y+this.z*n.z+this.w*n.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(n){return this.normalize().multiplyScalar(n)}lerp(n,i){return this.x+=(n.x-this.x)*i,this.y+=(n.y-this.y)*i,this.z+=(n.z-this.z)*i,this.w+=(n.w-this.w)*i,this}lerpVectors(n,i,c){return this.x=n.x+(i.x-n.x)*c,this.y=n.y+(i.y-n.y)*c,this.z=n.z+(i.z-n.z)*c,this.w=n.w+(i.w-n.w)*c,this}equals(n){return n.x===this.x&&n.y===this.y&&n.z===this.z&&n.w===this.w}fromArray(n,i=0){return this.x=n[i],this.y=n[i+1],this.z=n[i+2],this.w=n[i+3],this}toArray(n=[],i=0){return n[i]=this.x,n[i+1]=this.y,n[i+2]=this.z,n[i+3]=this.w,n}fromBufferAttribute(n,i,c){return void 0!==c&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=n.getX(i),this.y=n.getY(i),this.z=n.getZ(i),this.w=n.getW(i),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}ei.prototype.isVector4=!0;class Is extends ja{constructor(n,i,c={}){super(),this.width=n,this.height=i,this.depth=1,this.scissor=new ei(0,0,n,i),this.scissorTest=!1,this.viewport=new ei(0,0,n,i),this.texture=new li(void 0,c.mapping,c.wrapS,c.wrapT,c.magFilter,c.minFilter,c.format,c.type,c.anisotropy,c.encoding),this.texture.isRenderTargetTexture=!0,this.texture.image={width:n,height:i,depth:1},this.texture.generateMipmaps=void 0!==c.generateMipmaps&&c.generateMipmaps,this.texture.internalFormat=void 0!==c.internalFormat?c.internalFormat:null,this.texture.minFilter=void 0!==c.minFilter?c.minFilter:ri,this.depthBuffer=void 0===c.depthBuffer||c.depthBuffer,this.stencilBuffer=void 0!==c.stencilBuffer&&c.stencilBuffer,this.depthTexture=void 0!==c.depthTexture?c.depthTexture:null}setTexture(n){n.image={width:this.width,height:this.height,depth:this.depth},this.texture=n}setSize(n,i,c=1){(this.width!==n||this.height!==i||this.depth!==c)&&(this.width=n,this.height=i,this.depth=c,this.texture.image.width=n,this.texture.image.height=i,this.texture.image.depth=c,this.dispose()),this.viewport.set(0,0,n,i),this.scissor.set(0,0,n,i)}clone(){return(new this.constructor).copy(this)}copy(n){return this.width=n.width,this.height=n.height,this.depth=n.depth,this.viewport.copy(n.viewport),this.texture=n.texture.clone(),this.texture.image=Object.assign({},n.texture.image),this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.depthTexture=n.depthTexture,this}dispose(){this.dispatchEvent({type:"dispose"})}}Is.prototype.isWebGLRenderTarget=!0;class x_ extends Is{constructor(n,i,c){super(n,i);const f=this.texture;this.texture=[];for(let _=0;_<c;_++)this.texture[_]=f.clone()}setSize(n,i,c=1){if(this.width!==n||this.height!==i||this.depth!==c){this.width=n,this.height=i,this.depth=c;for(let f=0,_=this.texture.length;f<_;f++)this.texture[f].image.width=n,this.texture[f].image.height=i,this.texture[f].image.depth=c;this.dispose()}return this.viewport.set(0,0,n,i),this.scissor.set(0,0,n,i),this}copy(n){this.dispose(),this.width=n.width,this.height=n.height,this.depth=n.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.depthTexture=n.depthTexture,this.texture.length=0;for(let i=0,c=n.texture.length;i<c;i++)this.texture[i]=n.texture[i].clone();return this}}x_.prototype.isWebGLMultipleRenderTargets=!0;class Bu extends Is{constructor(n,i,c={}){super(n,i,c),this.samples=4,this.ignoreDepthForMultisampleCopy=void 0===c.ignoreDepth||c.ignoreDepth,this.useRenderToTexture=void 0!==c.useRenderToTexture&&c.useRenderToTexture,this.useRenderbuffer=!1===this.useRenderToTexture}copy(n){return super.copy.call(this,n),this.samples=n.samples,this.useRenderToTexture=n.useRenderToTexture,this.useRenderbuffer=n.useRenderbuffer,this}}Bu.prototype.isWebGLMultisampleRenderTarget=!0;class fr{constructor(n=0,i=0,c=0,f=1){this._x=n,this._y=i,this._z=c,this._w=f}static slerp(n,i,c,f){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),c.slerpQuaternions(n,i,f)}static slerpFlat(n,i,c,f,_,v,E){let w=c[f+0],S=c[f+1],R=c[f+2],D=c[f+3];const I=_[v+0],O=_[v+1],B=_[v+2],V=_[v+3];if(0===E)return n[i+0]=w,n[i+1]=S,n[i+2]=R,void(n[i+3]=D);if(1===E)return n[i+0]=I,n[i+1]=O,n[i+2]=B,void(n[i+3]=V);if(D!==V||w!==I||S!==O||R!==B){let $=1-E;const U=w*I+S*O+R*B+D*V,L=U>=0?1:-1,Y=1-U*U;if(Y>Number.EPSILON){const Q=Math.sqrt(Y),re=Math.atan2(Q,U*L);$=Math.sin($*re)/Q,E=Math.sin(E*re)/Q}const z=E*L;if(w=w*$+I*z,S=S*$+O*z,R=R*$+B*z,D=D*$+V*z,$===1-E){const Q=1/Math.sqrt(w*w+S*S+R*R+D*D);w*=Q,S*=Q,R*=Q,D*=Q}}n[i]=w,n[i+1]=S,n[i+2]=R,n[i+3]=D}static multiplyQuaternionsFlat(n,i,c,f,_,v){const E=c[f],w=c[f+1],S=c[f+2],R=c[f+3],D=_[v],I=_[v+1],O=_[v+2],B=_[v+3];return n[i]=E*B+R*D+w*O-S*I,n[i+1]=w*B+R*I+S*D-E*O,n[i+2]=S*B+R*O+E*I-w*D,n[i+3]=R*B-E*D-w*I-S*O,n}get x(){return this._x}set x(n){this._x=n,this._onChangeCallback()}get y(){return this._y}set y(n){this._y=n,this._onChangeCallback()}get z(){return this._z}set z(n){this._z=n,this._onChangeCallback()}get w(){return this._w}set w(n){this._w=n,this._onChangeCallback()}set(n,i,c,f){return this._x=n,this._y=i,this._z=c,this._w=f,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(n){return this._x=n.x,this._y=n.y,this._z=n.z,this._w=n.w,this._onChangeCallback(),this}setFromEuler(n,i){if(!n||!n.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const c=n._x,f=n._y,_=n._z,v=n._order,E=Math.cos,w=Math.sin,S=E(c/2),R=E(f/2),D=E(_/2),I=w(c/2),O=w(f/2),B=w(_/2);switch(v){case"XYZ":this._x=I*R*D+S*O*B,this._y=S*O*D-I*R*B,this._z=S*R*B+I*O*D,this._w=S*R*D-I*O*B;break;case"YXZ":this._x=I*R*D+S*O*B,this._y=S*O*D-I*R*B,this._z=S*R*B-I*O*D,this._w=S*R*D+I*O*B;break;case"ZXY":this._x=I*R*D-S*O*B,this._y=S*O*D+I*R*B,this._z=S*R*B+I*O*D,this._w=S*R*D-I*O*B;break;case"ZYX":this._x=I*R*D-S*O*B,this._y=S*O*D+I*R*B,this._z=S*R*B-I*O*D,this._w=S*R*D+I*O*B;break;case"YZX":this._x=I*R*D+S*O*B,this._y=S*O*D+I*R*B,this._z=S*R*B-I*O*D,this._w=S*R*D-I*O*B;break;case"XZY":this._x=I*R*D-S*O*B,this._y=S*O*D-I*R*B,this._z=S*R*B+I*O*D,this._w=S*R*D+I*O*B;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+v)}return!1!==i&&this._onChangeCallback(),this}setFromAxisAngle(n,i){const c=i/2,f=Math.sin(c);return this._x=n.x*f,this._y=n.y*f,this._z=n.z*f,this._w=Math.cos(c),this._onChangeCallback(),this}setFromRotationMatrix(n){const i=n.elements,c=i[0],f=i[4],_=i[8],v=i[1],E=i[5],w=i[9],S=i[2],R=i[6],D=i[10],I=c+E+D;if(I>0){const O=.5/Math.sqrt(I+1);this._w=.25/O,this._x=(R-w)*O,this._y=(_-S)*O,this._z=(v-f)*O}else if(c>E&&c>D){const O=2*Math.sqrt(1+c-E-D);this._w=(R-w)/O,this._x=.25*O,this._y=(f+v)/O,this._z=(_+S)/O}else if(E>D){const O=2*Math.sqrt(1+E-c-D);this._w=(_-S)/O,this._x=(f+v)/O,this._y=.25*O,this._z=(w+R)/O}else{const O=2*Math.sqrt(1+D-c-E);this._w=(v-f)/O,this._x=(_+S)/O,this._y=(w+R)/O,this._z=.25*O}return this._onChangeCallback(),this}setFromUnitVectors(n,i){let c=n.dot(i)+1;return c<Number.EPSILON?(c=0,Math.abs(n.x)>Math.abs(n.z)?(this._x=-n.y,this._y=n.x,this._z=0,this._w=c):(this._x=0,this._y=-n.z,this._z=n.y,this._w=c)):(this._x=n.y*i.z-n.z*i.y,this._y=n.z*i.x-n.x*i.z,this._z=n.x*i.y-n.y*i.x,this._w=c),this.normalize()}angleTo(n){return 2*Math.acos(Math.abs(si(this.dot(n),-1,1)))}rotateTowards(n,i){const c=this.angleTo(n);if(0===c)return this;const f=Math.min(1,i/c);return this.slerp(n,f),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(n){return this._x*n._x+this._y*n._y+this._z*n._z+this._w*n._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let n=this.length();return 0===n?(this._x=0,this._y=0,this._z=0,this._w=1):(n=1/n,this._x=this._x*n,this._y=this._y*n,this._z=this._z*n,this._w=this._w*n),this._onChangeCallback(),this}multiply(n,i){return void 0!==i?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(n,i)):this.multiplyQuaternions(this,n)}premultiply(n){return this.multiplyQuaternions(n,this)}multiplyQuaternions(n,i){const c=n._x,f=n._y,_=n._z,v=n._w,E=i._x,w=i._y,S=i._z,R=i._w;return this._x=c*R+v*E+f*S-_*w,this._y=f*R+v*w+_*E-c*S,this._z=_*R+v*S+c*w-f*E,this._w=v*R-c*E-f*w-_*S,this._onChangeCallback(),this}slerp(n,i){if(0===i)return this;if(1===i)return this.copy(n);const c=this._x,f=this._y,_=this._z,v=this._w;let E=v*n._w+c*n._x+f*n._y+_*n._z;if(E<0?(this._w=-n._w,this._x=-n._x,this._y=-n._y,this._z=-n._z,E=-E):this.copy(n),E>=1)return this._w=v,this._x=c,this._y=f,this._z=_,this;const w=1-E*E;if(w<=Number.EPSILON){const O=1-i;return this._w=O*v+i*this._w,this._x=O*c+i*this._x,this._y=O*f+i*this._y,this._z=O*_+i*this._z,this.normalize(),this._onChangeCallback(),this}const S=Math.sqrt(w),R=Math.atan2(S,E),D=Math.sin((1-i)*R)/S,I=Math.sin(i*R)/S;return this._w=v*D+this._w*I,this._x=c*D+this._x*I,this._y=f*D+this._y*I,this._z=_*D+this._z*I,this._onChangeCallback(),this}slerpQuaternions(n,i,c){return this.copy(n).slerp(i,c)}random(){const n=Math.random(),i=Math.sqrt(1-n),c=Math.sqrt(n),f=2*Math.PI*Math.random(),_=2*Math.PI*Math.random();return this.set(i*Math.cos(f),c*Math.sin(_),c*Math.cos(_),i*Math.sin(f))}equals(n){return n._x===this._x&&n._y===this._y&&n._z===this._z&&n._w===this._w}fromArray(n,i=0){return this._x=n[i],this._y=n[i+1],this._z=n[i+2],this._w=n[i+3],this._onChangeCallback(),this}toArray(n=[],i=0){return n[i]=this._x,n[i+1]=this._y,n[i+2]=this._z,n[i+3]=this._w,n}fromBufferAttribute(n,i){return this._x=n.getX(i),this._y=n.getY(i),this._z=n.getZ(i),this._w=n.getW(i),this}_onChange(n){return this._onChangeCallback=n,this}_onChangeCallback(){}}fr.prototype.isQuaternion=!0;class Z{constructor(n=0,i=0,c=0){this.x=n,this.y=i,this.z=c}set(n,i,c){return void 0===c&&(c=this.z),this.x=n,this.y=i,this.z=c,this}setScalar(n){return this.x=n,this.y=n,this.z=n,this}setX(n){return this.x=n,this}setY(n){return this.y=n,this}setZ(n){return this.z=n,this}setComponent(n,i){switch(n){case 0:this.x=i;break;case 1:this.y=i;break;case 2:this.z=i;break;default:throw new Error("index is out of range: "+n)}return this}getComponent(n){switch(n){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+n)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(n){return this.x=n.x,this.y=n.y,this.z=n.z,this}add(n,i){return void 0!==i?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(n,i)):(this.x+=n.x,this.y+=n.y,this.z+=n.z,this)}addScalar(n){return this.x+=n,this.y+=n,this.z+=n,this}addVectors(n,i){return this.x=n.x+i.x,this.y=n.y+i.y,this.z=n.z+i.z,this}addScaledVector(n,i){return this.x+=n.x*i,this.y+=n.y*i,this.z+=n.z*i,this}sub(n,i){return void 0!==i?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(n,i)):(this.x-=n.x,this.y-=n.y,this.z-=n.z,this)}subScalar(n){return this.x-=n,this.y-=n,this.z-=n,this}subVectors(n,i){return this.x=n.x-i.x,this.y=n.y-i.y,this.z=n.z-i.z,this}multiply(n,i){return void 0!==i?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(n,i)):(this.x*=n.x,this.y*=n.y,this.z*=n.z,this)}multiplyScalar(n){return this.x*=n,this.y*=n,this.z*=n,this}multiplyVectors(n,i){return this.x=n.x*i.x,this.y=n.y*i.y,this.z=n.z*i.z,this}applyEuler(n){return n&&n.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(Dv.setFromEuler(n))}applyAxisAngle(n,i){return this.applyQuaternion(Dv.setFromAxisAngle(n,i))}applyMatrix3(n){const i=this.x,c=this.y,f=this.z,_=n.elements;return this.x=_[0]*i+_[3]*c+_[6]*f,this.y=_[1]*i+_[4]*c+_[7]*f,this.z=_[2]*i+_[5]*c+_[8]*f,this}applyNormalMatrix(n){return this.applyMatrix3(n).normalize()}applyMatrix4(n){const i=this.x,c=this.y,f=this.z,_=n.elements,v=1/(_[3]*i+_[7]*c+_[11]*f+_[15]);return this.x=(_[0]*i+_[4]*c+_[8]*f+_[12])*v,this.y=(_[1]*i+_[5]*c+_[9]*f+_[13])*v,this.z=(_[2]*i+_[6]*c+_[10]*f+_[14])*v,this}applyQuaternion(n){const i=this.x,c=this.y,f=this.z,_=n.x,v=n.y,E=n.z,w=n.w,S=w*i+v*f-E*c,R=w*c+E*i-_*f,D=w*f+_*c-v*i,I=-_*i-v*c-E*f;return this.x=S*w+I*-_+R*-E-D*-v,this.y=R*w+I*-v+D*-_-S*-E,this.z=D*w+I*-E+S*-v-R*-_,this}project(n){return this.applyMatrix4(n.matrixWorldInverse).applyMatrix4(n.projectionMatrix)}unproject(n){return this.applyMatrix4(n.projectionMatrixInverse).applyMatrix4(n.matrixWorld)}transformDirection(n){const i=this.x,c=this.y,f=this.z,_=n.elements;return this.x=_[0]*i+_[4]*c+_[8]*f,this.y=_[1]*i+_[5]*c+_[9]*f,this.z=_[2]*i+_[6]*c+_[10]*f,this.normalize()}divide(n){return this.x/=n.x,this.y/=n.y,this.z/=n.z,this}divideScalar(n){return this.multiplyScalar(1/n)}min(n){return this.x=Math.min(this.x,n.x),this.y=Math.min(this.y,n.y),this.z=Math.min(this.z,n.z),this}max(n){return this.x=Math.max(this.x,n.x),this.y=Math.max(this.y,n.y),this.z=Math.max(this.z,n.z),this}clamp(n,i){return this.x=Math.max(n.x,Math.min(i.x,this.x)),this.y=Math.max(n.y,Math.min(i.y,this.y)),this.z=Math.max(n.z,Math.min(i.z,this.z)),this}clampScalar(n,i){return this.x=Math.max(n,Math.min(i,this.x)),this.y=Math.max(n,Math.min(i,this.y)),this.z=Math.max(n,Math.min(i,this.z)),this}clampLength(n,i){const c=this.length();return this.divideScalar(c||1).multiplyScalar(Math.max(n,Math.min(i,c)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(n){return this.x*n.x+this.y*n.y+this.z*n.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(n){return this.normalize().multiplyScalar(n)}lerp(n,i){return this.x+=(n.x-this.x)*i,this.y+=(n.y-this.y)*i,this.z+=(n.z-this.z)*i,this}lerpVectors(n,i,c){return this.x=n.x+(i.x-n.x)*c,this.y=n.y+(i.y-n.y)*c,this.z=n.z+(i.z-n.z)*c,this}cross(n,i){return void 0!==i?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(n,i)):this.crossVectors(this,n)}crossVectors(n,i){const c=n.x,f=n.y,_=n.z,v=i.x,E=i.y,w=i.z;return this.x=f*w-_*E,this.y=_*v-c*w,this.z=c*E-f*v,this}projectOnVector(n){const i=n.lengthSq();if(0===i)return this.set(0,0,0);const c=n.dot(this)/i;return this.copy(n).multiplyScalar(c)}projectOnPlane(n){return uh.copy(this).projectOnVector(n),this.sub(uh)}reflect(n){return this.sub(uh.copy(n).multiplyScalar(2*this.dot(n)))}angleTo(n){const i=Math.sqrt(this.lengthSq()*n.lengthSq());if(0===i)return Math.PI/2;const c=this.dot(n)/i;return Math.acos(si(c,-1,1))}distanceTo(n){return Math.sqrt(this.distanceToSquared(n))}distanceToSquared(n){const i=this.x-n.x,c=this.y-n.y,f=this.z-n.z;return i*i+c*c+f*f}manhattanDistanceTo(n){return Math.abs(this.x-n.x)+Math.abs(this.y-n.y)+Math.abs(this.z-n.z)}setFromSpherical(n){return this.setFromSphericalCoords(n.radius,n.phi,n.theta)}setFromSphericalCoords(n,i,c){const f=Math.sin(i)*n;return this.x=f*Math.sin(c),this.y=Math.cos(i)*n,this.z=f*Math.cos(c),this}setFromCylindrical(n){return this.setFromCylindricalCoords(n.radius,n.theta,n.y)}setFromCylindricalCoords(n,i,c){return this.x=n*Math.sin(i),this.y=c,this.z=n*Math.cos(i),this}setFromMatrixPosition(n){const i=n.elements;return this.x=i[12],this.y=i[13],this.z=i[14],this}setFromMatrixScale(n){const i=this.setFromMatrixColumn(n,0).length(),c=this.setFromMatrixColumn(n,1).length(),f=this.setFromMatrixColumn(n,2).length();return this.x=i,this.y=c,this.z=f,this}setFromMatrixColumn(n,i){return this.fromArray(n.elements,4*i)}setFromMatrix3Column(n,i){return this.fromArray(n.elements,3*i)}equals(n){return n.x===this.x&&n.y===this.y&&n.z===this.z}fromArray(n,i=0){return this.x=n[i],this.y=n[i+1],this.z=n[i+2],this}toArray(n=[],i=0){return n[i]=this.x,n[i+1]=this.y,n[i+2]=this.z,n}fromBufferAttribute(n,i,c){return void 0!==c&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=n.getX(i),this.y=n.getY(i),this.z=n.getZ(i),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const n=2*(Math.random()-.5),i=Math.random()*Math.PI*2,c=Math.sqrt(1-n**2);return this.x=c*Math.cos(i),this.y=c*Math.sin(i),this.z=n,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}Z.prototype.isVector3=!0;const uh=new Z,Dv=new fr;class Os{constructor(n=new Z(1/0,1/0,1/0),i=new Z(-1/0,-1/0,-1/0)){this.min=n,this.max=i}set(n,i){return this.min.copy(n),this.max.copy(i),this}setFromArray(n){let i=1/0,c=1/0,f=1/0,_=-1/0,v=-1/0,E=-1/0;for(let w=0,S=n.length;w<S;w+=3){const R=n[w],D=n[w+1],I=n[w+2];R<i&&(i=R),D<c&&(c=D),I<f&&(f=I),R>_&&(_=R),D>v&&(v=D),I>E&&(E=I)}return this.min.set(i,c,f),this.max.set(_,v,E),this}setFromBufferAttribute(n){let i=1/0,c=1/0,f=1/0,_=-1/0,v=-1/0,E=-1/0;for(let w=0,S=n.count;w<S;w++){const R=n.getX(w),D=n.getY(w),I=n.getZ(w);R<i&&(i=R),D<c&&(c=D),I<f&&(f=I),R>_&&(_=R),D>v&&(v=D),I>E&&(E=I)}return this.min.set(i,c,f),this.max.set(_,v,E),this}setFromPoints(n){this.makeEmpty();for(let i=0,c=n.length;i<c;i++)this.expandByPoint(n[i]);return this}setFromCenterAndSize(n,i){const c=Pl.copy(i).multiplyScalar(.5);return this.min.copy(n).sub(c),this.max.copy(n).add(c),this}setFromObject(n,i=!1){return this.makeEmpty(),this.expandByObject(n,i)}clone(){return(new this.constructor).copy(this)}copy(n){return this.min.copy(n.min),this.max.copy(n.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(n){return this.isEmpty()?n.set(0,0,0):n.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(n){return this.isEmpty()?n.set(0,0,0):n.subVectors(this.max,this.min)}expandByPoint(n){return this.min.min(n),this.max.max(n),this}expandByVector(n){return this.min.sub(n),this.max.add(n),this}expandByScalar(n){return this.min.addScalar(-n),this.max.addScalar(n),this}expandByObject(n,i=!1){n.updateWorldMatrix(!1,!1);const c=n.geometry;if(void 0!==c)if(i&&null!=c.attributes&&void 0!==c.attributes.position){const _=c.attributes.position;for(let v=0,E=_.count;v<E;v++)Pl.fromBufferAttribute(_,v).applyMatrix4(n.matrixWorld),this.expandByPoint(Pl)}else null===c.boundingBox&&c.computeBoundingBox(),Nf.copy(c.boundingBox),Nf.applyMatrix4(n.matrixWorld),this.union(Nf);const f=n.children;for(let _=0,v=f.length;_<v;_++)this.expandByObject(f[_],i);return this}containsPoint(n){return!(n.x<this.min.x||n.x>this.max.x||n.y<this.min.y||n.y>this.max.y||n.z<this.min.z||n.z>this.max.z)}containsBox(n){return this.min.x<=n.min.x&&n.max.x<=this.max.x&&this.min.y<=n.min.y&&n.max.y<=this.max.y&&this.min.z<=n.min.z&&n.max.z<=this.max.z}getParameter(n,i){return i.set((n.x-this.min.x)/(this.max.x-this.min.x),(n.y-this.min.y)/(this.max.y-this.min.y),(n.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(n){return!(n.max.x<this.min.x||n.min.x>this.max.x||n.max.y<this.min.y||n.min.y>this.max.y||n.max.z<this.min.z||n.min.z>this.max.z)}intersectsSphere(n){return this.clampPoint(n.center,Pl),Pl.distanceToSquared(n.center)<=n.radius*n.radius}intersectsPlane(n){let i,c;return n.normal.x>0?(i=n.normal.x*this.min.x,c=n.normal.x*this.max.x):(i=n.normal.x*this.max.x,c=n.normal.x*this.min.x),n.normal.y>0?(i+=n.normal.y*this.min.y,c+=n.normal.y*this.max.y):(i+=n.normal.y*this.max.y,c+=n.normal.y*this.min.y),n.normal.z>0?(i+=n.normal.z*this.min.z,c+=n.normal.z*this.max.z):(i+=n.normal.z*this.max.z,c+=n.normal.z*this.min.z),i<=-n.constant&&c>=-n.constant}intersectsTriangle(n){if(this.isEmpty())return!1;this.getCenter(ys),Ei.subVectors(this.max,ys),Uu.subVectors(n.a,ys),ku.subVectors(n.b,ys),ha.subVectors(n.c,ys),os.subVectors(ku,Uu),Il.subVectors(ha,ku),Gi.subVectors(Uu,ha);let i=[0,-os.z,os.y,0,-Il.z,Il.y,0,-Gi.z,Gi.y,os.z,0,-os.x,Il.z,0,-Il.x,Gi.z,0,-Gi.x,-os.y,os.x,0,-Il.y,Il.x,0,-Gi.y,Gi.x,0];return!(!M_(i,Uu,ku,ha,Ei)||(i=[1,0,0,0,1,0,0,0,1],!M_(i,Uu,ku,ha,Ei)))&&(bm.crossVectors(os,Il),i=[bm.x,bm.y,bm.z],M_(i,Uu,ku,ha,Ei))}clampPoint(n,i){return i.copy(n).clamp(this.min,this.max)}distanceToPoint(n){return Pl.copy(n).clamp(this.min,this.max).sub(n).length()}getBoundingSphere(n){return this.getCenter(n.center),n.radius=.5*this.getSize(Pl).length(),n}intersect(n){return this.min.max(n.min),this.max.min(n.max),this.isEmpty()&&this.makeEmpty(),this}union(n){return this.min.min(n.min),this.max.max(n.max),this}applyMatrix4(n){return this.isEmpty()||(Qs[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(n),Qs[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(n),Qs[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(n),Qs[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(n),Qs[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(n),Qs[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(n),Qs[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(n),Qs[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(n),this.setFromPoints(Qs)),this}translate(n){return this.min.add(n),this.max.add(n),this}equals(n){return n.min.equals(this.min)&&n.max.equals(this.max)}}Os.prototype.isBox3=!0;const Qs=[new Z,new Z,new Z,new Z,new Z,new Z,new Z,new Z],Pl=new Z,Nf=new Os,Uu=new Z,ku=new Z,ha=new Z,os=new Z,Il=new Z,Gi=new Z,ys=new Z,Ei=new Z,bm=new Z,Vu=new Z;function M_(p,n,i,c,f){for(let _=0,v=p.length-3;_<=v;_+=3){Vu.fromArray(p,_);const E=f.x*Math.abs(Vu.x)+f.y*Math.abs(Vu.y)+f.z*Math.abs(Vu.z),w=n.dot(Vu),S=i.dot(Vu),R=c.dot(Vu);if(Math.max(-Math.max(w,S,R),Math.min(w,S,R))>E)return!1}return!0}const Rv=new Os,Pv=new Z,Bf=new Z,dh=new Z;class fa{constructor(n=new Z,i=-1){this.center=n,this.radius=i}set(n,i){return this.center.copy(n),this.radius=i,this}setFromPoints(n,i){const c=this.center;void 0!==i?c.copy(i):Rv.setFromPoints(n).getCenter(c);let f=0;for(let _=0,v=n.length;_<v;_++)f=Math.max(f,c.distanceToSquared(n[_]));return this.radius=Math.sqrt(f),this}copy(n){return this.center.copy(n.center),this.radius=n.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(n){return n.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(n){return n.distanceTo(this.center)-this.radius}intersectsSphere(n){const i=this.radius+n.radius;return n.center.distanceToSquared(this.center)<=i*i}intersectsBox(n){return n.intersectsSphere(this)}intersectsPlane(n){return Math.abs(n.distanceToPoint(this.center))<=this.radius}clampPoint(n,i){const c=this.center.distanceToSquared(n);return i.copy(n),c>this.radius*this.radius&&(i.sub(this.center).normalize(),i.multiplyScalar(this.radius).add(this.center)),i}getBoundingBox(n){return this.isEmpty()?(n.makeEmpty(),n):(n.set(this.center,this.center),n.expandByScalar(this.radius),n)}applyMatrix4(n){return this.center.applyMatrix4(n),this.radius=this.radius*n.getMaxScaleOnAxis(),this}translate(n){return this.center.add(n),this}expandByPoint(n){dh.subVectors(n,this.center);const i=dh.lengthSq();if(i>this.radius*this.radius){const c=Math.sqrt(i),f=.5*(c-this.radius);this.center.add(dh.multiplyScalar(f/c)),this.radius+=f}return this}union(n){return!0===this.center.equals(n.center)?Bf.set(0,0,1).multiplyScalar(n.radius):Bf.subVectors(n.center,this.center).normalize().multiplyScalar(n.radius),this.expandByPoint(Pv.copy(n.center).add(Bf)),this.expandByPoint(Pv.copy(n.center).sub(Bf)),this}equals(n){return n.center.equals(this.center)&&n.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Ao=new Z,hh=new Z,Uf=new Z,Mc=new Z,Ya=new Z,wc=new Z,w_=new Z;class bc{constructor(n=new Z,i=new Z(0,0,-1)){this.origin=n,this.direction=i}set(n,i){return this.origin.copy(n),this.direction.copy(i),this}copy(n){return this.origin.copy(n.origin),this.direction.copy(n.direction),this}at(n,i){return i.copy(this.direction).multiplyScalar(n).add(this.origin)}lookAt(n){return this.direction.copy(n).sub(this.origin).normalize(),this}recast(n){return this.origin.copy(this.at(n,Ao)),this}closestPointToPoint(n,i){i.subVectors(n,this.origin);const c=i.dot(this.direction);return c<0?i.copy(this.origin):i.copy(this.direction).multiplyScalar(c).add(this.origin)}distanceToPoint(n){return Math.sqrt(this.distanceSqToPoint(n))}distanceSqToPoint(n){const i=Ao.subVectors(n,this.origin).dot(this.direction);return i<0?this.origin.distanceToSquared(n):(Ao.copy(this.direction).multiplyScalar(i).add(this.origin),Ao.distanceToSquared(n))}distanceSqToSegment(n,i,c,f){hh.copy(n).add(i).multiplyScalar(.5),Uf.copy(i).sub(n).normalize(),Mc.copy(this.origin).sub(hh);const _=.5*n.distanceTo(i),v=-this.direction.dot(Uf),E=Mc.dot(this.direction),w=-Mc.dot(Uf),S=Mc.lengthSq(),R=Math.abs(1-v*v);let D,I,O,B;if(R>0)if(D=v*w-E,I=v*E-w,B=_*R,D>=0)if(I>=-B)if(I<=B){const V=1/R;D*=V,I*=V,O=D*(D+v*I+2*E)+I*(v*D+I+2*w)+S}else I=_,D=Math.max(0,-(v*I+E)),O=-D*D+I*(I+2*w)+S;else I=-_,D=Math.max(0,-(v*I+E)),O=-D*D+I*(I+2*w)+S;else I<=-B?(D=Math.max(0,-(-v*_+E)),I=D>0?-_:Math.min(Math.max(-_,-w),_),O=-D*D+I*(I+2*w)+S):I<=B?(D=0,I=Math.min(Math.max(-_,-w),_),O=I*(I+2*w)+S):(D=Math.max(0,-(v*_+E)),I=D>0?_:Math.min(Math.max(-_,-w),_),O=-D*D+I*(I+2*w)+S);else I=v>0?-_:_,D=Math.max(0,-(v*I+E)),O=-D*D+I*(I+2*w)+S;return c&&c.copy(this.direction).multiplyScalar(D).add(this.origin),f&&f.copy(Uf).multiplyScalar(I).add(hh),O}intersectSphere(n,i){Ao.subVectors(n.center,this.origin);const c=Ao.dot(this.direction),f=Ao.dot(Ao)-c*c,_=n.radius*n.radius;if(f>_)return null;const v=Math.sqrt(_-f),E=c-v,w=c+v;return E<0&&w<0?null:this.at(E<0?w:E,i)}intersectsSphere(n){return this.distanceSqToPoint(n.center)<=n.radius*n.radius}distanceToPlane(n){const i=n.normal.dot(this.direction);if(0===i)return 0===n.distanceToPoint(this.origin)?0:null;const c=-(this.origin.dot(n.normal)+n.constant)/i;return c>=0?c:null}intersectPlane(n,i){const c=this.distanceToPlane(n);return null===c?null:this.at(c,i)}intersectsPlane(n){const i=n.distanceToPoint(this.origin);return 0===i||n.normal.dot(this.direction)*i<0}intersectBox(n,i){let c,f,_,v,E,w;const S=1/this.direction.x,R=1/this.direction.y,D=1/this.direction.z,I=this.origin;return S>=0?(c=(n.min.x-I.x)*S,f=(n.max.x-I.x)*S):(c=(n.max.x-I.x)*S,f=(n.min.x-I.x)*S),R>=0?(_=(n.min.y-I.y)*R,v=(n.max.y-I.y)*R):(_=(n.max.y-I.y)*R,v=(n.min.y-I.y)*R),c>v||_>f||((_>c||c!=c)&&(c=_),(v<f||f!=f)&&(f=v),D>=0?(E=(n.min.z-I.z)*D,w=(n.max.z-I.z)*D):(E=(n.max.z-I.z)*D,w=(n.min.z-I.z)*D),c>w||E>f)||((E>c||c!=c)&&(c=E),(w<f||f!=f)&&(f=w),f<0)?null:this.at(c>=0?c:f,i)}intersectsBox(n){return null!==this.intersectBox(n,Ao)}intersectTriangle(n,i,c,f,_){Ya.subVectors(i,n),wc.subVectors(c,n),w_.crossVectors(Ya,wc);let E,v=this.direction.dot(w_);if(v>0){if(f)return null;E=1}else{if(!(v<0))return null;E=-1,v=-v}Mc.subVectors(this.origin,n);const w=E*this.direction.dot(wc.crossVectors(Mc,wc));if(w<0)return null;const S=E*this.direction.dot(Ya.cross(Mc));if(S<0||w+S>v)return null;const R=-E*Mc.dot(w_);return R<0?null:this.at(R/v,_)}applyMatrix4(n){return this.origin.applyMatrix4(n),this.direction.transformDirection(n),this}equals(n){return n.origin.equals(this.origin)&&n.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Wt{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(n,i,c,f,_,v,E,w,S,R,D,I,O,B,V,$){const U=this.elements;return U[0]=n,U[4]=i,U[8]=c,U[12]=f,U[1]=_,U[5]=v,U[9]=E,U[13]=w,U[2]=S,U[6]=R,U[10]=D,U[14]=I,U[3]=O,U[7]=B,U[11]=V,U[15]=$,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Wt).fromArray(this.elements)}copy(n){const i=this.elements,c=n.elements;return i[0]=c[0],i[1]=c[1],i[2]=c[2],i[3]=c[3],i[4]=c[4],i[5]=c[5],i[6]=c[6],i[7]=c[7],i[8]=c[8],i[9]=c[9],i[10]=c[10],i[11]=c[11],i[12]=c[12],i[13]=c[13],i[14]=c[14],i[15]=c[15],this}copyPosition(n){const i=this.elements,c=n.elements;return i[12]=c[12],i[13]=c[13],i[14]=c[14],this}setFromMatrix3(n){const i=n.elements;return this.set(i[0],i[3],i[6],0,i[1],i[4],i[7],0,i[2],i[5],i[8],0,0,0,0,1),this}extractBasis(n,i,c){return n.setFromMatrixColumn(this,0),i.setFromMatrixColumn(this,1),c.setFromMatrixColumn(this,2),this}makeBasis(n,i,c){return this.set(n.x,i.x,c.x,0,n.y,i.y,c.y,0,n.z,i.z,c.z,0,0,0,0,1),this}extractRotation(n){const i=this.elements,c=n.elements,f=1/Sc.setFromMatrixColumn(n,0).length(),_=1/Sc.setFromMatrixColumn(n,1).length(),v=1/Sc.setFromMatrixColumn(n,2).length();return i[0]=c[0]*f,i[1]=c[1]*f,i[2]=c[2]*f,i[3]=0,i[4]=c[4]*_,i[5]=c[5]*_,i[6]=c[6]*_,i[7]=0,i[8]=c[8]*v,i[9]=c[9]*v,i[10]=c[10]*v,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,this}makeRotationFromEuler(n){n&&n.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const i=this.elements,c=n.x,f=n.y,_=n.z,v=Math.cos(c),E=Math.sin(c),w=Math.cos(f),S=Math.sin(f),R=Math.cos(_),D=Math.sin(_);if("XYZ"===n.order){const I=v*R,O=v*D,B=E*R,V=E*D;i[0]=w*R,i[4]=-w*D,i[8]=S,i[1]=O+B*S,i[5]=I-V*S,i[9]=-E*w,i[2]=V-I*S,i[6]=B+O*S,i[10]=v*w}else if("YXZ"===n.order){const I=w*R,O=w*D,B=S*R,V=S*D;i[0]=I+V*E,i[4]=B*E-O,i[8]=v*S,i[1]=v*D,i[5]=v*R,i[9]=-E,i[2]=O*E-B,i[6]=V+I*E,i[10]=v*w}else if("ZXY"===n.order){const I=w*R,O=w*D,B=S*R,V=S*D;i[0]=I-V*E,i[4]=-v*D,i[8]=B+O*E,i[1]=O+B*E,i[5]=v*R,i[9]=V-I*E,i[2]=-v*S,i[6]=E,i[10]=v*w}else if("ZYX"===n.order){const I=v*R,O=v*D,B=E*R,V=E*D;i[0]=w*R,i[4]=B*S-O,i[8]=I*S+V,i[1]=w*D,i[5]=V*S+I,i[9]=O*S-B,i[2]=-S,i[6]=E*w,i[10]=v*w}else if("YZX"===n.order){const I=v*w,O=v*S,B=E*w,V=E*S;i[0]=w*R,i[4]=V-I*D,i[8]=B*D+O,i[1]=D,i[5]=v*R,i[9]=-E*R,i[2]=-S*R,i[6]=O*D+B,i[10]=I-V*D}else if("XZY"===n.order){const I=v*w,O=v*S,B=E*w,V=E*S;i[0]=w*R,i[4]=-D,i[8]=S*R,i[1]=I*D+V,i[5]=v*R,i[9]=O*D-B,i[2]=B*D-O,i[6]=E*R,i[10]=V*D+I}return i[3]=0,i[7]=0,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,this}makeRotationFromQuaternion(n){return this.compose(oE,n,b_)}lookAt(n,i,c){const f=this.elements;return Ls.subVectors(n,i),0===Ls.lengthSq()&&(Ls.z=1),Ls.normalize(),Hu.crossVectors(c,Ls),0===Hu.lengthSq()&&(1===Math.abs(c.z)?Ls.x+=1e-4:Ls.z+=1e-4,Ls.normalize(),Hu.crossVectors(c,Ls)),Hu.normalize(),Ol.crossVectors(Ls,Hu),f[0]=Hu.x,f[4]=Ol.x,f[8]=Ls.x,f[1]=Hu.y,f[5]=Ol.y,f[9]=Ls.y,f[2]=Hu.z,f[6]=Ol.z,f[10]=Ls.z,this}multiply(n,i){return void 0!==i?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(n,i)):this.multiplyMatrices(this,n)}premultiply(n){return this.multiplyMatrices(n,this)}multiplyMatrices(n,i){const c=n.elements,f=i.elements,_=this.elements,v=c[0],E=c[4],w=c[8],S=c[12],R=c[1],D=c[5],I=c[9],O=c[13],B=c[2],V=c[6],$=c[10],U=c[14],L=c[3],Y=c[7],z=c[11],Q=c[15],re=f[0],ae=f[4],ve=f[8],ze=f[12],Fe=f[1],X=f[5],de=f[9],Ce=f[13],Ie=f[2],Be=f[6],Pe=f[10],Xe=f[14],ct=f[3],jt=f[7],Ke=f[11],st=f[15];return _[0]=v*re+E*Fe+w*Ie+S*ct,_[4]=v*ae+E*X+w*Be+S*jt,_[8]=v*ve+E*de+w*Pe+S*Ke,_[12]=v*ze+E*Ce+w*Xe+S*st,_[1]=R*re+D*Fe+I*Ie+O*ct,_[5]=R*ae+D*X+I*Be+O*jt,_[9]=R*ve+D*de+I*Pe+O*Ke,_[13]=R*ze+D*Ce+I*Xe+O*st,_[2]=B*re+V*Fe+$*Ie+U*ct,_[6]=B*ae+V*X+$*Be+U*jt,_[10]=B*ve+V*de+$*Pe+U*Ke,_[14]=B*ze+V*Ce+$*Xe+U*st,_[3]=L*re+Y*Fe+z*Ie+Q*ct,_[7]=L*ae+Y*X+z*Be+Q*jt,_[11]=L*ve+Y*de+z*Pe+Q*Ke,_[15]=L*ze+Y*Ce+z*Xe+Q*st,this}multiplyScalar(n){const i=this.elements;return i[0]*=n,i[4]*=n,i[8]*=n,i[12]*=n,i[1]*=n,i[5]*=n,i[9]*=n,i[13]*=n,i[2]*=n,i[6]*=n,i[10]*=n,i[14]*=n,i[3]*=n,i[7]*=n,i[11]*=n,i[15]*=n,this}determinant(){const n=this.elements,i=n[0],c=n[4],f=n[8],_=n[12],v=n[1],E=n[5],w=n[9],S=n[13],R=n[2],D=n[6],I=n[10],O=n[14];return n[3]*(+_*w*D-f*S*D-_*E*I+c*S*I+f*E*O-c*w*O)+n[7]*(+i*w*O-i*S*I+_*v*I-f*v*O+f*S*R-_*w*R)+n[11]*(+i*S*D-i*E*O-_*v*D+c*v*O+_*E*R-c*S*R)+n[15]*(-f*E*R-i*w*D+i*E*I+f*v*D-c*v*I+c*w*R)}transpose(){const n=this.elements;let i;return i=n[1],n[1]=n[4],n[4]=i,i=n[2],n[2]=n[8],n[8]=i,i=n[6],n[6]=n[9],n[9]=i,i=n[3],n[3]=n[12],n[12]=i,i=n[7],n[7]=n[13],n[13]=i,i=n[11],n[11]=n[14],n[14]=i,this}setPosition(n,i,c){const f=this.elements;return n.isVector3?(f[12]=n.x,f[13]=n.y,f[14]=n.z):(f[12]=n,f[13]=i,f[14]=c),this}invert(){const n=this.elements,i=n[0],c=n[1],f=n[2],_=n[3],v=n[4],E=n[5],w=n[6],S=n[7],R=n[8],D=n[9],I=n[10],O=n[11],B=n[12],V=n[13],$=n[14],U=n[15],L=D*$*S-V*I*S+V*w*O-E*$*O-D*w*U+E*I*U,Y=B*I*S-R*$*S-B*w*O+v*$*O+R*w*U-v*I*U,z=R*V*S-B*D*S+B*E*O-v*V*O-R*E*U+v*D*U,Q=B*D*w-R*V*w-B*E*I+v*V*I+R*E*$-v*D*$,re=i*L+c*Y+f*z+_*Q;if(0===re)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const ae=1/re;return n[0]=L*ae,n[1]=(V*I*_-D*$*_-V*f*O+c*$*O+D*f*U-c*I*U)*ae,n[2]=(E*$*_-V*w*_+V*f*S-c*$*S-E*f*U+c*w*U)*ae,n[3]=(D*w*_-E*I*_-D*f*S+c*I*S+E*f*O-c*w*O)*ae,n[4]=Y*ae,n[5]=(R*$*_-B*I*_+B*f*O-i*$*O-R*f*U+i*I*U)*ae,n[6]=(B*w*_-v*$*_-B*f*S+i*$*S+v*f*U-i*w*U)*ae,n[7]=(v*I*_-R*w*_+R*f*S-i*I*S-v*f*O+i*w*O)*ae,n[8]=z*ae,n[9]=(B*D*_-R*V*_-B*c*O+i*V*O+R*c*U-i*D*U)*ae,n[10]=(v*V*_-B*E*_+B*c*S-i*V*S-v*c*U+i*E*U)*ae,n[11]=(R*E*_-v*D*_-R*c*S+i*D*S+v*c*O-i*E*O)*ae,n[12]=Q*ae,n[13]=(R*V*f-B*D*f+B*c*I-i*V*I-R*c*$+i*D*$)*ae,n[14]=(B*E*f-v*V*f-B*c*w+i*V*w+v*c*$-i*E*$)*ae,n[15]=(v*D*f-R*E*f+R*c*w-i*D*w-v*c*I+i*E*I)*ae,this}scale(n){const i=this.elements,c=n.x,f=n.y,_=n.z;return i[0]*=c,i[4]*=f,i[8]*=_,i[1]*=c,i[5]*=f,i[9]*=_,i[2]*=c,i[6]*=f,i[10]*=_,i[3]*=c,i[7]*=f,i[11]*=_,this}getMaxScaleOnAxis(){const n=this.elements;return Math.sqrt(Math.max(n[0]*n[0]+n[1]*n[1]+n[2]*n[2],n[4]*n[4]+n[5]*n[5]+n[6]*n[6],n[8]*n[8]+n[9]*n[9]+n[10]*n[10]))}makeTranslation(n,i,c){return this.set(1,0,0,n,0,1,0,i,0,0,1,c,0,0,0,1),this}makeRotationX(n){const i=Math.cos(n),c=Math.sin(n);return this.set(1,0,0,0,0,i,-c,0,0,c,i,0,0,0,0,1),this}makeRotationY(n){const i=Math.cos(n),c=Math.sin(n);return this.set(i,0,c,0,0,1,0,0,-c,0,i,0,0,0,0,1),this}makeRotationZ(n){const i=Math.cos(n),c=Math.sin(n);return this.set(i,-c,0,0,c,i,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(n,i){const c=Math.cos(i),f=Math.sin(i),_=1-c,v=n.x,E=n.y,w=n.z,S=_*v,R=_*E;return this.set(S*v+c,S*E-f*w,S*w+f*E,0,S*E+f*w,R*E+c,R*w-f*v,0,S*w-f*E,R*w+f*v,_*w*w+c,0,0,0,0,1),this}makeScale(n,i,c){return this.set(n,0,0,0,0,i,0,0,0,0,c,0,0,0,0,1),this}makeShear(n,i,c,f,_,v){return this.set(1,c,_,0,n,1,v,0,i,f,1,0,0,0,0,1),this}compose(n,i,c){const f=this.elements,_=i._x,v=i._y,E=i._z,w=i._w,S=_+_,R=v+v,D=E+E,I=_*S,O=_*R,B=_*D,V=v*R,$=v*D,U=E*D,L=w*S,Y=w*R,z=w*D,Q=c.x,re=c.y,ae=c.z;return f[0]=(1-(V+U))*Q,f[1]=(O+z)*Q,f[2]=(B-Y)*Q,f[3]=0,f[4]=(O-z)*re,f[5]=(1-(I+U))*re,f[6]=($+L)*re,f[7]=0,f[8]=(B+Y)*ae,f[9]=($-L)*ae,f[10]=(1-(I+V))*ae,f[11]=0,f[12]=n.x,f[13]=n.y,f[14]=n.z,f[15]=1,this}decompose(n,i,c){const f=this.elements;let _=Sc.set(f[0],f[1],f[2]).length();const v=Sc.set(f[4],f[5],f[6]).length(),E=Sc.set(f[8],f[9],f[10]).length();this.determinant()<0&&(_=-_),n.x=f[12],n.y=f[13],n.z=f[14],Do.copy(this);const S=1/_,R=1/v,D=1/E;return Do.elements[0]*=S,Do.elements[1]*=S,Do.elements[2]*=S,Do.elements[4]*=R,Do.elements[5]*=R,Do.elements[6]*=R,Do.elements[8]*=D,Do.elements[9]*=D,Do.elements[10]*=D,i.setFromRotationMatrix(Do),c.x=_,c.y=v,c.z=E,this}makePerspective(n,i,c,f,_,v){void 0===v&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const E=this.elements,S=2*_/(c-f),R=(i+n)/(i-n),D=(c+f)/(c-f),I=-(v+_)/(v-_),O=-2*v*_/(v-_);return E[0]=2*_/(i-n),E[4]=0,E[8]=R,E[12]=0,E[1]=0,E[5]=S,E[9]=D,E[13]=0,E[2]=0,E[6]=0,E[10]=I,E[14]=O,E[3]=0,E[7]=0,E[11]=-1,E[15]=0,this}makeOrthographic(n,i,c,f,_,v){const E=this.elements,w=1/(i-n),S=1/(c-f),R=1/(v-_),D=(i+n)*w,I=(c+f)*S,O=(v+_)*R;return E[0]=2*w,E[4]=0,E[8]=0,E[12]=-D,E[1]=0,E[5]=2*S,E[9]=0,E[13]=-I,E[2]=0,E[6]=0,E[10]=-2*R,E[14]=-O,E[3]=0,E[7]=0,E[11]=0,E[15]=1,this}equals(n){const i=this.elements,c=n.elements;for(let f=0;f<16;f++)if(i[f]!==c[f])return!1;return!0}fromArray(n,i=0){for(let c=0;c<16;c++)this.elements[c]=n[c+i];return this}toArray(n=[],i=0){const c=this.elements;return n[i]=c[0],n[i+1]=c[1],n[i+2]=c[2],n[i+3]=c[3],n[i+4]=c[4],n[i+5]=c[5],n[i+6]=c[6],n[i+7]=c[7],n[i+8]=c[8],n[i+9]=c[9],n[i+10]=c[10],n[i+11]=c[11],n[i+12]=c[12],n[i+13]=c[13],n[i+14]=c[14],n[i+15]=c[15],n}}Wt.prototype.isMatrix4=!0;const Sc=new Z,Do=new Wt,oE=new Z(0,0,0),b_=new Z(1,1,1),Hu=new Z,Ol=new Z,Ls=new Z,fh=new Wt,kf=new fr;class Cc{constructor(n=0,i=0,c=0,f=Cc.DefaultOrder){this._x=n,this._y=i,this._z=c,this._order=f}get x(){return this._x}set x(n){this._x=n,this._onChangeCallback()}get y(){return this._y}set y(n){this._y=n,this._onChangeCallback()}get z(){return this._z}set z(n){this._z=n,this._onChangeCallback()}get order(){return this._order}set order(n){this._order=n,this._onChangeCallback()}set(n,i,c,f=this._order){return this._x=n,this._y=i,this._z=c,this._order=f,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(n){return this._x=n._x,this._y=n._y,this._z=n._z,this._order=n._order,this._onChangeCallback(),this}setFromRotationMatrix(n,i=this._order,c=!0){const f=n.elements,_=f[0],v=f[4],E=f[8],w=f[1],S=f[5],R=f[9],D=f[2],I=f[6],O=f[10];switch(i){case"XYZ":this._y=Math.asin(si(E,-1,1)),Math.abs(E)<.9999999?(this._x=Math.atan2(-R,O),this._z=Math.atan2(-v,_)):(this._x=Math.atan2(I,S),this._z=0);break;case"YXZ":this._x=Math.asin(-si(R,-1,1)),Math.abs(R)<.9999999?(this._y=Math.atan2(E,O),this._z=Math.atan2(w,S)):(this._y=Math.atan2(-D,_),this._z=0);break;case"ZXY":this._x=Math.asin(si(I,-1,1)),Math.abs(I)<.9999999?(this._y=Math.atan2(-D,O),this._z=Math.atan2(-v,S)):(this._y=0,this._z=Math.atan2(w,_));break;case"ZYX":this._y=Math.asin(-si(D,-1,1)),Math.abs(D)<.9999999?(this._x=Math.atan2(I,O),this._z=Math.atan2(w,_)):(this._x=0,this._z=Math.atan2(-v,S));break;case"YZX":this._z=Math.asin(si(w,-1,1)),Math.abs(w)<.9999999?(this._x=Math.atan2(-R,S),this._y=Math.atan2(-D,_)):(this._x=0,this._y=Math.atan2(E,O));break;case"XZY":this._z=Math.asin(-si(v,-1,1)),Math.abs(v)<.9999999?(this._x=Math.atan2(I,S),this._y=Math.atan2(E,_)):(this._x=Math.atan2(-R,O),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+i)}return this._order=i,!0===c&&this._onChangeCallback(),this}setFromQuaternion(n,i,c){return fh.makeRotationFromQuaternion(n),this.setFromRotationMatrix(fh,i,c)}setFromVector3(n,i=this._order){return this.set(n.x,n.y,n.z,i)}reorder(n){return kf.setFromEuler(this),this.setFromQuaternion(kf,n)}equals(n){return n._x===this._x&&n._y===this._y&&n._z===this._z&&n._order===this._order}fromArray(n){return this._x=n[0],this._y=n[1],this._z=n[2],void 0!==n[3]&&(this._order=n[3]),this._onChangeCallback(),this}toArray(n=[],i=0){return n[i]=this._x,n[i+1]=this._y,n[i+2]=this._z,n[i+3]=this._order,n}toVector3(n){return n?n.set(this._x,this._y,this._z):new Z(this._x,this._y,this._z)}_onChange(n){return this._onChangeCallback=n,this}_onChangeCallback(){}}Cc.prototype.isEuler=!0,Cc.DefaultOrder="XYZ",Cc.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class Vf{constructor(){this.mask=1}set(n){this.mask=(1<<n|0)>>>0}enable(n){this.mask|=1<<n|0}enableAll(){this.mask=-1}toggle(n){this.mask^=1<<n|0}disable(n){this.mask&=~(1<<n|0)}disableAll(){this.mask=0}test(n){return 0!=(this.mask&n.mask)}isEnabled(n){return 0!=(this.mask&(1<<n|0))}}let ph=0;const Sm=new Z,pa=new fr,eo=new Wt,Tc=new Z,Cm=new Z,Iv=new Z,Ov=new fr,mh=new Z(1,0,0),Lv=new Z(0,1,0),gh=new Z(0,0,1),S_={type:"added"},Tm={type:"removed"};class Ln extends ja{constructor(){super(),Object.defineProperty(this,"id",{value:ph++}),this.uuid=kr(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Ln.DefaultUp.clone();const n=new Z,i=new Cc,c=new fr,f=new Z(1,1,1);i._onChange(function _(){c.setFromEuler(i,!1)}),c._onChange(function v(){i.setFromQuaternion(c,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:n},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:c},scale:{configurable:!0,enumerable:!0,value:f},modelViewMatrix:{value:new Wt},normalMatrix:{value:new hr}}),this.matrix=new Wt,this.matrixWorld=new Wt,this.matrixAutoUpdate=Ln.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Vf,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(n){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(n),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(n){return this.quaternion.premultiply(n),this}setRotationFromAxisAngle(n,i){this.quaternion.setFromAxisAngle(n,i)}setRotationFromEuler(n){this.quaternion.setFromEuler(n,!0)}setRotationFromMatrix(n){this.quaternion.setFromRotationMatrix(n)}setRotationFromQuaternion(n){this.quaternion.copy(n)}rotateOnAxis(n,i){return pa.setFromAxisAngle(n,i),this.quaternion.multiply(pa),this}rotateOnWorldAxis(n,i){return pa.setFromAxisAngle(n,i),this.quaternion.premultiply(pa),this}rotateX(n){return this.rotateOnAxis(mh,n)}rotateY(n){return this.rotateOnAxis(Lv,n)}rotateZ(n){return this.rotateOnAxis(gh,n)}translateOnAxis(n,i){return Sm.copy(n).applyQuaternion(this.quaternion),this.position.add(Sm.multiplyScalar(i)),this}translateX(n){return this.translateOnAxis(mh,n)}translateY(n){return this.translateOnAxis(Lv,n)}translateZ(n){return this.translateOnAxis(gh,n)}localToWorld(n){return n.applyMatrix4(this.matrixWorld)}worldToLocal(n){return n.applyMatrix4(eo.copy(this.matrixWorld).invert())}lookAt(n,i,c){n.isVector3?Tc.copy(n):Tc.set(n,i,c);const f=this.parent;this.updateWorldMatrix(!0,!1),Cm.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?eo.lookAt(Cm,Tc,this.up):eo.lookAt(Tc,Cm,this.up),this.quaternion.setFromRotationMatrix(eo),f&&(eo.extractRotation(f.matrixWorld),pa.setFromRotationMatrix(eo),this.quaternion.premultiply(pa.invert()))}add(n){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.add(arguments[i]);return this}return n===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",n),this):(n&&n.isObject3D?(null!==n.parent&&n.parent.remove(n),n.parent=this,this.children.push(n),n.dispatchEvent(S_)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",n),this)}remove(n){if(arguments.length>1){for(let c=0;c<arguments.length;c++)this.remove(arguments[c]);return this}const i=this.children.indexOf(n);return-1!==i&&(n.parent=null,this.children.splice(i,1),n.dispatchEvent(Tm)),this}removeFromParent(){const n=this.parent;return null!==n&&n.remove(this),this}clear(){for(let n=0;n<this.children.length;n++){const i=this.children[n];i.parent=null,i.dispatchEvent(Tm)}return this.children.length=0,this}attach(n){return this.updateWorldMatrix(!0,!1),eo.copy(this.matrixWorld).invert(),null!==n.parent&&(n.parent.updateWorldMatrix(!0,!1),eo.multiply(n.parent.matrixWorld)),n.applyMatrix4(eo),this.add(n),n.updateWorldMatrix(!1,!0),this}getObjectById(n){return this.getObjectByProperty("id",n)}getObjectByName(n){return this.getObjectByProperty("name",n)}getObjectByProperty(n,i){if(this[n]===i)return this;for(let c=0,f=this.children.length;c<f;c++){const v=this.children[c].getObjectByProperty(n,i);if(void 0!==v)return v}}getWorldPosition(n){return this.updateWorldMatrix(!0,!1),n.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(n){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Cm,n,Iv),n}getWorldScale(n){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Cm,Ov,n),n}getWorldDirection(n){this.updateWorldMatrix(!0,!1);const i=this.matrixWorld.elements;return n.set(i[8],i[9],i[10]).normalize()}raycast(){}traverse(n){n(this);const i=this.children;for(let c=0,f=i.length;c<f;c++)i[c].traverse(n)}traverseVisible(n){if(!1===this.visible)return;n(this);const i=this.children;for(let c=0,f=i.length;c<f;c++)i[c].traverseVisible(n)}traverseAncestors(n){const i=this.parent;null!==i&&(n(i),i.traverseAncestors(n))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(n){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||n)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,n=!0);const i=this.children;for(let c=0,f=i.length;c<f;c++)i[c].updateMatrixWorld(n)}updateWorldMatrix(n,i){const c=this.parent;if(!0===n&&null!==c&&c.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===i){const f=this.children;for(let _=0,v=f.length;_<v;_++)f[_].updateWorldMatrix(!1,!0)}}toJSON(n){const i=void 0===n||"string"==typeof n,c={};i&&(n={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},c.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const f={};function _(E,w){return void 0===E[w.uuid]&&(E[w.uuid]=w.toJSON(n)),w.uuid}if(f.uuid=this.uuid,f.type=this.type,""!==this.name&&(f.name=this.name),!0===this.castShadow&&(f.castShadow=!0),!0===this.receiveShadow&&(f.receiveShadow=!0),!1===this.visible&&(f.visible=!1),!1===this.frustumCulled&&(f.frustumCulled=!1),0!==this.renderOrder&&(f.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(f.userData=this.userData),f.layers=this.layers.mask,f.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(f.matrixAutoUpdate=!1),this.isInstancedMesh&&(f.type="InstancedMesh",f.count=this.count,f.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(f.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?f.background=this.background.toJSON():this.background.isTexture&&(f.background=this.background.toJSON(n).uuid)),this.environment&&this.environment.isTexture&&(f.environment=this.environment.toJSON(n).uuid);else if(this.isMesh||this.isLine||this.isPoints){f.geometry=_(n.geometries,this.geometry);const E=this.geometry.parameters;if(void 0!==E&&void 0!==E.shapes){const w=E.shapes;if(Array.isArray(w))for(let S=0,R=w.length;S<R;S++)_(n.shapes,w[S]);else _(n.shapes,w)}}if(this.isSkinnedMesh&&(f.bindMode=this.bindMode,f.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(_(n.skeletons,this.skeleton),f.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const E=[];for(let w=0,S=this.material.length;w<S;w++)E.push(_(n.materials,this.material[w]));f.material=E}else f.material=_(n.materials,this.material);if(this.children.length>0){f.children=[];for(let E=0;E<this.children.length;E++)f.children.push(this.children[E].toJSON(n).object)}if(this.animations.length>0){f.animations=[];for(let E=0;E<this.animations.length;E++)f.animations.push(_(n.animations,this.animations[E]))}if(i){const E=v(n.geometries),w=v(n.materials),S=v(n.textures),R=v(n.images),D=v(n.shapes),I=v(n.skeletons),O=v(n.animations);E.length>0&&(c.geometries=E),w.length>0&&(c.materials=w),S.length>0&&(c.textures=S),R.length>0&&(c.images=R),D.length>0&&(c.shapes=D),I.length>0&&(c.skeletons=I),O.length>0&&(c.animations=O)}return c.object=f,c;function v(E){const w=[];for(const S in E){const R=E[S];delete R.metadata,w.push(R)}return w}}clone(n){return(new this.constructor).copy(this,n)}copy(n,i=!0){if(this.name=n.name,this.up.copy(n.up),this.position.copy(n.position),this.rotation.order=n.rotation.order,this.quaternion.copy(n.quaternion),this.scale.copy(n.scale),this.matrix.copy(n.matrix),this.matrixWorld.copy(n.matrixWorld),this.matrixAutoUpdate=n.matrixAutoUpdate,this.matrixWorldNeedsUpdate=n.matrixWorldNeedsUpdate,this.layers.mask=n.layers.mask,this.visible=n.visible,this.castShadow=n.castShadow,this.receiveShadow=n.receiveShadow,this.frustumCulled=n.frustumCulled,this.renderOrder=n.renderOrder,this.userData=JSON.parse(JSON.stringify(n.userData)),!0===i)for(let c=0;c<n.children.length;c++)this.add(n.children[c].clone());return this}}Ln.DefaultUp=new Z(0,1,0),Ln.DefaultMatrixAutoUpdate=!0,Ln.prototype.isObject3D=!0;const Fs=new Z,Ll=new Z,Am=new Z,Ka=new Z,Fl=new Z,Za=new Z,Hf=new Z,_h=new Z,Ac=new Z,Nl=new Z;class zi{constructor(n=new Z,i=new Z,c=new Z){this.a=n,this.b=i,this.c=c}static getNormal(n,i,c,f){f.subVectors(c,i),Fs.subVectors(n,i),f.cross(Fs);const _=f.lengthSq();return _>0?f.multiplyScalar(1/Math.sqrt(_)):f.set(0,0,0)}static getBarycoord(n,i,c,f,_){Fs.subVectors(f,i),Ll.subVectors(c,i),Am.subVectors(n,i);const v=Fs.dot(Fs),E=Fs.dot(Ll),w=Fs.dot(Am),S=Ll.dot(Ll),R=Ll.dot(Am),D=v*S-E*E;if(0===D)return _.set(-2,-1,-1);const I=1/D,O=(S*w-E*R)*I,B=(v*R-E*w)*I;return _.set(1-O-B,B,O)}static containsPoint(n,i,c,f){return this.getBarycoord(n,i,c,f,Ka),Ka.x>=0&&Ka.y>=0&&Ka.x+Ka.y<=1}static getUV(n,i,c,f,_,v,E,w){return this.getBarycoord(n,i,c,f,Ka),w.set(0,0),w.addScaledVector(_,Ka.x),w.addScaledVector(v,Ka.y),w.addScaledVector(E,Ka.z),w}static isFrontFacing(n,i,c,f){return Fs.subVectors(c,i),Ll.subVectors(n,i),Fs.cross(Ll).dot(f)<0}set(n,i,c){return this.a.copy(n),this.b.copy(i),this.c.copy(c),this}setFromPointsAndIndices(n,i,c,f){return this.a.copy(n[i]),this.b.copy(n[c]),this.c.copy(n[f]),this}setFromAttributeAndIndices(n,i,c,f){return this.a.fromBufferAttribute(n,i),this.b.fromBufferAttribute(n,c),this.c.fromBufferAttribute(n,f),this}clone(){return(new this.constructor).copy(this)}copy(n){return this.a.copy(n.a),this.b.copy(n.b),this.c.copy(n.c),this}getArea(){return Fs.subVectors(this.c,this.b),Ll.subVectors(this.a,this.b),.5*Fs.cross(Ll).length()}getMidpoint(n){return n.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(n){return zi.getNormal(this.a,this.b,this.c,n)}getPlane(n){return n.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(n,i){return zi.getBarycoord(n,this.a,this.b,this.c,i)}getUV(n,i,c,f,_){return zi.getUV(n,this.a,this.b,this.c,i,c,f,_)}containsPoint(n){return zi.containsPoint(n,this.a,this.b,this.c)}isFrontFacing(n){return zi.isFrontFacing(this.a,this.b,this.c,n)}intersectsBox(n){return n.intersectsTriangle(this)}closestPointToPoint(n,i){const c=this.a,f=this.b,_=this.c;let v,E;Fl.subVectors(f,c),Za.subVectors(_,c),_h.subVectors(n,c);const w=Fl.dot(_h),S=Za.dot(_h);if(w<=0&&S<=0)return i.copy(c);Ac.subVectors(n,f);const R=Fl.dot(Ac),D=Za.dot(Ac);if(R>=0&&D<=R)return i.copy(f);const I=w*D-R*S;if(I<=0&&w>=0&&R<=0)return v=w/(w-R),i.copy(c).addScaledVector(Fl,v);Nl.subVectors(n,_);const O=Fl.dot(Nl),B=Za.dot(Nl);if(B>=0&&O<=B)return i.copy(_);const V=O*S-w*B;if(V<=0&&S>=0&&B<=0)return E=S/(S-B),i.copy(c).addScaledVector(Za,E);const $=R*B-O*D;if($<=0&&D-R>=0&&O-B>=0)return Hf.subVectors(_,f),E=(D-R)/(D-R+(O-B)),i.copy(f).addScaledVector(Hf,E);const U=1/($+V+I);return v=V*U,E=I*U,i.copy(c).addScaledVector(Fl,v).addScaledVector(Za,E)}equals(n){return n.a.equals(this.a)&&n.b.equals(this.b)&&n.c.equals(this.c)}}let Dm=0;class pr extends ja{constructor(){super(),Object.defineProperty(this,"id",{value:Dm++}),this.uuid=kr(),this.name="",this.type="Material",this.fog=!0,this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(n){this._alphaTest>0!=n>0&&this.version++,this._alphaTest=n}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(n){if(void 0!==n)for(const i in n){const c=n[i];if(void 0===c){console.warn("THREE.Material: '"+i+"' parameter is undefined.");continue}if("shading"===i){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===c;continue}const f=this[i];void 0!==f?f&&f.isColor?f.set(c):f&&f.isVector3&&c&&c.isVector3?f.copy(c):this[i]=c:console.warn("THREE."+this.type+": '"+i+"' is not a property of this material.")}}toJSON(n){const i=void 0===n||"string"==typeof n;i&&(n={textures:{},images:{}});const c={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function f(_){const v=[];for(const E in _){const w=_[E];delete w.metadata,v.push(w)}return v}if(c.uuid=this.uuid,c.type=this.type,""!==this.name&&(c.name=this.name),this.color&&this.color.isColor&&(c.color=this.color.getHex()),void 0!==this.roughness&&(c.roughness=this.roughness),void 0!==this.metalness&&(c.metalness=this.metalness),void 0!==this.sheen&&(c.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(c.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(c.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(c.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(c.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(c.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(c.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(c.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(c.shininess=this.shininess),void 0!==this.clearcoat&&(c.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(c.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(c.clearcoatMap=this.clearcoatMap.toJSON(n).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(c.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(n).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(c.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(n).uuid,c.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(c.map=this.map.toJSON(n).uuid),this.matcap&&this.matcap.isTexture&&(c.matcap=this.matcap.toJSON(n).uuid),this.alphaMap&&this.alphaMap.isTexture&&(c.alphaMap=this.alphaMap.toJSON(n).uuid),this.lightMap&&this.lightMap.isTexture&&(c.lightMap=this.lightMap.toJSON(n).uuid,c.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(c.aoMap=this.aoMap.toJSON(n).uuid,c.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(c.bumpMap=this.bumpMap.toJSON(n).uuid,c.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(c.normalMap=this.normalMap.toJSON(n).uuid,c.normalMapType=this.normalMapType,c.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(c.displacementMap=this.displacementMap.toJSON(n).uuid,c.displacementScale=this.displacementScale,c.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(c.roughnessMap=this.roughnessMap.toJSON(n).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(c.metalnessMap=this.metalnessMap.toJSON(n).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(c.emissiveMap=this.emissiveMap.toJSON(n).uuid),this.specularMap&&this.specularMap.isTexture&&(c.specularMap=this.specularMap.toJSON(n).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(c.specularIntensityMap=this.specularIntensityMap.toJSON(n).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(c.specularColorMap=this.specularColorMap.toJSON(n).uuid),this.envMap&&this.envMap.isTexture&&(c.envMap=this.envMap.toJSON(n).uuid,void 0!==this.combine&&(c.combine=this.combine)),void 0!==this.envMapIntensity&&(c.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(c.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(c.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(c.gradientMap=this.gradientMap.toJSON(n).uuid),void 0!==this.transmission&&(c.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(c.transmissionMap=this.transmissionMap.toJSON(n).uuid),void 0!==this.thickness&&(c.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(c.thicknessMap=this.thicknessMap.toJSON(n).uuid),void 0!==this.attenuationDistance&&(c.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(c.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(c.size=this.size),null!==this.shadowSide&&(c.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(c.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(c.blending=this.blending),0!==this.side&&(c.side=this.side),this.vertexColors&&(c.vertexColors=!0),this.opacity<1&&(c.opacity=this.opacity),!0===this.transparent&&(c.transparent=this.transparent),c.depthFunc=this.depthFunc,c.depthTest=this.depthTest,c.depthWrite=this.depthWrite,c.colorWrite=this.colorWrite,c.stencilWrite=this.stencilWrite,c.stencilWriteMask=this.stencilWriteMask,c.stencilFunc=this.stencilFunc,c.stencilRef=this.stencilRef,c.stencilFuncMask=this.stencilFuncMask,c.stencilFail=this.stencilFail,c.stencilZFail=this.stencilZFail,c.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(c.rotation=this.rotation),!0===this.polygonOffset&&(c.polygonOffset=!0),0!==this.polygonOffsetFactor&&(c.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(c.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(c.linewidth=this.linewidth),void 0!==this.dashSize&&(c.dashSize=this.dashSize),void 0!==this.gapSize&&(c.gapSize=this.gapSize),void 0!==this.scale&&(c.scale=this.scale),!0===this.dithering&&(c.dithering=!0),this.alphaTest>0&&(c.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(c.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(c.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(c.wireframe=this.wireframe),this.wireframeLinewidth>1&&(c.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(c.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(c.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(c.flatShading=this.flatShading),!1===this.visible&&(c.visible=!1),!1===this.toneMapped&&(c.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(c.userData=this.userData),i){const _=f(n.textures),v=f(n.images);_.length>0&&(c.textures=_),v.length>0&&(c.images=v)}return c}clone(){return(new this.constructor).copy(this)}copy(n){this.name=n.name,this.fog=n.fog,this.blending=n.blending,this.side=n.side,this.vertexColors=n.vertexColors,this.opacity=n.opacity,this.transparent=n.transparent,this.blendSrc=n.blendSrc,this.blendDst=n.blendDst,this.blendEquation=n.blendEquation,this.blendSrcAlpha=n.blendSrcAlpha,this.blendDstAlpha=n.blendDstAlpha,this.blendEquationAlpha=n.blendEquationAlpha,this.depthFunc=n.depthFunc,this.depthTest=n.depthTest,this.depthWrite=n.depthWrite,this.stencilWriteMask=n.stencilWriteMask,this.stencilFunc=n.stencilFunc,this.stencilRef=n.stencilRef,this.stencilFuncMask=n.stencilFuncMask,this.stencilFail=n.stencilFail,this.stencilZFail=n.stencilZFail,this.stencilZPass=n.stencilZPass,this.stencilWrite=n.stencilWrite;const i=n.clippingPlanes;let c=null;if(null!==i){const f=i.length;c=new Array(f);for(let _=0;_!==f;++_)c[_]=i[_].clone()}return this.clippingPlanes=c,this.clipIntersection=n.clipIntersection,this.clipShadows=n.clipShadows,this.shadowSide=n.shadowSide,this.colorWrite=n.colorWrite,this.precision=n.precision,this.polygonOffset=n.polygonOffset,this.polygonOffsetFactor=n.polygonOffsetFactor,this.polygonOffsetUnits=n.polygonOffsetUnits,this.dithering=n.dithering,this.alphaTest=n.alphaTest,this.alphaToCoverage=n.alphaToCoverage,this.premultipliedAlpha=n.premultipliedAlpha,this.visible=n.visible,this.toneMapped=n.toneMapped,this.userData=JSON.parse(JSON.stringify(n.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(n){!0===n&&this.version++}}pr.prototype.isMaterial=!0;class as extends pr{constructor(n){super(),this.type="MeshBasicMaterial",this.color=new vt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(n)}copy(n){return super.copy(n),this.color.copy(n.color),this.map=n.map,this.lightMap=n.lightMap,this.lightMapIntensity=n.lightMapIntensity,this.aoMap=n.aoMap,this.aoMapIntensity=n.aoMapIntensity,this.specularMap=n.specularMap,this.alphaMap=n.alphaMap,this.envMap=n.envMap,this.combine=n.combine,this.reflectivity=n.reflectivity,this.refractionRatio=n.refractionRatio,this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this.wireframeLinecap=n.wireframeLinecap,this.wireframeLinejoin=n.wireframeLinejoin,this}}as.prototype.isMeshBasicMaterial=!0;const oi=new Z,Dc=new Ne;class Un{constructor(n,i,c){if(Array.isArray(n))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=n,this.itemSize=i,this.count=void 0!==n?n.length/i:0,this.normalized=!0===c,this.usage=Iu,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(n){!0===n&&this.version++}setUsage(n){return this.usage=n,this}copy(n){return this.name=n.name,this.array=new n.array.constructor(n.array),this.itemSize=n.itemSize,this.count=n.count,this.normalized=n.normalized,this.usage=n.usage,this}copyAt(n,i,c){n*=this.itemSize,c*=i.itemSize;for(let f=0,_=this.itemSize;f<_;f++)this.array[n+f]=i.array[c+f];return this}copyArray(n){return this.array.set(n),this}copyColorsArray(n){const i=this.array;let c=0;for(let f=0,_=n.length;f<_;f++){let v=n[f];void 0===v&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",f),v=new vt),i[c++]=v.r,i[c++]=v.g,i[c++]=v.b}return this}copyVector2sArray(n){const i=this.array;let c=0;for(let f=0,_=n.length;f<_;f++){let v=n[f];void 0===v&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",f),v=new Ne),i[c++]=v.x,i[c++]=v.y}return this}copyVector3sArray(n){const i=this.array;let c=0;for(let f=0,_=n.length;f<_;f++){let v=n[f];void 0===v&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",f),v=new Z),i[c++]=v.x,i[c++]=v.y,i[c++]=v.z}return this}copyVector4sArray(n){const i=this.array;let c=0;for(let f=0,_=n.length;f<_;f++){let v=n[f];void 0===v&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",f),v=new ei),i[c++]=v.x,i[c++]=v.y,i[c++]=v.z,i[c++]=v.w}return this}applyMatrix3(n){if(2===this.itemSize)for(let i=0,c=this.count;i<c;i++)Dc.fromBufferAttribute(this,i),Dc.applyMatrix3(n),this.setXY(i,Dc.x,Dc.y);else if(3===this.itemSize)for(let i=0,c=this.count;i<c;i++)oi.fromBufferAttribute(this,i),oi.applyMatrix3(n),this.setXYZ(i,oi.x,oi.y,oi.z);return this}applyMatrix4(n){for(let i=0,c=this.count;i<c;i++)oi.x=this.getX(i),oi.y=this.getY(i),oi.z=this.getZ(i),oi.applyMatrix4(n),this.setXYZ(i,oi.x,oi.y,oi.z);return this}applyNormalMatrix(n){for(let i=0,c=this.count;i<c;i++)oi.x=this.getX(i),oi.y=this.getY(i),oi.z=this.getZ(i),oi.applyNormalMatrix(n),this.setXYZ(i,oi.x,oi.y,oi.z);return this}transformDirection(n){for(let i=0,c=this.count;i<c;i++)oi.x=this.getX(i),oi.y=this.getY(i),oi.z=this.getZ(i),oi.transformDirection(n),this.setXYZ(i,oi.x,oi.y,oi.z);return this}set(n,i=0){return this.array.set(n,i),this}getX(n){return this.array[n*this.itemSize]}setX(n,i){return this.array[n*this.itemSize]=i,this}getY(n){return this.array[n*this.itemSize+1]}setY(n,i){return this.array[n*this.itemSize+1]=i,this}getZ(n){return this.array[n*this.itemSize+2]}setZ(n,i){return this.array[n*this.itemSize+2]=i,this}getW(n){return this.array[n*this.itemSize+3]}setW(n,i){return this.array[n*this.itemSize+3]=i,this}setXY(n,i,c){return this.array[0+(n*=this.itemSize)]=i,this.array[n+1]=c,this}setXYZ(n,i,c,f){return this.array[0+(n*=this.itemSize)]=i,this.array[n+1]=c,this.array[n+2]=f,this}setXYZW(n,i,c,f,_){return this.array[0+(n*=this.itemSize)]=i,this.array[n+1]=c,this.array[n+2]=f,this.array[n+3]=_,this}onUpload(n){return this.onUploadCallback=n,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const n={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return""!==this.name&&(n.name=this.name),this.usage!==Iu&&(n.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(n.updateRange=this.updateRange),n}}Un.prototype.isBufferAttribute=!0;class Bl extends Un{constructor(n,i,c){super(new Int8Array(n),i,c)}}class Ja extends Un{constructor(n,i,c){super(new Uint8Array(n),i,c)}}class Ul extends Un{constructor(n,i,c){super(new Uint8ClampedArray(n),i,c)}}class yh extends Un{constructor(n,i,c){super(new Int16Array(n),i,c)}}class Ro extends Un{constructor(n,i,c){super(new Uint16Array(n),i,c)}}class Qa extends Un{constructor(n,i,c){super(new Int32Array(n),i,c)}}class kl extends Un{constructor(n,i,c){super(new Uint32Array(n),i,c)}}class Rm extends Un{constructor(n,i,c){super(new Uint16Array(n),i,c)}}Rm.prototype.isFloat16BufferAttribute=!0;class pt extends Un{constructor(n,i,c){super(new Float32Array(n),i,c)}}class Gf extends Un{constructor(n,i,c){super(new Float64Array(n),i,c)}}let aE=0;const Vr=new Wt,Gu=new Ln,el=new Z,Ns=new Os,vh=new Os,xi=new Z;class cn extends ja{constructor(){super(),Object.defineProperty(this,"id",{value:aE++}),this.uuid=kr(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(n){return this.index=Array.isArray(n)?new(Fi(n)?kl:Ro)(n,1):n,this}getAttribute(n){return this.attributes[n]}setAttribute(n,i){return this.attributes[n]=i,this}deleteAttribute(n){return delete this.attributes[n],this}hasAttribute(n){return void 0!==this.attributes[n]}addGroup(n,i,c=0){this.groups.push({start:n,count:i,materialIndex:c})}clearGroups(){this.groups=[]}setDrawRange(n,i){this.drawRange.start=n,this.drawRange.count=i}applyMatrix4(n){const i=this.attributes.position;void 0!==i&&(i.applyMatrix4(n),i.needsUpdate=!0);const c=this.attributes.normal;if(void 0!==c){const _=(new hr).getNormalMatrix(n);c.applyNormalMatrix(_),c.needsUpdate=!0}const f=this.attributes.tangent;return void 0!==f&&(f.transformDirection(n),f.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(n){return Vr.makeRotationFromQuaternion(n),this.applyMatrix4(Vr),this}rotateX(n){return Vr.makeRotationX(n),this.applyMatrix4(Vr),this}rotateY(n){return Vr.makeRotationY(n),this.applyMatrix4(Vr),this}rotateZ(n){return Vr.makeRotationZ(n),this.applyMatrix4(Vr),this}translate(n,i,c){return Vr.makeTranslation(n,i,c),this.applyMatrix4(Vr),this}scale(n,i,c){return Vr.makeScale(n,i,c),this.applyMatrix4(Vr),this}lookAt(n){return Gu.lookAt(n),Gu.updateMatrix(),this.applyMatrix4(Gu.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(el).negate(),this.translate(el.x,el.y,el.z),this}setFromPoints(n){const i=[];for(let c=0,f=n.length;c<f;c++){const _=n[c];i.push(_.x,_.y,_.z||0)}return this.setAttribute("position",new pt(i,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Os);const n=this.attributes.position,i=this.morphAttributes.position;if(n&&n.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new Z(-1/0,-1/0,-1/0),new Z(1/0,1/0,1/0));if(void 0!==n){if(this.boundingBox.setFromBufferAttribute(n),i)for(let c=0,f=i.length;c<f;c++)Ns.setFromBufferAttribute(i[c]),this.morphTargetsRelative?(xi.addVectors(this.boundingBox.min,Ns.min),this.boundingBox.expandByPoint(xi),xi.addVectors(this.boundingBox.max,Ns.max),this.boundingBox.expandByPoint(xi)):(this.boundingBox.expandByPoint(Ns.min),this.boundingBox.expandByPoint(Ns.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new fa);const n=this.attributes.position,i=this.morphAttributes.position;if(n&&n.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new Z,1/0);if(n){const c=this.boundingSphere.center;if(Ns.setFromBufferAttribute(n),i)for(let _=0,v=i.length;_<v;_++)vh.setFromBufferAttribute(i[_]),this.morphTargetsRelative?(xi.addVectors(Ns.min,vh.min),Ns.expandByPoint(xi),xi.addVectors(Ns.max,vh.max),Ns.expandByPoint(xi)):(Ns.expandByPoint(vh.min),Ns.expandByPoint(vh.max));Ns.getCenter(c);let f=0;for(let _=0,v=n.count;_<v;_++)xi.fromBufferAttribute(n,_),f=Math.max(f,c.distanceToSquared(xi));if(i)for(let _=0,v=i.length;_<v;_++){const E=i[_],w=this.morphTargetsRelative;for(let S=0,R=E.count;S<R;S++)xi.fromBufferAttribute(E,S),w&&(el.fromBufferAttribute(n,S),xi.add(el)),f=Math.max(f,c.distanceToSquared(xi))}this.boundingSphere.radius=Math.sqrt(f),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const n=this.index,i=this.attributes;if(null===n||void 0===i.position||void 0===i.normal||void 0===i.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const c=n.array,f=i.position.array,_=i.normal.array,v=i.uv.array,E=f.length/3;void 0===i.tangent&&this.setAttribute("tangent",new Un(new Float32Array(4*E),4));const w=i.tangent.array,S=[],R=[];for(let Fe=0;Fe<E;Fe++)S[Fe]=new Z,R[Fe]=new Z;const D=new Z,I=new Z,O=new Z,B=new Ne,V=new Ne,$=new Ne,U=new Z,L=new Z;function Y(Fe,X,de){D.fromArray(f,3*Fe),I.fromArray(f,3*X),O.fromArray(f,3*de),B.fromArray(v,2*Fe),V.fromArray(v,2*X),$.fromArray(v,2*de),I.sub(D),O.sub(D),V.sub(B),$.sub(B);const Ce=1/(V.x*$.y-$.x*V.y);!isFinite(Ce)||(U.copy(I).multiplyScalar($.y).addScaledVector(O,-V.y).multiplyScalar(Ce),L.copy(O).multiplyScalar(V.x).addScaledVector(I,-$.x).multiplyScalar(Ce),S[Fe].add(U),S[X].add(U),S[de].add(U),R[Fe].add(L),R[X].add(L),R[de].add(L))}let z=this.groups;0===z.length&&(z=[{start:0,count:c.length}]);for(let Fe=0,X=z.length;Fe<X;++Fe){const de=z[Fe],Ce=de.start;for(let Be=Ce,Pe=Ce+de.count;Be<Pe;Be+=3)Y(c[Be+0],c[Be+1],c[Be+2])}const Q=new Z,re=new Z,ae=new Z,ve=new Z;function ze(Fe){ae.fromArray(_,3*Fe),ve.copy(ae);const X=S[Fe];Q.copy(X),Q.sub(ae.multiplyScalar(ae.dot(X))).normalize(),re.crossVectors(ve,X);const Ce=re.dot(R[Fe])<0?-1:1;w[4*Fe]=Q.x,w[4*Fe+1]=Q.y,w[4*Fe+2]=Q.z,w[4*Fe+3]=Ce}for(let Fe=0,X=z.length;Fe<X;++Fe){const de=z[Fe],Ce=de.start;for(let Be=Ce,Pe=Ce+de.count;Be<Pe;Be+=3)ze(c[Be+0]),ze(c[Be+1]),ze(c[Be+2])}}computeVertexNormals(){const n=this.index,i=this.getAttribute("position");if(void 0!==i){let c=this.getAttribute("normal");if(void 0===c)c=new Un(new Float32Array(3*i.count),3),this.setAttribute("normal",c);else for(let I=0,O=c.count;I<O;I++)c.setXYZ(I,0,0,0);const f=new Z,_=new Z,v=new Z,E=new Z,w=new Z,S=new Z,R=new Z,D=new Z;if(n)for(let I=0,O=n.count;I<O;I+=3){const B=n.getX(I+0),V=n.getX(I+1),$=n.getX(I+2);f.fromBufferAttribute(i,B),_.fromBufferAttribute(i,V),v.fromBufferAttribute(i,$),R.subVectors(v,_),D.subVectors(f,_),R.cross(D),E.fromBufferAttribute(c,B),w.fromBufferAttribute(c,V),S.fromBufferAttribute(c,$),E.add(R),w.add(R),S.add(R),c.setXYZ(B,E.x,E.y,E.z),c.setXYZ(V,w.x,w.y,w.z),c.setXYZ($,S.x,S.y,S.z)}else for(let I=0,O=i.count;I<O;I+=3)f.fromBufferAttribute(i,I+0),_.fromBufferAttribute(i,I+1),v.fromBufferAttribute(i,I+2),R.subVectors(v,_),D.subVectors(f,_),R.cross(D),c.setXYZ(I+0,R.x,R.y,R.z),c.setXYZ(I+1,R.x,R.y,R.z),c.setXYZ(I+2,R.x,R.y,R.z);this.normalizeNormals(),c.needsUpdate=!0}}merge(n,i){if(!n||!n.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",n);void 0===i&&(i=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const c=this.attributes;for(const f in c){if(void 0===n.attributes[f])continue;const v=c[f].array,E=n.attributes[f],w=E.array,S=E.itemSize*i,R=Math.min(w.length,v.length-S);for(let D=0,I=S;D<R;D++,I++)v[I]=w[D]}return this}normalizeNormals(){const n=this.attributes.normal;for(let i=0,c=n.count;i<c;i++)xi.fromBufferAttribute(n,i),xi.normalize(),n.setXYZ(i,xi.x,xi.y,xi.z)}toNonIndexed(){function n(E,w){const S=E.array,R=E.itemSize,D=E.normalized,I=new S.constructor(w.length*R);let O=0,B=0;for(let V=0,$=w.length;V<$;V++){O=E.isInterleavedBufferAttribute?w[V]*E.data.stride+E.offset:w[V]*R;for(let U=0;U<R;U++)I[B++]=S[O++]}return new Un(I,R,D)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const i=new cn,c=this.index.array,f=this.attributes;for(const E in f){const S=n(f[E],c);i.setAttribute(E,S)}const _=this.morphAttributes;for(const E in _){const w=[],S=_[E];for(let R=0,D=S.length;R<D;R++){const O=n(S[R],c);w.push(O)}i.morphAttributes[E]=w}i.morphTargetsRelative=this.morphTargetsRelative;const v=this.groups;for(let E=0,w=v.length;E<w;E++){const S=v[E];i.addGroup(S.start,S.count,S.materialIndex)}return i}toJSON(){const n={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),Object.keys(this.userData).length>0&&(n.userData=this.userData),void 0!==this.parameters){const w=this.parameters;for(const S in w)void 0!==w[S]&&(n[S]=w[S]);return n}n.data={attributes:{}};const i=this.index;null!==i&&(n.data.index={type:i.array.constructor.name,array:Array.prototype.slice.call(i.array)});const c=this.attributes;for(const w in c)n.data.attributes[w]=c[w].toJSON(n.data);const f={};let _=!1;for(const w in this.morphAttributes){const S=this.morphAttributes[w],R=[];for(let D=0,I=S.length;D<I;D++)R.push(S[D].toJSON(n.data));R.length>0&&(f[w]=R,_=!0)}_&&(n.data.morphAttributes=f,n.data.morphTargetsRelative=this.morphTargetsRelative);const v=this.groups;v.length>0&&(n.data.groups=JSON.parse(JSON.stringify(v)));const E=this.boundingSphere;return null!==E&&(n.data.boundingSphere={center:E.center.toArray(),radius:E.radius}),n}clone(){return(new this.constructor).copy(this)}copy(n){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const i={};this.name=n.name;const c=n.index;null!==c&&this.setIndex(c.clone(i));const f=n.attributes;for(const S in f)this.setAttribute(S,f[S].clone(i));const _=n.morphAttributes;for(const S in _){const R=[],D=_[S];for(let I=0,O=D.length;I<O;I++)R.push(D[I].clone(i));this.morphAttributes[S]=R}this.morphTargetsRelative=n.morphTargetsRelative;const v=n.groups;for(let S=0,R=v.length;S<R;S++){const D=v[S];this.addGroup(D.start,D.count,D.materialIndex)}const E=n.boundingBox;null!==E&&(this.boundingBox=E.clone());const w=n.boundingSphere;return null!==w&&(this.boundingSphere=w.clone()),this.drawRange.start=n.drawRange.start,this.drawRange.count=n.drawRange.count,this.userData=n.userData,void 0!==n.parameters&&(this.parameters=Object.assign({},n.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}cn.prototype.isBufferGeometry=!0;const Wi=new Wt,vs=new bc,Vl=new fa,Hl=new Z,tl=new Z,Ji=new Z,Bs=new Z,Pm=new Z,Po=new Z,Ci=new Z,zu=new Z,zf=new Z,nl=new Ne,Wf=new Ne,Rc=new Ne,ma=new Z,Rr=new Z;class hi extends Ln{constructor(n=new cn,i=new as){super(),this.type="Mesh",this.geometry=n,this.material=i,this.updateMorphTargets()}copy(n){return super.copy(n),void 0!==n.morphTargetInfluences&&(this.morphTargetInfluences=n.morphTargetInfluences.slice()),void 0!==n.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},n.morphTargetDictionary)),this.material=n.material,this.geometry=n.geometry,this}updateMorphTargets(){const n=this.geometry;if(n.isBufferGeometry){const i=n.morphAttributes,c=Object.keys(i);if(c.length>0){const f=i[c[0]];if(void 0!==f){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let _=0,v=f.length;_<v;_++){const E=f[_].name||String(_);this.morphTargetInfluences.push(0),this.morphTargetDictionary[E]=_}}}}else{const i=n.morphTargets;void 0!==i&&i.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}raycast(n,i){const c=this.geometry,f=this.material,_=this.matrixWorld;if(void 0===f||(null===c.boundingSphere&&c.computeBoundingSphere(),Vl.copy(c.boundingSphere),Vl.applyMatrix4(_),!1===n.ray.intersectsSphere(Vl))||(Wi.copy(_).invert(),vs.copy(n.ray).applyMatrix4(Wi),null!==c.boundingBox&&!1===vs.intersectsBox(c.boundingBox)))return;let v;if(c.isBufferGeometry){const E=c.index,w=c.attributes.position,S=c.morphAttributes.position,R=c.morphTargetsRelative,D=c.attributes.uv,I=c.attributes.uv2,O=c.groups,B=c.drawRange;if(null!==E)if(Array.isArray(f))for(let V=0,$=O.length;V<$;V++){const U=O[V],L=f[U.materialIndex];for(let Q=Math.max(U.start,B.start),re=Math.min(E.count,Math.min(U.start+U.count,B.start+B.count));Q<re;Q+=3){const ae=E.getX(Q),ve=E.getX(Q+1),ze=E.getX(Q+2);v=jf(this,L,n,vs,w,S,R,D,I,ae,ve,ze),v&&(v.faceIndex=Math.floor(Q/3),v.face.materialIndex=U.materialIndex,i.push(v))}}else for(let U=Math.max(0,B.start),L=Math.min(E.count,B.start+B.count);U<L;U+=3){const Y=E.getX(U),z=E.getX(U+1),Q=E.getX(U+2);v=jf(this,f,n,vs,w,S,R,D,I,Y,z,Q),v&&(v.faceIndex=Math.floor(U/3),i.push(v))}else if(void 0!==w)if(Array.isArray(f))for(let V=0,$=O.length;V<$;V++){const U=O[V],L=f[U.materialIndex];for(let Q=Math.max(U.start,B.start),re=Math.min(w.count,Math.min(U.start+U.count,B.start+B.count));Q<re;Q+=3)v=jf(this,L,n,vs,w,S,R,D,I,Q,Q+1,Q+2),v&&(v.faceIndex=Math.floor(Q/3),v.face.materialIndex=U.materialIndex,i.push(v))}else for(let U=Math.max(0,B.start),L=Math.min(w.count,B.start+B.count);U<L;U+=3)v=jf(this,f,n,vs,w,S,R,D,I,U,U+1,U+2),v&&(v.faceIndex=Math.floor(U/3),i.push(v))}else c.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}function jf(p,n,i,c,f,_,v,E,w,S,R,D){Hl.fromBufferAttribute(f,S),tl.fromBufferAttribute(f,R),Ji.fromBufferAttribute(f,D);const I=p.morphTargetInfluences;if(_&&I){Ci.set(0,0,0),zu.set(0,0,0),zf.set(0,0,0);for(let B=0,V=_.length;B<V;B++){const $=I[B],U=_[B];0!==$&&(Bs.fromBufferAttribute(U,S),Pm.fromBufferAttribute(U,R),Po.fromBufferAttribute(U,D),v?(Ci.addScaledVector(Bs,$),zu.addScaledVector(Pm,$),zf.addScaledVector(Po,$)):(Ci.addScaledVector(Bs.sub(Hl),$),zu.addScaledVector(Pm.sub(tl),$),zf.addScaledVector(Po.sub(Ji),$)))}Hl.add(Ci),tl.add(zu),Ji.add(zf)}p.isSkinnedMesh&&(p.boneTransform(S,Hl),p.boneTransform(R,tl),p.boneTransform(D,Ji));const O=function ga(p,n,i,c,f,_,v,E){let w;if(w=1===n.side?c.intersectTriangle(v,_,f,!0,E):c.intersectTriangle(f,_,v,2!==n.side,E),null===w)return null;Rr.copy(E),Rr.applyMatrix4(p.matrixWorld);const S=i.ray.origin.distanceTo(Rr);return S<i.near||S>i.far?null:{distance:S,point:Rr.clone(),object:p}}(p,n,i,c,Hl,tl,Ji,ma);if(O){E&&(nl.fromBufferAttribute(E,S),Wf.fromBufferAttribute(E,R),Rc.fromBufferAttribute(E,D),O.uv=zi.getUV(ma,Hl,tl,Ji,nl,Wf,Rc,new Ne)),w&&(nl.fromBufferAttribute(w,S),Wf.fromBufferAttribute(w,R),Rc.fromBufferAttribute(w,D),O.uv2=zi.getUV(ma,Hl,tl,Ji,nl,Wf,Rc,new Ne));const B={a:S,b:R,c:D,normal:new Z,materialIndex:0};zi.getNormal(Hl,tl,Ji,B.normal),O.face=B}return O}hi.prototype.isMesh=!0;class _a extends cn{constructor(n=1,i=1,c=1,f=1,_=1,v=1){super(),this.type="BoxGeometry",this.parameters={width:n,height:i,depth:c,widthSegments:f,heightSegments:_,depthSegments:v};const E=this;f=Math.floor(f),_=Math.floor(_),v=Math.floor(v);const w=[],S=[],R=[],D=[];let I=0,O=0;function B(V,$,U,L,Y,z,Q,re,ae,ve,ze){const Fe=z/ae,X=Q/ve,de=z/2,Ce=Q/2,Ie=re/2,Be=ae+1,Pe=ve+1;let Xe=0,ct=0;const jt=new Z;for(let Ke=0;Ke<Pe;Ke++){const st=Ke*X-Ce;for(let Tt=0;Tt<Be;Tt++)jt[V]=(Tt*Fe-de)*L,jt[$]=st*Y,jt[U]=Ie,S.push(jt.x,jt.y,jt.z),jt[V]=0,jt[$]=0,jt[U]=re>0?1:-1,R.push(jt.x,jt.y,jt.z),D.push(Tt/ae),D.push(1-Ke/ve),Xe+=1}for(let Ke=0;Ke<ve;Ke++)for(let st=0;st<ae;st++){const Ot=I+st+Be*(Ke+1),Kt=I+(st+1)+Be*(Ke+1),Ee=I+(st+1)+Be*Ke;w.push(I+st+Be*Ke,Ot,Ee),w.push(Ot,Kt,Ee),ct+=6}E.addGroup(O,ct,ze),O+=ct,I+=Xe}B("z","y","x",-1,-1,c,i,n,v,_,0),B("z","y","x",1,-1,c,i,-n,v,_,1),B("x","z","y",1,1,n,c,i,f,v,2),B("x","z","y",1,-1,n,c,-i,f,v,3),B("x","y","z",1,-1,n,i,c,f,_,4),B("x","y","z",-1,-1,n,i,-c,f,_,5),this.setIndex(w),this.setAttribute("position",new pt(S,3)),this.setAttribute("normal",new pt(R,3)),this.setAttribute("uv",new pt(D,2))}static fromJSON(n){return new _a(n.width,n.height,n.depth,n.widthSegments,n.heightSegments,n.depthSegments)}}function Pc(p){const n={};for(const i in p){n[i]={};for(const c in p[i]){const f=p[i][c];n[i][c]=f&&(f.isColor||f.isMatrix3||f.isMatrix4||f.isVector2||f.isVector3||f.isVector4||f.isTexture||f.isQuaternion)?f.clone():Array.isArray(f)?f.slice():f}}return n}function Pr(p){const n={};for(let i=0;i<p.length;i++){const c=Pc(p[i]);for(const f in c)n[f]=c[f]}return n}const Im={clone:Pc,merge:Pr};class to extends pr{constructor(n){super(),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==n&&(void 0!==n.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(n))}copy(n){return super.copy(n),this.fragmentShader=n.fragmentShader,this.vertexShader=n.vertexShader,this.uniforms=Pc(n.uniforms),this.defines=Object.assign({},n.defines),this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this.lights=n.lights,this.clipping=n.clipping,this.extensions=Object.assign({},n.extensions),this.glslVersion=n.glslVersion,this}toJSON(n){const i=super.toJSON(n);i.glslVersion=this.glslVersion,i.uniforms={};for(const f in this.uniforms){const v=this.uniforms[f].value;i.uniforms[f]=v&&v.isTexture?{type:"t",value:v.toJSON(n).uuid}:v&&v.isColor?{type:"c",value:v.getHex()}:v&&v.isVector2?{type:"v2",value:v.toArray()}:v&&v.isVector3?{type:"v3",value:v.toArray()}:v&&v.isVector4?{type:"v4",value:v.toArray()}:v&&v.isMatrix3?{type:"m3",value:v.toArray()}:v&&v.isMatrix4?{type:"m4",value:v.toArray()}:{value:v}}Object.keys(this.defines).length>0&&(i.defines=this.defines),i.vertexShader=this.vertexShader,i.fragmentShader=this.fragmentShader;const c={};for(const f in this.extensions)!0===this.extensions[f]&&(c[f]=!0);return Object.keys(c).length>0&&(i.extensions=c),i}}to.prototype.isShaderMaterial=!0;class il extends Ln{constructor(){super(),this.type="Camera",this.matrixWorldInverse=new Wt,this.projectionMatrix=new Wt,this.projectionMatrixInverse=new Wt}copy(n,i){return super.copy(n,i),this.matrixWorldInverse.copy(n.matrixWorldInverse),this.projectionMatrix.copy(n.projectionMatrix),this.projectionMatrixInverse.copy(n.projectionMatrixInverse),this}getWorldDirection(n){this.updateWorldMatrix(!0,!1);const i=this.matrixWorld.elements;return n.set(-i[8],-i[9],-i[10]).normalize()}updateMatrixWorld(n){super.updateMatrixWorld(n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(n,i){super.updateWorldMatrix(n,i),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}il.prototype.isCamera=!0;class Qi extends il{constructor(n=50,i=1,c=.1,f=2e3){super(),this.type="PerspectiveCamera",this.fov=n,this.zoom=1,this.near=c,this.far=f,this.focus=10,this.aspect=i,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(n,i){return super.copy(n,i),this.fov=n.fov,this.zoom=n.zoom,this.near=n.near,this.far=n.far,this.focus=n.focus,this.aspect=n.aspect,this.view=null===n.view?null:Object.assign({},n.view),this.filmGauge=n.filmGauge,this.filmOffset=n.filmOffset,this}setFocalLength(n){const i=.5*this.getFilmHeight()/n;this.fov=2*xc*Math.atan(i),this.updateProjectionMatrix()}getFocalLength(){const n=Math.tan(.5*Ec*this.fov);return.5*this.getFilmHeight()/n}getEffectiveFOV(){return 2*xc*Math.atan(Math.tan(.5*Ec*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(n,i,c,f,_,v){this.aspect=n/i,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=n,this.view.fullHeight=i,this.view.offsetX=c,this.view.offsetY=f,this.view.width=_,this.view.height=v,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const n=this.near;let i=n*Math.tan(.5*Ec*this.fov)/this.zoom,c=2*i,f=this.aspect*c,_=-.5*f;const v=this.view;if(null!==this.view&&this.view.enabled){const w=v.fullWidth,S=v.fullHeight;_+=v.offsetX*f/w,i-=v.offsetY*c/S,f*=v.width/w,c*=v.height/S}const E=this.filmOffset;0!==E&&(_+=n*E/this.getFilmWidth()),this.projectionMatrix.makePerspective(_,_+f,i,i-c,n,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(n){const i=super.toJSON(n);return i.object.fov=this.fov,i.object.zoom=this.zoom,i.object.near=this.near,i.object.far=this.far,i.object.focus=this.focus,i.object.aspect=this.aspect,null!==this.view&&(i.object.view=Object.assign({},this.view)),i.object.filmGauge=this.filmGauge,i.object.filmOffset=this.filmOffset,i}}Qi.prototype.isPerspectiveCamera=!0;class Eh extends Ln{constructor(n,i,c){if(super(),this.type="CubeCamera",!0!==c.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=c;const f=new Qi(90,1,n,i);f.layers=this.layers,f.up.set(0,-1,0),f.lookAt(new Z(1,0,0)),this.add(f);const _=new Qi(90,1,n,i);_.layers=this.layers,_.up.set(0,-1,0),_.lookAt(new Z(-1,0,0)),this.add(_);const v=new Qi(90,1,n,i);v.layers=this.layers,v.up.set(0,0,1),v.lookAt(new Z(0,1,0)),this.add(v);const E=new Qi(90,1,n,i);E.layers=this.layers,E.up.set(0,0,-1),E.lookAt(new Z(0,-1,0)),this.add(E);const w=new Qi(90,1,n,i);w.layers=this.layers,w.up.set(0,-1,0),w.lookAt(new Z(0,0,1)),this.add(w);const S=new Qi(90,1,n,i);S.layers=this.layers,S.up.set(0,-1,0),S.lookAt(new Z(0,0,-1)),this.add(S)}update(n,i){null===this.parent&&this.updateMatrixWorld();const c=this.renderTarget,[f,_,v,E,w,S]=this.children,R=n.xr.enabled,D=n.getRenderTarget();n.xr.enabled=!1;const I=c.texture.generateMipmaps;c.texture.generateMipmaps=!1,n.setRenderTarget(c,0),n.render(i,f),n.setRenderTarget(c,1),n.render(i,_),n.setRenderTarget(c,2),n.render(i,v),n.setRenderTarget(c,3),n.render(i,E),n.setRenderTarget(c,4),n.render(i,w),c.texture.generateMipmaps=I,n.setRenderTarget(c,5),n.render(i,S),n.setRenderTarget(D),n.xr.enabled=R,c.texture.needsPMREMUpdate=!0}}class va extends li{constructor(n,i,c,f,_,v,E,w,S,R){super(n=void 0!==n?n:[],i=void 0!==i?i:301,c,f,_,v,E,w,S,R),this.flipY=!1}get images(){return this.image}set images(n){this.image=n}}va.prototype.isCubeTexture=!0;class Wu extends Is{constructor(n,i,c){Number.isInteger(i)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),i=c),super(n,n,i),this.texture=new va(void 0,(i=i||{}).mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==i.generateMipmaps&&i.generateMipmaps,this.texture.minFilter=void 0!==i.minFilter?i.minFilter:ri}fromEquirectangularTexture(n,i){this.texture.type=i.type,this.texture.format=_i,this.texture.encoding=i.encoding,this.texture.generateMipmaps=i.generateMipmaps,this.texture.minFilter=i.minFilter,this.texture.magFilter=i.magFilter;const c_uniforms={tEquirect:{value:null}},c_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",c_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",f=new _a(5,5,5),_=new to({name:"CubemapFromEquirect",uniforms:Pc(c_uniforms),vertexShader:c_vertexShader,fragmentShader:c_fragmentShader,side:1,blending:0});_.uniforms.tEquirect.value=i;const v=new hi(f,_),E=i.minFilter;return i.minFilter===is&&(i.minFilter=ri),new Eh(1,10,this).update(n,v),i.minFilter=E,v.geometry.dispose(),v.material.dispose(),this}clear(n,i,c,f){const _=n.getRenderTarget();for(let v=0;v<6;v++)n.setRenderTarget(this,v),n.clear(i,c,f);n.setRenderTarget(_)}}Wu.prototype.isWebGLCubeRenderTarget=!0;const Om=new Z,cE=new Z,Fv=new hr;class wr{constructor(n=new Z(1,0,0),i=0){this.normal=n,this.constant=i}set(n,i){return this.normal.copy(n),this.constant=i,this}setComponents(n,i,c,f){return this.normal.set(n,i,c),this.constant=f,this}setFromNormalAndCoplanarPoint(n,i){return this.normal.copy(n),this.constant=-i.dot(this.normal),this}setFromCoplanarPoints(n,i,c){const f=Om.subVectors(c,i).cross(cE.subVectors(n,i)).normalize();return this.setFromNormalAndCoplanarPoint(f,n),this}copy(n){return this.normal.copy(n.normal),this.constant=n.constant,this}normalize(){const n=1/this.normal.length();return this.normal.multiplyScalar(n),this.constant*=n,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(n){return this.normal.dot(n)+this.constant}distanceToSphere(n){return this.distanceToPoint(n.center)-n.radius}projectPoint(n,i){return i.copy(this.normal).multiplyScalar(-this.distanceToPoint(n)).add(n)}intersectLine(n,i){const c=n.delta(Om),f=this.normal.dot(c);if(0===f)return 0===this.distanceToPoint(n.start)?i.copy(n.start):null;const _=-(n.start.dot(this.normal)+this.constant)/f;return _<0||_>1?null:i.copy(c).multiplyScalar(_).add(n.start)}intersectsLine(n){const i=this.distanceToPoint(n.start),c=this.distanceToPoint(n.end);return i<0&&c>0||c<0&&i>0}intersectsBox(n){return n.intersectsPlane(this)}intersectsSphere(n){return n.intersectsPlane(this)}coplanarPoint(n){return n.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(n,i){const c=i||Fv.getNormalMatrix(n),f=this.coplanarPoint(Om).applyMatrix4(n),_=this.normal.applyMatrix3(c).normalize();return this.constant=-f.dot(_),this}translate(n){return this.constant-=n.dot(this.normal),this}equals(n){return n.normal.equals(this.normal)&&n.constant===this.constant}clone(){return(new this.constructor).copy(this)}}wr.prototype.isPlane=!0;const Oo=new fa,Ir=new Z;class Ea{constructor(n=new wr,i=new wr,c=new wr,f=new wr,_=new wr,v=new wr){this.planes=[n,i,c,f,_,v]}set(n,i,c,f,_,v){const E=this.planes;return E[0].copy(n),E[1].copy(i),E[2].copy(c),E[3].copy(f),E[4].copy(_),E[5].copy(v),this}copy(n){const i=this.planes;for(let c=0;c<6;c++)i[c].copy(n.planes[c]);return this}setFromProjectionMatrix(n){const i=this.planes,c=n.elements,f=c[0],_=c[1],v=c[2],E=c[3],w=c[4],S=c[5],R=c[6],D=c[7],I=c[8],O=c[9],B=c[10],V=c[11],$=c[12],U=c[13],L=c[14],Y=c[15];return i[0].setComponents(E-f,D-w,V-I,Y-$).normalize(),i[1].setComponents(E+f,D+w,V+I,Y+$).normalize(),i[2].setComponents(E+_,D+S,V+O,Y+U).normalize(),i[3].setComponents(E-_,D-S,V-O,Y-U).normalize(),i[4].setComponents(E-v,D-R,V-B,Y-L).normalize(),i[5].setComponents(E+v,D+R,V+B,Y+L).normalize(),this}intersectsObject(n){const i=n.geometry;return null===i.boundingSphere&&i.computeBoundingSphere(),Oo.copy(i.boundingSphere).applyMatrix4(n.matrixWorld),this.intersectsSphere(Oo)}intersectsSprite(n){return Oo.center.set(0,0,0),Oo.radius=.7071067811865476,Oo.applyMatrix4(n.matrixWorld),this.intersectsSphere(Oo)}intersectsSphere(n){const i=this.planes,c=n.center,f=-n.radius;for(let _=0;_<6;_++)if(i[_].distanceToPoint(c)<f)return!1;return!0}intersectsBox(n){const i=this.planes;for(let c=0;c<6;c++){const f=i[c];if(Ir.x=f.normal.x>0?n.max.x:n.min.x,Ir.y=f.normal.y>0?n.max.y:n.min.y,Ir.z=f.normal.z>0?n.max.z:n.min.z,f.distanceToPoint(Ir)<0)return!1}return!0}containsPoint(n){const i=this.planes;for(let c=0;c<6;c++)if(i[c].distanceToPoint(n)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function ji(){let p=null,n=!1,i=null,c=null;function f(_,v){i(_,v),c=p.requestAnimationFrame(f)}return{start:function(){!0!==n&&null!==i&&(c=p.requestAnimationFrame(f),n=!0)},stop:function(){p.cancelAnimationFrame(c),n=!1},setAnimationLoop:function(_){i=_},setContext:function(_){p=_}}}function Us(p,n){const i=n.isWebGL2,c=new WeakMap;return{get:function v(S){return S.isInterleavedBufferAttribute&&(S=S.data),c.get(S)},remove:function E(S){S.isInterleavedBufferAttribute&&(S=S.data);const R=c.get(S);R&&(p.deleteBuffer(R.buffer),c.delete(S))},update:function w(S,R){if(S.isGLBufferAttribute){const I=c.get(S);return void((!I||I.version<S.version)&&c.set(S,{buffer:S.buffer,type:S.type,bytesPerElement:S.elementSize,version:S.version}))}S.isInterleavedBufferAttribute&&(S=S.data);const D=c.get(S);void 0===D?c.set(S,function f(S,R){const D=S.array,I=S.usage,O=p.createBuffer();p.bindBuffer(R,O),p.bufferData(R,D,I),S.onUploadCallback();let B=p.FLOAT;return D instanceof Float32Array?B=p.FLOAT:D instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):D instanceof Uint16Array?S.isFloat16BufferAttribute?i?B=p.HALF_FLOAT:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):B=p.UNSIGNED_SHORT:D instanceof Int16Array?B=p.SHORT:D instanceof Uint32Array?B=p.UNSIGNED_INT:D instanceof Int32Array?B=p.INT:D instanceof Int8Array?B=p.BYTE:(D instanceof Uint8Array||D instanceof Uint8ClampedArray)&&(B=p.UNSIGNED_BYTE),{buffer:O,type:B,bytesPerElement:D.BYTES_PER_ELEMENT,version:S.version}}(S,R)):D.version<S.version&&(function _(S,R,D){const I=R.array,O=R.updateRange;p.bindBuffer(D,S),-1===O.count?p.bufferSubData(D,0,I):(i?p.bufferSubData(D,O.offset*I.BYTES_PER_ELEMENT,I,O.offset,O.count):p.bufferSubData(D,O.offset*I.BYTES_PER_ELEMENT,I.subarray(O.offset,O.offset+O.count)),O.count=-1)}(D.buffer,S,R),D.version=S.version)}}}class $n extends cn{constructor(n=1,i=1,c=1,f=1){super(),this.type="PlaneGeometry",this.parameters={width:n,height:i,widthSegments:c,heightSegments:f};const _=n/2,v=i/2,E=Math.floor(c),w=Math.floor(f),S=E+1,R=w+1,D=n/E,I=i/w,O=[],B=[],V=[],$=[];for(let U=0;U<R;U++){const L=U*I-v;for(let Y=0;Y<S;Y++)B.push(Y*D-_,-L,0),V.push(0,0,1),$.push(Y/E),$.push(1-U/w)}for(let U=0;U<w;U++)for(let L=0;L<E;L++){const z=L+S*(U+1),Q=L+1+S*(U+1),re=L+1+S*U;O.push(L+S*U,z,re),O.push(z,Q,re)}this.setIndex(O),this.setAttribute("position",new pt(B,3)),this.setAttribute("normal",new pt(V,3)),this.setAttribute("uv",new pt($,2))}static fromJSON(n){return new $n(n.width,n.height,n.widthSegments,n.heightSegments)}}const on={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 ) + 0.5;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\treturn texture2D( envMap, uv ).rgb;\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec;\n\t\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\t\treflectVec = reflect( - viewDir, normal );\n\t\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\t#else\n\t\t\t\treflectVec = refract( - viewDir, normal, refractionRatio );\n\t\t\t#endif\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tlightMapIrradiance *= PI;\n\t#endif\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\tvec3 FssEss = specularColor * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(\t\t0, 1,\t\t0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1, 2 ) * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform vec2 morphTargetsTextureSize;\n\t\tvec3 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset, const in int stride ) {\n\t\t\tfloat texelIndex = float( vertexIndex * stride + offset );\n\t\t\tfloat y = floor( texelIndex / morphTargetsTextureSize.x );\n\t\t\tfloat x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tvec3 morphUV = vec3( ( x + 0.5 ) / morphTargetsTextureSize.x, y / morphTargetsTextureSize.y, morphTargetIndex );\n\t\t\treturn texture( morphTargetsTexture, morphUV ).xyz;\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\t#ifndef USE_MORPHNORMALS\n\t\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 1 ) * morphTargetInfluences[ i ];\n\t\t\t#else\n\t\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 2 ) * morphTargetInfluences[ i ];\n\t\t\t#endif\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t\tf.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t\tf.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(\t1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,\t1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,\t1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tfloat transmissionAlpha = 1.0;\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationColor, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );\n\ttransmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tgl_FragColor = texture2D( t2D, vUv );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},bt={common:{diffuse:{value:new vt(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new hr},uv2Transform:{value:new hr},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Ne(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new vt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new vt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new hr}},sprite:{diffuse:{value:new vt(16777215)},opacity:{value:1},center:{value:new Ne(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new hr}}},No={basic:{uniforms:Pr([bt.common,bt.specularmap,bt.envmap,bt.aomap,bt.lightmap,bt.fog]),vertexShader:on.meshbasic_vert,fragmentShader:on.meshbasic_frag},lambert:{uniforms:Pr([bt.common,bt.specularmap,bt.envmap,bt.aomap,bt.lightmap,bt.emissivemap,bt.fog,bt.lights,{emissive:{value:new vt(0)}}]),vertexShader:on.meshlambert_vert,fragmentShader:on.meshlambert_frag},phong:{uniforms:Pr([bt.common,bt.specularmap,bt.envmap,bt.aomap,bt.lightmap,bt.emissivemap,bt.bumpmap,bt.normalmap,bt.displacementmap,bt.fog,bt.lights,{emissive:{value:new vt(0)},specular:{value:new vt(1118481)},shininess:{value:30}}]),vertexShader:on.meshphong_vert,fragmentShader:on.meshphong_frag},standard:{uniforms:Pr([bt.common,bt.envmap,bt.aomap,bt.lightmap,bt.emissivemap,bt.bumpmap,bt.normalmap,bt.displacementmap,bt.roughnessmap,bt.metalnessmap,bt.fog,bt.lights,{emissive:{value:new vt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:on.meshphysical_vert,fragmentShader:on.meshphysical_frag},toon:{uniforms:Pr([bt.common,bt.aomap,bt.lightmap,bt.emissivemap,bt.bumpmap,bt.normalmap,bt.displacementmap,bt.gradientmap,bt.fog,bt.lights,{emissive:{value:new vt(0)}}]),vertexShader:on.meshtoon_vert,fragmentShader:on.meshtoon_frag},matcap:{uniforms:Pr([bt.common,bt.bumpmap,bt.normalmap,bt.displacementmap,bt.fog,{matcap:{value:null}}]),vertexShader:on.meshmatcap_vert,fragmentShader:on.meshmatcap_frag},points:{uniforms:Pr([bt.points,bt.fog]),vertexShader:on.points_vert,fragmentShader:on.points_frag},dashed:{uniforms:Pr([bt.common,bt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:on.linedashed_vert,fragmentShader:on.linedashed_frag},depth:{uniforms:Pr([bt.common,bt.displacementmap]),vertexShader:on.depth_vert,fragmentShader:on.depth_frag},normal:{uniforms:Pr([bt.common,bt.bumpmap,bt.normalmap,bt.displacementmap,{opacity:{value:1}}]),vertexShader:on.meshnormal_vert,fragmentShader:on.meshnormal_frag},sprite:{uniforms:Pr([bt.sprite,bt.fog]),vertexShader:on.sprite_vert,fragmentShader:on.sprite_frag},background:{uniforms:{uvTransform:{value:new hr},t2D:{value:null}},vertexShader:on.background_vert,fragmentShader:on.background_frag},cube:{uniforms:Pr([bt.envmap,{opacity:{value:1}}]),vertexShader:on.cube_vert,fragmentShader:on.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:on.equirect_vert,fragmentShader:on.equirect_frag},distanceRGBA:{uniforms:Pr([bt.common,bt.displacementmap,{referencePosition:{value:new Z},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:on.distanceRGBA_vert,fragmentShader:on.distanceRGBA_frag},shadow:{uniforms:Pr([bt.lights,bt.fog,{color:{value:new vt(0)},opacity:{value:1}}]),vertexShader:on.shadow_vert,fragmentShader:on.shadow_frag}};function ip(p,n,i,c,f,_){const v=new vt(0);let w,S,E=!0===f?0:1,R=null,D=0,I=null;function B(V,$){i.buffers.color.setClear(V.r,V.g,V.b,$,_)}return{getClearColor:function(){return v},setClearColor:function(V,$=1){v.set(V),E=$,B(v,E)},getClearAlpha:function(){return E},setClearAlpha:function(V){E=V,B(v,E)},render:function O(V,$){let U=!1,L=!0===$.isScene?$.background:null;L&&L.isTexture&&(L=n.get(L));const Y=p.xr,z=Y.getSession&&Y.getSession();z&&"additive"===z.environmentBlendMode&&(L=null),null===L?B(v,E):L&&L.isColor&&(B(L,1),U=!0),(p.autoClear||U)&&p.clear(p.autoClearColor,p.autoClearDepth,p.autoClearStencil),L&&(L.isCubeTexture||306===L.mapping)?(void 0===S&&(S=new hi(new _a(1,1,1),new to({name:"BackgroundCubeMaterial",uniforms:Pc(No.cube.uniforms),vertexShader:No.cube.vertexShader,fragmentShader:No.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),S.geometry.deleteAttribute("normal"),S.geometry.deleteAttribute("uv"),S.onBeforeRender=function(Q,re,ae){this.matrixWorld.copyPosition(ae.matrixWorld)},Object.defineProperty(S.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),c.update(S)),S.material.uniforms.envMap.value=L,S.material.uniforms.flipEnvMap.value=L.isCubeTexture&&!1===L.isRenderTargetTexture?-1:1,(R!==L||D!==L.version||I!==p.toneMapping)&&(S.material.needsUpdate=!0,R=L,D=L.version,I=p.toneMapping),V.unshift(S,S.geometry,S.material,0,0,null)):L&&L.isTexture&&(void 0===w&&(w=new hi(new $n(2,2),new to({name:"BackgroundMaterial",uniforms:Pc(No.background.uniforms),vertexShader:No.background.vertexShader,fragmentShader:No.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),w.geometry.deleteAttribute("normal"),Object.defineProperty(w.material,"map",{get:function(){return this.uniforms.t2D.value}}),c.update(w)),w.material.uniforms.t2D.value=L,!0===L.matrixAutoUpdate&&L.updateMatrix(),w.material.uniforms.uvTransform.value.copy(L.matrix),(R!==L||D!==L.version||I!==p.toneMapping)&&(w.material.needsUpdate=!0,R=L,D=L.version,I=p.toneMapping),V.unshift(w,w.geometry,w.material,0,0,null))}}}function X_(p,n,i,c){const f=p.getParameter(p.MAX_VERTEX_ATTRIBS),_=c.isWebGL2?null:n.get("OES_vertex_array_object"),v=c.isWebGL2||null!==_,E={},w=V(null);let S=w;function I(Ce){return c.isWebGL2?p.bindVertexArray(Ce):_.bindVertexArrayOES(Ce)}function O(Ce){return c.isWebGL2?p.deleteVertexArray(Ce):_.deleteVertexArrayOES(Ce)}function V(Ce){const Ie=[],Be=[],Pe=[];for(let Xe=0;Xe<f;Xe++)Ie[Xe]=0,Be[Xe]=0,Pe[Xe]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Ie,enabledAttributes:Be,attributeDivisors:Pe,object:Ce,attributes:{},index:null}}function L(){const Ce=S.newAttributes;for(let Ie=0,Be=Ce.length;Ie<Be;Ie++)Ce[Ie]=0}function Y(Ce){z(Ce,0)}function z(Ce,Ie){const Pe=S.enabledAttributes,Xe=S.attributeDivisors;S.newAttributes[Ce]=1,0===Pe[Ce]&&(p.enableVertexAttribArray(Ce),Pe[Ce]=1),Xe[Ce]!==Ie&&((c.isWebGL2?p:n.get("ANGLE_instanced_arrays"))[c.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](Ce,Ie),Xe[Ce]=Ie)}function Q(){const Ce=S.newAttributes,Ie=S.enabledAttributes;for(let Be=0,Pe=Ie.length;Be<Pe;Be++)Ie[Be]!==Ce[Be]&&(p.disableVertexAttribArray(Be),Ie[Be]=0)}function re(Ce,Ie,Be,Pe,Xe,ct){!0!==c.isWebGL2||Be!==p.INT&&Be!==p.UNSIGNED_INT?p.vertexAttribPointer(Ce,Ie,Be,Pe,Xe,ct):p.vertexAttribIPointer(Ce,Ie,Be,Xe,ct)}function X(){de(),S!==w&&(S=w,I(S.object))}function de(){w.geometry=null,w.program=null,w.wireframe=!1}return{setup:function R(Ce,Ie,Be,Pe,Xe){let ct=!1;if(v){const jt=function B(Ce,Ie,Be){const Pe=!0===Be.wireframe;let Xe=E[Ce.id];void 0===Xe&&(Xe={},E[Ce.id]=Xe);let ct=Xe[Ie.id];void 0===ct&&(ct={},Xe[Ie.id]=ct);let jt=ct[Pe];return void 0===jt&&(jt=V(function D(){return c.isWebGL2?p.createVertexArray():_.createVertexArrayOES()}()),ct[Pe]=jt),jt}(Pe,Be,Ie);S!==jt&&(S=jt,I(S.object)),ct=function $(Ce,Ie){const Be=S.attributes,Pe=Ce.attributes;let Xe=0;for(const ct in Pe){const jt=Be[ct],Ke=Pe[ct];if(void 0===jt||jt.attribute!==Ke||jt.data!==Ke.data)return!0;Xe++}return S.attributesNum!==Xe||S.index!==Ie}(Pe,Xe),ct&&function U(Ce,Ie){const Be={},Pe=Ce.attributes;let Xe=0;for(const ct in Pe){const jt=Pe[ct],Ke={};Ke.attribute=jt,jt.data&&(Ke.data=jt.data),Be[ct]=Ke,Xe++}S.attributes=Be,S.attributesNum=Xe,S.index=Ie}(Pe,Xe)}else{const jt=!0===Ie.wireframe;(S.geometry!==Pe.id||S.program!==Be.id||S.wireframe!==jt)&&(S.geometry=Pe.id,S.program=Be.id,S.wireframe=jt,ct=!0)}!0===Ce.isInstancedMesh&&(ct=!0),null!==Xe&&i.update(Xe,p.ELEMENT_ARRAY_BUFFER),ct&&(function ae(Ce,Ie,Be,Pe){if(!1===c.isWebGL2&&(Ce.isInstancedMesh||Pe.isInstancedBufferGeometry)&&null===n.get("ANGLE_instanced_arrays"))return;L();const Xe=Pe.attributes,ct=Be.getAttributes(),jt=Ie.defaultAttributeValues;for(const Ke in ct){const st=ct[Ke];if(st.location>=0){let Tt=Xe[Ke];if(void 0===Tt&&("instanceMatrix"===Ke&&Ce.instanceMatrix&&(Tt=Ce.instanceMatrix),"instanceColor"===Ke&&Ce.instanceColor&&(Tt=Ce.instanceColor)),void 0!==Tt){const Ot=Tt.normalized,Kt=Tt.itemSize,Ee=i.get(Tt);if(void 0===Ee)continue;const ti=Ee.buffer,tn=Ee.type,yn=Ee.bytesPerElement;if(Tt.isInterleavedBufferAttribute){const Vt=Tt.data,Dn=Vt.stride,En=Tt.offset;if(Vt&&Vt.isInstancedInterleavedBuffer){for(let Qe=0;Qe<st.locationSize;Qe++)z(st.location+Qe,Vt.meshPerAttribute);!0!==Ce.isInstancedMesh&&void 0===Pe._maxInstanceCount&&(Pe._maxInstanceCount=Vt.meshPerAttribute*Vt.count)}else for(let Qe=0;Qe<st.locationSize;Qe++)Y(st.location+Qe);p.bindBuffer(p.ARRAY_BUFFER,ti);for(let Qe=0;Qe<st.locationSize;Qe++)re(st.location+Qe,Kt/st.locationSize,tn,Ot,Dn*yn,(En+Kt/st.locationSize*Qe)*yn)}else{if(Tt.isInstancedBufferAttribute){for(let Vt=0;Vt<st.locationSize;Vt++)z(st.location+Vt,Tt.meshPerAttribute);!0!==Ce.isInstancedMesh&&void 0===Pe._maxInstanceCount&&(Pe._maxInstanceCount=Tt.meshPerAttribute*Tt.count)}else for(let Vt=0;Vt<st.locationSize;Vt++)Y(st.location+Vt);p.bindBuffer(p.ARRAY_BUFFER,ti);for(let Vt=0;Vt<st.locationSize;Vt++)re(st.location+Vt,Kt/st.locationSize,tn,Ot,Kt*yn,Kt/st.locationSize*Vt*yn)}}else if(void 0!==jt){const Ot=jt[Ke];if(void 0!==Ot)switch(Ot.length){case 2:p.vertexAttrib2fv(st.location,Ot);break;case 3:p.vertexAttrib3fv(st.location,Ot);break;case 4:p.vertexAttrib4fv(st.location,Ot);break;default:p.vertexAttrib1fv(st.location,Ot)}}}}Q()}(Ce,Ie,Be,Pe),null!==Xe&&p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,i.get(Xe).buffer))},reset:X,resetDefaultState:de,dispose:function ve(){X();for(const Ce in E){const Ie=E[Ce];for(const Be in Ie){const Pe=Ie[Be];for(const Xe in Pe)O(Pe[Xe].object),delete Pe[Xe];delete Ie[Be]}delete E[Ce]}},releaseStatesOfGeometry:function ze(Ce){if(void 0===E[Ce.id])return;const Ie=E[Ce.id];for(const Be in Ie){const Pe=Ie[Be];for(const Xe in Pe)O(Pe[Xe].object),delete Pe[Xe];delete Ie[Be]}delete E[Ce.id]},releaseStatesOfProgram:function Fe(Ce){for(const Ie in E){const Be=E[Ie];if(void 0===Be[Ce.id])continue;const Pe=Be[Ce.id];for(const Xe in Pe)O(Pe[Xe].object),delete Pe[Xe];delete Be[Ce.id]}},initAttributes:L,enableAttribute:Y,disableUnusedAttributes:Q}}function Bo(p,n,i,c){const f=c.isWebGL2;let _;this.setMode=function v(S){_=S},this.render=function E(S,R){p.drawArrays(_,S,R),i.update(R,_,1)},this.renderInstances=function w(S,R,D){if(0===D)return;let I,O;if(f)I=p,O="drawArraysInstanced";else if(I=n.get("ANGLE_instanced_arrays"),O="drawArraysInstancedANGLE",null===I)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");I[O](_,S,R,D),i.update(R,_,D)}}function Bc(p,n,i){let c;function _(ae){if("highp"===ae){if(p.getShaderPrecisionFormat(p.VERTEX_SHADER,p.HIGH_FLOAT).precision>0&&p.getShaderPrecisionFormat(p.FRAGMENT_SHADER,p.HIGH_FLOAT).precision>0)return"highp";ae="mediump"}return"mediump"===ae&&p.getShaderPrecisionFormat(p.VERTEX_SHADER,p.MEDIUM_FLOAT).precision>0&&p.getShaderPrecisionFormat(p.FRAGMENT_SHADER,p.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const v="undefined"!=typeof WebGL2RenderingContext&&p instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&p instanceof WebGL2ComputeRenderingContext;let E=void 0!==i.precision?i.precision:"highp";const w=_(E);w!==E&&(console.warn("THREE.WebGLRenderer:",E,"not supported, using",w,"instead."),E=w);const S=v||n.has("WEBGL_draw_buffers"),R=!0===i.logarithmicDepthBuffer,D=p.getParameter(p.MAX_TEXTURE_IMAGE_UNITS),I=p.getParameter(p.MAX_VERTEX_TEXTURE_IMAGE_UNITS),O=p.getParameter(p.MAX_TEXTURE_SIZE),B=p.getParameter(p.MAX_CUBE_MAP_TEXTURE_SIZE),V=p.getParameter(p.MAX_VERTEX_ATTRIBS),$=p.getParameter(p.MAX_VERTEX_UNIFORM_VECTORS),U=p.getParameter(p.MAX_VARYING_VECTORS),L=p.getParameter(p.MAX_FRAGMENT_UNIFORM_VECTORS),Y=I>0,z=v||n.has("OES_texture_float");return{isWebGL2:v,drawBuffers:S,getMaxAnisotropy:function f(){if(void 0!==c)return c;if(!0===n.has("EXT_texture_filter_anisotropic")){const ae=n.get("EXT_texture_filter_anisotropic");c=p.getParameter(ae.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else c=0;return c},getMaxPrecision:_,precision:E,logarithmicDepthBuffer:R,maxTextures:D,maxVertexTextures:I,maxTextureSize:O,maxCubemapSize:B,maxAttributes:V,maxVertexUniforms:$,maxVaryings:U,maxFragmentUniforms:L,vertexTextures:Y,floatFragmentTextures:z,floatVertexTextures:Y&&z,maxSamples:v?p.getParameter(p.MAX_SAMPLES):0}}function jr(p){const n=this;let i=null,c=0,f=!1,_=!1;const v=new wr,E=new hr,w={value:null,needsUpdate:!1};function S(){w.value!==i&&(w.value=i,w.needsUpdate=c>0),n.numPlanes=c,n.numIntersection=0}function R(D,I,O,B){const V=null!==D?D.length:0;let $=null;if(0!==V){if($=w.value,!0!==B||null===$){const U=O+4*V,L=I.matrixWorldInverse;E.getNormalMatrix(L),(null===$||$.length<U)&&($=new Float32Array(U));for(let Y=0,z=O;Y!==V;++Y,z+=4)v.copy(D[Y]).applyMatrix4(L,E),v.normal.toArray($,z),$[z+3]=v.constant}w.value=$,w.needsUpdate=!0}return n.numPlanes=V,n.numIntersection=0,$}this.uniform=w,this.numPlanes=0,this.numIntersection=0,this.init=function(D,I,O){const B=0!==D.length||I||0!==c||f;return f=I,i=R(D,O,0),c=D.length,B},this.beginShadows=function(){_=!0,R(null)},this.endShadows=function(){_=!1,S()},this.setState=function(D,I,O){const B=D.clippingPlanes,V=D.clipIntersection,$=D.clipShadows,U=p.get(D);if(!f||null===B||0===B.length||_&&!$)_?R(null):S();else{const L=_?0:c,Y=4*L;let z=U.clippingState||null;w.value=z,z=R(B,I,Y,O);for(let Q=0;Q!==Y;++Q)z[Q]=i[Q];U.clippingState=z,this.numIntersection=V?this.numPlanes:0,this.numPlanes+=L}}}function Kv(p){let n=new WeakMap;function i(v,E){return 303===E?v.mapping=301:304===E&&(v.mapping=302),v}function f(v){const E=v.target;E.removeEventListener("dispose",f);const w=n.get(E);void 0!==w&&(n.delete(E),w.dispose())}return{get:function c(v){if(v&&v.isTexture&&!1===v.isRenderTargetTexture){const E=v.mapping;if(303===E||304===E){if(n.has(v))return i(n.get(v).texture,v.mapping);{const w=v.image;if(w&&w.height>0){const S=new Wu(w.height/2);return S.fromEquirectangularTexture(p,v),n.set(v,S),v.addEventListener("dispose",f),i(S.texture,v.mapping)}return null}}}return v},dispose:function _(){n=new WeakMap}}}No.physical={uniforms:Pr([No.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Ne(1,1)},clearcoatNormalMap:{value:null},sheen:{value:0},sheenColor:{value:new vt(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Ne},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new vt(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new vt(1,1,1)},specularColorMap:{value:null}}]),vertexShader:on.meshphysical_vert,fragmentShader:on.meshphysical_frag};class jl extends il{constructor(n=-1,i=1,c=1,f=-1,_=.1,v=2e3){super(),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=n,this.right=i,this.top=c,this.bottom=f,this.near=_,this.far=v,this.updateProjectionMatrix()}copy(n,i){return super.copy(n,i),this.left=n.left,this.right=n.right,this.top=n.top,this.bottom=n.bottom,this.near=n.near,this.far=n.far,this.zoom=n.zoom,this.view=null===n.view?null:Object.assign({},n.view),this}setViewOffset(n,i,c,f,_,v){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=n,this.view.fullHeight=i,this.view.offsetX=c,this.view.offsetY=f,this.view.width=_,this.view.height=v,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const n=(this.right-this.left)/(2*this.zoom),i=(this.top-this.bottom)/(2*this.zoom),c=(this.right+this.left)/2,f=(this.top+this.bottom)/2;let _=c-n,v=c+n,E=f+i,w=f-i;if(null!==this.view&&this.view.enabled){const S=(this.right-this.left)/this.view.fullWidth/this.zoom,R=(this.top-this.bottom)/this.view.fullHeight/this.zoom;_+=S*this.view.offsetX,v=_+S*this.view.width,E-=R*this.view.offsetY,w=E-R*this.view.height}this.projectionMatrix.makeOrthographic(_,v,E,w,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(n){const i=super.toJSON(n);return i.object.zoom=this.zoom,i.object.left=this.left,i.object.right=this.right,i.object.top=this.top,i.object.bottom=this.bottom,i.object.near=this.near,i.object.far=this.far,null!==this.view&&(i.object.view=Object.assign({},this.view)),i}}jl.prototype.isOrthographicCamera=!0;class Ta extends to{constructor(n){super(n),this.type="RawShaderMaterial"}}Ta.prototype.isRawShaderMaterial=!0;const so=Math.pow(2,8),rp=[.125,.215,.35,.446,.526,.582],Wm=5+rp.length,al=new jl,{_lodPlanes:ql,_sizeLods:nr,_sigmas:nd}=Y_(),Lh=new vt;let jm=null;const Uc=(1+Math.sqrt(5))/2,Xl=1/Uc,$m=[new Z(1,1,1),new Z(-1,1,1),new Z(1,1,-1),new Z(-1,1,-1),new Z(0,Uc,Xl),new Z(0,Uc,-Xl),new Z(Xl,0,Uc),new Z(-Xl,0,Uc),new Z(Uc,Xl,0),new Z(-Uc,Xl,0)];class qm{constructor(n){this._renderer=n,this._pingPongRenderTarget=null,this._blurMaterial=function K_(p){const n=new Float32Array(p),i=new Z(0,1,0);return new Ta({name:"SphericalGaussianBlur",defines:{n:p},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(20),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}fromScene(n,i=0,c=.1,f=100){jm=this._renderer.getRenderTarget();const _=this._allocateTargets();return this._sceneToCubeUV(n,c,f,_),i>0&&this._blur(_,0,0,i),this._applyPMREM(_),this._cleanup(_),_}fromEquirectangular(n,i=null){return this._fromTexture(n,i)}fromCubemap(n,i=null){return this._fromTexture(n,i)}compileCubemapShader(){null===this._cubemapShader&&(this._cubemapShader=Xm(),this._compileMaterial(this._cubemapShader))}compileEquirectangularShader(){null===this._equirectShader&&(this._equirectShader=sp(),this._compileMaterial(this._equirectShader))}dispose(){this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose(),null!==this._cubemapShader&&this._cubemapShader.dispose(),null!==this._equirectShader&&this._equirectShader.dispose();for(let n=0;n<ql.length;n++)ql[n].dispose()}_cleanup(n){this._renderer.setRenderTarget(jm),n.scissorTest=!1,id(n,0,0,n.width,n.height)}_fromTexture(n,i){jm=this._renderer.getRenderTarget();const c=i||this._allocateTargets(n);return this._textureToCubeUV(n,c),this._applyPMREM(c),this._cleanup(c),c}_allocateTargets(n){const i={magFilter:ri,minFilter:ri,generateMipmaps:!1,type:gs,format:_i,encoding:Dl,depthBuffer:!1},c=Fh(i);return c.depthBuffer=!n,null===this._pingPongRenderTarget&&(this._pingPongRenderTarget=Fh(i)),c}_compileMaterial(n){const i=new hi(ql[0],n);this._renderer.compile(i,al)}_sceneToCubeUV(n,i,c,f){const E=new Qi(90,1,i,c),w=[1,-1,1,1,1,1],S=[1,1,1,-1,-1,-1],R=this._renderer,D=R.autoClear,I=R.toneMapping;R.getClearColor(Lh),R.toneMapping=0,R.autoClear=!1;const O=new as({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),B=new hi(new _a,O);let V=!1;const $=n.background;$?$.isColor&&(O.color.copy($),n.background=null,V=!0):(O.color.copy(Lh),V=!0);for(let U=0;U<6;U++){const L=U%3;0===L?(E.up.set(0,w[U],0),E.lookAt(S[U],0,0)):1===L?(E.up.set(0,0,w[U]),E.lookAt(0,S[U],0)):(E.up.set(0,w[U],0),E.lookAt(0,0,S[U])),id(f,L*so,U>2?so:0,so,so),R.setRenderTarget(f),V&&R.render(B,E),R.render(n,E)}B.geometry.dispose(),B.material.dispose(),R.toneMapping=I,R.autoClear=D,n.background=$}_textureToCubeUV(n,i){const c=this._renderer,f=301===n.mapping||302===n.mapping;f?(null===this._cubemapShader&&(this._cubemapShader=Xm()),this._cubemapShader.uniforms.flipEnvMap.value=!1===n.isRenderTargetTexture?-1:1):null===this._equirectShader&&(this._equirectShader=sp());const _=f?this._cubemapShader:this._equirectShader,v=new hi(ql[0],_),E=_.uniforms;E.envMap.value=n,f||E.texelSize.value.set(1/n.image.width,1/n.image.height),id(i,0,0,3*so,2*so),c.setRenderTarget(i),c.render(v,al)}_applyPMREM(n){const i=this._renderer,c=i.autoClear;i.autoClear=!1;for(let f=1;f<Wm;f++){const _=Math.sqrt(nd[f]*nd[f]-nd[f-1]*nd[f-1]);this._blur(n,f-1,f,_,$m[(f-1)%$m.length])}i.autoClear=c}_blur(n,i,c,f,_){const v=this._pingPongRenderTarget;this._halfBlur(n,v,i,c,f,"latitudinal",_),this._halfBlur(v,n,c,c,f,"longitudinal",_)}_halfBlur(n,i,c,f,_,v,E){const w=this._renderer,S=this._blurMaterial;"latitudinal"!==v&&"longitudinal"!==v&&console.error("blur direction must be either latitudinal or longitudinal!");const D=new hi(ql[f],S),I=S.uniforms,O=nr[c]-1,B=isFinite(_)?Math.PI/(2*O):2*Math.PI/39,V=_/B,$=isFinite(_)?1+Math.floor(3*V):20;$>20&&console.warn(`sigmaRadians, ${_}, is too large and will clip, as it requested ${$} samples when the maximum is set to 20`);const U=[];let L=0;for(let re=0;re<20;++re){const ae=re/V,ve=Math.exp(-ae*ae/2);U.push(ve),0===re?L+=ve:re<$&&(L+=2*ve)}for(let re=0;re<U.length;re++)U[re]=U[re]/L;I.envMap.value=n.texture,I.samples.value=$,I.weights.value=U,I.latitudinal.value="latitudinal"===v,E&&(I.poleAxis.value=E),I.dTheta.value=B,I.mipInt.value=8-c;const Y=nr[f];id(i,3*Math.max(0,so-2*Y),(0===f?0:2*so)+2*Y*(f>4?f-8+4:0),3*Y,2*Y),w.setRenderTarget(i),w.render(D,al)}}function Y_(){const p=[],n=[],i=[];let c=8;for(let f=0;f<Wm;f++){const _=Math.pow(2,c);n.push(_);let v=1/_;f>4?v=rp[f-8+4-1]:0===f&&(v=0),i.push(v);const E=1/(_-1),w=-E/2,S=1+E/2,R=[w,w,S,w,S,S,w,w,S,S,w,S],D=6,I=6,O=3,B=2,V=1,$=new Float32Array(O*I*D),U=new Float32Array(B*I*D),L=new Float32Array(V*I*D);for(let z=0;z<D;z++){const Q=z%3*2/3-1,re=z>2?0:-1;$.set([Q,re,0,Q+2/3,re,0,Q+2/3,re+1,0,Q,re,0,Q+2/3,re+1,0,Q,re+1,0],O*I*z),U.set(R,B*I*z),L.set([z,z,z,z,z,z],V*I*z)}const Y=new cn;Y.setAttribute("position",new Un($,O)),Y.setAttribute("uv",new Un(U,B)),Y.setAttribute("faceIndex",new Un(L,V)),p.push(Y),c>4&&c--}return{_lodPlanes:p,_sizeLods:n,_sigmas:i}}function Fh(p){const n=new Is(3*so,3*so,p);return n.texture.mapping=306,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function id(p,n,i,c,f){p.viewport.set(n,i,c,f),p.scissor.set(n,i,c,f)}function sp(){const p=new Ne(1,1);return new Ta({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:p}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = texture2D ( envMap, uv ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = texture2D ( envMap, uv ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = texture2D ( envMap, uv ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = texture2D ( envMap, uv ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function Xm(){return new Ta({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function Nh(p){let n=new WeakMap,i=null;function _(E){const w=E.target;w.removeEventListener("dispose",_);const S=n.get(w);void 0!==S&&(n.delete(w),S.dispose())}return{get:function c(E){if(E&&E.isTexture){const w=E.mapping,S=303===w||304===w,R=301===w||302===w;if(S||R){if(E.isRenderTargetTexture&&!0===E.needsPMREMUpdate){E.needsPMREMUpdate=!1;let D=n.get(E);return null===i&&(i=new qm(p)),D=S?i.fromEquirectangular(E,D):i.fromCubemap(E,D),n.set(E,D),D.texture}if(n.has(E))return n.get(E).texture;{const D=E.image;if(S&&D&&D.height>0||R&&D&&function f(E){let w=0;const S=6;for(let R=0;R<S;R++)void 0!==E[R]&&w++;return w===S}(D)){null===i&&(i=new qm(p));const I=S?i.fromEquirectangular(E):i.fromCubemap(E);return n.set(E,I),E.addEventListener("dispose",_),I.texture}return null}}}return E},dispose:function v(){n=new WeakMap,null!==i&&(i.dispose(),i=null)}}}function Z_(p){const n={};function i(c){if(void 0!==n[c])return n[c];let f;switch(c){case"WEBGL_depth_texture":f=p.getExtension("WEBGL_depth_texture")||p.getExtension("MOZ_WEBGL_depth_texture")||p.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":f=p.getExtension("EXT_texture_filter_anisotropic")||p.getExtension("MOZ_EXT_texture_filter_anisotropic")||p.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":f=p.getExtension("WEBGL_compressed_texture_s3tc")||p.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||p.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":f=p.getExtension("WEBGL_compressed_texture_pvrtc")||p.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:f=p.getExtension(c)}return n[c]=f,f}return{has:function(c){return null!==i(c)},init:function(c){c.isWebGL2?i("EXT_color_buffer_float"):(i("WEBGL_depth_texture"),i("OES_texture_float"),i("OES_texture_half_float"),i("OES_texture_half_float_linear"),i("OES_standard_derivatives"),i("OES_element_index_uint"),i("OES_vertex_array_object"),i("ANGLE_instanced_arrays")),i("OES_texture_float_linear"),i("EXT_color_buffer_half_float"),i("WEBGL_multisampled_render_to_texture")},get:function(c){const f=i(c);return null===f&&console.warn("THREE.WebGLRenderer: "+c+" extension not supported."),f}}}function kc(p,n,i,c){const f={},_=new WeakMap;function v(D){const I=D.target;null!==I.index&&n.remove(I.index);for(const B in I.attributes)n.remove(I.attributes[B]);I.removeEventListener("dispose",v),delete f[I.id];const O=_.get(I);O&&(n.remove(O),_.delete(I)),c.releaseStatesOfGeometry(I),!0===I.isInstancedBufferGeometry&&delete I._maxInstanceCount,i.memory.geometries--}function S(D){const I=[],O=D.index,B=D.attributes.position;let V=0;if(null!==O){const L=O.array;V=O.version;for(let Y=0,z=L.length;Y<z;Y+=3){const Q=L[Y+0],re=L[Y+1],ae=L[Y+2];I.push(Q,re,re,ae,ae,Q)}}else{V=B.version;for(let Y=0,z=B.array.length/3-1;Y<z;Y+=3){const Q=Y+0,re=Y+1,ae=Y+2;I.push(Q,re,re,ae,ae,Q)}}const $=new(Fi(I)?kl:Ro)(I,1);$.version=V;const U=_.get(D);U&&n.remove(U),_.set(D,$)}return{get:function E(D,I){return!0===f[I.id]||(I.addEventListener("dispose",v),f[I.id]=!0,i.memory.geometries++),I},update:function w(D){const I=D.attributes;for(const B in I)n.update(I[B],p.ARRAY_BUFFER);const O=D.morphAttributes;for(const B in O){const V=O[B];for(let $=0,U=V.length;$<U;$++)n.update(V[$],p.ARRAY_BUFFER)}},getWireframeAttribute:function R(D){const I=_.get(D);if(I){const O=D.index;null!==O&&I.version<O.version&&S(D)}else S(D);return _.get(D)}}}function op(p,n,i,c){const f=c.isWebGL2;let _,E,w;this.setMode=function v(I){_=I},this.setIndex=function S(I){E=I.type,w=I.bytesPerElement},this.render=function R(I,O){p.drawElements(_,O,E,I*w),i.update(O,_,1)},this.renderInstances=function D(I,O,B){if(0===B)return;let V,$;if(f)V=p,$="drawElementsInstanced";else if(V=n.get("ANGLE_instanced_arrays"),$="drawElementsInstancedANGLE",null===V)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");V[$](_,O,E,I*w,B),i.update(O,_,B)}}function Uo(p){const i={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:i,programs:null,autoReset:!0,reset:function f(){i.frame++,i.calls=0,i.triangles=0,i.points=0,i.lines=0},update:function c(_,v,E){switch(i.calls++,v){case p.TRIANGLES:i.triangles+=E*(_/3);break;case p.LINES:i.lines+=E*(_/2);break;case p.LINE_STRIP:i.lines+=E*(_-1);break;case p.LINE_LOOP:i.lines+=E*_;break;case p.POINTS:i.points+=E*_;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",v)}}}}class Ym extends li{constructor(n=null,i=1,c=1,f=1){super(null),this.image={data:n,width:i,height:c,depth:f},this.magFilter=sn,this.minFilter=sn,this.wrapR=Hi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}function Km(p,n){return p[0]-n[0]}function SE(p,n){return Math.abs(n[1])-Math.abs(p[1])}function J_(p,n){let i=1;const c=n.isInterleavedBufferAttribute?n.data.array:n.array;c instanceof Int8Array?i=127:c instanceof Int16Array?i=32767:c instanceof Int32Array?i=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",c),p.divideScalar(i)}function Zv(p,n,i){const c={},f=new Float32Array(8),_=new WeakMap,v=new Z,E=[];for(let S=0;S<8;S++)E[S]=[S,0];return{update:function w(S,R,D,I){const O=S.morphTargetInfluences;if(!0===n.isWebGL2){const B=R.morphAttributes.position.length;let V=_.get(R);if(void 0===V||V.count!==B){let de=function(){Fe.dispose(),_.delete(R),R.removeEventListener("dispose",de)};void 0!==V&&V.texture.dispose();const L=void 0!==R.morphAttributes.normal,Y=R.morphAttributes.position,z=R.morphAttributes.normal||[],re=!0===L?2:1;let ae=R.attributes.position.count*re,ve=1;ae>n.maxTextureSize&&(ve=Math.ceil(ae/n.maxTextureSize),ae=n.maxTextureSize);const ze=new Float32Array(ae*ve*4*B),Fe=new Ym(ze,ae,ve,B);Fe.format=_i,Fe.type=Mo,Fe.needsUpdate=!0;const X=4*re;for(let Ce=0;Ce<B;Ce++){const Ie=Y[Ce],Be=z[Ce],Pe=ae*ve*4*Ce;for(let Xe=0;Xe<Ie.count;Xe++){v.fromBufferAttribute(Ie,Xe),!0===Ie.normalized&&J_(v,Ie);const ct=Xe*X;ze[Pe+ct+0]=v.x,ze[Pe+ct+1]=v.y,ze[Pe+ct+2]=v.z,ze[Pe+ct+3]=0,!0===L&&(v.fromBufferAttribute(Be,Xe),!0===Be.normalized&&J_(v,Be),ze[Pe+ct+4]=v.x,ze[Pe+ct+5]=v.y,ze[Pe+ct+6]=v.z,ze[Pe+ct+7]=0)}}V={count:B,texture:Fe,size:new Ne(ae,ve)},_.set(R,V),R.addEventListener("dispose",de)}let $=0;for(let L=0;L<O.length;L++)$+=O[L];const U=R.morphTargetsRelative?1:1-$;I.getUniforms().setValue(p,"morphTargetBaseInfluence",U),I.getUniforms().setValue(p,"morphTargetInfluences",O),I.getUniforms().setValue(p,"morphTargetsTexture",V.texture,i),I.getUniforms().setValue(p,"morphTargetsTextureSize",V.size)}else{const B=void 0===O?0:O.length;let V=c[R.id];if(void 0===V||V.length!==B){V=[];for(let z=0;z<B;z++)V[z]=[z,0];c[R.id]=V}for(let z=0;z<B;z++){const Q=V[z];Q[0]=z,Q[1]=O[z]}V.sort(SE);for(let z=0;z<8;z++)z<B&&V[z][1]?(E[z][0]=V[z][0],E[z][1]=V[z][1]):(E[z][0]=Number.MAX_SAFE_INTEGER,E[z][1]=0);E.sort(Km);const $=R.morphAttributes.position,U=R.morphAttributes.normal;let L=0;for(let z=0;z<8;z++){const Q=E[z],re=Q[0],ae=Q[1];re!==Number.MAX_SAFE_INTEGER&&ae?($&&R.getAttribute("morphTarget"+z)!==$[re]&&R.setAttribute("morphTarget"+z,$[re]),U&&R.getAttribute("morphNormal"+z)!==U[re]&&R.setAttribute("morphNormal"+z,U[re]),f[z]=ae,L+=ae):($&&!0===R.hasAttribute("morphTarget"+z)&&R.deleteAttribute("morphTarget"+z),U&&!0===R.hasAttribute("morphNormal"+z)&&R.deleteAttribute("morphNormal"+z),f[z]=0)}const Y=R.morphTargetsRelative?1:1-L;I.getUniforms().setValue(p,"morphTargetBaseInfluence",Y),I.getUniforms().setValue(p,"morphTargetInfluences",f)}}}}function Jv(p,n,i,c){let f=new WeakMap;function E(w){const S=w.target;S.removeEventListener("dispose",E),i.remove(S.instanceMatrix),null!==S.instanceColor&&i.remove(S.instanceColor)}return{update:function _(w){const S=c.render.frame,D=n.get(w,w.geometry);return f.get(D)!==S&&(n.update(D),f.set(D,S)),w.isInstancedMesh&&(!1===w.hasEventListener("dispose",E)&&w.addEventListener("dispose",E),i.update(w.instanceMatrix,p.ARRAY_BUFFER),null!==w.instanceColor&&i.update(w.instanceColor,p.ARRAY_BUFFER)),D},dispose:function v(){f=new WeakMap}}}Ym.prototype.isDataTexture2DArray=!0;class ap extends li{constructor(n=null,i=1,c=1,f=1){super(null),this.image={data:n,width:i,height:c,depth:f},this.magFilter=sn,this.minFilter=sn,this.wrapR=Hi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}ap.prototype.isDataTexture3D=!0;const Q_=new li,lp=new Ym,cp=new ap,ey=new va,Zm=[],ty=[],Jm=new Float32Array(16),Bh=new Float32Array(9),Qv=new Float32Array(4);function rd(p,n,i){const c=p[0];if(c<=0||c>0)return p;const f=n*i;let _=Zm[f];if(void 0===_&&(_=new Float32Array(f),Zm[f]=_),0!==n){c.toArray(_,0);for(let v=1,E=0;v!==n;++v)E+=i,p[v].toArray(_,E)}return _}function Ms(p,n){if(p.length!==n.length)return!1;for(let i=0,c=p.length;i<c;i++)if(p[i]!==n[i])return!1;return!0}function Or(p,n){for(let i=0,c=n.length;i<c;i++)p[i]=n[i]}function oo(p,n){let i=ty[n];void 0===i&&(i=new Int32Array(n),ty[n]=i);for(let c=0;c!==n;++c)i[c]=p.allocateTextureUnit();return i}function Yl(p,n){const i=this.cache;i[0]!==n&&(p.uniform1f(this.addr,n),i[0]=n)}function up(p,n){const i=this.cache;if(void 0!==n.x)(i[0]!==n.x||i[1]!==n.y)&&(p.uniform2f(this.addr,n.x,n.y),i[0]=n.x,i[1]=n.y);else{if(Ms(i,n))return;p.uniform2fv(this.addr,n),Or(i,n)}}function sd(p,n){const i=this.cache;if(void 0!==n.x)(i[0]!==n.x||i[1]!==n.y||i[2]!==n.z)&&(p.uniform3f(this.addr,n.x,n.y,n.z),i[0]=n.x,i[1]=n.y,i[2]=n.z);else if(void 0!==n.r)(i[0]!==n.r||i[1]!==n.g||i[2]!==n.b)&&(p.uniform3f(this.addr,n.r,n.g,n.b),i[0]=n.r,i[1]=n.g,i[2]=n.b);else{if(Ms(i,n))return;p.uniform3fv(this.addr,n),Or(i,n)}}function ny(p,n){const i=this.cache;if(void 0!==n.x)(i[0]!==n.x||i[1]!==n.y||i[2]!==n.z||i[3]!==n.w)&&(p.uniform4f(this.addr,n.x,n.y,n.z,n.w),i[0]=n.x,i[1]=n.y,i[2]=n.z,i[3]=n.w);else{if(Ms(i,n))return;p.uniform4fv(this.addr,n),Or(i,n)}}function iy(p,n){const i=this.cache,c=n.elements;if(void 0===c){if(Ms(i,n))return;p.uniformMatrix2fv(this.addr,!1,n),Or(i,n)}else{if(Ms(i,c))return;Qv.set(c),p.uniformMatrix2fv(this.addr,!1,Qv),Or(i,c)}}function ry(p,n){const i=this.cache,c=n.elements;if(void 0===c){if(Ms(i,n))return;p.uniformMatrix3fv(this.addr,!1,n),Or(i,n)}else{if(Ms(i,c))return;Bh.set(c),p.uniformMatrix3fv(this.addr,!1,Bh),Or(i,c)}}function Kl(p,n){const i=this.cache,c=n.elements;if(void 0===c){if(Ms(i,n))return;p.uniformMatrix4fv(this.addr,!1,n),Or(i,n)}else{if(Ms(i,c))return;Jm.set(c),p.uniformMatrix4fv(this.addr,!1,Jm),Or(i,c)}}function Vc(p,n){const i=this.cache;i[0]!==n&&(p.uniform1i(this.addr,n),i[0]=n)}function Xr(p,n){const i=this.cache;Ms(i,n)||(p.uniform2iv(this.addr,n),Or(i,n))}function od(p,n){const i=this.cache;Ms(i,n)||(p.uniform3iv(this.addr,n),Or(i,n))}function Qm(p,n){const i=this.cache;Ms(i,n)||(p.uniform4iv(this.addr,n),Or(i,n))}function sy(p,n){const i=this.cache;i[0]!==n&&(p.uniform1ui(this.addr,n),i[0]=n)}function e0(p,n){const i=this.cache;Ms(i,n)||(p.uniform2uiv(this.addr,n),Or(i,n))}function t0(p,n){const i=this.cache;Ms(i,n)||(p.uniform3uiv(this.addr,n),Or(i,n))}function Zl(p,n){const i=this.cache;Ms(i,n)||(p.uniform4uiv(this.addr,n),Or(i,n))}function eg(p,n,i){const c=this.cache,f=i.allocateTextureUnit();c[0]!==f&&(p.uniform1i(this.addr,f),c[0]=f),i.safeSetTexture2D(n||Q_,f)}function n0(p,n,i){const c=this.cache,f=i.allocateTextureUnit();c[0]!==f&&(p.uniform1i(this.addr,f),c[0]=f),i.setTexture3D(n||cp,f)}function r0(p,n,i){const c=this.cache,f=i.allocateTextureUnit();c[0]!==f&&(p.uniform1i(this.addr,f),c[0]=f),i.safeSetTextureCube(n||ey,f)}function s0(p,n,i){const c=this.cache,f=i.allocateTextureUnit();c[0]!==f&&(p.uniform1i(this.addr,f),c[0]=f),i.setTexture2DArray(n||lp,f)}function tg(p,n){p.uniform1fv(this.addr,n)}function oy(p,n){const i=rd(n,this.size,2);p.uniform2fv(this.addr,i)}function ay(p,n){const i=rd(n,this.size,3);p.uniform3fv(this.addr,i)}function dp(p,n){const i=rd(n,this.size,4);p.uniform4fv(this.addr,i)}function ko(p,n){const i=rd(n,this.size,4);p.uniformMatrix2fv(this.addr,!1,i)}function ly(p,n){const i=rd(n,this.size,9);p.uniformMatrix3fv(this.addr,!1,i)}function o0(p,n){const i=rd(n,this.size,16);p.uniformMatrix4fv(this.addr,!1,i)}function gr(p,n){p.uniform1iv(this.addr,n)}function Yr(p,n){p.uniform2iv(this.addr,n)}function hp(p,n){p.uniform3iv(this.addr,n)}function fp(p,n){p.uniform4iv(this.addr,n)}function Vo(p,n){p.uniform1uiv(this.addr,n)}function a0(p,n){p.uniform2uiv(this.addr,n)}function Hc(p,n){p.uniform3uiv(this.addr,n)}function cy(p,n){p.uniform4uiv(this.addr,n)}function ad(p,n,i){const c=n.length,f=oo(i,c);p.uniform1iv(this.addr,f);for(let _=0;_!==c;++_)i.safeSetTexture2D(n[_]||Q_,f[_])}function Uh(p,n,i){const c=n.length,f=oo(i,c);p.uniform1iv(this.addr,f);for(let _=0;_!==c;++_)i.setTexture3D(n[_]||cp,f[_])}function pp(p,n,i){const c=n.length,f=oo(i,c);p.uniform1iv(this.addr,f);for(let _=0;_!==c;++_)i.safeSetTextureCube(n[_]||ey,f[_])}function mp(p,n,i){const c=n.length,f=oo(i,c);p.uniform1iv(this.addr,f);for(let _=0;_!==c;++_)i.setTexture2DArray(n[_]||lp,f[_])}function zc(p,n,i){this.id=p,this.addr=i,this.cache=[],this.setValue=function Mn(p){switch(p){case 5126:return Yl;case 35664:return up;case 35665:return sd;case 35666:return ny;case 35674:return iy;case 35675:return ry;case 35676:return Kl;case 5124:case 35670:return Vc;case 35667:case 35671:return Xr;case 35668:case 35672:return od;case 35669:case 35673:return Qm;case 5125:return sy;case 36294:return e0;case 36295:return t0;case 36296:return Zl;case 35678:case 36198:case 36298:case 36306:case 35682:return eg;case 35679:case 36299:case 36307:return n0;case 35680:case 36300:case 36308:case 36293:return r0;case 36289:case 36303:case 36311:case 36292:return s0}}(n.type)}function ng(p,n,i){this.id=p,this.addr=i,this.cache=[],this.size=n.size,this.setValue=function Gc(p){switch(p){case 5126:return tg;case 35664:return oy;case 35665:return ay;case 35666:return dp;case 35674:return ko;case 35675:return ly;case 35676:return o0;case 5124:case 35670:return gr;case 35667:case 35671:return Yr;case 35668:case 35672:return hp;case 35669:case 35673:return fp;case 5125:return Vo;case 36294:return a0;case 36295:return Hc;case 36296:return cy;case 35678:case 36198:case 36298:case 36306:case 35682:return ad;case 35679:case 36299:case 36307:return Uh;case 35680:case 36300:case 36308:case 36293:return pp;case 36289:case 36303:case 36311:case 36292:return mp}}(n.type)}function ll(p){this.id=p,this.seq=[],this.map={}}ng.prototype.updateCache=function(p){const n=this.cache;p instanceof Float32Array&&n.length!==p.length&&(this.cache=new Float32Array(p.length)),Or(n,p)},ll.prototype.setValue=function(p,n,i){const c=this.seq;for(let f=0,_=c.length;f!==_;++f){const v=c[f];v.setValue(p,n[v.id],i)}};const cl=/(\w+)(\])?(\[|\.)?/g;function uy(p,n){p.seq.push(n),p.map[n.id]=n}function ig(p,n,i){const c=p.name,f=c.length;for(cl.lastIndex=0;;){const _=cl.exec(c),v=cl.lastIndex;let E=_[1];const S=_[3];if("]"===_[2]&&(E|=0),void 0===S||"["===S&&v+2===f){uy(i,void 0===S?new zc(E,p,n):new ng(E,p,n));break}{let D=i.map[E];void 0===D&&(D=new ll(E),uy(i,D)),i=D}}}function Wc(p,n){this.seq=[],this.map={};const i=p.getProgramParameter(n,p.ACTIVE_UNIFORMS);for(let c=0;c<i;++c){const f=p.getActiveUniform(n,c);ig(f,p.getUniformLocation(n,f.name),this)}}function dy(p,n,i){const c=p.createShader(n);return p.shaderSource(c,i),p.compileShader(c),c}Wc.prototype.setValue=function(p,n,i,c){const f=this.map[n];void 0!==f&&f.setValue(p,i,c)},Wc.prototype.setOptional=function(p,n,i){const c=n[i];void 0!==c&&this.setValue(p,i,c)},Wc.upload=function(p,n,i,c){for(let f=0,_=n.length;f!==_;++f){const v=n[f],E=i[v.id];!1!==E.needsUpdate&&v.setValue(p,E.value,c)}},Wc.seqWithValue=function(p,n){const i=[];for(let c=0,f=p.length;c!==f;++c){const _=p[c];_.id in n&&i.push(_)}return i};let rg=0;function og(p,n,i){const c=p.getShaderParameter(n,p.COMPILE_STATUS),f=p.getShaderInfoLog(n).trim();return c&&""===f?"":i.toUpperCase()+"\n\n"+f+"\n\n"+function ld(p){const n=p.split("\n");for(let i=0;i<n.length;i++)n[i]=i+1+": "+n[i];return n.join("\n")}(p.getShaderSource(n))}function gp(p,n){const i=function sg(p){switch(p){case Dl:return["Linear","( value )"];case Ai:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",p),["Linear","( value )"]}}(n);return"vec4 "+p+"( vec4 value ) { return LinearTo"+i[0]+i[1]+"; }"}function hy(p,n){let i;switch(n){case 1:i="Linear";break;case 2:i="Reinhard";break;case 3:i="OptimizedCineon";break;case 4:i="ACESFilmic";break;case 5:i="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",n),i="Linear"}return"vec3 "+p+"( vec3 color ) { return "+i+"ToneMapping( color ); }"}function cd(p){return""!==p}function l0(p,n){return p.replace(/NUM_DIR_LIGHTS/g,n.numDirLights).replace(/NUM_SPOT_LIGHTS/g,n.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,n.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,n.numPointLights).replace(/NUM_HEMI_LIGHTS/g,n.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,n.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,n.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,n.numPointLightShadows)}function jc(p,n){return p.replace(/NUM_CLIPPING_PLANES/g,n.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,n.numClippingPlanes-n.numClipIntersection)}const yp=/^[ \t]*#include +<([\w\d./]+)>/gm;function Jl(p){return p.replace(yp,c0)}function c0(p,n){const i=on[n];if(void 0===i)throw new Error("Can not resolve #include <"+n+">");return Jl(i)}const Ql=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,lg=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function cg(p){return p.replace(lg,kh).replace(Ql,py)}function py(p,n,i,c){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),kh(0,n,i,c)}function kh(p,n,i,c){let f="";for(let _=parseInt(n);_<parseInt(i);_++)f+=c.replace(/\[\s*i\s*\]/g,"[ "+_+" ]").replace(/UNROLLED_LOOP_INDEX/g,_);return f}function ud(p){let n="precision "+p.precision+" float;\nprecision "+p.precision+" int;";return"highp"===p.precision?n+="\n#define HIGH_PRECISION":"mediump"===p.precision?n+="\n#define MEDIUM_PRECISION":"lowp"===p.precision&&(n+="\n#define LOW_PRECISION"),n}function ec(p,n,i,c){const f=p.getContext(),_=i.defines;let v=i.vertexShader,E=i.fragmentShader;const w=function my(p){let n="SHADOWMAP_TYPE_BASIC";return 1===p.shadowMapType?n="SHADOWMAP_TYPE_PCF":2===p.shadowMapType?n="SHADOWMAP_TYPE_PCF_SOFT":3===p.shadowMapType&&(n="SHADOWMAP_TYPE_VSM"),n}(i),S=function us(p){let n="ENVMAP_TYPE_CUBE";if(p.envMap)switch(p.envMapMode){case 301:case 302:n="ENVMAP_TYPE_CUBE";break;case 306:case 307:n="ENVMAP_TYPE_CUBE_UV"}return n}(i),R=function dn(p){let n="ENVMAP_MODE_REFLECTION";if(p.envMap)switch(p.envMapMode){case 302:case 307:n="ENVMAP_MODE_REFRACTION"}return n}(i),D=function ao(p){let n="ENVMAP_BLENDING_NONE";if(p.envMap)switch(p.combine){case 0:n="ENVMAP_BLENDING_MULTIPLY";break;case 1:n="ENVMAP_BLENDING_MIX";break;case 2:n="ENVMAP_BLENDING_ADD"}return n}(i),I=i.isWebGL2?"":function fy(p){return[p.extensionDerivatives||p.envMapCubeUV||p.bumpMap||p.tangentSpaceNormalMap||p.clearcoatNormalMap||p.flatShading||"physical"===p.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(p.extensionFragDepth||p.logarithmicDepthBuffer)&&p.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",p.extensionDrawBuffers&&p.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(p.extensionShaderTextureLOD||p.envMap||p.transmission)&&p.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(cd).join("\n")}(i),O=function _p(p){const n=[];for(const i in p){const c=p[i];!1!==c&&n.push("#define "+i+" "+c)}return n.join("\n")}(_),B=f.createProgram();let V,$,U=i.glslVersion?"#version "+i.glslVersion+"\n":"";i.isRawShaderMaterial?(V=[O].filter(cd).join("\n"),V.length>0&&(V+="\n"),$=[I,O].filter(cd).join("\n"),$.length>0&&($+="\n")):(V=[ud(i),"#define SHADER_NAME "+i.shaderName,O,i.instancing?"#define USE_INSTANCING":"",i.instancingColor?"#define USE_INSTANCING_COLOR":"",i.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define MAX_BONES "+i.maxBones,i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+R:"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMap&&i.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",i.normalMap&&i.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.displacementMap&&i.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",i.specularColorMap?"#define USE_SPECULARCOLORMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.transmission?"#define USE_TRANSMISSION":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.thicknessMap?"#define USE_THICKNESSMAP":"",i.sheenColorMap?"#define USE_SHEENCOLORMAP":"",i.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",i.vertexTangents?"#define USE_TANGENT":"",i.vertexColors?"#define USE_COLOR":"",i.vertexAlphas?"#define USE_COLOR_ALPHA":"",i.vertexUvs?"#define USE_UV":"",i.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",i.flatShading?"#define FLAT_SHADED":"",i.skinning?"#define USE_SKINNING":"",i.useVertexTexture?"#define BONE_TEXTURE":"",i.morphTargets?"#define USE_MORPHTARGETS":"",i.morphNormals&&!1===i.flatShading?"#define USE_MORPHNORMALS":"",i.morphTargets&&i.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",i.morphTargets&&i.isWebGL2?"#define MORPHTARGETS_COUNT "+i.morphTargetsCount:"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+w:"",i.sizeAttenuation?"#define USE_SIZEATTENUATION":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.logarithmicDepthBuffer&&i.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(cd).join("\n"),$=[I,ud(i),"#define SHADER_NAME "+i.shaderName,O,i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.matcap?"#define USE_MATCAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+S:"",i.envMap?"#define "+R:"",i.envMap?"#define "+D:"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMap&&i.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",i.normalMap&&i.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",i.clearcoat?"#define USE_CLEARCOAT":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",i.specularColorMap?"#define USE_SPECULARCOLORMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.alphaTest?"#define USE_ALPHATEST":"",i.sheen?"#define USE_SHEEN":"",i.sheenColorMap?"#define USE_SHEENCOLORMAP":"",i.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",i.transmission?"#define USE_TRANSMISSION":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.thicknessMap?"#define USE_THICKNESSMAP":"",i.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",i.vertexTangents?"#define USE_TANGENT":"",i.vertexColors||i.instancingColor?"#define USE_COLOR":"",i.vertexAlphas?"#define USE_COLOR_ALPHA":"",i.vertexUvs?"#define USE_UV":"",i.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",i.gradientMap?"#define USE_GRADIENTMAP":"",i.flatShading?"#define FLAT_SHADED":"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+w:"",i.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",i.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.logarithmicDepthBuffer&&i.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(i.extensionShaderTextureLOD||i.envMap)&&i.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==i.toneMapping?"#define TONE_MAPPING":"",0!==i.toneMapping?on.tonemapping_pars_fragment:"",0!==i.toneMapping?hy("toneMapping",i.toneMapping):"",i.dithering?"#define DITHERING":"",i.transparent?"":"#define OPAQUE",on.encodings_pars_fragment,gp("linearToOutputTexel",i.outputEncoding),i.depthPacking?"#define DEPTH_PACKING "+i.depthPacking:"","\n"].filter(cd).join("\n")),v=Jl(v),v=l0(v,i),v=jc(v,i),E=Jl(E),E=l0(E,i),E=jc(E,i),v=cg(v),E=cg(E),i.isWebGL2&&!0!==i.isRawShaderMaterial&&(U="#version 300 es\n",V=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+V,$=["#define varying in",i.glslVersion===Tv?"":"layout(location = 0) out highp vec4 pc_fragColor;",i.glslVersion===Tv?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+$);const Y=U+$+E,z=dy(f,f.VERTEX_SHADER,U+V+v),Q=dy(f,f.FRAGMENT_SHADER,Y);if(f.attachShader(B,z),f.attachShader(B,Q),void 0!==i.index0AttributeName?f.bindAttribLocation(B,0,i.index0AttributeName):!0===i.morphTargets&&f.bindAttribLocation(B,0,"position"),f.linkProgram(B),p.debug.checkShaderErrors){const ve=f.getProgramInfoLog(B).trim(),ze=f.getShaderInfoLog(z).trim(),Fe=f.getShaderInfoLog(Q).trim();let X=!0,de=!0;if(!1===f.getProgramParameter(B,f.LINK_STATUS)){X=!1;const Ce=og(f,z,"vertex"),Ie=og(f,Q,"fragment");console.error("THREE.WebGLProgram: Shader Error "+f.getError()+" - VALIDATE_STATUS "+f.getProgramParameter(B,f.VALIDATE_STATUS)+"\n\nProgram Info Log: "+ve+"\n"+Ce+"\n"+Ie)}else""!==ve?console.warn("THREE.WebGLProgram: Program Info Log:",ve):(""===ze||""===Fe)&&(de=!1);de&&(this.diagnostics={runnable:X,programLog:ve,vertexShader:{log:ze,prefix:V},fragmentShader:{log:Fe,prefix:$}})}let re,ae;return f.deleteShader(z),f.deleteShader(Q),this.getUniforms=function(){return void 0===re&&(re=new Wc(f,B)),re},this.getAttributes=function(){return void 0===ae&&(ae=function ag(p,n){const i={},c=p.getProgramParameter(n,p.ACTIVE_ATTRIBUTES);for(let f=0;f<c;f++){const _=p.getActiveAttrib(n,f),v=_.name;let E=1;_.type===p.FLOAT_MAT2&&(E=2),_.type===p.FLOAT_MAT3&&(E=3),_.type===p.FLOAT_MAT4&&(E=4),i[v]={type:_.type,location:p.getAttribLocation(n,v),locationSize:E}}return i}(f,B)),ae},this.destroy=function(){c.releaseStatesOfProgram(this),f.deleteProgram(B),this.program=void 0},this.name=i.shaderName,this.id=rg++,this.cacheKey=n,this.usedTimes=1,this.program=B,this.vertexShader=z,this.fragmentShader=Q,this}let ug=0;class u0{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(n){const c=n.fragmentShader,f=this._getShaderStage(n.vertexShader),_=this._getShaderStage(c),v=this._getShaderCacheForMaterial(n);return!1===v.has(f)&&(v.add(f),f.usedTimes++),!1===v.has(_)&&(v.add(_),_.usedTimes++),this}remove(n){const i=this.materialCache.get(n);for(const c of i)c.usedTimes--,0===c.usedTimes&&this.shaderCache.delete(c);return this.materialCache.delete(n),this}getVertexShaderID(n){return this._getShaderStage(n.vertexShader).id}getFragmentShaderID(n){return this._getShaderStage(n.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(n){const i=this.materialCache;return!1===i.has(n)&&i.set(n,new Set),i.get(n)}_getShaderStage(n){const i=this.shaderCache;if(!1===i.has(n)){const c=new gy;i.set(n,c)}return i.get(n)}}class gy{constructor(){this.id=ug++,this.usedTimes=0}}function d0(p,n,i,c,f,_,v){const E=new Vf,w=new u0,S=[],R=f.isWebGL2,D=f.logarithmicDepthBuffer,I=f.floatVertexTextures,O=f.maxVertexUniforms,B=f.vertexTextures;let V=f.precision;const $={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function L(X,de,Ce,Ie,Be){const Pe=Ie.fog,ct=(X.isMeshStandardMaterial?i:n).get(X.envMap||(X.isMeshStandardMaterial?Ie.environment:null)),jt=$[X.type],Ke=Be.isSkinnedMesh?function U(X){const Ce=X.skeleton.bones;if(I)return 1024;{const Be=Math.floor((O-20)/4),Pe=Math.min(Be,Ce.length);return Pe<Ce.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+Ce.length+" bones. This GPU supports "+Pe+"."),0):Pe}}(Be):0;let st,Tt,Ot,Kt;if(null!==X.precision&&(V=f.getMaxPrecision(X.precision),V!==X.precision&&console.warn("THREE.WebGLProgram.getParameters:",X.precision,"not supported, using",V,"instead.")),jt){const Vt=No[jt];st=Vt.vertexShader,Tt=Vt.fragmentShader}else st=X.vertexShader,Tt=X.fragmentShader,w.update(X),Ot=w.getVertexShaderID(X),Kt=w.getFragmentShaderID(X);const Ee=p.getRenderTarget(),tn=X.clearcoat>0;return{isWebGL2:R,shaderID:jt,shaderName:X.type,vertexShader:st,fragmentShader:Tt,defines:X.defines,customVertexShaderID:Ot,customFragmentShaderID:Kt,isRawShaderMaterial:!0===X.isRawShaderMaterial,glslVersion:X.glslVersion,precision:V,instancing:!0===Be.isInstancedMesh,instancingColor:!0===Be.isInstancedMesh&&null!==Be.instanceColor,supportsVertexTextures:B,outputEncoding:null===Ee?p.outputEncoding:!0===Ee.isXRRenderTarget?Ee.texture.encoding:Dl,map:!!X.map,matcap:!!X.matcap,envMap:!!ct,envMapMode:ct&&ct.mapping,envMapCubeUV:!!ct&&(306===ct.mapping||307===ct.mapping),lightMap:!!X.lightMap,aoMap:!!X.aoMap,emissiveMap:!!X.emissiveMap,bumpMap:!!X.bumpMap,normalMap:!!X.normalMap,objectSpaceNormalMap:1===X.normalMapType,tangentSpaceNormalMap:0===X.normalMapType,decodeVideoTexture:!!X.map&&!0===X.map.isVideoTexture&&X.map.encoding===Ai,clearcoat:tn,clearcoatMap:tn&&!!X.clearcoatMap,clearcoatRoughnessMap:tn&&!!X.clearcoatRoughnessMap,clearcoatNormalMap:tn&&!!X.clearcoatNormalMap,displacementMap:!!X.displacementMap,roughnessMap:!!X.roughnessMap,metalnessMap:!!X.metalnessMap,specularMap:!!X.specularMap,specularIntensityMap:!!X.specularIntensityMap,specularColorMap:!!X.specularColorMap,transparent:X.transparent,alphaMap:!!X.alphaMap,alphaTest:X.alphaTest>0,gradientMap:!!X.gradientMap,sheen:X.sheen>0,sheenColorMap:!!X.sheenColorMap,sheenRoughnessMap:!!X.sheenRoughnessMap,transmission:X.transmission>0,transmissionMap:!!X.transmissionMap,thicknessMap:!!X.thicknessMap,combine:X.combine,vertexTangents:!!X.normalMap&&!!Be.geometry&&!!Be.geometry.attributes.tangent,vertexColors:X.vertexColors,vertexAlphas:!0===X.vertexColors&&!!Be.geometry&&!!Be.geometry.attributes.color&&4===Be.geometry.attributes.color.itemSize,vertexUvs:!!(X.map||X.bumpMap||X.normalMap||X.specularMap||X.alphaMap||X.emissiveMap||X.roughnessMap||X.metalnessMap||X.clearcoatMap||X.clearcoatRoughnessMap||X.clearcoatNormalMap||X.displacementMap||X.transmissionMap||X.thicknessMap||X.specularIntensityMap||X.specularColorMap||X.sheenColorMap||X.sheenRoughnessMap),uvsVertexOnly:!(X.map||X.bumpMap||X.normalMap||X.specularMap||X.alphaMap||X.emissiveMap||X.roughnessMap||X.metalnessMap||X.clearcoatNormalMap||X.transmission>0||X.transmissionMap||X.thicknessMap||X.specularIntensityMap||X.specularColorMap||X.sheen>0||X.sheenColorMap||X.sheenRoughnessMap||!X.displacementMap),fog:!!Pe,useFog:X.fog,fogExp2:Pe&&Pe.isFogExp2,flatShading:!!X.flatShading,sizeAttenuation:X.sizeAttenuation,logarithmicDepthBuffer:D,skinning:!0===Be.isSkinnedMesh&&Ke>0,maxBones:Ke,useVertexTexture:I,morphTargets:!!Be.geometry&&!!Be.geometry.morphAttributes.position,morphNormals:!!Be.geometry&&!!Be.geometry.morphAttributes.normal,morphTargetsCount:Be.geometry&&Be.geometry.morphAttributes.position?Be.geometry.morphAttributes.position.length:0,numDirLights:de.directional.length,numPointLights:de.point.length,numSpotLights:de.spot.length,numRectAreaLights:de.rectArea.length,numHemiLights:de.hemi.length,numDirLightShadows:de.directionalShadowMap.length,numPointLightShadows:de.pointShadowMap.length,numSpotLightShadows:de.spotShadowMap.length,numClippingPlanes:v.numPlanes,numClipIntersection:v.numIntersection,dithering:X.dithering,shadowMapEnabled:p.shadowMap.enabled&&Ce.length>0,shadowMapType:p.shadowMap.type,toneMapping:X.toneMapped?p.toneMapping:0,physicallyCorrectLights:p.physicallyCorrectLights,premultipliedAlpha:X.premultipliedAlpha,doubleSided:2===X.side,flipSided:1===X.side,depthPacking:void 0!==X.depthPacking&&X.depthPacking,index0AttributeName:X.index0AttributeName,extensionDerivatives:X.extensions&&X.extensions.derivatives,extensionFragDepth:X.extensions&&X.extensions.fragDepth,extensionDrawBuffers:X.extensions&&X.extensions.drawBuffers,extensionShaderTextureLOD:X.extensions&&X.extensions.shaderTextureLOD,rendererExtensionFragDepth:R||c.has("EXT_frag_depth"),rendererExtensionDrawBuffers:R||c.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:R||c.has("EXT_shader_texture_lod"),customProgramCacheKey:X.customProgramCacheKey()}},getProgramCacheKey:function Y(X){const de=[];if(X.shaderID?de.push(X.shaderID):(de.push(X.customVertexShaderID),de.push(X.customFragmentShaderID)),void 0!==X.defines)for(const Ce in X.defines)de.push(Ce),de.push(X.defines[Ce]);return!1===X.isRawShaderMaterial&&(function z(X,de){X.push(de.precision),X.push(de.outputEncoding),X.push(de.envMapMode),X.push(de.combine),X.push(de.vertexUvs),X.push(de.fogExp2),X.push(de.sizeAttenuation),X.push(de.maxBones),X.push(de.morphTargetsCount),X.push(de.numDirLights),X.push(de.numPointLights),X.push(de.numSpotLights),X.push(de.numHemiLights),X.push(de.numRectAreaLights),X.push(de.numDirLightShadows),X.push(de.numPointLightShadows),X.push(de.numSpotLightShadows),X.push(de.shadowMapType),X.push(de.toneMapping),X.push(de.numClippingPlanes),X.push(de.numClipIntersection)}(de,X),function Q(X,de){E.disableAll(),de.isWebGL2&&E.enable(0),de.supportsVertexTextures&&E.enable(1),de.instancing&&E.enable(2),de.instancingColor&&E.enable(3),de.map&&E.enable(4),de.matcap&&E.enable(5),de.envMap&&E.enable(6),de.envMapCubeUV&&E.enable(7),de.lightMap&&E.enable(8),de.aoMap&&E.enable(9),de.emissiveMap&&E.enable(10),de.bumpMap&&E.enable(11),de.normalMap&&E.enable(12),de.objectSpaceNormalMap&&E.enable(13),de.tangentSpaceNormalMap&&E.enable(14),de.clearcoat&&E.enable(15),de.clearcoatMap&&E.enable(16),de.clearcoatRoughnessMap&&E.enable(17),de.clearcoatNormalMap&&E.enable(18),de.displacementMap&&E.enable(19),de.specularMap&&E.enable(20),de.roughnessMap&&E.enable(21),de.metalnessMap&&E.enable(22),de.gradientMap&&E.enable(23),de.alphaMap&&E.enable(24),de.alphaTest&&E.enable(25),de.vertexColors&&E.enable(26),de.vertexAlphas&&E.enable(27),de.vertexUvs&&E.enable(28),de.vertexTangents&&E.enable(29),de.uvsVertexOnly&&E.enable(30),de.fog&&E.enable(31),X.push(E.mask),E.disableAll(),de.useFog&&E.enable(0),de.flatShading&&E.enable(1),de.logarithmicDepthBuffer&&E.enable(2),de.skinning&&E.enable(3),de.useVertexTexture&&E.enable(4),de.morphTargets&&E.enable(5),de.morphNormals&&E.enable(6),de.premultipliedAlpha&&E.enable(7),de.shadowMapEnabled&&E.enable(8),de.physicallyCorrectLights&&E.enable(9),de.doubleSided&&E.enable(10),de.flipSided&&E.enable(11),de.depthPacking&&E.enable(12),de.dithering&&E.enable(13),de.specularIntensityMap&&E.enable(14),de.specularColorMap&&E.enable(15),de.transmission&&E.enable(16),de.transmissionMap&&E.enable(17),de.thicknessMap&&E.enable(18),de.sheen&&E.enable(19),de.sheenColorMap&&E.enable(20),de.sheenRoughnessMap&&E.enable(21),de.decodeVideoTexture&&E.enable(22),de.transparent&&E.enable(23),X.push(E.mask)}(de,X),de.push(p.outputEncoding)),de.push(X.customProgramCacheKey),de.join()},getUniforms:function re(X){const de=$[X.type];let Ce;return Ce=de?Im.clone(No[de].uniforms):X.uniforms,Ce},acquireProgram:function ae(X,de){let Ce;for(let Ie=0,Be=S.length;Ie<Be;Ie++){const Pe=S[Ie];if(Pe.cacheKey===de){Ce=Pe,++Ce.usedTimes;break}}return void 0===Ce&&(Ce=new ec(p,de,X,_),S.push(Ce)),Ce},releaseProgram:function ve(X){if(0==--X.usedTimes){const de=S.indexOf(X);S[de]=S[S.length-1],S.pop(),X.destroy()}},releaseShaderCache:function ze(X){w.remove(X)},programs:S,dispose:function Fe(){w.dispose()}}}function _y(){let p=new WeakMap;return{get:function n(_){let v=p.get(_);return void 0===v&&(v={},p.set(_,v)),v},remove:function i(_){p.delete(_)},update:function c(_,v,E){p.get(_)[v]=E},dispose:function f(){p=new WeakMap}}}function Vh(p,n){return p.groupOrder!==n.groupOrder?p.groupOrder-n.groupOrder:p.renderOrder!==n.renderOrder?p.renderOrder-n.renderOrder:p.material.id!==n.material.id?p.material.id-n.material.id:p.z!==n.z?p.z-n.z:p.id-n.id}function Ho(p,n){return p.groupOrder!==n.groupOrder?p.groupOrder-n.groupOrder:p.renderOrder!==n.renderOrder?p.renderOrder-n.renderOrder:p.z!==n.z?n.z-p.z:p.id-n.id}function Yn(){const p=[];let n=0;const i=[],c=[],f=[];function v(D,I,O,B,V,$){let U=p[n];return void 0===U?(U={id:D.id,object:D,geometry:I,material:O,groupOrder:B,renderOrder:D.renderOrder,z:V,group:$},p[n]=U):(U.id=D.id,U.object=D,U.geometry=I,U.material=O,U.groupOrder=B,U.renderOrder=D.renderOrder,U.z=V,U.group=$),n++,U}return{opaque:i,transmissive:c,transparent:f,init:function _(){n=0,i.length=0,c.length=0,f.length=0},push:function E(D,I,O,B,V,$){const U=v(D,I,O,B,V,$);O.transmission>0?c.push(U):!0===O.transparent?f.push(U):i.push(U)},unshift:function w(D,I,O,B,V,$){const U=v(D,I,O,B,V,$);O.transmission>0?c.unshift(U):!0===O.transparent?f.unshift(U):i.unshift(U)},finish:function R(){for(let D=n,I=p.length;D<I;D++){const O=p[D];if(null===O.id)break;O.id=null,O.object=null,O.geometry=null,O.material=null,O.group=null}},sort:function S(D,I){i.length>1&&i.sort(D||Vh),c.length>1&&c.sort(I||Ho),f.length>1&&f.sort(I||Ho)}}}function dd(){let p=new WeakMap;return{get:function n(c,f){let _;return!1===p.has(c)?(_=new Yn,p.set(c,[_])):f>=p.get(c).length?(_=new Yn,p.get(c).push(_)):_=p.get(c)[f],_},dispose:function i(){p=new WeakMap}}}function Hh(){const p={};return{get:function(n){if(void 0!==p[n.id])return p[n.id];let i;switch(n.type){case"DirectionalLight":i={direction:new Z,color:new vt};break;case"SpotLight":i={position:new Z,direction:new Z,color:new vt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":i={position:new Z,color:new vt,distance:0,decay:0};break;case"HemisphereLight":i={direction:new Z,skyColor:new vt,groundColor:new vt};break;case"RectAreaLight":i={color:new vt,position:new Z,halfWidth:new Z,halfHeight:new Z}}return p[n.id]=i,i}}}let Gh=0;function dg(p,n){return(n.castShadow?1:0)-(p.castShadow?1:0)}function Kr(p,n){const i=new Hh,c=function $c(){const p={};return{get:function(n){if(void 0!==p[n.id])return p[n.id];let i;switch(n.type){case"DirectionalLight":case"SpotLight":i={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ne};break;case"PointLight":i={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ne,shadowCameraNear:1,shadowCameraFar:1e3}}return p[n.id]=i,i}}}(),f={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let R=0;R<9;R++)f.probe.push(new Z);const _=new Z,v=new Wt,E=new Wt;return{setup:function w(R,D){let I=0,O=0,B=0;for(let ze=0;ze<9;ze++)f.probe[ze].set(0,0,0);let V=0,$=0,U=0,L=0,Y=0,z=0,Q=0,re=0;R.sort(dg);const ae=!0!==D?Math.PI:1;for(let ze=0,Fe=R.length;ze<Fe;ze++){const X=R[ze],de=X.color,Ce=X.intensity,Ie=X.distance,Be=X.shadow&&X.shadow.map?X.shadow.map.texture:null;if(X.isAmbientLight)I+=de.r*Ce*ae,O+=de.g*Ce*ae,B+=de.b*Ce*ae;else if(X.isLightProbe)for(let Pe=0;Pe<9;Pe++)f.probe[Pe].addScaledVector(X.sh.coefficients[Pe],Ce);else if(X.isDirectionalLight){const Pe=i.get(X);if(Pe.color.copy(X.color).multiplyScalar(X.intensity*ae),X.castShadow){const Xe=X.shadow,ct=c.get(X);ct.shadowBias=Xe.bias,ct.shadowNormalBias=Xe.normalBias,ct.shadowRadius=Xe.radius,ct.shadowMapSize=Xe.mapSize,f.directionalShadow[V]=ct,f.directionalShadowMap[V]=Be,f.directionalShadowMatrix[V]=X.shadow.matrix,z++}f.directional[V]=Pe,V++}else if(X.isSpotLight){const Pe=i.get(X);if(Pe.position.setFromMatrixPosition(X.matrixWorld),Pe.color.copy(de).multiplyScalar(Ce*ae),Pe.distance=Ie,Pe.coneCos=Math.cos(X.angle),Pe.penumbraCos=Math.cos(X.angle*(1-X.penumbra)),Pe.decay=X.decay,X.castShadow){const Xe=X.shadow,ct=c.get(X);ct.shadowBias=Xe.bias,ct.shadowNormalBias=Xe.normalBias,ct.shadowRadius=Xe.radius,ct.shadowMapSize=Xe.mapSize,f.spotShadow[U]=ct,f.spotShadowMap[U]=Be,f.spotShadowMatrix[U]=X.shadow.matrix,re++}f.spot[U]=Pe,U++}else if(X.isRectAreaLight){const Pe=i.get(X);Pe.color.copy(de).multiplyScalar(Ce),Pe.halfWidth.set(.5*X.width,0,0),Pe.halfHeight.set(0,.5*X.height,0),f.rectArea[L]=Pe,L++}else if(X.isPointLight){const Pe=i.get(X);if(Pe.color.copy(X.color).multiplyScalar(X.intensity*ae),Pe.distance=X.distance,Pe.decay=X.decay,X.castShadow){const Xe=X.shadow,ct=c.get(X);ct.shadowBias=Xe.bias,ct.shadowNormalBias=Xe.normalBias,ct.shadowRadius=Xe.radius,ct.shadowMapSize=Xe.mapSize,ct.shadowCameraNear=Xe.camera.near,ct.shadowCameraFar=Xe.camera.far,f.pointShadow[$]=ct,f.pointShadowMap[$]=Be,f.pointShadowMatrix[$]=X.shadow.matrix,Q++}f.point[$]=Pe,$++}else if(X.isHemisphereLight){const Pe=i.get(X);Pe.skyColor.copy(X.color).multiplyScalar(Ce*ae),Pe.groundColor.copy(X.groundColor).multiplyScalar(Ce*ae),f.hemi[Y]=Pe,Y++}}L>0&&(n.isWebGL2||!0===p.has("OES_texture_float_linear")?(f.rectAreaLTC1=bt.LTC_FLOAT_1,f.rectAreaLTC2=bt.LTC_FLOAT_2):!0===p.has("OES_texture_half_float_linear")?(f.rectAreaLTC1=bt.LTC_HALF_1,f.rectAreaLTC2=bt.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),f.ambient[0]=I,f.ambient[1]=O,f.ambient[2]=B;const ve=f.hash;(ve.directionalLength!==V||ve.pointLength!==$||ve.spotLength!==U||ve.rectAreaLength!==L||ve.hemiLength!==Y||ve.numDirectionalShadows!==z||ve.numPointShadows!==Q||ve.numSpotShadows!==re)&&(f.directional.length=V,f.spot.length=U,f.rectArea.length=L,f.point.length=$,f.hemi.length=Y,f.directionalShadow.length=z,f.directionalShadowMap.length=z,f.pointShadow.length=Q,f.pointShadowMap.length=Q,f.spotShadow.length=re,f.spotShadowMap.length=re,f.directionalShadowMatrix.length=z,f.pointShadowMatrix.length=Q,f.spotShadowMatrix.length=re,ve.directionalLength=V,ve.pointLength=$,ve.spotLength=U,ve.rectAreaLength=L,ve.hemiLength=Y,ve.numDirectionalShadows=z,ve.numPointShadows=Q,ve.numSpotShadows=re,f.version=Gh++)},setupView:function S(R,D){let I=0,O=0,B=0,V=0,$=0;const U=D.matrixWorldInverse;for(let L=0,Y=R.length;L<Y;L++){const z=R[L];if(z.isDirectionalLight){const Q=f.directional[I];Q.direction.setFromMatrixPosition(z.matrixWorld),_.setFromMatrixPosition(z.target.matrixWorld),Q.direction.sub(_),Q.direction.transformDirection(U),I++}else if(z.isSpotLight){const Q=f.spot[B];Q.position.setFromMatrixPosition(z.matrixWorld),Q.position.applyMatrix4(U),Q.direction.setFromMatrixPosition(z.matrixWorld),_.setFromMatrixPosition(z.target.matrixWorld),Q.direction.sub(_),Q.direction.transformDirection(U),B++}else if(z.isRectAreaLight){const Q=f.rectArea[V];Q.position.setFromMatrixPosition(z.matrixWorld),Q.position.applyMatrix4(U),E.identity(),v.copy(z.matrixWorld),v.premultiply(U),E.extractRotation(v),Q.halfWidth.set(.5*z.width,0,0),Q.halfHeight.set(0,.5*z.height,0),Q.halfWidth.applyMatrix4(E),Q.halfHeight.applyMatrix4(E),V++}else if(z.isPointLight){const Q=f.point[O];Q.position.setFromMatrixPosition(z.matrixWorld),Q.position.applyMatrix4(U),O++}else if(z.isHemisphereLight){const Q=f.hemi[$];Q.direction.setFromMatrixPosition(z.matrixWorld),Q.direction.transformDirection(U),Q.direction.normalize(),$++}}},state:f}}function vp(p,n){const i=new Kr(p,n),c=[],f=[];return{init:function _(){c.length=0,f.length=0},state:{lightsArray:c,shadowsArray:f,lights:i},setupLights:function w(D){i.setup(c,D)},setupLightsView:function S(D){i.setupView(c,D)},pushLight:function v(D){c.push(D)},pushShadow:function E(D){f.push(D)}}}function hg(p,n){let i=new WeakMap;return{get:function c(_,v=0){let E;return!1===i.has(_)?(E=new vp(p,n),i.set(_,[E])):v>=i.get(_).length?(E=new vp(p,n),i.get(_).push(E)):E=i.get(_)[v],E},dispose:function f(){i=new WeakMap}}}class zh extends pr{constructor(n){super(),this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(n)}copy(n){return super.copy(n),this.depthPacking=n.depthPacking,this.map=n.map,this.alphaMap=n.alphaMap,this.displacementMap=n.displacementMap,this.displacementScale=n.displacementScale,this.displacementBias=n.displacementBias,this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this}}zh.prototype.isMeshDepthMaterial=!0;class tc extends pr{constructor(n){super(),this.type="MeshDistanceMaterial",this.referencePosition=new Z,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(n)}copy(n){return super.copy(n),this.referencePosition.copy(n.referencePosition),this.nearDistance=n.nearDistance,this.farDistance=n.farDistance,this.map=n.map,this.alphaMap=n.alphaMap,this.displacementMap=n.displacementMap,this.displacementScale=n.displacementScale,this.displacementBias=n.displacementBias,this}}tc.prototype.isMeshDistanceMaterial=!0;function h0(p,n,i){let c=new Ea;const f=new Ne,_=new Ne,v=new ei,E=new zh({depthPacking:3201}),w=new tc,S={},R=i.maxTextureSize,D={0:1,1:0,2:2},I=new to({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ne},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),O=I.clone();O.defines.HORIZONTAL_PASS=1;const B=new cn;B.setAttribute("position",new Un(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const V=new hi(B,I),$=this;function U(z,Q){const re=n.update(V);I.defines.VSM_SAMPLES!==z.blurSamples&&(I.defines.VSM_SAMPLES=z.blurSamples,O.defines.VSM_SAMPLES=z.blurSamples,I.needsUpdate=!0,O.needsUpdate=!0),I.uniforms.shadow_pass.value=z.map.texture,I.uniforms.resolution.value=z.mapSize,I.uniforms.radius.value=z.radius,p.setRenderTarget(z.mapPass),p.clear(),p.renderBufferDirect(Q,null,re,I,V,null),O.uniforms.shadow_pass.value=z.mapPass.texture,O.uniforms.resolution.value=z.mapSize,O.uniforms.radius.value=z.radius,p.setRenderTarget(z.map),p.clear(),p.renderBufferDirect(Q,null,re,O,V,null)}function L(z,Q,re,ae,ve,ze,Fe){let X=null;const de=!0===ae.isPointLight?z.customDistanceMaterial:z.customDepthMaterial;if(X=void 0!==de?de:!0===ae.isPointLight?w:E,p.localClippingEnabled&&!0===re.clipShadows&&0!==re.clippingPlanes.length||re.displacementMap&&0!==re.displacementScale||re.alphaMap&&re.alphaTest>0){const Ce=X.uuid,Ie=re.uuid;let Be=S[Ce];void 0===Be&&(Be={},S[Ce]=Be);let Pe=Be[Ie];void 0===Pe&&(Pe=X.clone(),Be[Ie]=Pe),X=Pe}return X.visible=re.visible,X.wireframe=re.wireframe,X.side=3===Fe?null!==re.shadowSide?re.shadowSide:re.side:null!==re.shadowSide?re.shadowSide:D[re.side],X.alphaMap=re.alphaMap,X.alphaTest=re.alphaTest,X.clipShadows=re.clipShadows,X.clippingPlanes=re.clippingPlanes,X.clipIntersection=re.clipIntersection,X.displacementMap=re.displacementMap,X.displacementScale=re.displacementScale,X.displacementBias=re.displacementBias,X.wireframeLinewidth=re.wireframeLinewidth,X.linewidth=re.linewidth,!0===ae.isPointLight&&!0===X.isMeshDistanceMaterial&&(X.referencePosition.setFromMatrixPosition(ae.matrixWorld),X.nearDistance=ve,X.farDistance=ze),X}function Y(z,Q,re,ae,ve){if(!1===z.visible)return;if(z.layers.test(Q.layers)&&(z.isMesh||z.isLine||z.isPoints)&&(z.castShadow||z.receiveShadow&&3===ve)&&(!z.frustumCulled||c.intersectsObject(z))){z.modelViewMatrix.multiplyMatrices(re.matrixWorldInverse,z.matrixWorld);const X=n.update(z),de=z.material;if(Array.isArray(de)){const Ce=X.groups;for(let Ie=0,Be=Ce.length;Ie<Be;Ie++){const Pe=Ce[Ie],Xe=de[Pe.materialIndex];if(Xe&&Xe.visible){const ct=L(z,0,Xe,ae,re.near,re.far,ve);p.renderBufferDirect(re,null,X,ct,z,Pe)}}}else if(de.visible){const Ce=L(z,0,de,ae,re.near,re.far,ve);p.renderBufferDirect(re,null,X,Ce,z,null)}}const Fe=z.children;for(let X=0,de=Fe.length;X<de;X++)Y(Fe[X],Q,re,ae,ve)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(z,Q,re){if(!1===$.enabled||!1===$.autoUpdate&&!1===$.needsUpdate||0===z.length)return;const ae=p.getRenderTarget(),ve=p.getActiveCubeFace(),ze=p.getActiveMipmapLevel(),Fe=p.state;Fe.setBlending(0),Fe.buffers.color.setClear(1,1,1,1),Fe.buffers.depth.setTest(!0),Fe.setScissorTest(!1);for(let X=0,de=z.length;X<de;X++){const Ce=z[X],Ie=Ce.shadow;if(void 0===Ie){console.warn("THREE.WebGLShadowMap:",Ce,"has no shadow.");continue}if(!1===Ie.autoUpdate&&!1===Ie.needsUpdate)continue;f.copy(Ie.mapSize);const Be=Ie.getFrameExtents();if(f.multiply(Be),_.copy(Ie.mapSize),(f.x>R||f.y>R)&&(f.x>R&&(_.x=Math.floor(R/Be.x),f.x=_.x*Be.x,Ie.mapSize.x=_.x),f.y>R&&(_.y=Math.floor(R/Be.y),f.y=_.y*Be.y,Ie.mapSize.y=_.y)),null===Ie.map&&!Ie.isPointLightShadow&&3===this.type){const Xe={minFilter:ri,magFilter:ri,format:_i};Ie.map=new Is(f.x,f.y,Xe),Ie.map.texture.name=Ce.name+".shadowMap",Ie.mapPass=new Is(f.x,f.y,Xe),Ie.camera.updateProjectionMatrix()}null===Ie.map&&(Ie.map=new Is(f.x,f.y,{minFilter:sn,magFilter:sn,format:_i}),Ie.map.texture.name=Ce.name+".shadowMap",Ie.camera.updateProjectionMatrix()),p.setRenderTarget(Ie.map),p.clear();const Pe=Ie.getViewportCount();for(let Xe=0;Xe<Pe;Xe++){const ct=Ie.getViewport(Xe);v.set(_.x*ct.x,_.y*ct.y,_.x*ct.z,_.y*ct.w),Fe.viewport(v),Ie.updateMatrices(Ce,Xe),c=Ie.getFrustum(),Y(Q,re,Ie.camera,Ce,this.type)}!Ie.isPointLightShadow&&3===this.type&&U(Ie,re),Ie.needsUpdate=!1}$.needsUpdate=!1,p.setRenderTarget(ae,ve,ze)}}function Wh(p,n,i){const c=i.isWebGL2;const E=new function f(){let ge=!1;const Yt=new ei;let Ht=null;const vn=new ei(0,0,0,0);return{setMask:function(tt){Ht!==tt&&!ge&&(p.colorMask(tt,tt,tt,tt),Ht=tt)},setLocked:function(tt){ge=tt},setClear:function(tt,hn,Vn,Di,Ys){!0===Ys&&(tt*=Di,hn*=Di,Vn*=Di),Yt.set(tt,hn,Vn,Di),!1===vn.equals(Yt)&&(p.clearColor(tt,hn,Vn,Di),vn.copy(Yt))},reset:function(){ge=!1,Ht=null,vn.set(-1,0,0,0)}}},w=new function _(){let ge=!1,Yt=null,Ht=null,vn=null;return{setTest:function(tt){tt?Ee(p.DEPTH_TEST):ti(p.DEPTH_TEST)},setMask:function(tt){Yt!==tt&&!ge&&(p.depthMask(tt),Yt=tt)},setFunc:function(tt){if(Ht!==tt){if(tt)switch(tt){case 0:p.depthFunc(p.NEVER);break;case 1:p.depthFunc(p.ALWAYS);break;case 2:p.depthFunc(p.LESS);break;case 3:default:p.depthFunc(p.LEQUAL);break;case 4:p.depthFunc(p.EQUAL);break;case 5:p.depthFunc(p.GEQUAL);break;case 6:p.depthFunc(p.GREATER);break;case 7:p.depthFunc(p.NOTEQUAL)}else p.depthFunc(p.LEQUAL);Ht=tt}},setLocked:function(tt){ge=tt},setClear:function(tt){vn!==tt&&(p.clearDepth(tt),vn=tt)},reset:function(){ge=!1,Yt=null,Ht=null,vn=null}}},S=new function v(){let ge=!1,Yt=null,Ht=null,vn=null,tt=null,hn=null,Vn=null,Di=null,Ys=null;return{setTest:function(wi){ge||(wi?Ee(p.STENCIL_TEST):ti(p.STENCIL_TEST))},setMask:function(wi){Yt!==wi&&!ge&&(p.stencilMask(wi),Yt=wi)},setFunc:function(wi,go,Qr){(Ht!==wi||vn!==go||tt!==Qr)&&(p.stencilFunc(wi,go,Qr),Ht=wi,vn=go,tt=Qr)},setOp:function(wi,go,Qr){(hn!==wi||Vn!==go||Di!==Qr)&&(p.stencilOp(wi,go,Qr),hn=wi,Vn=go,Di=Qr)},setLocked:function(wi){ge=wi},setClear:function(wi){Ys!==wi&&(p.clearStencil(wi),Ys=wi)},reset:function(){ge=!1,Yt=null,Ht=null,vn=null,tt=null,hn=null,Vn=null,Di=null,Ys=null}}};let R={},D={},I=new WeakMap,O=[],B=null,V=!1,$=null,U=null,L=null,Y=null,z=null,Q=null,re=null,ae=!1,ve=null,ze=null,Fe=null,X=null,de=null;const Ce=p.getParameter(p.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let Ie=!1,Be=0;const Pe=p.getParameter(p.VERSION);-1!==Pe.indexOf("WebGL")?(Be=parseFloat(/^WebGL (\d)/.exec(Pe)[1]),Ie=Be>=1):-1!==Pe.indexOf("OpenGL ES")&&(Be=parseFloat(/^OpenGL ES (\d)/.exec(Pe)[1]),Ie=Be>=2);let Xe=null,ct={};const jt=p.getParameter(p.SCISSOR_BOX),Ke=p.getParameter(p.VIEWPORT),st=(new ei).fromArray(jt),Tt=(new ei).fromArray(Ke);function Ot(ge,Yt,Ht){const vn=new Uint8Array(4),tt=p.createTexture();p.bindTexture(ge,tt),p.texParameteri(ge,p.TEXTURE_MIN_FILTER,p.NEAREST),p.texParameteri(ge,p.TEXTURE_MAG_FILTER,p.NEAREST);for(let hn=0;hn<Ht;hn++)p.texImage2D(Yt+hn,0,p.RGBA,1,1,0,p.RGBA,p.UNSIGNED_BYTE,vn);return tt}const Kt={};function Ee(ge){!0!==R[ge]&&(p.enable(ge),R[ge]=!0)}function ti(ge){!1!==R[ge]&&(p.disable(ge),R[ge]=!1)}Kt[p.TEXTURE_2D]=Ot(p.TEXTURE_2D,p.TEXTURE_2D,1),Kt[p.TEXTURE_CUBE_MAP]=Ot(p.TEXTURE_CUBE_MAP,p.TEXTURE_CUBE_MAP_POSITIVE_X,6),E.setClear(0,0,0,1),w.setClear(1),S.setClear(0),Ee(p.DEPTH_TEST),w.setFunc(3),At(!1),$t(1),Ee(p.CULL_FACE),Qe(0);const Dn={100:p.FUNC_ADD,101:p.FUNC_SUBTRACT,102:p.FUNC_REVERSE_SUBTRACT};if(c)Dn[103]=p.MIN,Dn[104]=p.MAX;else{const ge=n.get("EXT_blend_minmax");null!==ge&&(Dn[103]=ge.MIN_EXT,Dn[104]=ge.MAX_EXT)}const En={200:p.ZERO,201:p.ONE,202:p.SRC_COLOR,204:p.SRC_ALPHA,210:p.SRC_ALPHA_SATURATE,208:p.DST_COLOR,206:p.DST_ALPHA,203:p.ONE_MINUS_SRC_COLOR,205:p.ONE_MINUS_SRC_ALPHA,209:p.ONE_MINUS_DST_COLOR,207:p.ONE_MINUS_DST_ALPHA};function Qe(ge,Yt,Ht,vn,tt,hn,Vn,Di){if(0!==ge){if(!1===V&&(Ee(p.BLEND),V=!0),5===ge)tt=tt||Yt,hn=hn||Ht,Vn=Vn||vn,(Yt!==U||tt!==z)&&(p.blendEquationSeparate(Dn[Yt],Dn[tt]),U=Yt,z=tt),(Ht!==L||vn!==Y||hn!==Q||Vn!==re)&&(p.blendFuncSeparate(En[Ht],En[vn],En[hn],En[Vn]),L=Ht,Y=vn,Q=hn,re=Vn),$=ge,ae=null;else if(ge!==$||Di!==ae){if((100!==U||100!==z)&&(p.blendEquation(p.FUNC_ADD),U=100,z=100),Di)switch(ge){case 1:p.blendFuncSeparate(p.ONE,p.ONE_MINUS_SRC_ALPHA,p.ONE,p.ONE_MINUS_SRC_ALPHA);break;case 2:p.blendFunc(p.ONE,p.ONE);break;case 3:p.blendFuncSeparate(p.ZERO,p.ONE_MINUS_SRC_COLOR,p.ZERO,p.ONE);break;case 4:p.blendFuncSeparate(p.ZERO,p.SRC_COLOR,p.ZERO,p.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",ge)}else switch(ge){case 1:p.blendFuncSeparate(p.SRC_ALPHA,p.ONE_MINUS_SRC_ALPHA,p.ONE,p.ONE_MINUS_SRC_ALPHA);break;case 2:p.blendFunc(p.SRC_ALPHA,p.ONE);break;case 3:p.blendFuncSeparate(p.ZERO,p.ONE_MINUS_SRC_COLOR,p.ZERO,p.ONE);break;case 4:p.blendFunc(p.ZERO,p.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",ge)}L=null,Y=null,Q=null,re=null,$=ge,ae=Di}}else!0===V&&(ti(p.BLEND),V=!1)}function At(ge){ve!==ge&&(p.frontFace(ge?p.CW:p.CCW),ve=ge)}function $t(ge){0!==ge?(Ee(p.CULL_FACE),ge!==ze&&p.cullFace(1===ge?p.BACK:2===ge?p.FRONT:p.FRONT_AND_BACK)):ti(p.CULL_FACE),ze=ge}function xn(ge,Yt,Ht){ge?(Ee(p.POLYGON_OFFSET_FILL),(X!==Yt||de!==Ht)&&(p.polygonOffset(Yt,Ht),X=Yt,de=Ht)):ti(p.POLYGON_OFFSET_FILL)}function Wn(ge){void 0===ge&&(ge=p.TEXTURE0+Ce-1),Xe!==ge&&(p.activeTexture(ge),Xe=ge)}return{buffers:{color:E,depth:w,stencil:S},enable:Ee,disable:ti,bindFramebuffer:function tn(ge,Yt){return D[ge]!==Yt&&(p.bindFramebuffer(ge,Yt),D[ge]=Yt,c&&(ge===p.DRAW_FRAMEBUFFER&&(D[p.FRAMEBUFFER]=Yt),ge===p.FRAMEBUFFER&&(D[p.DRAW_FRAMEBUFFER]=Yt)),!0)},drawBuffers:function yn(ge,Yt){let Ht=O,vn=!1;if(ge)if(Ht=I.get(Yt),void 0===Ht&&(Ht=[],I.set(Yt,Ht)),ge.isWebGLMultipleRenderTargets){const tt=ge.texture;if(Ht.length!==tt.length||Ht[0]!==p.COLOR_ATTACHMENT0){for(let hn=0,Vn=tt.length;hn<Vn;hn++)Ht[hn]=p.COLOR_ATTACHMENT0+hn;Ht.length=tt.length,vn=!0}}else Ht[0]!==p.COLOR_ATTACHMENT0&&(Ht[0]=p.COLOR_ATTACHMENT0,vn=!0);else Ht[0]!==p.BACK&&(Ht[0]=p.BACK,vn=!0);vn&&(i.isWebGL2?p.drawBuffers(Ht):n.get("WEBGL_draw_buffers").drawBuffersWEBGL(Ht))},useProgram:function Vt(ge){return B!==ge&&(p.useProgram(ge),B=ge,!0)},setBlending:Qe,setMaterial:function Rt(ge,Yt){2===ge.side?ti(p.CULL_FACE):Ee(p.CULL_FACE);let Ht=1===ge.side;Yt&&(Ht=!Ht),At(Ht),1===ge.blending&&!1===ge.transparent?Qe(0):Qe(ge.blending,ge.blendEquation,ge.blendSrc,ge.blendDst,ge.blendEquationAlpha,ge.blendSrcAlpha,ge.blendDstAlpha,ge.premultipliedAlpha),w.setFunc(ge.depthFunc),w.setTest(ge.depthTest),w.setMask(ge.depthWrite),E.setMask(ge.colorWrite);const vn=ge.stencilWrite;S.setTest(vn),vn&&(S.setMask(ge.stencilWriteMask),S.setFunc(ge.stencilFunc,ge.stencilRef,ge.stencilFuncMask),S.setOp(ge.stencilFail,ge.stencilZFail,ge.stencilZPass)),xn(ge.polygonOffset,ge.polygonOffsetFactor,ge.polygonOffsetUnits),!0===ge.alphaToCoverage?Ee(p.SAMPLE_ALPHA_TO_COVERAGE):ti(p.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:At,setCullFace:$t,setLineWidth:function kt(ge){ge!==Fe&&(Ie&&p.lineWidth(ge),Fe=ge)},setPolygonOffset:xn,setScissorTest:function wn(ge){ge?Ee(p.SCISSOR_TEST):ti(p.SCISSOR_TEST)},activeTexture:Wn,bindTexture:function mi(ge,Yt){null===Xe&&Wn();let Ht=ct[Xe];void 0===Ht&&(Ht={type:void 0,texture:void 0},ct[Xe]=Ht),(Ht.type!==ge||Ht.texture!==Yt)&&(p.bindTexture(ge,Yt||Kt[ge]),Ht.type=ge,Ht.texture=Yt)},unbindTexture:function ai(){const ge=ct[Xe];void 0!==ge&&void 0!==ge.type&&(p.bindTexture(ge.type,null),ge.type=void 0,ge.texture=void 0)},compressedTexImage2D:function oe(){try{p.compressedTexImage2D.apply(p,arguments)}catch(ge){console.error("THREE.WebGLState:",ge)}},texImage2D:function Zt(){try{p.texImage2D.apply(p,arguments)}catch(ge){console.error("THREE.WebGLState:",ge)}},texImage3D:function Jt(){try{p.texImage3D.apply(p,arguments)}catch(ge){console.error("THREE.WebGLState:",ge)}},texStorage2D:function Xt(){try{p.texStorage2D.apply(p,arguments)}catch(ge){console.error("THREE.WebGLState:",ge)}},texStorage3D:function je(){try{p.texStorage3D.apply(p,arguments)}catch(ge){console.error("THREE.WebGLState:",ge)}},texSubImage2D:function ee(){try{p.texSubImage2D.apply(p,arguments)}catch(ge){console.error("THREE.WebGLState:",ge)}},texSubImage3D:function Je(){try{p.texSubImage3D.apply(p,arguments)}catch(ge){console.error("THREE.WebGLState:",ge)}},compressedTexSubImage2D:function St(){try{p.compressedTexSubImage2D.apply(p,arguments)}catch(ge){console.error("THREE.WebGLState:",ge)}},scissor:function Lt(ge){!1===st.equals(ge)&&(p.scissor(ge.x,ge.y,ge.z,ge.w),st.copy(ge))},viewport:function Ft(ge){!1===Tt.equals(ge)&&(p.viewport(ge.x,ge.y,ge.z,ge.w),Tt.copy(ge))},reset:function Rn(){p.disable(p.BLEND),p.disable(p.CULL_FACE),p.disable(p.DEPTH_TEST),p.disable(p.POLYGON_OFFSET_FILL),p.disable(p.SCISSOR_TEST),p.disable(p.STENCIL_TEST),p.disable(p.SAMPLE_ALPHA_TO_COVERAGE),p.blendEquation(p.FUNC_ADD),p.blendFunc(p.ONE,p.ZERO),p.blendFuncSeparate(p.ONE,p.ZERO,p.ONE,p.ZERO),p.colorMask(!0,!0,!0,!0),p.clearColor(0,0,0,0),p.depthMask(!0),p.depthFunc(p.LESS),p.clearDepth(1),p.stencilMask(4294967295),p.stencilFunc(p.ALWAYS,0,4294967295),p.stencilOp(p.KEEP,p.KEEP,p.KEEP),p.clearStencil(0),p.cullFace(p.BACK),p.frontFace(p.CCW),p.polygonOffset(0,0),p.activeTexture(p.TEXTURE0),p.bindFramebuffer(p.FRAMEBUFFER,null),!0===c&&(p.bindFramebuffer(p.DRAW_FRAMEBUFFER,null),p.bindFramebuffer(p.READ_FRAMEBUFFER,null)),p.useProgram(null),p.lineWidth(1),p.scissor(0,0,p.canvas.width,p.canvas.height),p.viewport(0,0,p.canvas.width,p.canvas.height),R={},Xe=null,ct={},D={},I=new WeakMap,O=[],B=null,V=!1,$=null,U=null,L=null,Y=null,z=null,Q=null,re=null,ae=!1,ve=null,ze=null,Fe=null,X=null,de=null,st.set(0,0,p.canvas.width,p.canvas.height),Tt.set(0,0,p.canvas.width,p.canvas.height),E.reset(),w.reset(),S.reset()}}}function jh(p,n,i,c,f,_,v){const E=f.isWebGL2,w=f.maxTextures,S=f.maxCubemapSize,R=f.maxTextureSize,D=f.maxSamples,O=n.has("WEBGL_multisampled_render_to_texture")?n.get("WEBGL_multisampled_render_to_texture"):void 0,B=new WeakMap;let V,$=!1;try{$="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch{}function U(oe,ee){return $?new OffscreenCanvas(oe,ee):ss("canvas")}function L(oe,ee,Je,St){let Xt=1;if((oe.width>St||oe.height>St)&&(Xt=St/Math.max(oe.width,oe.height)),Xt<1||!0===ee){if("undefined"!=typeof HTMLImageElement&&oe instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&oe instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&oe instanceof ImageBitmap){const je=ee?E_:Math.floor,Zt=je(Xt*oe.width),Jt=je(Xt*oe.height);void 0===V&&(V=U(Zt,Jt));const Lt=Je?U(Zt,Jt):V;return Lt.width=Zt,Lt.height=Jt,Lt.getContext("2d").drawImage(oe,0,0,Zt,Jt),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+oe.width+"x"+oe.height+") to ("+Zt+"x"+Jt+")."),Lt}return"data"in oe&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+oe.width+"x"+oe.height+")."),oe}return oe}function Y(oe){return Em(oe.width)&&Em(oe.height)}function Q(oe,ee){return oe.generateMipmaps&&ee&&oe.minFilter!==sn&&oe.minFilter!==ri}function re(oe){p.generateMipmap(oe)}function ae(oe,ee,Je,St,Xt=!1){if(!1===E)return ee;if(null!==oe){if(void 0!==p[oe])return p[oe];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+oe+"'")}let je=ee;return ee===p.RED&&(Je===p.FLOAT&&(je=p.R32F),Je===p.HALF_FLOAT&&(je=p.R16F),Je===p.UNSIGNED_BYTE&&(je=p.R8)),ee===p.RG&&(Je===p.FLOAT&&(je=p.RG32F),Je===p.HALF_FLOAT&&(je=p.RG16F),Je===p.UNSIGNED_BYTE&&(je=p.RG8)),ee===p.RGBA&&(Je===p.FLOAT&&(je=p.RGBA32F),Je===p.HALF_FLOAT&&(je=p.RGBA16F),Je===p.UNSIGNED_BYTE&&(je=St===Ai&&!1===Xt?p.SRGB8_ALPHA8:p.RGBA8),Je===p.UNSIGNED_SHORT_4_4_4_4&&(je=p.RGBA4),Je===p.UNSIGNED_SHORT_5_5_5_1&&(je=p.RGB5_A1)),(je===p.R16F||je===p.R32F||je===p.RG16F||je===p.RG32F||je===p.RGBA16F||je===p.RGBA32F)&&n.get("EXT_color_buffer_float"),je}function ve(oe,ee,Je){return!0===Q(oe,Je)||oe.isFramebufferTexture&&oe.minFilter!==sn&&oe.minFilter!==ri?Math.log2(Math.max(ee.width,ee.height))+1:void 0!==oe.mipmaps&&oe.mipmaps.length>0?oe.mipmaps.length:oe.isCompressedTexture&&Array.isArray(oe.image)?ee.mipmaps.length:1}function ze(oe){return oe===sn||1004===oe||1005===oe?p.NEAREST:p.LINEAR}function Fe(oe){const ee=oe.target;ee.removeEventListener("dispose",Fe),function de(oe){const ee=c.get(oe);void 0!==ee.__webglInit&&(p.deleteTexture(ee.__webglTexture),c.remove(oe))}(ee),ee.isVideoTexture&&B.delete(ee),v.memory.textures--}function X(oe){const ee=oe.target;ee.removeEventListener("dispose",X),function Ce(oe){const ee=oe.texture,Je=c.get(oe),St=c.get(ee);if(oe){if(void 0!==St.__webglTexture&&(p.deleteTexture(St.__webglTexture),v.memory.textures--),oe.depthTexture&&oe.depthTexture.dispose(),oe.isWebGLCubeRenderTarget)for(let Xt=0;Xt<6;Xt++)p.deleteFramebuffer(Je.__webglFramebuffer[Xt]),Je.__webglDepthbuffer&&p.deleteRenderbuffer(Je.__webglDepthbuffer[Xt]);else p.deleteFramebuffer(Je.__webglFramebuffer),Je.__webglDepthbuffer&&p.deleteRenderbuffer(Je.__webglDepthbuffer),Je.__webglMultisampledFramebuffer&&p.deleteFramebuffer(Je.__webglMultisampledFramebuffer),Je.__webglColorRenderbuffer&&p.deleteRenderbuffer(Je.__webglColorRenderbuffer),Je.__webglDepthRenderbuffer&&p.deleteRenderbuffer(Je.__webglDepthRenderbuffer);if(oe.isWebGLMultipleRenderTargets)for(let Xt=0,je=ee.length;Xt<je;Xt++){const Zt=c.get(ee[Xt]);Zt.__webglTexture&&(p.deleteTexture(Zt.__webglTexture),v.memory.textures--),c.remove(ee[Xt])}c.remove(ee),c.remove(oe)}}(ee)}let Ie=0;function Xe(oe,ee){const Je=c.get(oe);if(oe.isVideoTexture&&function kt(oe){const ee=v.render.frame;B.get(oe)!==ee&&(B.set(oe,ee),oe.update())}(oe),oe.version>0&&Je.__version!==oe.version){const St=oe.image;if(void 0===St)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==St.complete)return void Ee(Je,oe,ee);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}i.activeTexture(p.TEXTURE0+ee),i.bindTexture(p.TEXTURE_2D,Je.__webglTexture)}function Ke(oe,ee){const Je=c.get(oe);oe.version>0&&Je.__version!==oe.version?function ti(oe,ee,Je){if(6!==ee.image.length)return;Kt(oe,ee),i.activeTexture(p.TEXTURE0+Je),i.bindTexture(p.TEXTURE_CUBE_MAP,oe.__webglTexture),p.pixelStorei(p.UNPACK_FLIP_Y_WEBGL,ee.flipY),p.pixelStorei(p.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ee.premultiplyAlpha),p.pixelStorei(p.UNPACK_ALIGNMENT,ee.unpackAlignment),p.pixelStorei(p.UNPACK_COLORSPACE_CONVERSION_WEBGL,p.NONE);const St=ee&&(ee.isCompressedTexture||ee.image[0].isCompressedTexture),Xt=ee.image[0]&&ee.image[0].isDataTexture,je=[];for(let tt=0;tt<6;tt++)je[tt]=St||Xt?Xt?ee.image[tt].image:ee.image[tt]:L(ee.image[tt],!1,!0,S),je[tt]=xn(ee,je[tt]);const Zt=je[0],Jt=Y(Zt)||E,Lt=_.convert(ee.format,ee.encoding),Ft=_.convert(ee.type),Rn=ae(ee.internalFormat,Lt,Ft,ee.encoding),ge=E&&!0!==ee.isVideoTexture,Yt=void 0===oe.__version;let vn,Ht=ve(ee,Zt,Jt);if(Ot(p.TEXTURE_CUBE_MAP,ee,Jt),St){ge&&Yt&&i.texStorage2D(p.TEXTURE_CUBE_MAP,Ht,Rn,Zt.width,Zt.height);for(let tt=0;tt<6;tt++){vn=je[tt].mipmaps;for(let hn=0;hn<vn.length;hn++){const Vn=vn[hn];ee.format!==_i?null!==Lt?ge?i.compressedTexSubImage2D(p.TEXTURE_CUBE_MAP_POSITIVE_X+tt,hn,0,0,Vn.width,Vn.height,Lt,Vn.data):i.compressedTexImage2D(p.TEXTURE_CUBE_MAP_POSITIVE_X+tt,hn,Rn,Vn.width,Vn.height,0,Vn.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):ge?i.texSubImage2D(p.TEXTURE_CUBE_MAP_POSITIVE_X+tt,hn,0,0,Vn.width,Vn.height,Lt,Ft,Vn.data):i.texImage2D(p.TEXTURE_CUBE_MAP_POSITIVE_X+tt,hn,Rn,Vn.width,Vn.height,0,Lt,Ft,Vn.data)}}}else{vn=ee.mipmaps,ge&&Yt&&(vn.length>0&&Ht++,i.texStorage2D(p.TEXTURE_CUBE_MAP,Ht,Rn,je[0].width,je[0].height));for(let tt=0;tt<6;tt++)if(Xt){ge?i.texSubImage2D(p.TEXTURE_CUBE_MAP_POSITIVE_X+tt,0,0,0,je[tt].width,je[tt].height,Lt,Ft,je[tt].data):i.texImage2D(p.TEXTURE_CUBE_MAP_POSITIVE_X+tt,0,Rn,je[tt].width,je[tt].height,0,Lt,Ft,je[tt].data);for(let hn=0;hn<vn.length;hn++){const Di=vn[hn].image[tt].image;ge?i.texSubImage2D(p.TEXTURE_CUBE_MAP_POSITIVE_X+tt,hn+1,0,0,Di.width,Di.height,Lt,Ft,Di.data):i.texImage2D(p.TEXTURE_CUBE_MAP_POSITIVE_X+tt,hn+1,Rn,Di.width,Di.height,0,Lt,Ft,Di.data)}}else{ge?i.texSubImage2D(p.TEXTURE_CUBE_MAP_POSITIVE_X+tt,0,0,0,Lt,Ft,je[tt]):i.texImage2D(p.TEXTURE_CUBE_MAP_POSITIVE_X+tt,0,Rn,Lt,Ft,je[tt]);for(let hn=0;hn<vn.length;hn++){const Vn=vn[hn];ge?i.texSubImage2D(p.TEXTURE_CUBE_MAP_POSITIVE_X+tt,hn+1,0,0,Lt,Ft,Vn.image[tt]):i.texImage2D(p.TEXTURE_CUBE_MAP_POSITIVE_X+tt,hn+1,Rn,Lt,Ft,Vn.image[tt])}}}Q(ee,Jt)&&re(p.TEXTURE_CUBE_MAP),oe.__version=ee.version,ee.onUpdate&&ee.onUpdate(ee)}(Je,oe,ee):(i.activeTexture(p.TEXTURE0+ee),i.bindTexture(p.TEXTURE_CUBE_MAP,Je.__webglTexture))}const st={[mn]:p.REPEAT,[Hi]:p.CLAMP_TO_EDGE,[ta]:p.MIRRORED_REPEAT},Tt={[sn]:p.NEAREST,1004:p.NEAREST_MIPMAP_NEAREST,1005:p.NEAREST_MIPMAP_LINEAR,[ri]:p.LINEAR,1007:p.LINEAR_MIPMAP_NEAREST,[is]:p.LINEAR_MIPMAP_LINEAR};function Ot(oe,ee,Je){if(Je?(p.texParameteri(oe,p.TEXTURE_WRAP_S,st[ee.wrapS]),p.texParameteri(oe,p.TEXTURE_WRAP_T,st[ee.wrapT]),(oe===p.TEXTURE_3D||oe===p.TEXTURE_2D_ARRAY)&&p.texParameteri(oe,p.TEXTURE_WRAP_R,st[ee.wrapR]),p.texParameteri(oe,p.TEXTURE_MAG_FILTER,Tt[ee.magFilter]),p.texParameteri(oe,p.TEXTURE_MIN_FILTER,Tt[ee.minFilter])):(p.texParameteri(oe,p.TEXTURE_WRAP_S,p.CLAMP_TO_EDGE),p.texParameteri(oe,p.TEXTURE_WRAP_T,p.CLAMP_TO_EDGE),(oe===p.TEXTURE_3D||oe===p.TEXTURE_2D_ARRAY)&&p.texParameteri(oe,p.TEXTURE_WRAP_R,p.CLAMP_TO_EDGE),(ee.wrapS!==Hi||ee.wrapT!==Hi)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),p.texParameteri(oe,p.TEXTURE_MAG_FILTER,ze(ee.magFilter)),p.texParameteri(oe,p.TEXTURE_MIN_FILTER,ze(ee.minFilter)),ee.minFilter!==sn&&ee.minFilter!==ri&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===n.has("EXT_texture_filter_anisotropic")){const St=n.get("EXT_texture_filter_anisotropic");if(ee.type===Mo&&!1===n.has("OES_texture_float_linear")||!1===E&&ee.type===gs&&!1===n.has("OES_texture_half_float_linear"))return;(ee.anisotropy>1||c.get(ee).__currentAnisotropy)&&(p.texParameterf(oe,St.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(ee.anisotropy,f.getMaxAnisotropy())),c.get(ee).__currentAnisotropy=ee.anisotropy)}}function Kt(oe,ee){void 0===oe.__webglInit&&(oe.__webglInit=!0,ee.addEventListener("dispose",Fe),oe.__webglTexture=p.createTexture(),v.memory.textures++)}function Ee(oe,ee,Je){let St=p.TEXTURE_2D;ee.isDataTexture2DArray&&(St=p.TEXTURE_2D_ARRAY),ee.isDataTexture3D&&(St=p.TEXTURE_3D),Kt(oe,ee),i.activeTexture(p.TEXTURE0+Je),i.bindTexture(St,oe.__webglTexture),p.pixelStorei(p.UNPACK_FLIP_Y_WEBGL,ee.flipY),p.pixelStorei(p.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ee.premultiplyAlpha),p.pixelStorei(p.UNPACK_ALIGNMENT,ee.unpackAlignment),p.pixelStorei(p.UNPACK_COLORSPACE_CONVERSION_WEBGL,p.NONE);const Xt=function z(oe){return!E&&(oe.wrapS!==Hi||oe.wrapT!==Hi||oe.minFilter!==sn&&oe.minFilter!==ri)}(ee)&&!1===Y(ee.image);let je=L(ee.image,Xt,!1,R);je=xn(ee,je);const Zt=Y(je)||E,Jt=_.convert(ee.format,ee.encoding);let Rn,Lt=_.convert(ee.type),Ft=ae(ee.internalFormat,Jt,Lt,ee.encoding,ee.isVideoTexture);Ot(St,ee,Zt);const ge=ee.mipmaps,Yt=E&&!0!==ee.isVideoTexture,Ht=void 0===oe.__version,vn=ve(ee,je,Zt);if(ee.isDepthTexture)Ft=p.DEPTH_COMPONENT,E?Ft=ee.type===Mo?p.DEPTH_COMPONENT32F:ee.type===ra?p.DEPTH_COMPONENT24:ee.type===sa?p.DEPTH24_STENCIL8:p.DEPTH_COMPONENT16:ee.type===Mo&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),ee.format===lr&&Ft===p.DEPTH_COMPONENT&&ee.type!==na&&ee.type!==ra&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),ee.type=na,Lt=_.convert(ee.type)),ee.format===bo&&Ft===p.DEPTH_COMPONENT&&(Ft=p.DEPTH_STENCIL,ee.type!==sa&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),ee.type=sa,Lt=_.convert(ee.type))),Yt&&Ht?i.texStorage2D(p.TEXTURE_2D,1,Ft,je.width,je.height):i.texImage2D(p.TEXTURE_2D,0,Ft,je.width,je.height,0,Jt,Lt,null);else if(ee.isDataTexture)if(ge.length>0&&Zt){Yt&&Ht&&i.texStorage2D(p.TEXTURE_2D,vn,Ft,ge[0].width,ge[0].height);for(let tt=0,hn=ge.length;tt<hn;tt++)Rn=ge[tt],Yt?i.texSubImage2D(p.TEXTURE_2D,0,0,0,Rn.width,Rn.height,Jt,Lt,Rn.data):i.texImage2D(p.TEXTURE_2D,tt,Ft,Rn.width,Rn.height,0,Jt,Lt,Rn.data);ee.generateMipmaps=!1}else Yt?(Ht&&i.texStorage2D(p.TEXTURE_2D,vn,Ft,je.width,je.height),i.texSubImage2D(p.TEXTURE_2D,0,0,0,je.width,je.height,Jt,Lt,je.data)):i.texImage2D(p.TEXTURE_2D,0,Ft,je.width,je.height,0,Jt,Lt,je.data);else if(ee.isCompressedTexture){Yt&&Ht&&i.texStorage2D(p.TEXTURE_2D,vn,Ft,ge[0].width,ge[0].height);for(let tt=0,hn=ge.length;tt<hn;tt++)Rn=ge[tt],ee.format!==_i?null!==Jt?Yt?i.compressedTexSubImage2D(p.TEXTURE_2D,tt,0,0,Rn.width,Rn.height,Jt,Rn.data):i.compressedTexImage2D(p.TEXTURE_2D,tt,Ft,Rn.width,Rn.height,0,Rn.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Yt?i.texSubImage2D(p.TEXTURE_2D,tt,0,0,Rn.width,Rn.height,Jt,Lt,Rn.data):i.texImage2D(p.TEXTURE_2D,tt,Ft,Rn.width,Rn.height,0,Jt,Lt,Rn.data)}else if(ee.isDataTexture2DArray)Yt?(Ht&&i.texStorage3D(p.TEXTURE_2D_ARRAY,vn,Ft,je.width,je.height,je.depth),i.texSubImage3D(p.TEXTURE_2D_ARRAY,0,0,0,0,je.width,je.height,je.depth,Jt,Lt,je.data)):i.texImage3D(p.TEXTURE_2D_ARRAY,0,Ft,je.width,je.height,je.depth,0,Jt,Lt,je.data);else if(ee.isDataTexture3D)Yt?(Ht&&i.texStorage3D(p.TEXTURE_3D,vn,Ft,je.width,je.height,je.depth),i.texSubImage3D(p.TEXTURE_3D,0,0,0,0,je.width,je.height,je.depth,Jt,Lt,je.data)):i.texImage3D(p.TEXTURE_3D,0,Ft,je.width,je.height,je.depth,0,Jt,Lt,je.data);else if(ee.isFramebufferTexture)Yt&&Ht?i.texStorage2D(p.TEXTURE_2D,vn,Ft,je.width,je.height):i.texImage2D(p.TEXTURE_2D,0,Ft,je.width,je.height,0,Jt,Lt,null);else if(ge.length>0&&Zt){Yt&&Ht&&i.texStorage2D(p.TEXTURE_2D,vn,Ft,ge[0].width,ge[0].height);for(let tt=0,hn=ge.length;tt<hn;tt++)Rn=ge[tt],Yt?i.texSubImage2D(p.TEXTURE_2D,tt,0,0,Jt,Lt,Rn):i.texImage2D(p.TEXTURE_2D,tt,Ft,Jt,Lt,Rn);ee.generateMipmaps=!1}else Yt?(Ht&&i.texStorage2D(p.TEXTURE_2D,vn,Ft,je.width,je.height),i.texSubImage2D(p.TEXTURE_2D,0,0,0,Jt,Lt,je)):i.texImage2D(p.TEXTURE_2D,0,Ft,Jt,Lt,je);Q(ee,Zt)&&re(St),oe.__version=ee.version,ee.onUpdate&&ee.onUpdate(ee)}function tn(oe,ee,Je,St,Xt){const je=_.convert(Je.format,Je.encoding),Zt=_.convert(Je.type),Jt=ae(Je.internalFormat,je,Zt,Je.encoding);c.get(ee).__hasExternalTextures||(Xt===p.TEXTURE_3D||Xt===p.TEXTURE_2D_ARRAY?i.texImage3D(Xt,0,Jt,ee.width,ee.height,ee.depth,0,je,Zt,null):i.texImage2D(Xt,0,Jt,ee.width,ee.height,0,je,Zt,null)),i.bindFramebuffer(p.FRAMEBUFFER,oe),ee.useRenderToTexture?O.framebufferTexture2DMultisampleEXT(p.FRAMEBUFFER,St,Xt,c.get(Je).__webglTexture,0,$t(ee)):p.framebufferTexture2D(p.FRAMEBUFFER,St,Xt,c.get(Je).__webglTexture,0),i.bindFramebuffer(p.FRAMEBUFFER,null)}function yn(oe,ee,Je){if(p.bindRenderbuffer(p.RENDERBUFFER,oe),ee.depthBuffer&&!ee.stencilBuffer){let St=p.DEPTH_COMPONENT16;if(Je||ee.useRenderToTexture){const Xt=ee.depthTexture;Xt&&Xt.isDepthTexture&&(Xt.type===Mo?St=p.DEPTH_COMPONENT32F:Xt.type===ra&&(St=p.DEPTH_COMPONENT24));const je=$t(ee);ee.useRenderToTexture?O.renderbufferStorageMultisampleEXT(p.RENDERBUFFER,je,St,ee.width,ee.height):p.renderbufferStorageMultisample(p.RENDERBUFFER,je,St,ee.width,ee.height)}else p.renderbufferStorage(p.RENDERBUFFER,St,ee.width,ee.height);p.framebufferRenderbuffer(p.FRAMEBUFFER,p.DEPTH_ATTACHMENT,p.RENDERBUFFER,oe)}else if(ee.depthBuffer&&ee.stencilBuffer){const St=$t(ee);Je&&ee.useRenderbuffer?p.renderbufferStorageMultisample(p.RENDERBUFFER,St,p.DEPTH24_STENCIL8,ee.width,ee.height):ee.useRenderToTexture?O.renderbufferStorageMultisampleEXT(p.RENDERBUFFER,St,p.DEPTH24_STENCIL8,ee.width,ee.height):p.renderbufferStorage(p.RENDERBUFFER,p.DEPTH_STENCIL,ee.width,ee.height),p.framebufferRenderbuffer(p.FRAMEBUFFER,p.DEPTH_STENCIL_ATTACHMENT,p.RENDERBUFFER,oe)}else{const St=!0===ee.isWebGLMultipleRenderTargets?ee.texture[0]:ee.texture,Xt=_.convert(St.format,St.encoding),je=_.convert(St.type),Zt=ae(St.internalFormat,Xt,je,St.encoding),Jt=$t(ee);Je&&ee.useRenderbuffer?p.renderbufferStorageMultisample(p.RENDERBUFFER,Jt,Zt,ee.width,ee.height):ee.useRenderToTexture?O.renderbufferStorageMultisampleEXT(p.RENDERBUFFER,Jt,Zt,ee.width,ee.height):p.renderbufferStorage(p.RENDERBUFFER,Zt,ee.width,ee.height)}p.bindRenderbuffer(p.RENDERBUFFER,null)}function Dn(oe){const ee=c.get(oe),Je=!0===oe.isWebGLCubeRenderTarget;if(oe.depthTexture&&!ee.__autoAllocateDepthBuffer){if(Je)throw new Error("target.depthTexture not supported in Cube render targets");!function Vt(oe,ee){if(ee&&ee.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(i.bindFramebuffer(p.FRAMEBUFFER,oe),!ee.depthTexture||!ee.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!c.get(ee.depthTexture).__webglTexture||ee.depthTexture.image.width!==ee.width||ee.depthTexture.image.height!==ee.height)&&(ee.depthTexture.image.width=ee.width,ee.depthTexture.image.height=ee.height,ee.depthTexture.needsUpdate=!0),Xe(ee.depthTexture,0);const St=c.get(ee.depthTexture).__webglTexture,Xt=$t(ee);if(ee.depthTexture.format===lr)ee.useRenderToTexture?O.framebufferTexture2DMultisampleEXT(p.FRAMEBUFFER,p.DEPTH_ATTACHMENT,p.TEXTURE_2D,St,0,Xt):p.framebufferTexture2D(p.FRAMEBUFFER,p.DEPTH_ATTACHMENT,p.TEXTURE_2D,St,0);else{if(ee.depthTexture.format!==bo)throw new Error("Unknown depthTexture format");ee.useRenderToTexture?O.framebufferTexture2DMultisampleEXT(p.FRAMEBUFFER,p.DEPTH_STENCIL_ATTACHMENT,p.TEXTURE_2D,St,0,Xt):p.framebufferTexture2D(p.FRAMEBUFFER,p.DEPTH_STENCIL_ATTACHMENT,p.TEXTURE_2D,St,0)}}(ee.__webglFramebuffer,oe)}else if(Je){ee.__webglDepthbuffer=[];for(let St=0;St<6;St++)i.bindFramebuffer(p.FRAMEBUFFER,ee.__webglFramebuffer[St]),ee.__webglDepthbuffer[St]=p.createRenderbuffer(),yn(ee.__webglDepthbuffer[St],oe,!1)}else i.bindFramebuffer(p.FRAMEBUFFER,ee.__webglFramebuffer),ee.__webglDepthbuffer=p.createRenderbuffer(),yn(ee.__webglDepthbuffer,oe,!1);i.bindFramebuffer(p.FRAMEBUFFER,null)}function $t(oe){return E&&(oe.useRenderbuffer||oe.useRenderToTexture)?Math.min(D,oe.samples):0}function xn(oe,ee){const Je=oe.encoding,St=oe.format,Xt=oe.type;return!0===oe.isCompressedTexture||!0===oe.isVideoTexture||1035===oe.format||Je!==Dl&&(Je===Ai?!1===E?!0===n.has("EXT_sRGB")&&St===_i?(oe.format=1035,oe.minFilter=ri,oe.generateMipmaps=!1):ee=Xa.sRGBToLinear(ee):(St!==_i||Xt!==vr)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",Je)),ee}let wn=!1,Wn=!1;this.allocateTextureUnit=function Pe(){const oe=Ie;return oe>=w&&console.warn("THREE.WebGLTextures: Trying to use "+oe+" texture units while this GPU supports only "+w),Ie+=1,oe},this.resetTextureUnits=function Be(){Ie=0},this.setTexture2D=Xe,this.setTexture2DArray=function ct(oe,ee){const Je=c.get(oe);oe.version>0&&Je.__version!==oe.version?Ee(Je,oe,ee):(i.activeTexture(p.TEXTURE0+ee),i.bindTexture(p.TEXTURE_2D_ARRAY,Je.__webglTexture))},this.setTexture3D=function jt(oe,ee){const Je=c.get(oe);oe.version>0&&Je.__version!==oe.version?Ee(Je,oe,ee):(i.activeTexture(p.TEXTURE0+ee),i.bindTexture(p.TEXTURE_3D,Je.__webglTexture))},this.setTextureCube=Ke,this.rebindTextures=function En(oe,ee,Je){const St=c.get(oe);void 0!==ee&&tn(St.__webglFramebuffer,oe,oe.texture,p.COLOR_ATTACHMENT0,p.TEXTURE_2D),void 0!==Je&&Dn(oe)},this.setupRenderTarget=function Qe(oe){const ee=oe.texture,Je=c.get(oe),St=c.get(ee);oe.addEventListener("dispose",X),!0!==oe.isWebGLMultipleRenderTargets&&(void 0===St.__webglTexture&&(St.__webglTexture=p.createTexture()),St.__version=ee.version,v.memory.textures++);const Xt=!0===oe.isWebGLCubeRenderTarget,je=!0===oe.isWebGLMultipleRenderTargets,Zt=ee.isDataTexture3D||ee.isDataTexture2DArray,Jt=Y(oe)||E;if(Xt){Je.__webglFramebuffer=[];for(let Lt=0;Lt<6;Lt++)Je.__webglFramebuffer[Lt]=p.createFramebuffer()}else if(Je.__webglFramebuffer=p.createFramebuffer(),je)if(f.drawBuffers){const Lt=oe.texture;for(let Ft=0,Rn=Lt.length;Ft<Rn;Ft++){const ge=c.get(Lt[Ft]);void 0===ge.__webglTexture&&(ge.__webglTexture=p.createTexture(),v.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(oe.useRenderbuffer)if(E){Je.__webglMultisampledFramebuffer=p.createFramebuffer(),Je.__webglColorRenderbuffer=p.createRenderbuffer(),p.bindRenderbuffer(p.RENDERBUFFER,Je.__webglColorRenderbuffer);const Lt=_.convert(ee.format,ee.encoding),Ft=_.convert(ee.type),Rn=ae(ee.internalFormat,Lt,Ft,ee.encoding),ge=$t(oe);p.renderbufferStorageMultisample(p.RENDERBUFFER,ge,Rn,oe.width,oe.height),i.bindFramebuffer(p.FRAMEBUFFER,Je.__webglMultisampledFramebuffer),p.framebufferRenderbuffer(p.FRAMEBUFFER,p.COLOR_ATTACHMENT0,p.RENDERBUFFER,Je.__webglColorRenderbuffer),p.bindRenderbuffer(p.RENDERBUFFER,null),oe.depthBuffer&&(Je.__webglDepthRenderbuffer=p.createRenderbuffer(),yn(Je.__webglDepthRenderbuffer,oe,!0)),i.bindFramebuffer(p.FRAMEBUFFER,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(Xt){i.bindTexture(p.TEXTURE_CUBE_MAP,St.__webglTexture),Ot(p.TEXTURE_CUBE_MAP,ee,Jt);for(let Lt=0;Lt<6;Lt++)tn(Je.__webglFramebuffer[Lt],oe,ee,p.COLOR_ATTACHMENT0,p.TEXTURE_CUBE_MAP_POSITIVE_X+Lt);Q(ee,Jt)&&re(p.TEXTURE_CUBE_MAP),i.unbindTexture()}else if(je){const Lt=oe.texture;for(let Ft=0,Rn=Lt.length;Ft<Rn;Ft++){const ge=Lt[Ft],Yt=c.get(ge);i.bindTexture(p.TEXTURE_2D,Yt.__webglTexture),Ot(p.TEXTURE_2D,ge,Jt),tn(Je.__webglFramebuffer,oe,ge,p.COLOR_ATTACHMENT0+Ft,p.TEXTURE_2D),Q(ge,Jt)&&re(p.TEXTURE_2D)}i.unbindTexture()}else{let Lt=p.TEXTURE_2D;Zt&&(E?Lt=ee.isDataTexture3D?p.TEXTURE_3D:p.TEXTURE_2D_ARRAY:console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.")),i.bindTexture(Lt,St.__webglTexture),Ot(Lt,ee,Jt),tn(Je.__webglFramebuffer,oe,ee,p.COLOR_ATTACHMENT0,Lt),Q(ee,Jt)&&re(Lt),i.unbindTexture()}oe.depthBuffer&&Dn(oe)},this.updateRenderTargetMipmap=function Rt(oe){const ee=Y(oe)||E,Je=!0===oe.isWebGLMultipleRenderTargets?oe.texture:[oe.texture];for(let St=0,Xt=Je.length;St<Xt;St++){const je=Je[St];if(Q(je,ee)){const Zt=oe.isWebGLCubeRenderTarget?p.TEXTURE_CUBE_MAP:p.TEXTURE_2D,Jt=c.get(je).__webglTexture;i.bindTexture(Zt,Jt),re(Zt),i.unbindTexture()}}},this.updateMultisampleRenderTarget=function At(oe){if(oe.useRenderbuffer)if(E){const ee=oe.width,Je=oe.height;let St=p.COLOR_BUFFER_BIT;const Xt=[p.COLOR_ATTACHMENT0],je=oe.stencilBuffer?p.DEPTH_STENCIL_ATTACHMENT:p.DEPTH_ATTACHMENT;oe.depthBuffer&&Xt.push(je),oe.ignoreDepthForMultisampleCopy||(oe.depthBuffer&&(St|=p.DEPTH_BUFFER_BIT),oe.stencilBuffer&&(St|=p.STENCIL_BUFFER_BIT));const Zt=c.get(oe);i.bindFramebuffer(p.READ_FRAMEBUFFER,Zt.__webglMultisampledFramebuffer),i.bindFramebuffer(p.DRAW_FRAMEBUFFER,Zt.__webglFramebuffer),oe.ignoreDepthForMultisampleCopy&&(p.invalidateFramebuffer(p.READ_FRAMEBUFFER,[je]),p.invalidateFramebuffer(p.DRAW_FRAMEBUFFER,[je])),p.blitFramebuffer(0,0,ee,Je,0,0,ee,Je,St,p.NEAREST),p.invalidateFramebuffer(p.READ_FRAMEBUFFER,Xt),i.bindFramebuffer(p.READ_FRAMEBUFFER,null),i.bindFramebuffer(p.DRAW_FRAMEBUFFER,Zt.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.setupDepthRenderbuffer=Dn,this.setupFrameBufferTexture=tn,this.safeSetTexture2D=function mi(oe,ee){oe&&oe.isWebGLRenderTarget&&(!1===wn&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),wn=!0),oe=oe.texture),Xe(oe,ee)},this.safeSetTextureCube=function ai(oe,ee){oe&&oe.isWebGLCubeRenderTarget&&(!1===Wn&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),Wn=!0),oe=oe.texture),Ke(oe,ee)}}function yy(p,n,i){const c=i.isWebGL2;return{convert:function f(_,v=null){let E;if(_===vr)return p.UNSIGNED_BYTE;if(1017===_)return p.UNSIGNED_SHORT_4_4_4_4;if(1018===_)return p.UNSIGNED_SHORT_5_5_5_1;if(1010===_)return p.BYTE;if(1011===_)return p.SHORT;if(_===na)return p.UNSIGNED_SHORT;if(1013===_)return p.INT;if(_===ra)return p.UNSIGNED_INT;if(_===Mo)return p.FLOAT;if(_===gs)return c?p.HALF_FLOAT:(E=n.get("OES_texture_half_float"),null!==E?E.HALF_FLOAT_OES:null);if(1021===_)return p.ALPHA;if(_===_i)return p.RGBA;if(1024===_)return p.LUMINANCE;if(1025===_)return p.LUMINANCE_ALPHA;if(_===lr)return p.DEPTH_COMPONENT;if(_===bo)return p.DEPTH_STENCIL;if(1028===_)return p.RED;if(1022===_)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),p.RGBA;if(1035===_)return E=n.get("EXT_sRGB"),null!==E?E.SRGB_ALPHA_EXT:null;if(1029===_)return p.RED_INTEGER;if(1030===_)return p.RG;if(1031===_)return p.RG_INTEGER;if(1033===_)return p.RGBA_INTEGER;if(_===Tr||_===Ct||_===An||_===Zn)if(v===Ai){if(E=n.get("WEBGL_compressed_texture_s3tc_srgb"),null===E)return null;if(_===Tr)return E.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(_===Ct)return E.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(_===An)return E.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(_===Zn)return E.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(E=n.get("WEBGL_compressed_texture_s3tc"),null===E)return null;if(_===Tr)return E.COMPRESSED_RGB_S3TC_DXT1_EXT;if(_===Ct)return E.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(_===An)return E.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(_===Zn)return E.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===_||35841===_||35842===_||35843===_){if(E=n.get("WEBGL_compressed_texture_pvrtc"),null===E)return null;if(35840===_)return E.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===_)return E.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===_)return E.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===_)return E.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===_)return E=n.get("WEBGL_compressed_texture_etc1"),null!==E?E.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===_||37496===_){if(E=n.get("WEBGL_compressed_texture_etc"),null===E)return null;if(37492===_)return v===Ai?E.COMPRESSED_SRGB8_ETC2:E.COMPRESSED_RGB8_ETC2;if(37496===_)return v===Ai?E.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:E.COMPRESSED_RGBA8_ETC2_EAC}if(37808===_||37809===_||37810===_||37811===_||37812===_||37813===_||37814===_||37815===_||37816===_||37817===_||37818===_||37819===_||37820===_||37821===_){if(E=n.get("WEBGL_compressed_texture_astc"),null===E)return null;if(37808===_)return v===Ai?E.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:E.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===_)return v===Ai?E.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:E.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===_)return v===Ai?E.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:E.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===_)return v===Ai?E.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:E.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===_)return v===Ai?E.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:E.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===_)return v===Ai?E.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:E.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===_)return v===Ai?E.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:E.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===_)return v===Ai?E.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:E.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===_)return v===Ai?E.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:E.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===_)return v===Ai?E.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:E.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===_)return v===Ai?E.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:E.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===_)return v===Ai?E.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:E.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===_)return v===Ai?E.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:E.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===_)return v===Ai?E.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:E.COMPRESSED_RGBA_ASTC_12x12_KHR}if(36492===_){if(E=n.get("EXT_texture_compression_bptc"),null===E)return null;if(36492===_)return v===Ai?E.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:E.COMPRESSED_RGBA_BPTC_UNORM_EXT}return _===sa?c?p.UNSIGNED_INT_24_8:(E=n.get("WEBGL_depth_texture"),null!==E?E.UNSIGNED_INT_24_8_WEBGL:null):void 0}}}class fd extends Qi{constructor(n=[]){super(),this.cameras=n}}fd.prototype.isArrayCamera=!0;class Go extends Ln{constructor(){super(),this.type="Group"}}Go.prototype.isGroup=!0;const vy={type:"move"};class $i{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new Go,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new Go,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Z,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Z),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new Go,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Z,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Z),this._grip}dispatchEvent(n){return null!==this._targetRay&&this._targetRay.dispatchEvent(n),null!==this._grip&&this._grip.dispatchEvent(n),null!==this._hand&&this._hand.dispatchEvent(n),this}disconnect(n){return this.dispatchEvent({type:"disconnected",data:n}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(n,i,c){let f=null,_=null,v=null;const E=this._targetRay,w=this._grip,S=this._hand;if(n&&"visible-blurred"!==i.session.visibilityState)if(null!==E&&(f=i.getPose(n.targetRaySpace,c),null!==f&&(E.matrix.fromArray(f.transform.matrix),E.matrix.decompose(E.position,E.rotation,E.scale),f.linearVelocity?(E.hasLinearVelocity=!0,E.linearVelocity.copy(f.linearVelocity)):E.hasLinearVelocity=!1,f.angularVelocity?(E.hasAngularVelocity=!0,E.angularVelocity.copy(f.angularVelocity)):E.hasAngularVelocity=!1,this.dispatchEvent(vy))),S&&n.hand){v=!0;for(const V of n.hand.values()){const $=i.getJointPose(V,c);if(void 0===S.joints[V.jointName]){const L=new Go;L.matrixAutoUpdate=!1,L.visible=!1,S.joints[V.jointName]=L,S.add(L)}const U=S.joints[V.jointName];null!==$&&(U.matrix.fromArray($.transform.matrix),U.matrix.decompose(U.position,U.rotation,U.scale),U.jointRadius=$.radius),U.visible=null!==$}const I=S.joints["index-finger-tip"].position.distanceTo(S.joints["thumb-tip"].position),O=.02,B=.005;S.inputState.pinching&&I>O+B?(S.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:n.handedness,target:this})):!S.inputState.pinching&&I<=O-B&&(S.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:n.handedness,target:this}))}else null!==w&&n.gripSpace&&(_=i.getPose(n.gripSpace,c),null!==_&&(w.matrix.fromArray(_.transform.matrix),w.matrix.decompose(w.position,w.rotation,w.scale),_.linearVelocity?(w.hasLinearVelocity=!0,w.linearVelocity.copy(_.linearVelocity)):w.hasLinearVelocity=!1,_.angularVelocity?(w.hasAngularVelocity=!0,w.angularVelocity.copy(_.angularVelocity)):w.hasAngularVelocity=!1));return null!==E&&(E.visible=null!==f),null!==w&&(w.visible=null!==_),null!==S&&(S.visible=null!==v),this}}class $h extends li{constructor(n,i,c,f,_,v,E,w,S,R){if((R=void 0!==R?R:lr)!==lr&&R!==bo)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===c&&R===lr&&(c=na),void 0===c&&R===bo&&(c=sa),super(null,f,_,v,E,w,R,c,S),this.image={width:n,height:i},this.magFilter=void 0!==E?E:sn,this.minFilter=void 0!==w?w:sn,this.flipY=!1,this.generateMipmaps=!1}}$h.prototype.isDepthTexture=!0;class Gs extends ja{constructor(n,i){super();const c=this;let f=null,_=1,v=null,E="local-floor";const w=n.extensions.has("WEBGL_multisampled_render_to_texture");let S=null,R=null,D=null,I=null,O=!1,B=null;const V=i.getContextAttributes();let $=null,U=null;const L=[],Y=new Map,z=new Qi;z.layers.enable(1),z.viewport=new ei;const Q=new Qi;Q.layers.enable(2),Q.viewport=new ei;const re=[z,Q],ae=new fd;ae.layers.enable(1),ae.layers.enable(2);let ve=null,ze=null;function Fe(Ke){const st=Y.get(Ke.inputSource);st&&st.dispatchEvent({type:Ke.type,data:Ke.inputSource})}function X(){Y.forEach(function(Ke,st){Ke.disconnect(st)}),Y.clear(),ve=null,ze=null,n.setRenderTarget($),I=null,D=null,R=null,f=null,U=null,jt.stop(),c.isPresenting=!1,c.dispatchEvent({type:"sessionend"})}function de(Ke){const st=f.inputSources;for(let Tt=0;Tt<L.length;Tt++)Y.set(st[Tt],L[Tt]);for(let Tt=0;Tt<Ke.removed.length;Tt++){const Ot=Ke.removed[Tt],Kt=Y.get(Ot);Kt&&(Kt.dispatchEvent({type:"disconnected",data:Ot}),Y.delete(Ot))}for(let Tt=0;Tt<Ke.added.length;Tt++){const Ot=Ke.added[Tt],Kt=Y.get(Ot);Kt&&Kt.dispatchEvent({type:"connected",data:Ot})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Ke){let st=L[Ke];return void 0===st&&(st=new $i,L[Ke]=st),st.getTargetRaySpace()},this.getControllerGrip=function(Ke){let st=L[Ke];return void 0===st&&(st=new $i,L[Ke]=st),st.getGripSpace()},this.getHand=function(Ke){let st=L[Ke];return void 0===st&&(st=new $i,L[Ke]=st),st.getHandSpace()},this.setFramebufferScaleFactor=function(Ke){_=Ke,!0===c.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Ke){E=Ke,!0===c.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return v},this.getBaseLayer=function(){return null!==D?D:I},this.getBinding=function(){return R},this.getFrame=function(){return B},this.getSession=function(){return f},this.setSession=function(){var Ke=C(function*(st){if(f=st,null!==f){if($=n.getRenderTarget(),f.addEventListener("select",Fe),f.addEventListener("selectstart",Fe),f.addEventListener("selectend",Fe),f.addEventListener("squeeze",Fe),f.addEventListener("squeezestart",Fe),f.addEventListener("squeezeend",Fe),f.addEventListener("end",X),f.addEventListener("inputsourceschange",de),!0!==V.xrCompatible&&(yield i.makeXRCompatible()),void 0===f.renderState.layers||!1===n.capabilities.isWebGL2)I=new XRWebGLLayer(f,i,{antialias:void 0!==f.renderState.layers||V.antialias,alpha:V.alpha,depth:V.depth,stencil:V.stencil,framebufferScaleFactor:_}),f.updateRenderState({baseLayer:I}),U=new Is(I.framebufferWidth,I.framebufferHeight,{format:_i,type:vr,encoding:n.outputEncoding});else{O=V.antialias;let Tt=null,Ot=null,Kt=null;V.depth&&(Kt=V.stencil?i.DEPTH24_STENCIL8:i.DEPTH_COMPONENT24,Tt=V.stencil?bo:lr,Ot=V.stencil?sa:na);const Ee={colorFormat:n.outputEncoding===Ai?i.SRGB8_ALPHA8:i.RGBA8,depthFormat:Kt,scaleFactor:_};R=new XRWebGLBinding(f,i),D=R.createProjectionLayer(Ee),f.updateRenderState({layers:[D]}),U=O?new Bu(D.textureWidth,D.textureHeight,{format:_i,type:vr,depthTexture:new $h(D.textureWidth,D.textureHeight,Ot,void 0,void 0,void 0,void 0,void 0,void 0,Tt),stencilBuffer:V.stencil,ignoreDepth:D.ignoreDepthValues,useRenderToTexture:w,encoding:n.outputEncoding}):new Is(D.textureWidth,D.textureHeight,{format:_i,type:vr,depthTexture:new $h(D.textureWidth,D.textureHeight,Ot,void 0,void 0,void 0,void 0,void 0,void 0,Tt),stencilBuffer:V.stencil,ignoreDepth:D.ignoreDepthValues,encoding:n.outputEncoding})}U.isXRRenderTarget=!0,this.setFoveation(1),v=yield f.requestReferenceSpace(E),jt.setContext(f),jt.start(),c.isPresenting=!0,c.dispatchEvent({type:"sessionstart"})}});return function(st){return Ke.apply(this,arguments)}}();const Ce=new Z,Ie=new Z;function Pe(Ke,st){null===st?Ke.matrixWorld.copy(Ke.matrix):Ke.matrixWorld.multiplyMatrices(st.matrixWorld,Ke.matrix),Ke.matrixWorldInverse.copy(Ke.matrixWorld).invert()}this.updateCamera=function(Ke){if(null===f)return;ae.near=Q.near=z.near=Ke.near,ae.far=Q.far=z.far=Ke.far,(ve!==ae.near||ze!==ae.far)&&(f.updateRenderState({depthNear:ae.near,depthFar:ae.far}),ve=ae.near,ze=ae.far);const st=Ke.parent,Tt=ae.cameras;Pe(ae,st);for(let Kt=0;Kt<Tt.length;Kt++)Pe(Tt[Kt],st);ae.matrixWorld.decompose(ae.position,ae.quaternion,ae.scale),Ke.position.copy(ae.position),Ke.quaternion.copy(ae.quaternion),Ke.scale.copy(ae.scale),Ke.matrix.copy(ae.matrix),Ke.matrixWorld.copy(ae.matrixWorld);const Ot=Ke.children;for(let Kt=0,Ee=Ot.length;Kt<Ee;Kt++)Ot[Kt].updateMatrixWorld(!0);2===Tt.length?function Be(Ke,st,Tt){Ce.setFromMatrixPosition(st.matrixWorld),Ie.setFromMatrixPosition(Tt.matrixWorld);const Ot=Ce.distanceTo(Ie),Kt=st.projectionMatrix.elements,Ee=Tt.projectionMatrix.elements,ti=Kt[14]/(Kt[10]-1),tn=Kt[14]/(Kt[10]+1),yn=(Kt[9]+1)/Kt[5],Vt=(Kt[9]-1)/Kt[5],Dn=(Kt[8]-1)/Kt[0],En=(Ee[8]+1)/Ee[0],Qe=ti*Dn,Rt=ti*En,At=Ot/(-Dn+En),$t=At*-Dn;st.matrixWorld.decompose(Ke.position,Ke.quaternion,Ke.scale),Ke.translateX($t),Ke.translateZ(At),Ke.matrixWorld.compose(Ke.position,Ke.quaternion,Ke.scale),Ke.matrixWorldInverse.copy(Ke.matrixWorld).invert();const kt=ti+At,xn=tn+At;Ke.projectionMatrix.makePerspective(Qe-$t,Rt+(Ot-$t),yn*tn/xn*kt,Vt*tn/xn*kt,kt,xn)}(ae,z,Q):ae.projectionMatrix.copy(z.projectionMatrix)},this.getCamera=function(){return ae},this.getFoveation=function(){return null!==D?D.fixedFoveation:null!==I?I.fixedFoveation:void 0},this.setFoveation=function(Ke){null!==D&&(D.fixedFoveation=Ke),null!==I&&void 0!==I.fixedFoveation&&(I.fixedFoveation=Ke)};let Xe=null;const jt=new ji;jt.setAnimationLoop(function ct(Ke,st){if(S=st.getViewerPose(v),B=st,null!==S){const Ot=S.views;null!==I&&(n.setRenderTargetFramebuffer(U,I.framebuffer),n.setRenderTarget(U));let Kt=!1;Ot.length!==ae.cameras.length&&(ae.cameras.length=0,Kt=!0);for(let Ee=0;Ee<Ot.length;Ee++){const ti=Ot[Ee];let tn=null;if(null!==I)tn=I.getViewport(ti);else{const Vt=R.getViewSubImage(D,ti);tn=Vt.viewport,0===Ee&&(n.setRenderTargetTextures(U,Vt.colorTexture,D.ignoreDepthValues?void 0:Vt.depthStencilTexture),n.setRenderTarget(U))}const yn=re[Ee];yn.matrix.fromArray(ti.transform.matrix),yn.projectionMatrix.fromArray(ti.projectionMatrix),yn.viewport.set(tn.x,tn.y,tn.width,tn.height),0===Ee&&ae.matrix.copy(yn.matrix),!0===Kt&&ae.cameras.push(yn)}}const Tt=f.inputSources;for(let Ot=0;Ot<L.length;Ot++)L[Ot].update(Tt[Ot],st,v);Xe&&Xe(Ke,st),B=null}),this.setAnimationLoop=function(Ke){Xe=Ke},this.dispose=function(){}}}function f0(p){function c(U,L){U.opacity.value=L.opacity,L.color&&U.diffuse.value.copy(L.color),L.emissive&&U.emissive.value.copy(L.emissive).multiplyScalar(L.emissiveIntensity),L.map&&(U.map.value=L.map),L.alphaMap&&(U.alphaMap.value=L.alphaMap),L.specularMap&&(U.specularMap.value=L.specularMap),L.alphaTest>0&&(U.alphaTest.value=L.alphaTest);const Y=p.get(L).envMap;let z,Q;Y&&(U.envMap.value=Y,U.flipEnvMap.value=Y.isCubeTexture&&!1===Y.isRenderTargetTexture?-1:1,U.reflectivity.value=L.reflectivity,U.ior.value=L.ior,U.refractionRatio.value=L.refractionRatio),L.lightMap&&(U.lightMap.value=L.lightMap,U.lightMapIntensity.value=L.lightMapIntensity),L.aoMap&&(U.aoMap.value=L.aoMap,U.aoMapIntensity.value=L.aoMapIntensity),L.map?z=L.map:L.specularMap?z=L.specularMap:L.displacementMap?z=L.displacementMap:L.normalMap?z=L.normalMap:L.bumpMap?z=L.bumpMap:L.roughnessMap?z=L.roughnessMap:L.metalnessMap?z=L.metalnessMap:L.alphaMap?z=L.alphaMap:L.emissiveMap?z=L.emissiveMap:L.clearcoatMap?z=L.clearcoatMap:L.clearcoatNormalMap?z=L.clearcoatNormalMap:L.clearcoatRoughnessMap?z=L.clearcoatRoughnessMap:L.specularIntensityMap?z=L.specularIntensityMap:L.specularColorMap?z=L.specularColorMap:L.transmissionMap?z=L.transmissionMap:L.thicknessMap?z=L.thicknessMap:L.sheenColorMap?z=L.sheenColorMap:L.sheenRoughnessMap&&(z=L.sheenRoughnessMap),void 0!==z&&(z.isWebGLRenderTarget&&(z=z.texture),!0===z.matrixAutoUpdate&&z.updateMatrix(),U.uvTransform.value.copy(z.matrix)),L.aoMap?Q=L.aoMap:L.lightMap&&(Q=L.lightMap),void 0!==Q&&(Q.isWebGLRenderTarget&&(Q=Q.texture),!0===Q.matrixAutoUpdate&&Q.updateMatrix(),U.uv2Transform.value.copy(Q.matrix))}function D(U,L){U.roughness.value=L.roughness,U.metalness.value=L.metalness,L.roughnessMap&&(U.roughnessMap.value=L.roughnessMap),L.metalnessMap&&(U.metalnessMap.value=L.metalnessMap),L.emissiveMap&&(U.emissiveMap.value=L.emissiveMap),L.bumpMap&&(U.bumpMap.value=L.bumpMap,U.bumpScale.value=L.bumpScale,1===L.side&&(U.bumpScale.value*=-1)),L.normalMap&&(U.normalMap.value=L.normalMap,U.normalScale.value.copy(L.normalScale),1===L.side&&U.normalScale.value.negate()),L.displacementMap&&(U.displacementMap.value=L.displacementMap,U.displacementScale.value=L.displacementScale,U.displacementBias.value=L.displacementBias),p.get(L).envMap&&(U.envMapIntensity.value=L.envMapIntensity)}return{refreshFogUniforms:function n(U,L){U.fogColor.value.copy(L.color),L.isFog?(U.fogNear.value=L.near,U.fogFar.value=L.far):L.isFogExp2&&(U.fogDensity.value=L.density)},refreshMaterialUniforms:function i(U,L,Y,z,Q){L.isMeshBasicMaterial?c(U,L):L.isMeshLambertMaterial?(c(U,L),function w(U,L){L.emissiveMap&&(U.emissiveMap.value=L.emissiveMap)}(U,L)):L.isMeshToonMaterial?(c(U,L),function R(U,L){L.gradientMap&&(U.gradientMap.value=L.gradientMap),L.emissiveMap&&(U.emissiveMap.value=L.emissiveMap),L.bumpMap&&(U.bumpMap.value=L.bumpMap,U.bumpScale.value=L.bumpScale,1===L.side&&(U.bumpScale.value*=-1)),L.normalMap&&(U.normalMap.value=L.normalMap,U.normalScale.value.copy(L.normalScale),1===L.side&&U.normalScale.value.negate()),L.displacementMap&&(U.displacementMap.value=L.displacementMap,U.displacementScale.value=L.displacementScale,U.displacementBias.value=L.displacementBias)}(U,L)):L.isMeshPhongMaterial?(c(U,L),function S(U,L){U.specular.value.copy(L.specular),U.shininess.value=Math.max(L.shininess,1e-4),L.emissiveMap&&(U.emissiveMap.value=L.emissiveMap),L.bumpMap&&(U.bumpMap.value=L.bumpMap,U.bumpScale.value=L.bumpScale,1===L.side&&(U.bumpScale.value*=-1)),L.normalMap&&(U.normalMap.value=L.normalMap,U.normalScale.value.copy(L.normalScale),1===L.side&&U.normalScale.value.negate()),L.displacementMap&&(U.displacementMap.value=L.displacementMap,U.displacementScale.value=L.displacementScale,U.displacementBias.value=L.displacementBias)}(U,L)):L.isMeshStandardMaterial?(c(U,L),L.isMeshPhysicalMaterial?function I(U,L,Y){D(U,L),U.ior.value=L.ior,L.sheen>0&&(U.sheenColor.value.copy(L.sheenColor).multiplyScalar(L.sheen),U.sheenRoughness.value=L.sheenRoughness,L.sheenColorMap&&(U.sheenColorMap.value=L.sheenColorMap),L.sheenRoughnessMap&&(U.sheenRoughnessMap.value=L.sheenRoughnessMap)),L.clearcoat>0&&(U.clearcoat.value=L.clearcoat,U.clearcoatRoughness.value=L.clearcoatRoughness,L.clearcoatMap&&(U.clearcoatMap.value=L.clearcoatMap),L.clearcoatRoughnessMap&&(U.clearcoatRoughnessMap.value=L.clearcoatRoughnessMap),L.clearcoatNormalMap&&(U.clearcoatNormalScale.value.copy(L.clearcoatNormalScale),U.clearcoatNormalMap.value=L.clearcoatNormalMap,1===L.side&&U.clearcoatNormalScale.value.negate())),L.transmission>0&&(U.transmission.value=L.transmission,U.transmissionSamplerMap.value=Y.texture,U.transmissionSamplerSize.value.set(Y.width,Y.height),L.transmissionMap&&(U.transmissionMap.value=L.transmissionMap),U.thickness.value=L.thickness,L.thicknessMap&&(U.thicknessMap.value=L.thicknessMap),U.attenuationDistance.value=L.attenuationDistance,U.attenuationColor.value.copy(L.attenuationColor)),U.specularIntensity.value=L.specularIntensity,U.specularColor.value.copy(L.specularColor),L.specularIntensityMap&&(U.specularIntensityMap.value=L.specularIntensityMap),L.specularColorMap&&(U.specularColorMap.value=L.specularColorMap)}(U,L,Q):D(U,L)):L.isMeshMatcapMaterial?(c(U,L),function O(U,L){L.matcap&&(U.matcap.value=L.matcap),L.bumpMap&&(U.bumpMap.value=L.bumpMap,U.bumpScale.value=L.bumpScale,1===L.side&&(U.bumpScale.value*=-1)),L.normalMap&&(U.normalMap.value=L.normalMap,U.normalScale.value.copy(L.normalScale),1===L.side&&U.normalScale.value.negate()),L.displacementMap&&(U.displacementMap.value=L.displacementMap,U.displacementScale.value=L.displacementScale,U.displacementBias.value=L.displacementBias)}(U,L)):L.isMeshDepthMaterial?(c(U,L),function B(U,L){L.displacementMap&&(U.displacementMap.value=L.displacementMap,U.displacementScale.value=L.displacementScale,U.displacementBias.value=L.displacementBias)}(U,L)):L.isMeshDistanceMaterial?(c(U,L),function V(U,L){L.displacementMap&&(U.displacementMap.value=L.displacementMap,U.displacementScale.value=L.displacementScale,U.displacementBias.value=L.displacementBias),U.referencePosition.value.copy(L.referencePosition),U.nearDistance.value=L.nearDistance,U.farDistance.value=L.farDistance}(U,L)):L.isMeshNormalMaterial?(c(U,L),function $(U,L){L.bumpMap&&(U.bumpMap.value=L.bumpMap,U.bumpScale.value=L.bumpScale,1===L.side&&(U.bumpScale.value*=-1)),L.normalMap&&(U.normalMap.value=L.normalMap,U.normalScale.value.copy(L.normalScale),1===L.side&&U.normalScale.value.negate()),L.displacementMap&&(U.displacementMap.value=L.displacementMap,U.displacementScale.value=L.displacementScale,U.displacementBias.value=L.displacementBias)}(U,L)):L.isLineBasicMaterial?(function f(U,L){U.diffuse.value.copy(L.color),U.opacity.value=L.opacity}(U,L),L.isLineDashedMaterial&&function _(U,L){U.dashSize.value=L.dashSize,U.totalSize.value=L.dashSize+L.gapSize,U.scale.value=L.scale}(U,L)):L.isPointsMaterial?function v(U,L,Y,z){let Q;U.diffuse.value.copy(L.color),U.opacity.value=L.opacity,U.size.value=L.size*Y,U.scale.value=.5*z,L.map&&(U.map.value=L.map),L.alphaMap&&(U.alphaMap.value=L.alphaMap),L.alphaTest>0&&(U.alphaTest.value=L.alphaTest),L.map?Q=L.map:L.alphaMap&&(Q=L.alphaMap),void 0!==Q&&(!0===Q.matrixAutoUpdate&&Q.updateMatrix(),U.uvTransform.value.copy(Q.matrix))}(U,L,Y,z):L.isSpriteMaterial?function E(U,L){let Y;U.diffuse.value.copy(L.color),U.opacity.value=L.opacity,U.rotation.value=L.rotation,L.map&&(U.map.value=L.map),L.alphaMap&&(U.alphaMap.value=L.alphaMap),L.alphaTest>0&&(U.alphaTest.value=L.alphaTest),L.map?Y=L.map:L.alphaMap&&(Y=L.alphaMap),void 0!==Y&&(!0===Y.matrixAutoUpdate&&Y.updateMatrix(),U.uvTransform.value.copy(Y.matrix))}(U,L):L.isShadowMaterial?(U.color.value.copy(L.color),U.opacity.value=L.opacity):L.isShaderMaterial&&(L.uniformsNeedUpdate=!1)}}}function kn(p={}){const n=void 0!==p.canvas?p.canvas:function CE(){const p=ss("canvas");return p.style.display="block",p}(),i=void 0!==p.context?p.context:null,c=void 0!==p.alpha&&p.alpha,f=void 0===p.depth||p.depth,_=void 0===p.stencil||p.stencil,v=void 0!==p.antialias&&p.antialias,E=void 0===p.premultipliedAlpha||p.premultipliedAlpha,w=void 0!==p.preserveDrawingBuffer&&p.preserveDrawingBuffer,S=void 0!==p.powerPreference?p.powerPreference:"default",R=void 0!==p.failIfMajorPerformanceCaveat&&p.failIfMajorPerformanceCaveat;let D=null,I=null;const O=[],B=[];this.domElement=n,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Dl,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1;const V=this;let $=!1,U=0,L=0,Y=null,z=-1,Q=null;const re=new ei,ae=new ei;let ve=null,ze=n.width,Fe=n.height,X=1,de=null,Ce=null;const Ie=new ei(0,0,ze,Fe),Be=new ei(0,0,ze,Fe);let Pe=!1;const Xe=new Ea;let ct=!1,jt=!1,Ke=null;const st=new Wt,Tt=new Z,Ot={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Kt(){return null===Y?X:1}let tn,yn,Vt,Dn,En,Qe,Rt,At,$t,kt,xn,wn,Wn,mi,ai,oe,ee,Je,St,Xt,je,Zt,Jt,Ee=i;function ti(te,Re){for(let Ve=0;Ve<te.length;Ve++){const Ze=n.getContext(te[Ve],Re);if(null!==Ze)return Ze}return null}try{const te={alpha:!0,depth:f,stencil:_,antialias:v,premultipliedAlpha:E,preserveDrawingBuffer:w,powerPreference:S,failIfMajorPerformanceCaveat:R};if("setAttribute"in n&&n.setAttribute("data-engine","three.js r137"),n.addEventListener("webglcontextlost",Rn,!1),n.addEventListener("webglcontextrestored",ge,!1),null===Ee){const Re=["webgl2","webgl","experimental-webgl"];if(!0===V.isWebGL1Renderer&&Re.shift(),Ee=ti(Re,te),null===Ee)throw ti(Re)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===Ee.getShaderPrecisionFormat&&(Ee.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(te){throw console.error("THREE.WebGLRenderer: "+te.message),te}function Lt(){tn=new Z_(Ee),yn=new Bc(Ee,tn,p),tn.init(yn),Zt=new yy(Ee,tn,yn),Vt=new Wh(Ee,tn,yn),Dn=new Uo(Ee),En=new _y,Qe=new jh(Ee,tn,Vt,En,yn,Zt,Dn),Rt=new Kv(V),At=new Nh(V),$t=new Us(Ee,yn),Jt=new X_(Ee,tn,$t,yn),kt=new kc(Ee,$t,Dn,Jt),xn=new Jv(Ee,kt,$t,Dn),St=new Zv(Ee,yn,Qe),oe=new jr(En),wn=new d0(V,Rt,At,tn,yn,Jt,oe),Wn=new f0(En),mi=new dd,ai=new hg(tn,yn),Je=new ip(V,Rt,Vt,xn,c,E),ee=new h0(V,xn,yn),Xt=new Bo(Ee,tn,Dn,yn),je=new op(Ee,tn,Dn,yn),Dn.programs=wn.programs,V.capabilities=yn,V.extensions=tn,V.properties=En,V.renderLists=mi,V.shadowMap=ee,V.state=Vt,V.info=Dn}Lt();const Ft=new Gs(V,Ee);function Rn(te){te.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),$=!0}function ge(){console.log("THREE.WebGLRenderer: Context Restored."),$=!1;const te=Dn.autoReset,Re=ee.enabled,Ve=ee.autoUpdate,ke=ee.needsUpdate,Ze=ee.type;Lt(),Dn.autoReset=te,ee.enabled=Re,ee.autoUpdate=Ve,ee.needsUpdate=ke,ee.type=Ze}function Yt(te){const Re=te.target;Re.removeEventListener("dispose",Yt),function Ht(te){(function vn(te){const Re=En.get(te).programs;void 0!==Re&&(Re.forEach(function(Ve){wn.releaseProgram(Ve)}),te.isShaderMaterial&&wn.releaseShaderCache(te))})(te),En.remove(te)}(Re)}this.xr=Ft,this.getContext=function(){return Ee},this.getContextAttributes=function(){return Ee.getContextAttributes()},this.forceContextLoss=function(){const te=tn.get("WEBGL_lose_context");te&&te.loseContext()},this.forceContextRestore=function(){const te=tn.get("WEBGL_lose_context");te&&te.restoreContext()},this.getPixelRatio=function(){return X},this.setPixelRatio=function(te){void 0!==te&&(X=te,this.setSize(ze,Fe,!1))},this.getSize=function(te){return te.set(ze,Fe)},this.setSize=function(te,Re,Ve){Ft.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(ze=te,Fe=Re,n.width=Math.floor(te*X),n.height=Math.floor(Re*X),!1!==Ve&&(n.style.width=te+"px",n.style.height=Re+"px"),this.setViewport(0,0,te,Re))},this.getDrawingBufferSize=function(te){return te.set(ze*X,Fe*X).floor()},this.setDrawingBufferSize=function(te,Re,Ve){ze=te,Fe=Re,X=Ve,n.width=Math.floor(te*Ve),n.height=Math.floor(Re*Ve),this.setViewport(0,0,te,Re)},this.getCurrentViewport=function(te){return te.copy(re)},this.getViewport=function(te){return te.copy(Ie)},this.setViewport=function(te,Re,Ve,ke){te.isVector4?Ie.set(te.x,te.y,te.z,te.w):Ie.set(te,Re,Ve,ke),Vt.viewport(re.copy(Ie).multiplyScalar(X).floor())},this.getScissor=function(te){return te.copy(Be)},this.setScissor=function(te,Re,Ve,ke){te.isVector4?Be.set(te.x,te.y,te.z,te.w):Be.set(te,Re,Ve,ke),Vt.scissor(ae.copy(Be).multiplyScalar(X).floor())},this.getScissorTest=function(){return Pe},this.setScissorTest=function(te){Vt.setScissorTest(Pe=te)},this.setOpaqueSort=function(te){de=te},this.setTransparentSort=function(te){Ce=te},this.getClearColor=function(te){return te.copy(Je.getClearColor())},this.setClearColor=function(){Je.setClearColor.apply(Je,arguments)},this.getClearAlpha=function(){return Je.getClearAlpha()},this.setClearAlpha=function(){Je.setClearAlpha.apply(Je,arguments)},this.clear=function(te,Re,Ve){let ke=0;(void 0===te||te)&&(ke|=Ee.COLOR_BUFFER_BIT),(void 0===Re||Re)&&(ke|=Ee.DEPTH_BUFFER_BIT),(void 0===Ve||Ve)&&(ke|=Ee.STENCIL_BUFFER_BIT),Ee.clear(ke)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",Rn,!1),n.removeEventListener("webglcontextrestored",ge,!1),mi.dispose(),ai.dispose(),En.dispose(),Rt.dispose(),At.dispose(),xn.dispose(),Jt.dispose(),wn.dispose(),Ft.dispose(),Ft.removeEventListener("sessionstart",Vn),Ft.removeEventListener("sessionend",Di),Ke&&(Ke.dispose(),Ke=null),Ys.stop()},this.renderBufferDirect=function(te,Re,Ve,ke,Ze,fn){null===Re&&(Re=Ot);const bn=Ze.isMesh&&Ze.matrixWorld.determinant()<0,Nn=function Kd(te,Re,Ve,ke,Ze){!0!==Re.isScene&&(Re=Ot),Qe.resetTextureUnits();const fn=Re.fog,Nn=null===Y?V.outputEncoding:!0===Y.isXRRenderTarget?Y.texture.encoding:Dl,In=(ke.isMeshStandardMaterial?At:Rt).get(ke.envMap||(ke.isMeshStandardMaterial?Re.environment:null)),ni=!0===ke.vertexColors&&!!Ve.attributes.color&&4===Ve.attributes.color.itemSize,jn=!!ke.normalMap&&!!Ve.attributes.tangent,Hn=!!Ve.morphAttributes.position,Oi=!!Ve.morphAttributes.normal,pc=Ve.morphAttributes.position?Ve.morphAttributes.position.length:0,Zd=ke.toneMapped?V.toneMapping:0,Jn=En.get(ke),_r=I.state.lights;!0!==ct||!0!==jt&&te===Q||oe.setState(ke,te,te===Q&&ke.id===z);let Ui=!1;ke.version===Jn.__version?(Jn.needsLights&&Jn.lightsStateVersion!==_r.state.version||Jn.outputEncoding!==Nn||Ze.isInstancedMesh&&!1===Jn.instancing||!Ze.isInstancedMesh&&!0===Jn.instancing||Ze.isSkinnedMesh&&!1===Jn.skinning||!Ze.isSkinnedMesh&&!0===Jn.skinning||Jn.envMap!==In||ke.fog&&Jn.fog!==fn||void 0!==Jn.numClippingPlanes&&(Jn.numClippingPlanes!==oe.numPlanes||Jn.numIntersection!==oe.numIntersection)||Jn.vertexAlphas!==ni||Jn.vertexTangents!==jn||Jn.morphTargets!==Hn||Jn.morphNormals!==Oi||Jn.toneMapping!==Zd||!0===yn.isWebGL2&&Jn.morphTargetsCount!==pc)&&(Ui=!0):(Ui=!0,Jn.__version=ke.version);let es=Jn.currentProgram;!0===Ui&&(es=Xd(ke,Re,Ze));let dv=!1,Na=!1,mc=!1;const Ds=es.getUniforms(),Jd=Jn.uniforms;if(Vt.useProgram(es.program)&&(dv=!0,Na=!0,mc=!0),ke.id!==z&&(z=ke.id,Na=!0),dv||Q!==te){if(Ds.setValue(Ee,"projectionMatrix",te.projectionMatrix),yn.logarithmicDepthBuffer&&Ds.setValue(Ee,"logDepthBufFC",2/(Math.log(te.far+1)/Math.LN2)),Q!==te&&(Q=te,Na=!0,mc=!0),ke.isShaderMaterial||ke.isMeshPhongMaterial||ke.isMeshToonMaterial||ke.isMeshStandardMaterial||ke.envMap){const Qo=Ds.map.cameraPosition;void 0!==Qo&&Qo.setValue(Ee,Tt.setFromMatrixPosition(te.matrixWorld))}(ke.isMeshPhongMaterial||ke.isMeshToonMaterial||ke.isMeshLambertMaterial||ke.isMeshBasicMaterial||ke.isMeshStandardMaterial||ke.isShaderMaterial)&&Ds.setValue(Ee,"isOrthographic",!0===te.isOrthographicCamera),(ke.isMeshPhongMaterial||ke.isMeshToonMaterial||ke.isMeshLambertMaterial||ke.isMeshBasicMaterial||ke.isMeshStandardMaterial||ke.isShaderMaterial||ke.isShadowMaterial||Ze.isSkinnedMesh)&&Ds.setValue(Ee,"viewMatrix",te.matrixWorldInverse)}if(Ze.isSkinnedMesh){Ds.setOptional(Ee,Ze,"bindMatrix"),Ds.setOptional(Ee,Ze,"bindMatrixInverse");const Qo=Ze.skeleton;Qo&&(yn.floatVertexTextures?(null===Qo.boneTexture&&Qo.computeBoneTexture(),Ds.setValue(Ee,"boneTexture",Qo.boneTexture,Qe),Ds.setValue(Ee,"boneTextureSize",Qo.boneTextureSize)):Ds.setOptional(Ee,Qo,"boneMatrices"))}return!!Ve&&(void 0!==Ve.morphAttributes.position||void 0!==Ve.morphAttributes.normal)&&St.update(Ze,Ve,ke,es),(Na||Jn.receiveShadow!==Ze.receiveShadow)&&(Jn.receiveShadow=Ze.receiveShadow,Ds.setValue(Ee,"receiveShadow",Ze.receiveShadow)),Na&&(Ds.setValue(Ee,"toneMappingExposure",V.toneMappingExposure),Jn.needsLights&&function Sf(te,Re){te.ambientLightColor.needsUpdate=Re,te.lightProbe.needsUpdate=Re,te.directionalLights.needsUpdate=Re,te.directionalLightShadows.needsUpdate=Re,te.pointLights.needsUpdate=Re,te.pointLightShadows.needsUpdate=Re,te.spotLights.needsUpdate=Re,te.spotLightShadows.needsUpdate=Re,te.rectAreaLights.needsUpdate=Re,te.hemisphereLights.needsUpdate=Re}(Jd,mc),fn&&ke.fog&&Wn.refreshFogUniforms(Jd,fn),Wn.refreshMaterialUniforms(Jd,ke,X,Fe,Ke),Wc.upload(Ee,Jn.uniformsList,Jd,Qe)),ke.isShaderMaterial&&!0===ke.uniformsNeedUpdate&&(Wc.upload(Ee,Jn.uniformsList,Jd,Qe),ke.uniformsNeedUpdate=!1),ke.isSpriteMaterial&&Ds.setValue(Ee,"center",Ze.center),Ds.setValue(Ee,"modelViewMatrix",Ze.modelViewMatrix),Ds.setValue(Ee,"normalMatrix",Ze.normalMatrix),Ds.setValue(Ee,"modelMatrix",Ze.matrixWorld),es}(te,Re,Ve,ke,Ze);Vt.setMaterial(ke,bn);let In=Ve.index;const ni=Ve.attributes.position;if(null===In){if(void 0===ni||0===ni.count)return}else if(0===In.count)return;let jn=1;!0===ke.wireframe&&(In=kt.getWireframeAttribute(Ve),jn=2),Jt.setup(Ze,ke,Nn,Ve,In);let Hn,Oi=Xt;null!==In&&(Hn=$t.get(In),Oi=je,Oi.setIndex(Hn));const pc=null!==In?In.count:ni.count,Zd=Ve.drawRange.start*jn,Jn=Ve.drawRange.count*jn,_r=null!==fn?fn.start*jn:0,Ui=null!==fn?fn.count*jn:1/0,es=Math.max(Zd,_r),dv=Math.min(pc,Zd+Jn,_r+Ui)-1,Na=Math.max(0,dv-es+1);if(0!==Na){if(Ze.isMesh)!0===ke.wireframe?(Vt.setLineWidth(ke.wireframeLinewidth*Kt()),Oi.setMode(Ee.LINES)):Oi.setMode(Ee.TRIANGLES);else if(Ze.isLine){let mc=ke.linewidth;void 0===mc&&(mc=1),Vt.setLineWidth(mc*Kt()),Oi.setMode(Ze.isLineSegments?Ee.LINES:Ze.isLineLoop?Ee.LINE_LOOP:Ee.LINE_STRIP)}else Ze.isPoints?Oi.setMode(Ee.POINTS):Ze.isSprite&&Oi.setMode(Ee.TRIANGLES);if(Ze.isInstancedMesh)Oi.renderInstances(es,Na,Ze.count);else if(Ve.isInstancedBufferGeometry){const mc=Math.min(Ve.instanceCount,Ve._maxInstanceCount);Oi.renderInstances(es,Na,mc)}else Oi.render(es,Na)}},this.compile=function(te,Re){I=ai.get(te),I.init(),B.push(I),te.traverseVisible(function(Ve){Ve.isLight&&Ve.layers.test(Re.layers)&&(I.pushLight(Ve),Ve.castShadow&&I.pushShadow(Ve))}),I.setupLights(V.physicallyCorrectLights),te.traverse(function(Ve){const ke=Ve.material;if(ke)if(Array.isArray(ke))for(let Ze=0;Ze<ke.length;Ze++)Xd(ke[Ze],te,Ve);else Xd(ke,te,Ve)}),B.pop(),I=null};let tt=null;function Vn(){Ys.stop()}function Di(){Ys.start()}const Ys=new ji;function wi(te,Re,Ve,ke){if(!1===te.visible)return;if(te.layers.test(Re.layers))if(te.isGroup)Ve=te.renderOrder;else if(te.isLOD)!0===te.autoUpdate&&te.update(Re);else if(te.isLight)I.pushLight(te),te.castShadow&&I.pushShadow(te);else if(te.isSprite){if(!te.frustumCulled||Xe.intersectsSprite(te)){ke&&Tt.setFromMatrixPosition(te.matrixWorld).applyMatrix4(st);const bn=xn.update(te),Nn=te.material;Nn.visible&&D.push(te,bn,Nn,Ve,Tt.z,null)}}else if((te.isMesh||te.isLine||te.isPoints)&&(te.isSkinnedMesh&&te.skeleton.frame!==Dn.render.frame&&(te.skeleton.update(),te.skeleton.frame=Dn.render.frame),!te.frustumCulled||Xe.intersectsObject(te))){ke&&Tt.setFromMatrixPosition(te.matrixWorld).applyMatrix4(st);const bn=xn.update(te),Nn=te.material;if(Array.isArray(Nn)){const In=bn.groups;for(let ni=0,jn=In.length;ni<jn;ni++){const Hn=In[ni],Oi=Nn[Hn.materialIndex];Oi&&Oi.visible&&D.push(te,bn,Oi,Ve,Tt.z,Hn)}}else Nn.visible&&D.push(te,bn,Nn,Ve,Tt.z,null)}const fn=te.children;for(let bn=0,Nn=fn.length;bn<Nn;bn++)wi(fn[bn],Re,Ve,ke)}function go(te,Re,Ve,ke){const Ze=te.opaque,fn=te.transmissive,bn=te.transparent;I.setupLightsView(Ve),fn.length>0&&function Qr(te,Re,Ve){null===Ke&&(Ke=new(!0===v&&!0===yn.isWebGL2?Bu:Is)(1024,1024,{generateMipmaps:!0,type:null!==Zt.convert(gs)?gs:vr,minFilter:is,magFilter:sn,wrapS:Hi,wrapT:Hi,useRenderToTexture:tn.has("WEBGL_multisampled_render_to_texture")}));const ke=V.getRenderTarget();V.setRenderTarget(Ke),V.clear();const Ze=V.toneMapping;V.toneMapping=0,Eu(te,Re,Ve),V.toneMapping=Ze,Qe.updateMultisampleRenderTarget(Ke),Qe.updateRenderTargetMipmap(Ke),V.setRenderTarget(ke)}(Ze,Re,Ve),ke&&Vt.viewport(re.copy(ke)),Ze.length>0&&Eu(Ze,Re,Ve),fn.length>0&&Eu(fn,Re,Ve),bn.length>0&&Eu(bn,Re,Ve)}function Eu(te,Re,Ve){const ke=!0===Re.isScene?Re.overrideMaterial:null;for(let Ze=0,fn=te.length;Ze<fn;Ze++){const bn=te[Ze],Nn=bn.object,In=bn.geometry,ni=null===ke?bn.material:ke,jn=bn.group;Nn.layers.test(Ve.layers)&&o_(Nn,Re,Ve,In,ni,jn)}}function o_(te,Re,Ve,ke,Ze,fn){te.onBeforeRender(V,Re,Ve,ke,Ze,fn),te.modelViewMatrix.multiplyMatrices(Ve.matrixWorldInverse,te.matrixWorld),te.normalMatrix.getNormalMatrix(te.modelViewMatrix),Ze.onBeforeRender(V,Re,Ve,ke,te,fn),!0===Ze.transparent&&2===Ze.side?(Ze.side=1,Ze.needsUpdate=!0,V.renderBufferDirect(Ve,Re,ke,Ze,te,fn),Ze.side=0,Ze.needsUpdate=!0,V.renderBufferDirect(Ve,Re,ke,Ze,te,fn),Ze.side=2):V.renderBufferDirect(Ve,Re,ke,Ze,te,fn),te.onAfterRender(V,Re,Ve,ke,Ze,fn)}function Xd(te,Re,Ve){!0!==Re.isScene&&(Re=Ot);const ke=En.get(te),Ze=I.state.lights,bn=Ze.state.version,Nn=wn.getParameters(te,Ze.state,I.state.shadowsArray,Re,Ve),In=wn.getProgramCacheKey(Nn);let ni=ke.programs;ke.environment=te.isMeshStandardMaterial?Re.environment:null,ke.fog=Re.fog,ke.envMap=(te.isMeshStandardMaterial?At:Rt).get(te.envMap||ke.environment),void 0===ni&&(te.addEventListener("dispose",Yt),ni=new Map,ke.programs=ni);let jn=ni.get(In);if(void 0!==jn){if(ke.currentProgram===jn&&ke.lightsStateVersion===bn)return Yd(te,Nn),jn}else Nn.uniforms=wn.getUniforms(te),te.onBuild(Ve,Nn,V),te.onBeforeCompile(Nn,V),jn=wn.acquireProgram(Nn,In),ni.set(In,jn),ke.uniforms=Nn.uniforms;const Hn=ke.uniforms;(!te.isShaderMaterial&&!te.isRawShaderMaterial||!0===te.clipping)&&(Hn.clippingPlanes=oe.uniform),Yd(te,Nn),ke.needsLights=function V0(te){return te.isMeshLambertMaterial||te.isMeshToonMaterial||te.isMeshPhongMaterial||te.isMeshStandardMaterial||te.isShadowMaterial||te.isShaderMaterial&&!0===te.lights}(te),ke.lightsStateVersion=bn,ke.needsLights&&(Hn.ambientLightColor.value=Ze.state.ambient,Hn.lightProbe.value=Ze.state.probe,Hn.directionalLights.value=Ze.state.directional,Hn.directionalLightShadows.value=Ze.state.directionalShadow,Hn.spotLights.value=Ze.state.spot,Hn.spotLightShadows.value=Ze.state.spotShadow,Hn.rectAreaLights.value=Ze.state.rectArea,Hn.ltc_1.value=Ze.state.rectAreaLTC1,Hn.ltc_2.value=Ze.state.rectAreaLTC2,Hn.pointLights.value=Ze.state.point,Hn.pointLightShadows.value=Ze.state.pointShadow,Hn.hemisphereLights.value=Ze.state.hemi,Hn.directionalShadowMap.value=Ze.state.directionalShadowMap,Hn.directionalShadowMatrix.value=Ze.state.directionalShadowMatrix,Hn.spotShadowMap.value=Ze.state.spotShadowMap,Hn.spotShadowMatrix.value=Ze.state.spotShadowMatrix,Hn.pointShadowMap.value=Ze.state.pointShadowMap,Hn.pointShadowMatrix.value=Ze.state.pointShadowMatrix);const Oi=jn.getUniforms(),pc=Wc.seqWithValue(Oi.seq,Hn);return ke.currentProgram=jn,ke.uniformsList=pc,jn}function Yd(te,Re){const Ve=En.get(te);Ve.outputEncoding=Re.outputEncoding,Ve.instancing=Re.instancing,Ve.skinning=Re.skinning,Ve.morphTargets=Re.morphTargets,Ve.morphNormals=Re.morphNormals,Ve.morphTargetsCount=Re.morphTargetsCount,Ve.numClippingPlanes=Re.numClippingPlanes,Ve.numIntersection=Re.numClipIntersection,Ve.vertexAlphas=Re.vertexAlphas,Ve.vertexTangents=Re.vertexTangents,Ve.toneMapping=Re.toneMapping}Ys.setAnimationLoop(function hn(te){tt&&tt(te)}),"undefined"!=typeof window&&Ys.setContext(window),this.setAnimationLoop=function(te){tt=te,Ft.setAnimationLoop(te),null===te?Ys.stop():Ys.start()},Ft.addEventListener("sessionstart",Vn),Ft.addEventListener("sessionend",Di),this.render=function(te,Re){if(void 0===Re||!0===Re.isCamera){if(!0!==$){if(!0===te.autoUpdate&&te.updateMatrixWorld(),null===Re.parent&&Re.updateMatrixWorld(),!0===Ft.enabled&&!0===Ft.isPresenting&&(!0===Ft.cameraAutoUpdate&&Ft.updateCamera(Re),Re=Ft.getCamera()),!0===te.isScene&&te.onBeforeRender(V,te,Re,Y),I=ai.get(te,B.length),I.init(),B.push(I),st.multiplyMatrices(Re.projectionMatrix,Re.matrixWorldInverse),Xe.setFromProjectionMatrix(st),jt=this.localClippingEnabled,ct=oe.init(this.clippingPlanes,jt,Re),D=mi.get(te,O.length),D.init(),O.push(D),wi(te,Re,0,V.sortObjects),D.finish(),!0===V.sortObjects&&D.sort(de,Ce),!0===ct&&oe.beginShadows(),ee.render(I.state.shadowsArray,te,Re),!0===ct&&oe.endShadows(),!0===this.info.autoReset&&this.info.reset(),Je.render(D,te),I.setupLights(V.physicallyCorrectLights),Re.isArrayCamera){const ke=Re.cameras;for(let Ze=0,fn=ke.length;Ze<fn;Ze++){const bn=ke[Ze];go(D,te,bn,bn.viewport)}}else go(D,te,Re);null!==Y&&(Qe.updateMultisampleRenderTarget(Y),Qe.updateRenderTargetMipmap(Y)),!0===te.isScene&&te.onAfterRender(V,te,Re),Vt.buffers.depth.setTest(!0),Vt.buffers.depth.setMask(!0),Vt.buffers.color.setMask(!0),Vt.setPolygonOffset(!1),Jt.resetDefaultState(),z=-1,Q=null,B.pop(),I=B.length>0?B[B.length-1]:null,O.pop(),D=O.length>0?O[O.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return U},this.getActiveMipmapLevel=function(){return L},this.getRenderTarget=function(){return Y},this.setRenderTargetTextures=function(te,Re,Ve){En.get(te.texture).__webglTexture=Re,En.get(te.depthTexture).__webglTexture=Ve;const ke=En.get(te);ke.__hasExternalTextures=!0,ke.__hasExternalTextures&&(ke.__autoAllocateDepthBuffer=void 0===Ve,ke.__autoAllocateDepthBuffer||te.useRenderToTexture&&(console.warn("render-to-texture extension was disabled because an external texture was provided"),te.useRenderToTexture=!1,te.useRenderbuffer=!0))},this.setRenderTargetFramebuffer=function(te,Re){const Ve=En.get(te);Ve.__webglFramebuffer=Re,Ve.__useDefaultFramebuffer=void 0===Re},this.setRenderTarget=function(te,Re=0,Ve=0){Y=te,U=Re,L=Ve;let ke=!0;if(te){const In=En.get(te);void 0!==In.__useDefaultFramebuffer?(Vt.bindFramebuffer(Ee.FRAMEBUFFER,null),ke=!1):void 0===In.__webglFramebuffer?Qe.setupRenderTarget(te):In.__hasExternalTextures&&Qe.rebindTextures(te,En.get(te.texture).__webglTexture,En.get(te.depthTexture).__webglTexture)}let Ze=null,fn=!1,bn=!1;if(te){const In=te.texture;(In.isDataTexture3D||In.isDataTexture2DArray)&&(bn=!0);const ni=En.get(te).__webglFramebuffer;te.isWebGLCubeRenderTarget?(Ze=ni[Re],fn=!0):Ze=te.useRenderbuffer?En.get(te).__webglMultisampledFramebuffer:ni,re.copy(te.viewport),ae.copy(te.scissor),ve=te.scissorTest}else re.copy(Ie).multiplyScalar(X).floor(),ae.copy(Be).multiplyScalar(X).floor(),ve=Pe;if(Vt.bindFramebuffer(Ee.FRAMEBUFFER,Ze)&&yn.drawBuffers&&ke&&Vt.drawBuffers(te,Ze),Vt.viewport(re),Vt.scissor(ae),Vt.setScissorTest(ve),fn){const In=En.get(te.texture);Ee.framebufferTexture2D(Ee.FRAMEBUFFER,Ee.COLOR_ATTACHMENT0,Ee.TEXTURE_CUBE_MAP_POSITIVE_X+Re,In.__webglTexture,Ve)}else if(bn){const In=En.get(te.texture);Ee.framebufferTextureLayer(Ee.FRAMEBUFFER,Ee.COLOR_ATTACHMENT0,In.__webglTexture,Ve||0,Re||0)}z=-1},this.readRenderTargetPixels=function(te,Re,Ve,ke,Ze,fn,bn){if(!te||!te.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Nn=En.get(te).__webglFramebuffer;if(te.isWebGLCubeRenderTarget&&void 0!==bn&&(Nn=Nn[bn]),Nn){Vt.bindFramebuffer(Ee.FRAMEBUFFER,Nn);try{const In=te.texture,ni=In.format,jn=In.type;if(ni!==_i&&Zt.convert(ni)!==Ee.getParameter(Ee.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const Hn=jn===gs&&(tn.has("EXT_color_buffer_half_float")||yn.isWebGL2&&tn.has("EXT_color_buffer_float"));if(!(jn===vr||Zt.convert(jn)===Ee.getParameter(Ee.IMPLEMENTATION_COLOR_READ_TYPE)||jn===Mo&&(yn.isWebGL2||tn.has("OES_texture_float")||tn.has("WEBGL_color_buffer_float"))||Hn))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");Ee.checkFramebufferStatus(Ee.FRAMEBUFFER)===Ee.FRAMEBUFFER_COMPLETE?Re>=0&&Re<=te.width-ke&&Ve>=0&&Ve<=te.height-Ze&&Ee.readPixels(Re,Ve,ke,Ze,Zt.convert(ni),Zt.convert(jn),fn):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{const In=null!==Y?En.get(Y).__webglFramebuffer:null;Vt.bindFramebuffer(Ee.FRAMEBUFFER,In)}}},this.copyFramebufferToTexture=function(te,Re,Ve=0){if(!0!==Re.isFramebufferTexture)return void console.error("THREE.WebGLRenderer: copyFramebufferToTexture() can only be used with FramebufferTexture.");const ke=Math.pow(2,-Ve),Ze=Math.floor(Re.image.width*ke),fn=Math.floor(Re.image.height*ke);Qe.setTexture2D(Re,0),Ee.copyTexSubImage2D(Ee.TEXTURE_2D,Ve,0,0,te.x,te.y,Ze,fn),Vt.unbindTexture()},this.copyTextureToTexture=function(te,Re,Ve,ke=0){const Ze=Re.image.width,fn=Re.image.height,bn=Zt.convert(Ve.format),Nn=Zt.convert(Ve.type);Qe.setTexture2D(Ve,0),Ee.pixelStorei(Ee.UNPACK_FLIP_Y_WEBGL,Ve.flipY),Ee.pixelStorei(Ee.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Ve.premultiplyAlpha),Ee.pixelStorei(Ee.UNPACK_ALIGNMENT,Ve.unpackAlignment),Re.isDataTexture?Ee.texSubImage2D(Ee.TEXTURE_2D,ke,te.x,te.y,Ze,fn,bn,Nn,Re.image.data):Re.isCompressedTexture?Ee.compressedTexSubImage2D(Ee.TEXTURE_2D,ke,te.x,te.y,Re.mipmaps[0].width,Re.mipmaps[0].height,bn,Re.mipmaps[0].data):Ee.texSubImage2D(Ee.TEXTURE_2D,ke,te.x,te.y,bn,Nn,Re.image),0===ke&&Ve.generateMipmaps&&Ee.generateMipmap(Ee.TEXTURE_2D),Vt.unbindTexture()},this.copyTextureToTexture3D=function(te,Re,Ve,ke,Ze=0){if(V.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const fn=te.max.x-te.min.x+1,bn=te.max.y-te.min.y+1,Nn=te.max.z-te.min.z+1,In=Zt.convert(ke.format),ni=Zt.convert(ke.type);let jn;if(ke.isDataTexture3D)Qe.setTexture3D(ke,0),jn=Ee.TEXTURE_3D;else{if(!ke.isDataTexture2DArray)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");Qe.setTexture2DArray(ke,0),jn=Ee.TEXTURE_2D_ARRAY}Ee.pixelStorei(Ee.UNPACK_FLIP_Y_WEBGL,ke.flipY),Ee.pixelStorei(Ee.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ke.premultiplyAlpha),Ee.pixelStorei(Ee.UNPACK_ALIGNMENT,ke.unpackAlignment);const Hn=Ee.getParameter(Ee.UNPACK_ROW_LENGTH),Oi=Ee.getParameter(Ee.UNPACK_IMAGE_HEIGHT),pc=Ee.getParameter(Ee.UNPACK_SKIP_PIXELS),Zd=Ee.getParameter(Ee.UNPACK_SKIP_ROWS),Jn=Ee.getParameter(Ee.UNPACK_SKIP_IMAGES),_r=Ve.isCompressedTexture?Ve.mipmaps[0]:Ve.image;Ee.pixelStorei(Ee.UNPACK_ROW_LENGTH,_r.width),Ee.pixelStorei(Ee.UNPACK_IMAGE_HEIGHT,_r.height),Ee.pixelStorei(Ee.UNPACK_SKIP_PIXELS,te.min.x),Ee.pixelStorei(Ee.UNPACK_SKIP_ROWS,te.min.y),Ee.pixelStorei(Ee.UNPACK_SKIP_IMAGES,te.min.z),Ve.isDataTexture||Ve.isDataTexture3D?Ee.texSubImage3D(jn,Ze,Re.x,Re.y,Re.z,fn,bn,Nn,In,ni,_r.data):Ve.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Ee.compressedTexSubImage3D(jn,Ze,Re.x,Re.y,Re.z,fn,bn,Nn,In,_r.data)):Ee.texSubImage3D(jn,Ze,Re.x,Re.y,Re.z,fn,bn,Nn,In,ni,_r),Ee.pixelStorei(Ee.UNPACK_ROW_LENGTH,Hn),Ee.pixelStorei(Ee.UNPACK_IMAGE_HEIGHT,Oi),Ee.pixelStorei(Ee.UNPACK_SKIP_PIXELS,pc),Ee.pixelStorei(Ee.UNPACK_SKIP_ROWS,Zd),Ee.pixelStorei(Ee.UNPACK_SKIP_IMAGES,Jn),0===Ze&&ke.generateMipmaps&&Ee.generateMipmap(jn),Vt.unbindTexture()},this.initTexture=function(te){Qe.setTexture2D(te,0),Vt.unbindTexture()},this.resetState=function(){U=0,L=0,Y=null,Vt.reset(),Jt.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}kn.prototype.isWebGLRenderer=!0;class qc extends kn{}qc.prototype.isWebGL1Renderer=!0;class nc{constructor(n,i=25e-5){this.name="",this.color=new vt(n),this.density=i}clone(){return new nc(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}nc.prototype.isFogExp2=!0;class Xc{constructor(n,i=1,c=1e3){this.name="",this.color=new vt(n),this.near=i,this.far=c}clone(){return new Xc(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}Xc.prototype.isFog=!0;class pd extends Ln{constructor(){super(),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(n,i){return super.copy(n,i),null!==n.background&&(this.background=n.background.clone()),null!==n.environment&&(this.environment=n.environment.clone()),null!==n.fog&&(this.fog=n.fog.clone()),null!==n.overrideMaterial&&(this.overrideMaterial=n.overrideMaterial.clone()),this.autoUpdate=n.autoUpdate,this.matrixAutoUpdate=n.matrixAutoUpdate,this}toJSON(n){const i=super.toJSON(n);return null!==this.fog&&(i.object.fog=this.fog.toJSON()),i}}pd.prototype.isScene=!0;class ws{constructor(n,i){this.array=n,this.stride=i,this.count=void 0!==n?n.length/i:0,this.usage=Iu,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=kr()}onUploadCallback(){}set needsUpdate(n){!0===n&&this.version++}setUsage(n){return this.usage=n,this}copy(n){return this.array=new n.array.constructor(n.array),this.count=n.count,this.stride=n.stride,this.usage=n.usage,this}copyAt(n,i,c){n*=this.stride,c*=i.stride;for(let f=0,_=this.stride;f<_;f++)this.array[n+f]=i.array[c+f];return this}set(n,i=0){return this.array.set(n,i),this}clone(n){void 0===n.arrayBuffers&&(n.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=kr()),void 0===n.arrayBuffers[this.array.buffer._uuid]&&(n.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const i=new this.array.constructor(n.arrayBuffers[this.array.buffer._uuid]),c=new this.constructor(i,this.stride);return c.setUsage(this.usage),c}onUpload(n){return this.onUploadCallback=n,this}toJSON(n){return void 0===n.arrayBuffers&&(n.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=kr()),void 0===n.arrayBuffers[this.array.buffer._uuid]&&(n.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}ws.prototype.isInterleavedBuffer=!0;const ci=new Z;class lo{constructor(n,i,c,f=!1){this.name="",this.data=n,this.itemSize=i,this.offset=c,this.normalized=!0===f}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(n){this.data.needsUpdate=n}applyMatrix4(n){for(let i=0,c=this.data.count;i<c;i++)ci.x=this.getX(i),ci.y=this.getY(i),ci.z=this.getZ(i),ci.applyMatrix4(n),this.setXYZ(i,ci.x,ci.y,ci.z);return this}applyNormalMatrix(n){for(let i=0,c=this.count;i<c;i++)ci.x=this.getX(i),ci.y=this.getY(i),ci.z=this.getZ(i),ci.applyNormalMatrix(n),this.setXYZ(i,ci.x,ci.y,ci.z);return this}transformDirection(n){for(let i=0,c=this.count;i<c;i++)ci.x=this.getX(i),ci.y=this.getY(i),ci.z=this.getZ(i),ci.transformDirection(n),this.setXYZ(i,ci.x,ci.y,ci.z);return this}setX(n,i){return this.data.array[n*this.data.stride+this.offset]=i,this}setY(n,i){return this.data.array[n*this.data.stride+this.offset+1]=i,this}setZ(n,i){return this.data.array[n*this.data.stride+this.offset+2]=i,this}setW(n,i){return this.data.array[n*this.data.stride+this.offset+3]=i,this}getX(n){return this.data.array[n*this.data.stride+this.offset]}getY(n){return this.data.array[n*this.data.stride+this.offset+1]}getZ(n){return this.data.array[n*this.data.stride+this.offset+2]}getW(n){return this.data.array[n*this.data.stride+this.offset+3]}setXY(n,i,c){return this.data.array[(n=n*this.data.stride+this.offset)+0]=i,this.data.array[n+1]=c,this}setXYZ(n,i,c,f){return this.data.array[(n=n*this.data.stride+this.offset)+0]=i,this.data.array[n+1]=c,this.data.array[n+2]=f,this}setXYZW(n,i,c,f,_){return this.data.array[(n=n*this.data.stride+this.offset)+0]=i,this.data.array[n+1]=c,this.data.array[n+2]=f,this.data.array[n+3]=_,this}clone(n){if(void 0===n){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const i=[];for(let c=0;c<this.count;c++){const f=c*this.data.stride+this.offset;for(let _=0;_<this.itemSize;_++)i.push(this.data.array[f+_])}return new Un(new this.array.constructor(i),this.itemSize,this.normalized)}return void 0===n.interleavedBuffers&&(n.interleavedBuffers={}),void 0===n.interleavedBuffers[this.data.uuid]&&(n.interleavedBuffers[this.data.uuid]=this.data.clone(n)),new lo(n.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(n){if(void 0===n){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const i=[];for(let c=0;c<this.count;c++){const f=c*this.data.stride+this.offset;for(let _=0;_<this.itemSize;_++)i.push(this.data.array[f+_])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:i,normalized:this.normalized}}return void 0===n.interleavedBuffers&&(n.interleavedBuffers={}),void 0===n.interleavedBuffers[this.data.uuid]&&(n.interleavedBuffers[this.data.uuid]=this.data.toJSON(n)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}lo.prototype.isInterleavedBufferAttribute=!0;class Yc extends pr{constructor(n){super(),this.type="SpriteMaterial",this.color=new vt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(n)}copy(n){return super.copy(n),this.color.copy(n.color),this.map=n.map,this.alphaMap=n.alphaMap,this.rotation=n.rotation,this.sizeAttenuation=n.sizeAttenuation,this}}let Kc;Yc.prototype.isSpriteMaterial=!0;const md=new Z,Zc=new Z,gd=new Z,co=new Ne,qi=new Ne,bs=new Wt,zs=new Z,ds=new Z,_d=new Z,yd=new Ne,pg=new Ne,mg=new Ne;class Ep extends Ln{constructor(n){if(super(),this.type="Sprite",void 0===Kc){Kc=new cn;const i=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),c=new ws(i,5);Kc.setIndex([0,1,2,0,2,3]),Kc.setAttribute("position",new lo(c,3,0,!1)),Kc.setAttribute("uv",new lo(c,2,3,!1))}this.geometry=Kc,this.material=void 0!==n?n:new Yc,this.center=new Ne(.5,.5)}raycast(n,i){null===n.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Zc.setFromMatrixScale(this.matrixWorld),bs.copy(n.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(n.camera.matrixWorldInverse,this.matrixWorld),gd.setFromMatrixPosition(this.modelViewMatrix),n.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Zc.multiplyScalar(-gd.z);const c=this.material.rotation;let f,_;0!==c&&(_=Math.cos(c),f=Math.sin(c));const v=this.center;xp(zs.set(-.5,-.5,0),gd,v,Zc,f,_),xp(ds.set(.5,-.5,0),gd,v,Zc,f,_),xp(_d.set(.5,.5,0),gd,v,Zc,f,_),yd.set(0,0),pg.set(1,0),mg.set(1,1);let E=n.ray.intersectTriangle(zs,ds,_d,!1,md);if(null===E&&(xp(ds.set(-.5,.5,0),gd,v,Zc,f,_),pg.set(0,1),E=n.ray.intersectTriangle(zs,_d,ds,!1,md),null===E))return;const w=n.ray.origin.distanceTo(md);w<n.near||w>n.far||i.push({distance:w,point:md.clone(),uv:zi.getUV(md,zs,ds,_d,yd,pg,mg,new Ne),face:null,object:this})}copy(n){return super.copy(n),void 0!==n.center&&this.center.copy(n.center),this.material=n.material,this}}function xp(p,n,i,c,f,_){co.subVectors(p,i).addScalar(.5).multiply(c),void 0!==f?(qi.x=_*co.x-f*co.y,qi.y=f*co.x+_*co.y):qi.copy(co),p.copy(n),p.x+=qi.x,p.y+=qi.y,p.applyMatrix4(bs)}Ep.prototype.isSprite=!0;const Mp=new Z,wp=new Z;class Ey extends Ln{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(n){super.copy(n,!1);const i=n.levels;for(let c=0,f=i.length;c<f;c++){const _=i[c];this.addLevel(_.object.clone(),_.distance)}return this.autoUpdate=n.autoUpdate,this}addLevel(n,i=0){i=Math.abs(i);const c=this.levels;let f;for(f=0;f<c.length&&!(i<c[f].distance);f++);return c.splice(f,0,{distance:i,object:n}),this.add(n),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(n){const i=this.levels;if(i.length>0){let c,f;for(c=1,f=i.length;c<f&&!(n<i[c].distance);c++);return i[c-1].object}return null}raycast(n,i){if(this.levels.length>0){Mp.setFromMatrixPosition(this.matrixWorld);const f=n.ray.origin.distanceTo(Mp);this.getObjectForDistance(f).raycast(n,i)}}update(n){const i=this.levels;if(i.length>1){Mp.setFromMatrixPosition(n.matrixWorld),wp.setFromMatrixPosition(this.matrixWorld);const c=Mp.distanceTo(wp)/n.zoom;let f,_;for(i[0].object.visible=!0,f=1,_=i.length;f<_&&c>=i[f].distance;f++)i[f-1].object.visible=!1,i[f].object.visible=!0;for(this._currentLevel=f-1;f<_;f++)i[f].object.visible=!1}}toJSON(n){const i=super.toJSON(n);!1===this.autoUpdate&&(i.object.autoUpdate=!1),i.object.levels=[];const c=this.levels;for(let f=0,_=c.length;f<_;f++){const v=c[f];i.object.levels.push({object:v.object.uuid,distance:v.distance})}return i}}const gg=new Z,vd=new ei,bp=new ei,p0=new Z,Sp=new Wt;class Ed extends hi{constructor(n,i){super(n,i),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Wt,this.bindMatrixInverse=new Wt}copy(n){return super.copy(n),this.bindMode=n.bindMode,this.bindMatrix.copy(n.bindMatrix),this.bindMatrixInverse.copy(n.bindMatrixInverse),this.skeleton=n.skeleton,this}bind(n,i){this.skeleton=n,void 0===i&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),i=this.matrixWorld),this.bindMatrix.copy(i),this.bindMatrixInverse.copy(i).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const n=new ei,i=this.geometry.attributes.skinWeight;for(let c=0,f=i.count;c<f;c++){n.x=i.getX(c),n.y=i.getY(c),n.z=i.getZ(c),n.w=i.getW(c);const _=1/n.manhattanLength();_!==1/0?n.multiplyScalar(_):n.set(1,0,0,0),i.setXYZW(c,n.x,n.y,n.z,n.w)}}updateMatrixWorld(n){super.updateMatrixWorld(n),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(n,i){const c=this.skeleton,f=this.geometry;vd.fromBufferAttribute(f.attributes.skinIndex,n),bp.fromBufferAttribute(f.attributes.skinWeight,n),gg.copy(i).applyMatrix4(this.bindMatrix),i.set(0,0,0);for(let _=0;_<4;_++){const v=bp.getComponent(_);if(0!==v){const E=vd.getComponent(_);Sp.multiplyMatrices(c.bones[E].matrixWorld,c.boneInverses[E]),i.addScaledVector(p0.copy(gg).applyMatrix4(Sp),v)}}return i.applyMatrix4(this.bindMatrixInverse)}}Ed.prototype.isSkinnedMesh=!0;class xd extends Ln{constructor(){super(),this.type="Bone"}}xd.prototype.isBone=!0;class Cn extends li{constructor(n=null,i=1,c=1,f,_,v,E,w,S=sn,R=sn,D,I){super(null,v,E,w,S,R,f,_,D,I),this.image={data:n,width:i,height:c},this.magFilter=S,this.minFilter=R,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}Cn.prototype.isDataTexture=!0;const xy=new Wt,ic=new Wt;class Cp{constructor(n=[],i=[]){this.uuid=kr(),this.bones=n.slice(0),this.boneInverses=i,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const n=this.bones,i=this.boneInverses;if(this.boneMatrices=new Float32Array(16*n.length),0===i.length)this.calculateInverses();else if(n.length!==i.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let c=0,f=this.bones.length;c<f;c++)this.boneInverses.push(new Wt)}}calculateInverses(){this.boneInverses.length=0;for(let n=0,i=this.bones.length;n<i;n++){const c=new Wt;this.bones[n]&&c.copy(this.bones[n].matrixWorld).invert(),this.boneInverses.push(c)}}pose(){for(let n=0,i=this.bones.length;n<i;n++){const c=this.bones[n];c&&c.matrixWorld.copy(this.boneInverses[n]).invert()}for(let n=0,i=this.bones.length;n<i;n++){const c=this.bones[n];c&&(c.parent&&c.parent.isBone?(c.matrix.copy(c.parent.matrixWorld).invert(),c.matrix.multiply(c.matrixWorld)):c.matrix.copy(c.matrixWorld),c.matrix.decompose(c.position,c.quaternion,c.scale))}}update(){const n=this.bones,i=this.boneInverses,c=this.boneMatrices,f=this.boneTexture;for(let _=0,v=n.length;_<v;_++)xy.multiplyMatrices(n[_]?n[_].matrixWorld:ic,i[_]),xy.toArray(c,16*_);null!==f&&(f.needsUpdate=!0)}clone(){return new Cp(this.bones,this.boneInverses)}computeBoneTexture(){let n=Math.sqrt(4*this.bones.length);n=xm(n),n=Math.max(n,4);const i=new Float32Array(n*n*4);i.set(this.boneMatrices);const c=new Cn(i,n,n,_i,Mo);return c.needsUpdate=!0,this.boneMatrices=i,this.boneTexture=c,this.boneTextureSize=n,this}getBoneByName(n){for(let i=0,c=this.bones.length;i<c;i++){const f=this.bones[i];if(f.name===n)return f}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(n,i){this.uuid=n.uuid;for(let c=0,f=n.bones.length;c<f;c++){const _=n.bones[c];let v=i[_];void 0===v&&(console.warn("THREE.Skeleton: No bone found with UUID:",_),v=new xd),this.bones.push(v),this.boneInverses.push((new Wt).fromArray(n.boneInverses[c]))}return this.init(),this}toJSON(){const n={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};n.uuid=this.uuid;const i=this.bones,c=this.boneInverses;for(let f=0,_=i.length;f<_;f++)n.bones.push(i[f].uuid),n.boneInverses.push(c[f].toArray());return n}}class ul extends Un{constructor(n,i,c,f=1){"number"==typeof c&&(f=c,c=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(n,i,c),this.meshPerAttribute=f}copy(n){return super.copy(n),this.meshPerAttribute=n.meshPerAttribute,this}toJSON(){const n=super.toJSON();return n.meshPerAttribute=this.meshPerAttribute,n.isInstancedBufferAttribute=!0,n}}ul.prototype.isInstancedBufferAttribute=!0;const _g=new Wt,yg=new Wt,qh=[],hs=new hi;class Xh extends hi{constructor(n,i,c){super(n,i),this.instanceMatrix=new ul(new Float32Array(16*c),16),this.instanceColor=null,this.count=c,this.frustumCulled=!1}copy(n){return super.copy(n),this.instanceMatrix.copy(n.instanceMatrix),null!==n.instanceColor&&(this.instanceColor=n.instanceColor.clone()),this.count=n.count,this}getColorAt(n,i){i.fromArray(this.instanceColor.array,3*n)}getMatrixAt(n,i){i.fromArray(this.instanceMatrix.array,16*n)}raycast(n,i){const c=this.matrixWorld,f=this.count;if(hs.geometry=this.geometry,hs.material=this.material,void 0!==hs.material)for(let _=0;_<f;_++){this.getMatrixAt(_,_g),yg.multiplyMatrices(c,_g),hs.matrixWorld=yg,hs.raycast(n,qh);for(let v=0,E=qh.length;v<E;v++){const w=qh[v];w.instanceId=_,w.object=this,i.push(w)}qh.length=0}}setColorAt(n,i){null===this.instanceColor&&(this.instanceColor=new ul(new Float32Array(3*this.instanceMatrix.count),3)),i.toArray(this.instanceColor.array,3*n)}setMatrixAt(n,i){i.toArray(this.instanceMatrix.array,16*n)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}Xh.prototype.isInstancedMesh=!0;class fi extends pr{constructor(n){super(),this.type="LineBasicMaterial",this.color=new vt(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(n)}copy(n){return super.copy(n),this.color.copy(n.color),this.linewidth=n.linewidth,this.linecap=n.linecap,this.linejoin=n.linejoin,this}}fi.prototype.isLineBasicMaterial=!0;const Md=new Z,m0=new Z,br=new Wt,zo=new bc,wd=new fa;class Aa extends Ln{constructor(n=new cn,i=new fi){super(),this.type="Line",this.geometry=n,this.material=i,this.updateMorphTargets()}copy(n){return super.copy(n),this.material=n.material,this.geometry=n.geometry,this}computeLineDistances(){const n=this.geometry;if(n.isBufferGeometry)if(null===n.index){const i=n.attributes.position,c=[0];for(let f=1,_=i.count;f<_;f++)Md.fromBufferAttribute(i,f-1),m0.fromBufferAttribute(i,f),c[f]=c[f-1],c[f]+=Md.distanceTo(m0);n.setAttribute("lineDistance",new pt(c,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else n.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}raycast(n,i){const c=this.geometry,f=this.matrixWorld,_=n.params.Line.threshold,v=c.drawRange;if(null===c.boundingSphere&&c.computeBoundingSphere(),wd.copy(c.boundingSphere),wd.applyMatrix4(f),wd.radius+=_,!1===n.ray.intersectsSphere(wd))return;br.copy(f).invert(),zo.copy(n.ray).applyMatrix4(br);const E=_/((this.scale.x+this.scale.y+this.scale.z)/3),w=E*E,S=new Z,R=new Z,D=new Z,I=new Z,O=this.isLineSegments?2:1;if(c.isBufferGeometry){const B=c.index,$=c.attributes.position;if(null!==B)for(let Y=Math.max(0,v.start),z=Math.min(B.count,v.start+v.count)-1;Y<z;Y+=O){const Q=B.getX(Y),re=B.getX(Y+1);if(S.fromBufferAttribute($,Q),R.fromBufferAttribute($,re),zo.distanceSqToSegment(S,R,I,D)>w)continue;I.applyMatrix4(this.matrixWorld);const ve=n.ray.origin.distanceTo(I);ve<n.near||ve>n.far||i.push({distance:ve,point:D.clone().applyMatrix4(this.matrixWorld),index:Y,face:null,faceIndex:null,object:this})}else for(let Y=Math.max(0,v.start),z=Math.min($.count,v.start+v.count)-1;Y<z;Y+=O){if(S.fromBufferAttribute($,Y),R.fromBufferAttribute($,Y+1),zo.distanceSqToSegment(S,R,I,D)>w)continue;I.applyMatrix4(this.matrixWorld);const re=n.ray.origin.distanceTo(I);re<n.near||re>n.far||i.push({distance:re,point:D.clone().applyMatrix4(this.matrixWorld),index:Y,face:null,faceIndex:null,object:this})}}else c.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const n=this.geometry;if(n.isBufferGeometry){const i=n.morphAttributes,c=Object.keys(i);if(c.length>0){const f=i[c[0]];if(void 0!==f){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let _=0,v=f.length;_<v;_++){const E=f[_].name||String(_);this.morphTargetInfluences.push(0),this.morphTargetDictionary[E]=_}}}}else{const i=n.morphTargets;void 0!==i&&i.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}Aa.prototype.isLine=!0;const Yh=new Z,Jc=new Z;class Ss extends Aa{constructor(n,i){super(n,i),this.type="LineSegments"}computeLineDistances(){const n=this.geometry;if(n.isBufferGeometry)if(null===n.index){const i=n.attributes.position,c=[];for(let f=0,_=i.count;f<_;f+=2)Yh.fromBufferAttribute(i,f),Jc.fromBufferAttribute(i,f+1),c[f]=0===f?0:c[f-1],c[f+1]=c[f]+Yh.distanceTo(Jc);n.setAttribute("lineDistance",new pt(c,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else n.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}Ss.prototype.isLineSegments=!0;class bd extends Aa{constructor(n,i){super(n,i),this.type="LineLoop"}}bd.prototype.isLineLoop=!0;class rc extends pr{constructor(n){super(),this.type="PointsMaterial",this.color=new vt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.setValues(n)}copy(n){return super.copy(n),this.color.copy(n.color),this.map=n.map,this.alphaMap=n.alphaMap,this.size=n.size,this.sizeAttenuation=n.sizeAttenuation,this}}rc.prototype.isPointsMaterial=!0;const Tp=new Wt,Kh=new bc,Qc=new fa,uo=new Z;class Fn extends Ln{constructor(n=new cn,i=new rc){super(),this.type="Points",this.geometry=n,this.material=i,this.updateMorphTargets()}copy(n){return super.copy(n),this.material=n.material,this.geometry=n.geometry,this}raycast(n,i){const c=this.geometry,f=this.matrixWorld,_=n.params.Points.threshold,v=c.drawRange;if(null===c.boundingSphere&&c.computeBoundingSphere(),Qc.copy(c.boundingSphere),Qc.applyMatrix4(f),Qc.radius+=_,!1===n.ray.intersectsSphere(Qc))return;Tp.copy(f).invert(),Kh.copy(n.ray).applyMatrix4(Tp);const E=_/((this.scale.x+this.scale.y+this.scale.z)/3),w=E*E;if(c.isBufferGeometry){const S=c.index,D=c.attributes.position;if(null!==S)for(let B=Math.max(0,v.start),V=Math.min(S.count,v.start+v.count);B<V;B++){const $=S.getX(B);uo.fromBufferAttribute(D,$),Sd(uo,$,w,f,n,i,this)}else for(let B=Math.max(0,v.start),V=Math.min(D.count,v.start+v.count);B<V;B++)uo.fromBufferAttribute(D,B),Sd(uo,B,w,f,n,i,this)}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const n=this.geometry;if(n.isBufferGeometry){const i=n.morphAttributes,c=Object.keys(i);if(c.length>0){const f=i[c[0]];if(void 0!==f){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let _=0,v=f.length;_<v;_++){const E=f[_].name||String(_);this.morphTargetInfluences.push(0),this.morphTargetDictionary[E]=_}}}}else{const i=n.morphTargets;void 0!==i&&i.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}function Sd(p,n,i,c,f,_,v){const E=Kh.distanceSqToPoint(p);if(E<i){const w=new Z;Kh.closestPointToPoint(p,w),w.applyMatrix4(c);const S=f.ray.origin.distanceTo(w);if(S<f.near||S>f.far)return;_.push({distance:S,distanceToRay:Math.sqrt(E),point:w,index:n,face:null,object:v})}}Fn.prototype.isPoints=!0;class vg extends li{constructor(n,i,c,f,_,v,E,w,S){super(n,i,c,f,_,v,E,w,S),this.minFilter=void 0!==v?v:ri,this.magFilter=void 0!==_?_:ri,this.generateMipmaps=!1;const R=this;"requestVideoFrameCallback"in n&&n.requestVideoFrameCallback(function D(){R.needsUpdate=!0,n.requestVideoFrameCallback(D)})}clone(){return new this.constructor(this.image).copy(this)}update(){const n=this.image;"requestVideoFrameCallback"in n==0&&n.readyState>=n.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}vg.prototype.isVideoTexture=!0;class Ws extends li{constructor(n,i,c){super({width:n,height:i}),this.format=c,this.magFilter=sn,this.minFilter=sn,this.generateMipmaps=!1,this.needsUpdate=!0}}Ws.prototype.isFramebufferTexture=!0;class Ap extends li{constructor(n,i,c,f,_,v,E,w,S,R,D,I){super(null,v,E,w,S,R,f,_,D,I),this.image={width:i,height:c},this.mipmaps=n,this.flipY=!1,this.generateMipmaps=!1}}Ap.prototype.isCompressedTexture=!0;class Eg extends li{constructor(n,i,c,f,_,v,E,w,S){super(n,i,c,f,_,v,E,w,S),this.needsUpdate=!0}}Eg.prototype.isCanvasTexture=!0;class eu extends cn{constructor(n=1,i=8,c=0,f=2*Math.PI){super(),this.type="CircleGeometry",this.parameters={radius:n,segments:i,thetaStart:c,thetaLength:f},i=Math.max(3,i);const _=[],v=[],E=[],w=[],S=new Z,R=new Ne;v.push(0,0,0),E.push(0,0,1),w.push(.5,.5);for(let D=0,I=3;D<=i;D++,I+=3){const O=c+D/i*f;S.x=n*Math.cos(O),S.y=n*Math.sin(O),v.push(S.x,S.y,S.z),E.push(0,0,1),R.x=(v[I]/n+1)/2,R.y=(v[I+1]/n+1)/2,w.push(R.x,R.y)}for(let D=1;D<=i;D++)_.push(D,D+1,0);this.setIndex(_),this.setAttribute("position",new pt(v,3)),this.setAttribute("normal",new pt(E,3)),this.setAttribute("uv",new pt(w,2))}static fromJSON(n){return new eu(n.radius,n.segments,n.thetaStart,n.thetaLength)}}class js extends cn{constructor(n=1,i=1,c=1,f=8,_=1,v=!1,E=0,w=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:n,radiusBottom:i,height:c,radialSegments:f,heightSegments:_,openEnded:v,thetaStart:E,thetaLength:w};const S=this;f=Math.floor(f),_=Math.floor(_);const R=[],D=[],I=[],O=[];let B=0;const V=[],$=c/2;let U=0;function Y(z){const Q=B,re=new Ne,ae=new Z;let ve=0;const ze=!0===z?n:i,Fe=!0===z?1:-1;for(let de=1;de<=f;de++)D.push(0,$*Fe,0),I.push(0,Fe,0),O.push(.5,.5),B++;const X=B;for(let de=0;de<=f;de++){const Ie=de/f*w+E,Be=Math.cos(Ie),Pe=Math.sin(Ie);ae.x=ze*Pe,ae.y=$*Fe,ae.z=ze*Be,D.push(ae.x,ae.y,ae.z),I.push(0,Fe,0),re.x=.5*Be+.5,re.y=.5*Pe*Fe+.5,O.push(re.x,re.y),B++}for(let de=0;de<f;de++){const Ce=Q+de,Ie=X+de;!0===z?R.push(Ie,Ie+1,Ce):R.push(Ie+1,Ie,Ce),ve+=3}S.addGroup(U,ve,!0===z?1:2),U+=ve}(function L(){const z=new Z,Q=new Z;let re=0;const ae=(i-n)/c;for(let ve=0;ve<=_;ve++){const ze=[],Fe=ve/_,X=Fe*(i-n)+n;for(let de=0;de<=f;de++){const Ce=de/f,Ie=Ce*w+E,Be=Math.sin(Ie),Pe=Math.cos(Ie);Q.x=X*Be,Q.y=-Fe*c+$,Q.z=X*Pe,D.push(Q.x,Q.y,Q.z),z.set(Be,ae,Pe).normalize(),I.push(z.x,z.y,z.z),O.push(Ce,1-Fe),ze.push(B++)}V.push(ze)}for(let ve=0;ve<f;ve++)for(let ze=0;ze<_;ze++){const X=V[ze+1][ve],de=V[ze+1][ve+1],Ce=V[ze][ve+1];R.push(V[ze][ve],X,Ce),R.push(X,de,Ce),re+=6}S.addGroup(U,re,0),U+=re})(),!1===v&&(n>0&&Y(!0),i>0&&Y(!1)),this.setIndex(R),this.setAttribute("position",new pt(D,3)),this.setAttribute("normal",new pt(I,3)),this.setAttribute("uv",new pt(O,2))}static fromJSON(n){return new js(n.radiusTop,n.radiusBottom,n.height,n.radialSegments,n.heightSegments,n.openEnded,n.thetaStart,n.thetaLength)}}class dl extends js{constructor(n=1,i=1,c=8,f=1,_=!1,v=0,E=2*Math.PI){super(0,n,i,c,f,_,v,E),this.type="ConeGeometry",this.parameters={radius:n,height:i,radialSegments:c,heightSegments:f,openEnded:_,thetaStart:v,thetaLength:E}}static fromJSON(n){return new dl(n.radius,n.height,n.radialSegments,n.heightSegments,n.openEnded,n.thetaStart,n.thetaLength)}}class Cs extends cn{constructor(n=[],i=[],c=1,f=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:n,indices:i,radius:c,detail:f};const _=[],v=[];function w(L,Y,z,Q){const re=Q+1,ae=[];for(let ve=0;ve<=re;ve++){ae[ve]=[];const ze=L.clone().lerp(z,ve/re),Fe=Y.clone().lerp(z,ve/re),X=re-ve;for(let de=0;de<=X;de++)ae[ve][de]=0===de&&ve===re?ze:ze.clone().lerp(Fe,de/X)}for(let ve=0;ve<re;ve++)for(let ze=0;ze<2*(re-ve)-1;ze++){const Fe=Math.floor(ze/2);ze%2==0?(I(ae[ve][Fe+1]),I(ae[ve+1][Fe]),I(ae[ve][Fe])):(I(ae[ve][Fe+1]),I(ae[ve+1][Fe+1]),I(ae[ve+1][Fe]))}}function I(L){_.push(L.x,L.y,L.z)}function O(L,Y){const z=3*L;Y.x=n[z+0],Y.y=n[z+1],Y.z=n[z+2]}function V(L,Y,z,Q){Q<0&&1===L.x&&(v[Y]=L.x-1),0===z.x&&0===z.z&&(v[Y]=Q/2/Math.PI+.5)}function $(L){return Math.atan2(L.z,-L.x)}function U(L){return Math.atan2(-L.y,Math.sqrt(L.x*L.x+L.z*L.z))}(function E(L){const Y=new Z,z=new Z,Q=new Z;for(let re=0;re<i.length;re+=3)O(i[re+0],Y),O(i[re+1],z),O(i[re+2],Q),w(Y,z,Q,L)})(f),function S(L){const Y=new Z;for(let z=0;z<_.length;z+=3)Y.x=_[z+0],Y.y=_[z+1],Y.z=_[z+2],Y.normalize().multiplyScalar(L),_[z+0]=Y.x,_[z+1]=Y.y,_[z+2]=Y.z}(c),function R(){const L=new Z;for(let Y=0;Y<_.length;Y+=3){L.x=_[Y+0],L.y=_[Y+1],L.z=_[Y+2];const z=$(L)/2/Math.PI+.5,Q=U(L)/Math.PI+.5;v.push(z,1-Q)}(function B(){const L=new Z,Y=new Z,z=new Z,Q=new Z,re=new Ne,ae=new Ne,ve=new Ne;for(let ze=0,Fe=0;ze<_.length;ze+=9,Fe+=6){L.set(_[ze+0],_[ze+1],_[ze+2]),Y.set(_[ze+3],_[ze+4],_[ze+5]),z.set(_[ze+6],_[ze+7],_[ze+8]),re.set(v[Fe+0],v[Fe+1]),ae.set(v[Fe+2],v[Fe+3]),ve.set(v[Fe+4],v[Fe+5]),Q.copy(L).add(Y).add(z).divideScalar(3);const X=$(Q);V(re,Fe+0,L,X),V(ae,Fe+2,Y,X),V(ve,Fe+4,z,X)}})(),function D(){for(let L=0;L<v.length;L+=6){const Y=v[L+0],z=v[L+2],Q=v[L+4],re=Math.max(Y,z,Q),ae=Math.min(Y,z,Q);re>.9&&ae<.1&&(Y<.2&&(v[L+0]+=1),z<.2&&(v[L+2]+=1),Q<.2&&(v[L+4]+=1))}}()}(),this.setAttribute("position",new pt(_,3)),this.setAttribute("normal",new pt(_.slice(),3)),this.setAttribute("uv",new pt(v,2)),0===f?this.computeVertexNormals():this.normalizeNormals()}static fromJSON(n){return new Cs(n.vertices,n.indices,n.radius,n.details)}}class tu extends Cs{constructor(n=1,i=0){const c=(1+Math.sqrt(5))/2,f=1/c;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-f,-c,0,-f,c,0,f,-c,0,f,c,-f,-c,0,-f,c,0,f,-c,0,f,c,0,-c,0,-f,c,0,-f,-c,0,f,c,0,f],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],n,i),this.type="DodecahedronGeometry",this.parameters={radius:n,detail:i}}static fromJSON(n){return new tu(n.radius,n.detail)}}const nu=new Z,Ts=new Z,iu=new Z,sc=new zi;class Zh extends cn{constructor(n=null,i=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:n,thresholdAngle:i},null!==n){const f=Math.pow(10,4),_=Math.cos(Ec*i),v=n.getIndex(),E=n.getAttribute("position"),w=v?v.count:E.count,S=[0,0,0],R=["a","b","c"],D=new Array(3),I={},O=[];for(let B=0;B<w;B+=3){v?(S[0]=v.getX(B),S[1]=v.getX(B+1),S[2]=v.getX(B+2)):(S[0]=B,S[1]=B+1,S[2]=B+2);const{a:V,b:$,c:U}=sc;if(V.fromBufferAttribute(E,S[0]),$.fromBufferAttribute(E,S[1]),U.fromBufferAttribute(E,S[2]),sc.getNormal(iu),D[0]=`${Math.round(V.x*f)},${Math.round(V.y*f)},${Math.round(V.z*f)}`,D[1]=`${Math.round($.x*f)},${Math.round($.y*f)},${Math.round($.z*f)}`,D[2]=`${Math.round(U.x*f)},${Math.round(U.y*f)},${Math.round(U.z*f)}`,D[0]!==D[1]&&D[1]!==D[2]&&D[2]!==D[0])for(let L=0;L<3;L++){const Y=(L+1)%3,z=D[L],Q=D[Y],re=sc[R[L]],ae=sc[R[Y]],ve=`${z}_${Q}`,ze=`${Q}_${z}`;ze in I&&I[ze]?(iu.dot(I[ze].normal)<=_&&(O.push(re.x,re.y,re.z),O.push(ae.x,ae.y,ae.z)),I[ze]=null):ve in I||(I[ve]={index0:S[L],index1:S[Y],normal:iu.clone()})}}for(const B in I)if(I[B]){const{index0:V,index1:$}=I[B];nu.fromBufferAttribute(E,V),Ts.fromBufferAttribute(E,$),O.push(nu.x,nu.y,nu.z),O.push(Ts.x,Ts.y,Ts.z)}this.setAttribute("position",new pt(O,3))}}}class fs{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(n,i){const c=this.getUtoTmapping(n);return this.getPoint(c,i)}getPoints(n=5){const i=[];for(let c=0;c<=n;c++)i.push(this.getPoint(c/n));return i}getSpacedPoints(n=5){const i=[];for(let c=0;c<=n;c++)i.push(this.getPointAt(c/n));return i}getLength(){const n=this.getLengths();return n[n.length-1]}getLengths(n=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===n+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const i=[];let c,f=this.getPoint(0),_=0;i.push(0);for(let v=1;v<=n;v++)c=this.getPoint(v/n),_+=c.distanceTo(f),i.push(_),f=c;return this.cacheArcLengths=i,i}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(n,i){const c=this.getLengths();let f=0;const _=c.length;let v;v=i||n*c[_-1];let S,E=0,w=_-1;for(;E<=w;)if(f=Math.floor(E+(w-E)/2),S=c[f]-v,S<0)E=f+1;else{if(!(S>0)){w=f;break}w=f-1}if(f=w,c[f]===v)return f/(_-1);const R=c[f];return(f+(v-R)/(c[f+1]-R))/(_-1)}getTangent(n,i){let f=n-1e-4,_=n+1e-4;f<0&&(f=0),_>1&&(_=1);const v=this.getPoint(f),E=this.getPoint(_),w=i||(v.isVector2?new Ne:new Z);return w.copy(E).sub(v).normalize(),w}getTangentAt(n,i){const c=this.getUtoTmapping(n);return this.getTangent(c,i)}computeFrenetFrames(n,i){const c=new Z,f=[],_=[],v=[],E=new Z,w=new Wt;for(let O=0;O<=n;O++)f[O]=this.getTangentAt(O/n,new Z);_[0]=new Z,v[0]=new Z;let S=Number.MAX_VALUE;const R=Math.abs(f[0].x),D=Math.abs(f[0].y),I=Math.abs(f[0].z);R<=S&&(S=R,c.set(1,0,0)),D<=S&&(S=D,c.set(0,1,0)),I<=S&&c.set(0,0,1),E.crossVectors(f[0],c).normalize(),_[0].crossVectors(f[0],E),v[0].crossVectors(f[0],_[0]);for(let O=1;O<=n;O++){if(_[O]=_[O-1].clone(),v[O]=v[O-1].clone(),E.crossVectors(f[O-1],f[O]),E.length()>Number.EPSILON){E.normalize();const B=Math.acos(si(f[O-1].dot(f[O]),-1,1));_[O].applyMatrix4(w.makeRotationAxis(E,B))}v[O].crossVectors(f[O],_[O])}if(!0===i){let O=Math.acos(si(_[0].dot(_[n]),-1,1));O/=n,f[0].dot(E.crossVectors(_[0],_[n]))>0&&(O=-O);for(let B=1;B<=n;B++)_[B].applyMatrix4(w.makeRotationAxis(f[B],O*B)),v[B].crossVectors(f[B],_[B])}return{tangents:f,normals:_,binormals:v}}clone(){return(new this.constructor).copy(this)}copy(n){return this.arcLengthDivisions=n.arcLengthDivisions,this}toJSON(){const n={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return n.arcLengthDivisions=this.arcLengthDivisions,n.type=this.type,n}fromJSON(n){return this.arcLengthDivisions=n.arcLengthDivisions,this}}class Cd extends fs{constructor(n=0,i=0,c=1,f=1,_=0,v=2*Math.PI,E=!1,w=0){super(),this.type="EllipseCurve",this.aX=n,this.aY=i,this.xRadius=c,this.yRadius=f,this.aStartAngle=_,this.aEndAngle=v,this.aClockwise=E,this.aRotation=w}getPoint(n,i){const c=i||new Ne,f=2*Math.PI;let _=this.aEndAngle-this.aStartAngle;const v=Math.abs(_)<Number.EPSILON;for(;_<0;)_+=f;for(;_>f;)_-=f;_<Number.EPSILON&&(_=v?0:f),!0===this.aClockwise&&!v&&(_===f?_=-f:_-=f);const E=this.aStartAngle+n*_;let w=this.aX+this.xRadius*Math.cos(E),S=this.aY+this.yRadius*Math.sin(E);if(0!==this.aRotation){const R=Math.cos(this.aRotation),D=Math.sin(this.aRotation),I=w-this.aX,O=S-this.aY;w=I*R-O*D+this.aX,S=I*D+O*R+this.aY}return c.set(w,S)}copy(n){return super.copy(n),this.aX=n.aX,this.aY=n.aY,this.xRadius=n.xRadius,this.yRadius=n.yRadius,this.aStartAngle=n.aStartAngle,this.aEndAngle=n.aEndAngle,this.aClockwise=n.aClockwise,this.aRotation=n.aRotation,this}toJSON(){const n=super.toJSON();return n.aX=this.aX,n.aY=this.aY,n.xRadius=this.xRadius,n.yRadius=this.yRadius,n.aStartAngle=this.aStartAngle,n.aEndAngle=this.aEndAngle,n.aClockwise=this.aClockwise,n.aRotation=this.aRotation,n}fromJSON(n){return super.fromJSON(n),this.aX=n.aX,this.aY=n.aY,this.xRadius=n.xRadius,this.yRadius=n.yRadius,this.aStartAngle=n.aStartAngle,this.aEndAngle=n.aEndAngle,this.aClockwise=n.aClockwise,this.aRotation=n.aRotation,this}}Cd.prototype.isEllipseCurve=!0;class xg extends Cd{constructor(n,i,c,f,_,v){super(n,i,c,c,f,_,v),this.type="ArcCurve"}}function Mg(){let p=0,n=0,i=0,c=0;function f(_,v,E,w){p=_,n=E,i=-3*_+3*v-2*E-w,c=2*_-2*v+E+w}return{initCatmullRom:function(_,v,E,w,S){f(v,E,S*(E-_),S*(w-v))},initNonuniformCatmullRom:function(_,v,E,w,S,R,D){let I=(v-_)/S-(E-_)/(S+R)+(E-v)/R,O=(E-v)/R-(w-v)/(R+D)+(w-E)/D;I*=R,O*=R,f(v,E,I,O)},calc:function(_){const v=_*_;return p+n*_+i*v+c*(v*_)}}}xg.prototype.isArcCurve=!0;const ru=new Z,wg=new Mg,Dp=new Mg,My=new Mg;class Rp extends fs{constructor(n=[],i=!1,c="centripetal",f=.5){super(),this.type="CatmullRomCurve3",this.points=n,this.closed=i,this.curveType=c,this.tension=f}getPoint(n,i=new Z){const c=i,f=this.points,_=f.length,v=(_-(this.closed?0:1))*n;let S,R,E=Math.floor(v),w=v-E;this.closed?E+=E>0?0:(Math.floor(Math.abs(E)/_)+1)*_:0===w&&E===_-1&&(E=_-2,w=1),this.closed||E>0?S=f[(E-1)%_]:(ru.subVectors(f[0],f[1]).add(f[0]),S=ru);const D=f[E%_],I=f[(E+1)%_];if(this.closed||E+2<_?R=f[(E+2)%_]:(ru.subVectors(f[_-1],f[_-2]).add(f[_-1]),R=ru),"centripetal"===this.curveType||"chordal"===this.curveType){const O="chordal"===this.curveType?.5:.25;let B=Math.pow(S.distanceToSquared(D),O),V=Math.pow(D.distanceToSquared(I),O),$=Math.pow(I.distanceToSquared(R),O);V<1e-4&&(V=1),B<1e-4&&(B=V),$<1e-4&&($=V),wg.initNonuniformCatmullRom(S.x,D.x,I.x,R.x,B,V,$),Dp.initNonuniformCatmullRom(S.y,D.y,I.y,R.y,B,V,$),My.initNonuniformCatmullRom(S.z,D.z,I.z,R.z,B,V,$)}else"catmullrom"===this.curveType&&(wg.initCatmullRom(S.x,D.x,I.x,R.x,this.tension),Dp.initCatmullRom(S.y,D.y,I.y,R.y,this.tension),My.initCatmullRom(S.z,D.z,I.z,R.z,this.tension));return c.set(wg.calc(w),Dp.calc(w),My.calc(w)),c}copy(n){super.copy(n),this.points=[];for(let i=0,c=n.points.length;i<c;i++)this.points.push(n.points[i].clone());return this.closed=n.closed,this.curveType=n.curveType,this.tension=n.tension,this}toJSON(){const n=super.toJSON();n.points=[];for(let i=0,c=this.points.length;i<c;i++)n.points.push(this.points[i].toArray());return n.closed=this.closed,n.curveType=this.curveType,n.tension=this.tension,n}fromJSON(n){super.fromJSON(n),this.points=[];for(let i=0,c=n.points.length;i<c;i++){const f=n.points[i];this.points.push((new Z).fromArray(f))}return this.closed=n.closed,this.curveType=n.curveType,this.tension=n.tension,this}}function wy(p,n,i,c,f){const _=.5*(c-n),v=.5*(f-i),E=p*p;return(2*i-2*c+_+v)*(p*E)+(-3*i+3*c-2*_-v)*E+_*p+i}function ps(p,n,i,c){return function by(p,n){const i=1-p;return i*i*n}(p,n)+function Sy(p,n){return 2*(1-p)*p*n}(p,i)+function Cy(p,n){return p*p*n}(p,c)}function ir(p,n,i,c,f){return function Td(p,n){const i=1-p;return i*i*i*n}(p,n)+function bg(p,n){const i=1-p;return 3*i*i*p*n}(p,i)+function Sg(p,n){return 3*(1-p)*p*p*n}(p,c)+function TE(p,n){return p*p*p*n}(p,f)}Rp.prototype.isCatmullRomCurve3=!0;class Pp extends fs{constructor(n=new Ne,i=new Ne,c=new Ne,f=new Ne){super(),this.type="CubicBezierCurve",this.v0=n,this.v1=i,this.v2=c,this.v3=f}getPoint(n,i=new Ne){const c=i,f=this.v0,_=this.v1,v=this.v2,E=this.v3;return c.set(ir(n,f.x,_.x,v.x,E.x),ir(n,f.y,_.y,v.y,E.y)),c}copy(n){return super.copy(n),this.v0.copy(n.v0),this.v1.copy(n.v1),this.v2.copy(n.v2),this.v3.copy(n.v3),this}toJSON(){const n=super.toJSON();return n.v0=this.v0.toArray(),n.v1=this.v1.toArray(),n.v2=this.v2.toArray(),n.v3=this.v3.toArray(),n}fromJSON(n){return super.fromJSON(n),this.v0.fromArray(n.v0),this.v1.fromArray(n.v1),this.v2.fromArray(n.v2),this.v3.fromArray(n.v3),this}}Pp.prototype.isCubicBezierCurve=!0;class Ty extends fs{constructor(n=new Z,i=new Z,c=new Z,f=new Z){super(),this.type="CubicBezierCurve3",this.v0=n,this.v1=i,this.v2=c,this.v3=f}getPoint(n,i=new Z){const c=i,f=this.v0,_=this.v1,v=this.v2,E=this.v3;return c.set(ir(n,f.x,_.x,v.x,E.x),ir(n,f.y,_.y,v.y,E.y),ir(n,f.z,_.z,v.z,E.z)),c}copy(n){return super.copy(n),this.v0.copy(n.v0),this.v1.copy(n.v1),this.v2.copy(n.v2),this.v3.copy(n.v3),this}toJSON(){const n=super.toJSON();return n.v0=this.v0.toArray(),n.v1=this.v1.toArray(),n.v2=this.v2.toArray(),n.v3=this.v3.toArray(),n}fromJSON(n){return super.fromJSON(n),this.v0.fromArray(n.v0),this.v1.fromArray(n.v1),this.v2.fromArray(n.v2),this.v3.fromArray(n.v3),this}}Ty.prototype.isCubicBezierCurve3=!0;class hl extends fs{constructor(n=new Ne,i=new Ne){super(),this.type="LineCurve",this.v1=n,this.v2=i}getPoint(n,i=new Ne){const c=i;return 1===n?c.copy(this.v2):(c.copy(this.v2).sub(this.v1),c.multiplyScalar(n).add(this.v1)),c}getPointAt(n,i){return this.getPoint(n,i)}getTangent(n,i){const c=i||new Ne;return c.copy(this.v2).sub(this.v1).normalize(),c}copy(n){return super.copy(n),this.v1.copy(n.v1),this.v2.copy(n.v2),this}toJSON(){const n=super.toJSON();return n.v1=this.v1.toArray(),n.v2=this.v2.toArray(),n}fromJSON(n){return super.fromJSON(n),this.v1.fromArray(n.v1),this.v2.fromArray(n.v2),this}}hl.prototype.isLineCurve=!0;class Ip extends fs{constructor(n=new Z,i=new Z){super(),this.type="LineCurve3",this.isLineCurve3=!0,this.v1=n,this.v2=i}getPoint(n,i=new Z){const c=i;return 1===n?c.copy(this.v2):(c.copy(this.v2).sub(this.v1),c.multiplyScalar(n).add(this.v1)),c}getPointAt(n,i){return this.getPoint(n,i)}copy(n){return super.copy(n),this.v1.copy(n.v1),this.v2.copy(n.v2),this}toJSON(){const n=super.toJSON();return n.v1=this.v1.toArray(),n.v2=this.v2.toArray(),n}fromJSON(n){return super.fromJSON(n),this.v1.fromArray(n.v1),this.v2.fromArray(n.v2),this}}class su extends fs{constructor(n=new Ne,i=new Ne,c=new Ne){super(),this.type="QuadraticBezierCurve",this.v0=n,this.v1=i,this.v2=c}getPoint(n,i=new Ne){const c=i,f=this.v0,_=this.v1,v=this.v2;return c.set(ps(n,f.x,_.x,v.x),ps(n,f.y,_.y,v.y)),c}copy(n){return super.copy(n),this.v0.copy(n.v0),this.v1.copy(n.v1),this.v2.copy(n.v2),this}toJSON(){const n=super.toJSON();return n.v0=this.v0.toArray(),n.v1=this.v1.toArray(),n.v2=this.v2.toArray(),n}fromJSON(n){return super.fromJSON(n),this.v0.fromArray(n.v0),this.v1.fromArray(n.v1),this.v2.fromArray(n.v2),this}}su.prototype.isQuadraticBezierCurve=!0;class Jh extends fs{constructor(n=new Z,i=new Z,c=new Z){super(),this.type="QuadraticBezierCurve3",this.v0=n,this.v1=i,this.v2=c}getPoint(n,i=new Z){const c=i,f=this.v0,_=this.v1,v=this.v2;return c.set(ps(n,f.x,_.x,v.x),ps(n,f.y,_.y,v.y),ps(n,f.z,_.z,v.z)),c}copy(n){return super.copy(n),this.v0.copy(n.v0),this.v1.copy(n.v1),this.v2.copy(n.v2),this}toJSON(){const n=super.toJSON();return n.v0=this.v0.toArray(),n.v1=this.v1.toArray(),n.v2=this.v2.toArray(),n}fromJSON(n){return super.fromJSON(n),this.v0.fromArray(n.v0),this.v1.fromArray(n.v1),this.v2.fromArray(n.v2),this}}Jh.prototype.isQuadraticBezierCurve3=!0;class Qh extends fs{constructor(n=[]){super(),this.type="SplineCurve",this.points=n}getPoint(n,i=new Ne){const c=i,f=this.points,_=(f.length-1)*n,v=Math.floor(_),E=_-v,w=f[0===v?v:v-1],S=f[v],R=f[v>f.length-2?f.length-1:v+1],D=f[v>f.length-3?f.length-1:v+2];return c.set(wy(E,w.x,S.x,R.x,D.x),wy(E,w.y,S.y,R.y,D.y)),c}copy(n){super.copy(n),this.points=[];for(let i=0,c=n.points.length;i<c;i++)this.points.push(n.points[i].clone());return this}toJSON(){const n=super.toJSON();n.points=[];for(let i=0,c=this.points.length;i<c;i++)n.points.push(this.points[i].toArray());return n}fromJSON(n){super.fromJSON(n),this.points=[];for(let i=0,c=n.points.length;i<c;i++){const f=n.points[i];this.points.push((new Ne).fromArray(f))}return this}}Qh.prototype.isSplineCurve=!0;var Ad=Object.freeze({__proto__:null,ArcCurve:xg,CatmullRomCurve3:Rp,CubicBezierCurve:Pp,CubicBezierCurve3:Ty,EllipseCurve:Cd,LineCurve:hl,LineCurve3:Ip,QuadraticBezierCurve:su,QuadraticBezierCurve3:Jh,SplineCurve:Qh});class Op extends fs{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(n){this.curves.push(n)}closePath(){const n=this.curves[0].getPoint(0),i=this.curves[this.curves.length-1].getPoint(1);n.equals(i)||this.curves.push(new hl(i,n))}getPoint(n,i){const c=n*this.getLength(),f=this.getCurveLengths();let _=0;for(;_<f.length;){if(f[_]>=c){const v=f[_]-c,E=this.curves[_],w=E.getLength();return E.getPointAt(0===w?0:1-v/w,i)}_++}return null}getLength(){const n=this.getCurveLengths();return n[n.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const n=[];let i=0;for(let c=0,f=this.curves.length;c<f;c++)i+=this.curves[c].getLength(),n.push(i);return this.cacheLengths=n,n}getSpacedPoints(n=40){const i=[];for(let c=0;c<=n;c++)i.push(this.getPoint(c/n));return this.autoClose&&i.push(i[0]),i}getPoints(n=12){const i=[];let c;for(let f=0,_=this.curves;f<_.length;f++){const v=_[f],w=v.getPoints(v&&v.isEllipseCurve?2*n:v&&(v.isLineCurve||v.isLineCurve3)?1:v&&v.isSplineCurve?n*v.points.length:n);for(let S=0;S<w.length;S++){const R=w[S];c&&c.equals(R)||(i.push(R),c=R)}}return this.autoClose&&i.length>1&&!i[i.length-1].equals(i[0])&&i.push(i[0]),i}copy(n){super.copy(n),this.curves=[];for(let i=0,c=n.curves.length;i<c;i++)this.curves.push(n.curves[i].clone());return this.autoClose=n.autoClose,this}toJSON(){const n=super.toJSON();n.autoClose=this.autoClose,n.curves=[];for(let i=0,c=this.curves.length;i<c;i++)n.curves.push(this.curves[i].toJSON());return n}fromJSON(n){super.fromJSON(n),this.autoClose=n.autoClose,this.curves=[];for(let i=0,c=n.curves.length;i<c;i++){const f=n.curves[i];this.curves.push((new Ad[f.type]).fromJSON(f))}return this}}class fl extends Op{constructor(n){super(),this.type="Path",this.currentPoint=new Ne,n&&this.setFromPoints(n)}setFromPoints(n){this.moveTo(n[0].x,n[0].y);for(let i=1,c=n.length;i<c;i++)this.lineTo(n[i].x,n[i].y);return this}moveTo(n,i){return this.currentPoint.set(n,i),this}lineTo(n,i){const c=new hl(this.currentPoint.clone(),new Ne(n,i));return this.curves.push(c),this.currentPoint.set(n,i),this}quadraticCurveTo(n,i,c,f){const _=new su(this.currentPoint.clone(),new Ne(n,i),new Ne(c,f));return this.curves.push(_),this.currentPoint.set(c,f),this}bezierCurveTo(n,i,c,f,_,v){const E=new Pp(this.currentPoint.clone(),new Ne(n,i),new Ne(c,f),new Ne(_,v));return this.curves.push(E),this.currentPoint.set(_,v),this}splineThru(n){const i=[this.currentPoint.clone()].concat(n),c=new Qh(i);return this.curves.push(c),this.currentPoint.copy(n[n.length-1]),this}arc(n,i,c,f,_,v){return this.absarc(n+this.currentPoint.x,i+this.currentPoint.y,c,f,_,v),this}absarc(n,i,c,f,_,v){return this.absellipse(n,i,c,c,f,_,v),this}ellipse(n,i,c,f,_,v,E,w){return this.absellipse(n+this.currentPoint.x,i+this.currentPoint.y,c,f,_,v,E,w),this}absellipse(n,i,c,f,_,v,E,w){const S=new Cd(n,i,c,f,_,v,E,w);if(this.curves.length>0){const D=S.getPoint(0);D.equals(this.currentPoint)||this.lineTo(D.x,D.y)}this.curves.push(S);const R=S.getPoint(1);return this.currentPoint.copy(R),this}copy(n){return super.copy(n),this.currentPoint.copy(n.currentPoint),this}toJSON(){const n=super.toJSON();return n.currentPoint=this.currentPoint.toArray(),n}fromJSON(n){return super.fromJSON(n),this.currentPoint.fromArray(n.currentPoint),this}}class ho extends fl{constructor(n){super(n),this.uuid=kr(),this.type="Shape",this.holes=[]}getPointsHoles(n){const i=[];for(let c=0,f=this.holes.length;c<f;c++)i[c]=this.holes[c].getPoints(n);return i}extractPoints(n){return{shape:this.getPoints(n),holes:this.getPointsHoles(n)}}copy(n){super.copy(n),this.holes=[];for(let i=0,c=n.holes.length;i<c;i++)this.holes.push(n.holes[i].clone());return this}toJSON(){const n=super.toJSON();n.uuid=this.uuid,n.holes=[];for(let i=0,c=this.holes.length;i<c;i++)n.holes.push(this.holes[i].toJSON());return n}fromJSON(n){super.fromJSON(n),this.uuid=n.uuid,this.holes=[];for(let i=0,c=n.holes.length;i<c;i++){const f=n.holes[i];this.holes.push((new fl).fromJSON(f))}return this}}const g0_triangulate=function(p,n,i=2){const c=n&&n.length,f=c?n[0]*i:p.length;let _=Ay(p,0,f,i,!0);const v=[];if(!_||_.next===_.prev)return v;let E,w,S,R,D,I,O;if(c&&(_=function Tg(p,n,i,c){const f=[];let _,v,E,w,S;for(_=0,v=n.length;_<v;_++)E=n[_]*c,w=_<v-1?n[_+1]*c:p.length,S=Ay(p,E,w,c,!1),S===S.next&&(S.steiner=!0),f.push(ou(S));for(f.sort(tf),_=0;_<f.length;_++)_0(f[_],i),i=Wo(i,i.next);return i}(p,n,_,i)),p.length>80*i){E=S=p[0],w=R=p[1];for(let B=i;B<f;B+=i)D=p[B],I=p[B+1],D<E&&(E=D),I<w&&(w=I),D>S&&(S=D),I>R&&(R=I);O=Math.max(S-E,R-w),O=0!==O?1/O:0}return pl(_,v,i,E,w,O),v};function Ay(p,n,i,c,f){let _,v;if(f===function Od(p,n,i,c){let f=0;for(let _=n,v=i-c;_<i;_+=c)f+=(p[v]-p[_])*(p[_+1]+p[v+1]),v=_;return f}(p,n,i,c)>0)for(_=n;_<i;_+=c)v=cu(_,p[_],p[_+1],v);else for(_=i-c;_>=n;_-=c)v=cu(_,p[_],p[_+1],v);return v&&ml(v,v.next)&&(Id(v),v=v.next),v}function Wo(p,n){if(!p)return p;n||(n=p);let c,i=p;do{if(c=!1,i.steiner||!ml(i,i.next)&&0!==Ti(i.prev,i,i.next))i=i.next;else{if(Id(i),i=n=i.prev,i===i.next)break;c=!0}}while(c||i!==n);return n}function pl(p,n,i,c,f,_,v){if(!p)return;!v&&_&&function $s(p,n,i,c){let f=p;do{null===f.z&&(f.z=rr(f.x,f.y,n,i,c)),f.prevZ=f.prev,f.nextZ=f.next,f=f.next}while(f!==p);f.prevZ.nextZ=null,f.prevZ=null,function nf(p){let n,i,c,f,_,v,E,w,S=1;do{for(i=p,p=null,_=null,v=0;i;){for(v++,c=i,E=0,n=0;n<S&&(E++,c=c.nextZ,c);n++);for(w=S;E>0||w>0&&c;)0!==E&&(0===w||!c||i.z<=c.z)?(f=i,i=i.nextZ,E--):(f=c,c=c.nextZ,w--),_?_.nextZ=f:p=f,f.prevZ=_,_=f;i=c}_.nextZ=null,S*=2}while(v>1);return p}(f)}(p,c,f,_);let w,S,E=p;for(;p.prev!==p.next;)if(w=p.prev,S=p.next,_?Dy(p,c,f,_):Cg(p))n.push(w.i/i),n.push(p.i/i),n.push(S.i/i),Id(p),p=S.next,E=S.next;else if((p=S)===E){v?1===v?pl(p=ef(Wo(p),n,i),n,i,c,f,_,2):2===v&&Dd(p,n,i,c,f,_):pl(Wo(p),n,i,c,f,_,1);break}}function Cg(p){const n=p.prev,i=p,c=p.next;if(Ti(n,i,c)>=0)return!1;let f=p.next.next;for(;f!==p.prev;){if(Da(n.x,n.y,i.x,i.y,c.x,c.y,f.x,f.y)&&Ti(f.prev,f,f.next)>=0)return!1;f=f.next}return!0}function Dy(p,n,i,c){const f=p.prev,_=p,v=p.next;if(Ti(f,_,v)>=0)return!1;const S=f.x>_.x?f.x>v.x?f.x:v.x:_.x>v.x?_.x:v.x,R=f.y>_.y?f.y>v.y?f.y:v.y:_.y>v.y?_.y:v.y,D=rr(f.x<_.x?f.x<v.x?f.x:v.x:_.x<v.x?_.x:v.x,f.y<_.y?f.y<v.y?f.y:v.y:_.y<v.y?_.y:v.y,n,i,c),I=rr(S,R,n,i,c);let O=p.prevZ,B=p.nextZ;for(;O&&O.z>=D&&B&&B.z<=I;){if(O!==p.prev&&O!==p.next&&Da(f.x,f.y,_.x,_.y,v.x,v.y,O.x,O.y)&&Ti(O.prev,O,O.next)>=0||(O=O.prevZ,B!==p.prev&&B!==p.next&&Da(f.x,f.y,_.x,_.y,v.x,v.y,B.x,B.y)&&Ti(B.prev,B,B.next)>=0))return!1;B=B.nextZ}for(;O&&O.z>=D;){if(O!==p.prev&&O!==p.next&&Da(f.x,f.y,_.x,_.y,v.x,v.y,O.x,O.y)&&Ti(O.prev,O,O.next)>=0)return!1;O=O.prevZ}for(;B&&B.z<=I;){if(B!==p.prev&&B!==p.next&&Da(f.x,f.y,_.x,_.y,v.x,v.y,B.x,B.y)&&Ti(B.prev,B,B.next)>=0)return!1;B=B.nextZ}return!0}function ef(p,n,i){let c=p;do{const f=c.prev,_=c.next.next;!ml(f,_)&&au(f,c,c.next,_)&&Jr(f,_)&&Jr(_,f)&&(n.push(f.i/i),n.push(c.i/i),n.push(_.i/i),Id(c),Id(c.next),c=p=_),c=c.next}while(c!==p);return Wo(c)}function Dd(p,n,i,c,f,_){let v=p;do{let E=v.next.next;for(;E!==v.prev;){if(v.i!==E.i&&qs(v,E)){let w=lu(v,E);return v=Wo(v,v.next),w=Wo(w,w.next),pl(v,n,i,c,f,_),void pl(w,n,i,c,f,_)}E=E.next}v=v.next}while(v!==p)}function tf(p,n){return p.x-n.x}function _0(p,n){if(n=function y0(p,n){let i=n;const c=p.x,f=p.y;let v,_=-1/0;do{if(f<=i.y&&f>=i.next.y&&i.next.y!==i.y){const I=i.x+(f-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(I<=c&&I>_){if(_=I,I===c){if(f===i.y)return i;if(f===i.next.y)return i.next}v=i.x<i.next.x?i:i.next}}i=i.next}while(i!==n);if(!v)return null;if(c===_)return v;const E=v,w=v.x,S=v.y;let D,R=1/0;i=v;do{c>=i.x&&i.x>=w&&c!==i.x&&Da(f<S?c:_,f,w,S,f<S?_:c,f,i.x,i.y)&&(D=Math.abs(f-i.y)/(c-i.x),Jr(i,p)&&(D<R||D===R&&(i.x>v.x||i.x===v.x&&Lp(v,i)))&&(v=i,R=D)),i=i.next}while(i!==E);return v}(p,n)){const i=lu(n,p);Wo(n,n.next),Wo(i,i.next)}}function Lp(p,n){return Ti(p.prev,p,n.prev)<0&&Ti(n.next,p,p.next)<0}function rr(p,n,i,c,f){return(p=1431655765&((p=858993459&((p=252645135&((p=16711935&((p=32767*(p-i)*f)|p<<8))|p<<4))|p<<2))|p<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=32767*(n-c)*f)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function ou(p){let n=p,i=p;do{(n.x<i.x||n.x===i.x&&n.y<i.y)&&(i=n),n=n.next}while(n!==p);return i}function Da(p,n,i,c,f,_,v,E){return(f-v)*(n-E)-(p-v)*(_-E)>=0&&(p-v)*(c-E)-(i-v)*(n-E)>=0&&(i-v)*(_-E)-(f-v)*(c-E)>=0}function qs(p,n){return p.next.i!==n.i&&p.prev.i!==n.i&&!function Rd(p,n){let i=p;do{if(i.i!==p.i&&i.next.i!==p.i&&i.i!==n.i&&i.next.i!==n.i&&au(i,i.next,p,n))return!0;i=i.next}while(i!==p);return!1}(p,n)&&(Jr(p,n)&&Jr(n,p)&&function Pd(p,n){let i=p,c=!1;const f=(p.x+n.x)/2,_=(p.y+n.y)/2;do{i.y>_!=i.next.y>_&&i.next.y!==i.y&&f<(i.next.x-i.x)*(_-i.y)/(i.next.y-i.y)+i.x&&(c=!c),i=i.next}while(i!==p);return c}(p,n)&&(Ti(p.prev,p,n.prev)||Ti(p,n.prev,n))||ml(p,n)&&Ti(p.prev,p,p.next)>0&&Ti(n.prev,n,n.next)>0)}function Ti(p,n,i){return(n.y-p.y)*(i.x-n.x)-(n.x-p.x)*(i.y-n.y)}function ml(p,n){return p.x===n.x&&p.y===n.y}function au(p,n,i,c){const f=Zr(Ti(p,n,i)),_=Zr(Ti(p,n,c)),v=Zr(Ti(i,c,p)),E=Zr(Ti(i,c,n));return!!(f!==_&&v!==E||0===f&&jo(p,i,n)||0===_&&jo(p,c,n)||0===v&&jo(i,p,c)||0===E&&jo(i,n,c))}function jo(p,n,i){return n.x<=Math.max(p.x,i.x)&&n.x>=Math.min(p.x,i.x)&&n.y<=Math.max(p.y,i.y)&&n.y>=Math.min(p.y,i.y)}function Zr(p){return p>0?1:p<0?-1:0}function Jr(p,n){return Ti(p.prev,p,p.next)<0?Ti(p,n,p.next)>=0&&Ti(p,p.prev,n)>=0:Ti(p,n,p.prev)<0||Ti(p,p.next,n)<0}function lu(p,n){const i=new oc(p.i,p.x,p.y),c=new oc(n.i,n.x,n.y),f=p.next,_=n.prev;return p.next=n,n.prev=p,i.next=f,f.prev=i,c.next=i,i.prev=c,_.next=c,c.prev=_,c}function cu(p,n,i,c){const f=new oc(p,n,i);return c?(f.next=c.next,f.prev=c,c.next.prev=f,c.next=f):(f.prev=f,f.next=f),f}function Id(p){p.next.prev=p.prev,p.prev.next=p.next,p.prevZ&&(p.prevZ.nextZ=p.nextZ),p.nextZ&&(p.nextZ.prevZ=p.prevZ)}function oc(p,n,i){this.i=p,this.x=n,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}class $o{static area(n){const i=n.length;let c=0;for(let f=i-1,_=0;_<i;f=_++)c+=n[f].x*n[_].y-n[_].x*n[f].y;return.5*c}static isClockWise(n){return $o.area(n)<0}static triangulateShape(n,i){const c=[],f=[],_=[];uu(n),rf(c,n);let v=n.length;i.forEach(uu);for(let w=0;w<i.length;w++)f.push(v),v+=i[w].length,rf(c,i[w]);const E=g0_triangulate(c,f);for(let w=0;w<E.length;w+=3)_.push(E.slice(w,w+3));return _}}function uu(p){const n=p.length;n>2&&p[n-1].equals(p[0])&&p.pop()}function rf(p,n){for(let i=0;i<n.length;i++)p.push(n[i].x),p.push(n[i].y)}class qo extends cn{constructor(n=new ho([new Ne(.5,.5),new Ne(-.5,.5),new Ne(-.5,-.5),new Ne(.5,-.5)]),i={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:n,options:i},n=Array.isArray(n)?n:[n];const c=this,f=[],_=[];for(let E=0,w=n.length;E<w;E++)v(n[E]);function v(E){const w=[],S=void 0!==i.curveSegments?i.curveSegments:12,R=void 0!==i.steps?i.steps:1;let D=void 0!==i.depth?i.depth:1,I=void 0===i.bevelEnabled||i.bevelEnabled,O=void 0!==i.bevelThickness?i.bevelThickness:.2,B=void 0!==i.bevelSize?i.bevelSize:O-.1,V=void 0!==i.bevelOffset?i.bevelOffset:0,$=void 0!==i.bevelSegments?i.bevelSegments:3;const U=i.extrudePath,L=void 0!==i.UVGenerator?i.UVGenerator:Ag;void 0!==i.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),D=i.amount);let Y,Q,re,ae,ve,z=!1;U&&(Y=U.getSpacedPoints(R),z=!0,I=!1,Q=U.computeFrenetFrames(R,!1),re=new Z,ae=new Z,ve=new Z),I||($=0,O=0,B=0,V=0);const ze=E.extractPoints(S);let Fe=ze.shape;const X=ze.holes;if(!$o.isClockWise(Fe)){Fe=Fe.reverse();for(let Qe=0,Rt=X.length;Qe<Rt;Qe++){const At=X[Qe];$o.isClockWise(At)&&(X[Qe]=At.reverse())}}const Ce=$o.triangulateShape(Fe,X),Ie=Fe;for(let Qe=0,Rt=X.length;Qe<Rt;Qe++)Fe=Fe.concat(X[Qe]);function Be(Qe,Rt,At){return Rt||console.error("THREE.ExtrudeGeometry: vec does not exist"),Rt.clone().multiplyScalar(At).add(Qe)}const Pe=Fe.length,Xe=Ce.length;function ct(Qe,Rt,At){let $t,kt,xn;const wn=Qe.x-Rt.x,Wn=Qe.y-Rt.y,mi=At.x-Qe.x,ai=At.y-Qe.y,oe=wn*wn+Wn*Wn;if(Math.abs(wn*ai-Wn*mi)>Number.EPSILON){const Je=Math.sqrt(oe),St=Math.sqrt(mi*mi+ai*ai),Xt=Rt.x-Wn/Je,je=Rt.y+wn/Je,Lt=((At.x-ai/St-Xt)*ai-(At.y+mi/St-je)*mi)/(wn*ai-Wn*mi);$t=Xt+wn*Lt-Qe.x,kt=je+Wn*Lt-Qe.y;const Ft=$t*$t+kt*kt;if(Ft<=2)return new Ne($t,kt);xn=Math.sqrt(Ft/2)}else{let Je=!1;wn>Number.EPSILON?mi>Number.EPSILON&&(Je=!0):wn<-Number.EPSILON?mi<-Number.EPSILON&&(Je=!0):Math.sign(Wn)===Math.sign(ai)&&(Je=!0),Je?($t=-Wn,kt=wn,xn=Math.sqrt(oe)):($t=wn,kt=Wn,xn=Math.sqrt(oe/2))}return new Ne($t/xn,kt/xn)}const jt=[];for(let Qe=0,Rt=Ie.length,At=Rt-1,$t=Qe+1;Qe<Rt;Qe++,At++,$t++)At===Rt&&(At=0),$t===Rt&&($t=0),jt[Qe]=ct(Ie[Qe],Ie[At],Ie[$t]);const Ke=[];let st,Tt=jt.concat();for(let Qe=0,Rt=X.length;Qe<Rt;Qe++){const At=X[Qe];st=[];for(let $t=0,kt=At.length,xn=kt-1,wn=$t+1;$t<kt;$t++,xn++,wn++)xn===kt&&(xn=0),wn===kt&&(wn=0),st[$t]=ct(At[$t],At[xn],At[wn]);Ke.push(st),Tt=Tt.concat(st)}for(let Qe=0;Qe<$;Qe++){const Rt=Qe/$,At=O*Math.cos(Rt*Math.PI/2),$t=B*Math.sin(Rt*Math.PI/2)+V;for(let kt=0,xn=Ie.length;kt<xn;kt++){const wn=Be(Ie[kt],jt[kt],$t);tn(wn.x,wn.y,-At)}for(let kt=0,xn=X.length;kt<xn;kt++){const wn=X[kt];st=Ke[kt];for(let Wn=0,mi=wn.length;Wn<mi;Wn++){const ai=Be(wn[Wn],st[Wn],$t);tn(ai.x,ai.y,-At)}}}const Ot=B+V;for(let Qe=0;Qe<Pe;Qe++){const Rt=I?Be(Fe[Qe],Tt[Qe],Ot):Fe[Qe];z?(ae.copy(Q.normals[0]).multiplyScalar(Rt.x),re.copy(Q.binormals[0]).multiplyScalar(Rt.y),ve.copy(Y[0]).add(ae).add(re),tn(ve.x,ve.y,ve.z)):tn(Rt.x,Rt.y,0)}for(let Qe=1;Qe<=R;Qe++)for(let Rt=0;Rt<Pe;Rt++){const At=I?Be(Fe[Rt],Tt[Rt],Ot):Fe[Rt];z?(ae.copy(Q.normals[Qe]).multiplyScalar(At.x),re.copy(Q.binormals[Qe]).multiplyScalar(At.y),ve.copy(Y[Qe]).add(ae).add(re),tn(ve.x,ve.y,ve.z)):tn(At.x,At.y,D/R*Qe)}for(let Qe=$-1;Qe>=0;Qe--){const Rt=Qe/$,At=O*Math.cos(Rt*Math.PI/2),$t=B*Math.sin(Rt*Math.PI/2)+V;for(let kt=0,xn=Ie.length;kt<xn;kt++){const wn=Be(Ie[kt],jt[kt],$t);tn(wn.x,wn.y,D+At)}for(let kt=0,xn=X.length;kt<xn;kt++){const wn=X[kt];st=Ke[kt];for(let Wn=0,mi=wn.length;Wn<mi;Wn++){const ai=Be(wn[Wn],st[Wn],$t);z?tn(ai.x,ai.y+Y[R-1].y,Y[R-1].x+At):tn(ai.x,ai.y,D+At)}}}function ti(Qe,Rt){let At=Qe.length;for(;--At>=0;){const $t=At;let kt=At-1;kt<0&&(kt=Qe.length-1);for(let xn=0,wn=R+2*$;xn<wn;xn++){const Wn=Pe*xn,mi=Pe*(xn+1);Vt(Rt+$t+Wn,Rt+kt+Wn,Rt+kt+mi,Rt+$t+mi)}}}function tn(Qe,Rt,At){w.push(Qe),w.push(Rt),w.push(At)}function yn(Qe,Rt,At){Dn(Qe),Dn(Rt),Dn(At);const $t=f.length/3,kt=L.generateTopUV(c,f,$t-3,$t-2,$t-1);En(kt[0]),En(kt[1]),En(kt[2])}function Vt(Qe,Rt,At,$t){Dn(Qe),Dn(Rt),Dn($t),Dn(Rt),Dn(At),Dn($t);const kt=f.length/3,xn=L.generateSideWallUV(c,f,kt-6,kt-3,kt-2,kt-1);En(xn[0]),En(xn[1]),En(xn[3]),En(xn[1]),En(xn[2]),En(xn[3])}function Dn(Qe){f.push(w[3*Qe+0]),f.push(w[3*Qe+1]),f.push(w[3*Qe+2])}function En(Qe){_.push(Qe.x),_.push(Qe.y)}(function Kt(){const Qe=f.length/3;if(I){let Rt=0,At=Pe*Rt;for(let $t=0;$t<Xe;$t++){const kt=Ce[$t];yn(kt[2]+At,kt[1]+At,kt[0]+At)}Rt=R+2*$,At=Pe*Rt;for(let $t=0;$t<Xe;$t++){const kt=Ce[$t];yn(kt[0]+At,kt[1]+At,kt[2]+At)}}else{for(let Rt=0;Rt<Xe;Rt++){const At=Ce[Rt];yn(At[2],At[1],At[0])}for(let Rt=0;Rt<Xe;Rt++){const At=Ce[Rt];yn(At[0]+Pe*R,At[1]+Pe*R,At[2]+Pe*R)}}c.addGroup(Qe,f.length/3-Qe,0)})(),function Ee(){const Qe=f.length/3;let Rt=0;ti(Ie,Rt),Rt+=Ie.length;for(let At=0,$t=X.length;At<$t;At++){const kt=X[At];ti(kt,Rt),Rt+=kt.length}c.addGroup(Qe,f.length/3-Qe,1)}()}this.setAttribute("position",new pt(f,3)),this.setAttribute("uv",new pt(_,2)),this.computeVertexNormals()}toJSON(){const n=super.toJSON();return function Dg(p,n,i){if(i.shapes=[],Array.isArray(p))for(let c=0,f=p.length;c<f;c++)i.shapes.push(p[c].uuid);else i.shapes.push(p.uuid);return void 0!==n.extrudePath&&(i.options.extrudePath=n.extrudePath.toJSON()),i}(this.parameters.shapes,this.parameters.options,n)}static fromJSON(n,i){const c=[];for(let _=0,v=n.shapes.length;_<v;_++)c.push(i[n.shapes[_]]);const f=n.options.extrudePath;return void 0!==f&&(n.options.extrudePath=(new Ad[f.type]).fromJSON(f)),new qo(c,n.options)}}const Ag={generateTopUV:function(p,n,i,c,f){const E=n[3*c],w=n[3*c+1],S=n[3*f],R=n[3*f+1];return[new Ne(n[3*i],n[3*i+1]),new Ne(E,w),new Ne(S,R)]},generateSideWallUV:function(p,n,i,c,f,_){const v=n[3*i],E=n[3*i+1],w=n[3*i+2],S=n[3*c],R=n[3*c+1],D=n[3*c+2],I=n[3*f],O=n[3*f+1],B=n[3*f+2],V=n[3*_],$=n[3*_+1],U=n[3*_+2];return Math.abs(E-R)<Math.abs(v-S)?[new Ne(v,1-w),new Ne(S,1-D),new Ne(I,1-B),new Ne(V,1-U)]:[new Ne(E,1-w),new Ne(R,1-D),new Ne(O,1-B),new Ne($,1-U)]}};class Ld extends Cs{constructor(n=1,i=0){const c=(1+Math.sqrt(5))/2;super([-1,c,0,1,c,0,-1,-c,0,1,-c,0,0,-1,c,0,1,c,0,-1,-c,0,1,-c,c,0,-1,c,0,1,-c,0,-1,-c,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],n,i),this.type="IcosahedronGeometry",this.parameters={radius:n,detail:i}}static fromJSON(n){return new Ld(n.radius,n.detail)}}class du extends cn{constructor(n=[new Ne(0,.5),new Ne(.5,0),new Ne(0,-.5)],i=12,c=0,f=2*Math.PI){super(),this.type="LatheGeometry",this.parameters={points:n,segments:i,phiStart:c,phiLength:f},i=Math.floor(i),f=si(f,0,2*Math.PI);const _=[],v=[],E=[],w=[],S=[],R=1/i,D=new Z,I=new Ne,O=new Z,B=new Z,V=new Z;let $=0,U=0;for(let L=0;L<=n.length-1;L++)switch(L){case 0:$=n[L+1].x-n[L].x,U=n[L+1].y-n[L].y,O.x=1*U,O.y=-$,O.z=0*U,V.copy(O),O.normalize(),w.push(O.x,O.y,O.z);break;case n.length-1:w.push(V.x,V.y,V.z);break;default:$=n[L+1].x-n[L].x,U=n[L+1].y-n[L].y,O.x=1*U,O.y=-$,O.z=0*U,B.copy(O),O.x+=V.x,O.y+=V.y,O.z+=V.z,O.normalize(),w.push(O.x,O.y,O.z),V.copy(B)}for(let L=0;L<=i;L++){const Y=c+L*R*f,z=Math.sin(Y),Q=Math.cos(Y);for(let re=0;re<=n.length-1;re++)D.x=n[re].x*z,D.y=n[re].y,D.z=n[re].x*Q,v.push(D.x,D.y,D.z),I.x=L/i,I.y=re/(n.length-1),E.push(I.x,I.y),S.push(w[3*re+0]*z,w[3*re+1],w[3*re+0]*Q)}for(let L=0;L<i;L++)for(let Y=0;Y<n.length-1;Y++){const z=Y+L*n.length,re=z+n.length,ae=z+n.length+1,ve=z+1;_.push(z,re,ve),_.push(ae,ve,re)}this.setIndex(_),this.setAttribute("position",new pt(v,3)),this.setAttribute("uv",new pt(E,2)),this.setAttribute("normal",new pt(S,3))}static fromJSON(n){return new du(n.points,n.segments,n.phiStart,n.phiLength)}}class gl extends Cs{constructor(n=1,i=0){super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],n,i),this.type="OctahedronGeometry",this.parameters={radius:n,detail:i}}static fromJSON(n){return new gl(n.radius,n.detail)}}class Lr extends cn{constructor(n=.5,i=1,c=8,f=1,_=0,v=2*Math.PI){super(),this.type="RingGeometry",this.parameters={innerRadius:n,outerRadius:i,thetaSegments:c,phiSegments:f,thetaStart:_,thetaLength:v},c=Math.max(3,c);const E=[],w=[],S=[],R=[];let D=n;const I=(i-n)/(f=Math.max(1,f)),O=new Z,B=new Ne;for(let V=0;V<=f;V++){for(let $=0;$<=c;$++){const U=_+$/c*v;O.x=D*Math.cos(U),O.y=D*Math.sin(U),w.push(O.x,O.y,O.z),S.push(0,0,1),B.x=(O.x/i+1)/2,B.y=(O.y/i+1)/2,R.push(B.x,B.y)}D+=I}for(let V=0;V<f;V++){const $=V*(c+1);for(let U=0;U<c;U++){const L=U+$,z=L+c+1,Q=L+c+2,re=L+1;E.push(L,z,re),E.push(z,Q,re)}}this.setIndex(E),this.setAttribute("position",new pt(w,3)),this.setAttribute("normal",new pt(S,3)),this.setAttribute("uv",new pt(R,2))}static fromJSON(n){return new Lr(n.innerRadius,n.outerRadius,n.thetaSegments,n.phiSegments,n.thetaStart,n.thetaLength)}}class _l extends cn{constructor(n=new ho([new Ne(0,.5),new Ne(-.5,-.5),new Ne(.5,-.5)]),i=12){super(),this.type="ShapeGeometry",this.parameters={shapes:n,curveSegments:i};const c=[],f=[],_=[],v=[];let E=0,w=0;if(!1===Array.isArray(n))S(n);else for(let R=0;R<n.length;R++)S(n[R]),this.addGroup(E,w,R),E+=w,w=0;function S(R){const D=f.length/3,I=R.extractPoints(i);let O=I.shape;const B=I.holes;!1===$o.isClockWise(O)&&(O=O.reverse());for(let $=0,U=B.length;$<U;$++){const L=B[$];!0===$o.isClockWise(L)&&(B[$]=L.reverse())}const V=$o.triangulateShape(O,B);for(let $=0,U=B.length;$<U;$++)O=O.concat(B[$]);for(let $=0,U=O.length;$<U;$++){const L=O[$];f.push(L.x,L.y,0),_.push(0,0,1),v.push(L.x,L.y)}for(let $=0,U=V.length;$<U;$++){const L=V[$];c.push(L[0]+D,L[1]+D,L[2]+D),w+=3}}this.setIndex(c),this.setAttribute("position",new pt(f,3)),this.setAttribute("normal",new pt(_,3)),this.setAttribute("uv",new pt(v,2))}toJSON(){const n=super.toJSON();return function Ry(p,n){if(n.shapes=[],Array.isArray(p))for(let i=0,c=p.length;i<c;i++)n.shapes.push(p[i].uuid);else n.shapes.push(p.uuid);return n}(this.parameters.shapes,n)}static fromJSON(n,i){const c=[];for(let f=0,_=n.shapes.length;f<_;f++)c.push(i[n.shapes[f]]);return new _l(c,n.curveSegments)}}class Ra extends cn{constructor(n=1,i=32,c=16,f=0,_=2*Math.PI,v=0,E=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:n,widthSegments:i,heightSegments:c,phiStart:f,phiLength:_,thetaStart:v,thetaLength:E},i=Math.max(3,Math.floor(i)),c=Math.max(2,Math.floor(c));const w=Math.min(v+E,Math.PI);let S=0;const R=[],D=new Z,I=new Z,O=[],B=[],V=[],$=[];for(let U=0;U<=c;U++){const L=[],Y=U/c;let z=0;0==U&&0==v?z=.5/i:U==c&&w==Math.PI&&(z=-.5/i);for(let Q=0;Q<=i;Q++){const re=Q/i;D.x=-n*Math.cos(f+re*_)*Math.sin(v+Y*E),D.y=n*Math.cos(v+Y*E),D.z=n*Math.sin(f+re*_)*Math.sin(v+Y*E),B.push(D.x,D.y,D.z),I.copy(D).normalize(),V.push(I.x,I.y,I.z),$.push(re+z,1-Y),L.push(S++)}R.push(L)}for(let U=0;U<c;U++)for(let L=0;L<i;L++){const Y=R[U][L+1],z=R[U][L],Q=R[U+1][L],re=R[U+1][L+1];(0!==U||v>0)&&O.push(Y,z,re),(U!==c-1||w<Math.PI)&&O.push(z,Q,re)}this.setIndex(O),this.setAttribute("position",new pt(B,3)),this.setAttribute("normal",new pt(V,3)),this.setAttribute("uv",new pt($,2))}static fromJSON(n){return new Ra(n.radius,n.widthSegments,n.heightSegments,n.phiStart,n.phiLength,n.thetaStart,n.thetaLength)}}class Pa extends Cs{constructor(n=1,i=0){super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],n,i),this.type="TetrahedronGeometry",this.parameters={radius:n,detail:i}}static fromJSON(n){return new Pa(n.radius,n.detail)}}class Fd extends cn{constructor(n=1,i=.4,c=8,f=6,_=2*Math.PI){super(),this.type="TorusGeometry",this.parameters={radius:n,tube:i,radialSegments:c,tubularSegments:f,arc:_},c=Math.floor(c),f=Math.floor(f);const v=[],E=[],w=[],S=[],R=new Z,D=new Z,I=new Z;for(let O=0;O<=c;O++)for(let B=0;B<=f;B++){const V=B/f*_,$=O/c*Math.PI*2;D.x=(n+i*Math.cos($))*Math.cos(V),D.y=(n+i*Math.cos($))*Math.sin(V),D.z=i*Math.sin($),E.push(D.x,D.y,D.z),R.x=n*Math.cos(V),R.y=n*Math.sin(V),I.subVectors(D,R).normalize(),w.push(I.x,I.y,I.z),S.push(B/f),S.push(O/c)}for(let O=1;O<=c;O++)for(let B=1;B<=f;B++){const $=(f+1)*(O-1)+B-1,U=(f+1)*(O-1)+B,L=(f+1)*O+B;v.push((f+1)*O+B-1,$,L),v.push($,U,L)}this.setIndex(v),this.setAttribute("position",new pt(E,3)),this.setAttribute("normal",new pt(w,3)),this.setAttribute("uv",new pt(S,2))}static fromJSON(n){return new Fd(n.radius,n.tube,n.radialSegments,n.tubularSegments,n.arc)}}class hu extends cn{constructor(n=1,i=.4,c=64,f=8,_=2,v=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:n,tube:i,tubularSegments:c,radialSegments:f,p:_,q:v},c=Math.floor(c),f=Math.floor(f);const E=[],w=[],S=[],R=[],D=new Z,I=new Z,O=new Z,B=new Z,V=new Z,$=new Z,U=new Z;for(let Y=0;Y<=c;++Y){const z=Y/c*_*Math.PI*2;L(z,_,v,n,O),L(z+.01,_,v,n,B),$.subVectors(B,O),U.addVectors(B,O),V.crossVectors($,U),U.crossVectors(V,$),V.normalize(),U.normalize();for(let Q=0;Q<=f;++Q){const re=Q/f*Math.PI*2,ae=-i*Math.cos(re),ve=i*Math.sin(re);D.x=O.x+(ae*U.x+ve*V.x),D.y=O.y+(ae*U.y+ve*V.y),D.z=O.z+(ae*U.z+ve*V.z),w.push(D.x,D.y,D.z),I.subVectors(D,O).normalize(),S.push(I.x,I.y,I.z),R.push(Y/c),R.push(Q/f)}}for(let Y=1;Y<=c;Y++)for(let z=1;z<=f;z++){const re=(f+1)*Y+(z-1),ae=(f+1)*Y+z,ve=(f+1)*(Y-1)+z;E.push((f+1)*(Y-1)+(z-1),re,ve),E.push(re,ae,ve)}function L(Y,z,Q,re,ae){const ve=Math.cos(Y),ze=Math.sin(Y),Fe=Q/z*Y,X=Math.cos(Fe);ae.x=re*(2+X)*.5*ve,ae.y=re*(2+X)*ze*.5,ae.z=re*Math.sin(Fe)*.5}this.setIndex(E),this.setAttribute("position",new pt(w,3)),this.setAttribute("normal",new pt(S,3)),this.setAttribute("uv",new pt(R,2))}static fromJSON(n){return new hu(n.radius,n.tube,n.tubularSegments,n.radialSegments,n.p,n.q)}}class Nd extends cn{constructor(n=new Jh(new Z(-1,-1,0),new Z(-1,1,0),new Z(1,1,0)),i=64,c=1,f=8,_=!1){super(),this.type="TubeGeometry",this.parameters={path:n,tubularSegments:i,radius:c,radialSegments:f,closed:_};const v=n.computeFrenetFrames(i,_);this.tangents=v.tangents,this.normals=v.normals,this.binormals=v.binormals;const E=new Z,w=new Z,S=new Ne;let R=new Z;const D=[],I=[],O=[],B=[];function $(Y){R=n.getPointAt(Y/i,R);const z=v.normals[Y],Q=v.binormals[Y];for(let re=0;re<=f;re++){const ae=re/f*Math.PI*2,ve=Math.sin(ae),ze=-Math.cos(ae);w.x=ze*z.x+ve*Q.x,w.y=ze*z.y+ve*Q.y,w.z=ze*z.z+ve*Q.z,w.normalize(),I.push(w.x,w.y,w.z),E.x=R.x+c*w.x,E.y=R.y+c*w.y,E.z=R.z+c*w.z,D.push(E.x,E.y,E.z)}}(function V(){for(let Y=0;Y<i;Y++)$(Y);$(!1===_?i:0),function L(){for(let Y=0;Y<=i;Y++)for(let z=0;z<=f;z++)S.x=Y/i,S.y=z/f,O.push(S.x,S.y)}(),function U(){for(let Y=1;Y<=i;Y++)for(let z=1;z<=f;z++){const re=(f+1)*Y+(z-1),ae=(f+1)*Y+z,ve=(f+1)*(Y-1)+z;B.push((f+1)*(Y-1)+(z-1),re,ve),B.push(re,ae,ve)}}()})(),this.setIndex(B),this.setAttribute("position",new pt(D,3)),this.setAttribute("normal",new pt(I,3)),this.setAttribute("uv",new pt(O,2))}toJSON(){const n=super.toJSON();return n.path=this.parameters.path.toJSON(),n}static fromJSON(n){return new Nd((new Ad[n.path.type]).fromJSON(n.path),n.tubularSegments,n.radius,n.radialSegments,n.closed)}}class Rg extends cn{constructor(n=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:n},null!==n){const i=[],c=new Set,f=new Z,_=new Z;if(null!==n.index){const v=n.attributes.position,E=n.index;let w=n.groups;0===w.length&&(w=[{start:0,count:E.count,materialIndex:0}]);for(let S=0,R=w.length;S<R;++S){const D=w[S],I=D.start;for(let B=I,V=I+D.count;B<V;B+=3)for(let $=0;$<3;$++){const U=E.getX(B+$),L=E.getX(B+($+1)%3);f.fromBufferAttribute(v,U),_.fromBufferAttribute(v,L),!0===Fp(f,_,c)&&(i.push(f.x,f.y,f.z),i.push(_.x,_.y,_.z))}}}else{const v=n.attributes.position;for(let E=0,w=v.count/3;E<w;E++)for(let S=0;S<3;S++){const D=3*E+(S+1)%3;f.fromBufferAttribute(v,3*E+S),_.fromBufferAttribute(v,D),!0===Fp(f,_,c)&&(i.push(f.x,f.y,f.z),i.push(_.x,_.y,_.z))}}this.setAttribute("position",new pt(i,3))}}}function Fp(p,n,i){const c=`${p.x},${p.y},${p.z}-${n.x},${n.y},${n.z}`,f=`${n.x},${n.y},${n.z}-${p.x},${p.y},${p.z}`;return!0!==i.has(c)&&!0!==i.has(f)&&(i.add(c,f),!0)}var Pg=Object.freeze({__proto__:null,BoxGeometry:_a,BoxBufferGeometry:_a,CircleGeometry:eu,CircleBufferGeometry:eu,ConeGeometry:dl,ConeBufferGeometry:dl,CylinderGeometry:js,CylinderBufferGeometry:js,DodecahedronGeometry:tu,DodecahedronBufferGeometry:tu,EdgesGeometry:Zh,ExtrudeGeometry:qo,ExtrudeBufferGeometry:qo,IcosahedronGeometry:Ld,IcosahedronBufferGeometry:Ld,LatheGeometry:du,LatheBufferGeometry:du,OctahedronGeometry:gl,OctahedronBufferGeometry:gl,PlaneGeometry:$n,PlaneBufferGeometry:$n,PolyhedronGeometry:Cs,PolyhedronBufferGeometry:Cs,RingGeometry:Lr,RingBufferGeometry:Lr,ShapeGeometry:_l,ShapeBufferGeometry:_l,SphereGeometry:Ra,SphereBufferGeometry:Ra,TetrahedronGeometry:Pa,TetrahedronBufferGeometry:Pa,TorusGeometry:Fd,TorusBufferGeometry:Fd,TorusKnotGeometry:hu,TorusKnotBufferGeometry:hu,TubeGeometry:Nd,TubeBufferGeometry:Nd,WireframeGeometry:Rg});class Bd extends pr{constructor(n){super(),this.type="ShadowMaterial",this.color=new vt(0),this.transparent=!0,this.setValues(n)}copy(n){return super.copy(n),this.color.copy(n.color),this}}Bd.prototype.isShadowMaterial=!0;class yl extends pr{constructor(n){super(),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new vt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new vt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Ne(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(n)}copy(n){return super.copy(n),this.defines={STANDARD:""},this.color.copy(n.color),this.roughness=n.roughness,this.metalness=n.metalness,this.map=n.map,this.lightMap=n.lightMap,this.lightMapIntensity=n.lightMapIntensity,this.aoMap=n.aoMap,this.aoMapIntensity=n.aoMapIntensity,this.emissive.copy(n.emissive),this.emissiveMap=n.emissiveMap,this.emissiveIntensity=n.emissiveIntensity,this.bumpMap=n.bumpMap,this.bumpScale=n.bumpScale,this.normalMap=n.normalMap,this.normalMapType=n.normalMapType,this.normalScale.copy(n.normalScale),this.displacementMap=n.displacementMap,this.displacementScale=n.displacementScale,this.displacementBias=n.displacementBias,this.roughnessMap=n.roughnessMap,this.metalnessMap=n.metalnessMap,this.alphaMap=n.alphaMap,this.envMap=n.envMap,this.envMapIntensity=n.envMapIntensity,this.refractionRatio=n.refractionRatio,this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this.wireframeLinecap=n.wireframeLinecap,this.wireframeLinejoin=n.wireframeLinejoin,this.flatShading=n.flatShading,this}}yl.prototype.isMeshStandardMaterial=!0;class Np extends yl{constructor(n){super(),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ne(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return si(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(i){this.ior=(1+.4*i)/(1-.4*i)}}),this.sheenColor=new vt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new vt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new vt(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._transmission=0,this.setValues(n)}get sheen(){return this._sheen}set sheen(n){this._sheen>0!=n>0&&this.version++,this._sheen=n}get clearcoat(){return this._clearcoat}set clearcoat(n){this._clearcoat>0!=n>0&&this.version++,this._clearcoat=n}get transmission(){return this._transmission}set transmission(n){this._transmission>0!=n>0&&this.version++,this._transmission=n}copy(n){return super.copy(n),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=n.clearcoat,this.clearcoatMap=n.clearcoatMap,this.clearcoatRoughness=n.clearcoatRoughness,this.clearcoatRoughnessMap=n.clearcoatRoughnessMap,this.clearcoatNormalMap=n.clearcoatNormalMap,this.clearcoatNormalScale.copy(n.clearcoatNormalScale),this.ior=n.ior,this.sheen=n.sheen,this.sheenColor.copy(n.sheenColor),this.sheenColorMap=n.sheenColorMap,this.sheenRoughness=n.sheenRoughness,this.sheenRoughnessMap=n.sheenRoughnessMap,this.transmission=n.transmission,this.transmissionMap=n.transmissionMap,this.thickness=n.thickness,this.thicknessMap=n.thicknessMap,this.attenuationDistance=n.attenuationDistance,this.attenuationColor.copy(n.attenuationColor),this.specularIntensity=n.specularIntensity,this.specularIntensityMap=n.specularIntensityMap,this.specularColor.copy(n.specularColor),this.specularColorMap=n.specularColorMap,this}}Np.prototype.isMeshPhysicalMaterial=!0;class Ud extends pr{constructor(n){super(),this.type="MeshPhongMaterial",this.color=new vt(16777215),this.specular=new vt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new vt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Ne(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(n)}copy(n){return super.copy(n),this.color.copy(n.color),this.specular.copy(n.specular),this.shininess=n.shininess,this.map=n.map,this.lightMap=n.lightMap,this.lightMapIntensity=n.lightMapIntensity,this.aoMap=n.aoMap,this.aoMapIntensity=n.aoMapIntensity,this.emissive.copy(n.emissive),this.emissiveMap=n.emissiveMap,this.emissiveIntensity=n.emissiveIntensity,this.bumpMap=n.bumpMap,this.bumpScale=n.bumpScale,this.normalMap=n.normalMap,this.normalMapType=n.normalMapType,this.normalScale.copy(n.normalScale),this.displacementMap=n.displacementMap,this.displacementScale=n.displacementScale,this.displacementBias=n.displacementBias,this.specularMap=n.specularMap,this.alphaMap=n.alphaMap,this.envMap=n.envMap,this.combine=n.combine,this.reflectivity=n.reflectivity,this.refractionRatio=n.refractionRatio,this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this.wireframeLinecap=n.wireframeLinecap,this.wireframeLinejoin=n.wireframeLinejoin,this.flatShading=n.flatShading,this}}Ud.prototype.isMeshPhongMaterial=!0;class Ig extends pr{constructor(n){super(),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new vt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new vt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Ne(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(n)}copy(n){return super.copy(n),this.color.copy(n.color),this.map=n.map,this.gradientMap=n.gradientMap,this.lightMap=n.lightMap,this.lightMapIntensity=n.lightMapIntensity,this.aoMap=n.aoMap,this.aoMapIntensity=n.aoMapIntensity,this.emissive.copy(n.emissive),this.emissiveMap=n.emissiveMap,this.emissiveIntensity=n.emissiveIntensity,this.bumpMap=n.bumpMap,this.bumpScale=n.bumpScale,this.normalMap=n.normalMap,this.normalMapType=n.normalMapType,this.normalScale.copy(n.normalScale),this.displacementMap=n.displacementMap,this.displacementScale=n.displacementScale,this.displacementBias=n.displacementBias,this.alphaMap=n.alphaMap,this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this.wireframeLinecap=n.wireframeLinecap,this.wireframeLinejoin=n.wireframeLinejoin,this}}Ig.prototype.isMeshToonMaterial=!0;class Py extends pr{constructor(n){super(),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Ne(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.flatShading=!1,this.setValues(n)}copy(n){return super.copy(n),this.bumpMap=n.bumpMap,this.bumpScale=n.bumpScale,this.normalMap=n.normalMap,this.normalMapType=n.normalMapType,this.normalScale.copy(n.normalScale),this.displacementMap=n.displacementMap,this.displacementScale=n.displacementScale,this.displacementBias=n.displacementBias,this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this.flatShading=n.flatShading,this}}Py.prototype.isMeshNormalMaterial=!0;class Og extends pr{constructor(n){super(),this.type="MeshLambertMaterial",this.color=new vt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new vt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(n)}copy(n){return super.copy(n),this.color.copy(n.color),this.map=n.map,this.lightMap=n.lightMap,this.lightMapIntensity=n.lightMapIntensity,this.aoMap=n.aoMap,this.aoMapIntensity=n.aoMapIntensity,this.emissive.copy(n.emissive),this.emissiveMap=n.emissiveMap,this.emissiveIntensity=n.emissiveIntensity,this.specularMap=n.specularMap,this.alphaMap=n.alphaMap,this.envMap=n.envMap,this.combine=n.combine,this.reflectivity=n.reflectivity,this.refractionRatio=n.refractionRatio,this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this.wireframeLinecap=n.wireframeLinecap,this.wireframeLinejoin=n.wireframeLinejoin,this}}Og.prototype.isMeshLambertMaterial=!0;class Bp extends pr{constructor(n){super(),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new vt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Ne(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.setValues(n)}copy(n){return super.copy(n),this.defines={MATCAP:""},this.color.copy(n.color),this.matcap=n.matcap,this.map=n.map,this.bumpMap=n.bumpMap,this.bumpScale=n.bumpScale,this.normalMap=n.normalMap,this.normalMapType=n.normalMapType,this.normalScale.copy(n.normalScale),this.displacementMap=n.displacementMap,this.displacementScale=n.displacementScale,this.displacementBias=n.displacementBias,this.alphaMap=n.alphaMap,this.flatShading=n.flatShading,this}}Bp.prototype.isMeshMatcapMaterial=!0;class Iy extends fi{constructor(n){super(),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(n)}copy(n){return super.copy(n),this.scale=n.scale,this.dashSize=n.dashSize,this.gapSize=n.gapSize,this}}Iy.prototype.isLineDashedMaterial=!0;var v0=Object.freeze({__proto__:null,ShadowMaterial:Bd,SpriteMaterial:Yc,RawShaderMaterial:Ta,ShaderMaterial:to,PointsMaterial:rc,MeshPhysicalMaterial:Np,MeshStandardMaterial:yl,MeshPhongMaterial:Ud,MeshToonMaterial:Ig,MeshNormalMaterial:Py,MeshLambertMaterial:Og,MeshDepthMaterial:zh,MeshDistanceMaterial:tc,MeshBasicMaterial:as,MeshMatcapMaterial:Bp,LineDashedMaterial:Iy,LineBasicMaterial:fi,Material:pr});const Kn={arraySlice:function(p,n,i){return Kn.isTypedArray(p)?new p.constructor(p.subarray(n,void 0!==i?i:p.length)):p.slice(n,i)},convertArray:function(p,n,i){return!p||!i&&p.constructor===n?p:"number"==typeof n.BYTES_PER_ELEMENT?new n(p):Array.prototype.slice.call(p)},isTypedArray:function(p){return ArrayBuffer.isView(p)&&!(p instanceof DataView)},getKeyframeOrder:function(p){const i=p.length,c=new Array(i);for(let f=0;f!==i;++f)c[f]=f;return c.sort(function n(f,_){return p[f]-p[_]}),c},sortedArray:function(p,n,i){const c=p.length,f=new p.constructor(c);for(let _=0,v=0;v!==c;++_){const E=i[_]*n;for(let w=0;w!==n;++w)f[v++]=p[E+w]}return f},flattenJSON:function(p,n,i,c){let f=1,_=p[0];for(;void 0!==_&&void 0===_[c];)_=p[f++];if(void 0===_)return;let v=_[c];if(void 0!==v)if(Array.isArray(v))do{v=_[c],void 0!==v&&(n.push(_.time),i.push.apply(i,v)),_=p[f++]}while(void 0!==_);else if(void 0!==v.toArray)do{v=_[c],void 0!==v&&(n.push(_.time),v.toArray(i,i.length)),_=p[f++]}while(void 0!==_);else do{v=_[c],void 0!==v&&(n.push(_.time),i.push(v)),_=p[f++]}while(void 0!==_)},subclip:function(p,n,i,c,f=30){const _=p.clone();_.name=n;const v=[];for(let w=0;w<_.tracks.length;++w){const S=_.tracks[w],R=S.getValueSize(),D=[],I=[];for(let O=0;O<S.times.length;++O){const B=S.times[O]*f;if(!(B<i||B>=c)){D.push(S.times[O]);for(let V=0;V<R;++V)I.push(S.values[O*R+V])}}0!==D.length&&(S.times=Kn.convertArray(D,S.times.constructor),S.values=Kn.convertArray(I,S.values.constructor),v.push(S))}_.tracks=v;let E=1/0;for(let w=0;w<_.tracks.length;++w)E>_.tracks[w].times[0]&&(E=_.tracks[w].times[0]);for(let w=0;w<_.tracks.length;++w)_.tracks[w].shift(-1*E);return _.resetDuration(),_},makeClipAdditive:function(p,n=0,i=p,c=30){c<=0&&(c=30);const f=i.tracks.length,_=n/c;for(let v=0;v<f;++v){const E=i.tracks[v],w=E.ValueTypeName;if("bool"===w||"string"===w)continue;const S=p.tracks.find(function(U){return U.name===E.name&&U.ValueTypeName===w});if(void 0===S)continue;let R=0;const D=E.getValueSize();E.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(R=D/3);let I=0;const O=S.getValueSize();S.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(I=O/3);const B=E.times.length-1;let V;if(_<=E.times[0])V=Kn.arraySlice(E.values,R,D-R);else if(_>=E.times[B]){const U=B*D+R;V=Kn.arraySlice(E.values,U,U+D-R)}else{const U=E.createInterpolant(),L=R,Y=D-R;U.evaluate(_),V=Kn.arraySlice(U.resultBuffer,L,Y)}"quaternion"===w&&(new fr).fromArray(V).normalize().conjugate().toArray(V);const $=S.times.length;for(let U=0;U<$;++U){const L=U*O+I;if("quaternion"===w)fr.multiplyQuaternionsFlat(S.values,L,V,0,S.values,L);else{const Y=O-2*I;for(let z=0;z<Y;++z)S.values[L+z]-=V[z]}}}return p.blendMode=2501,p}};class vl{constructor(n,i,c,f){this.parameterPositions=n,this._cachedIndex=0,this.resultBuffer=void 0!==f?f:new i.constructor(c),this.sampleValues=i,this.valueSize=c,this.settings=null,this.DefaultSettings_={}}evaluate(n){const i=this.parameterPositions;let c=this._cachedIndex,f=i[c],_=i[c-1];e:{t:{let v;n:{i:if(!(n<f)){for(let E=c+2;;){if(void 0===f){if(n<_)break i;return c=i.length,this._cachedIndex=c,this.afterEnd_(c-1,n,_)}if(c===E)break;if(_=f,f=i[++c],n<f)break t}v=i.length;break n}if(n>=_)break e;{const E=i[1];n<E&&(c=2,_=E);for(let w=c-2;;){if(void 0===_)return this._cachedIndex=0,this.beforeStart_(0,n,f);if(c===w)break;if(f=_,_=i[--c-1],n>=_)break t}v=c,c=0}}for(;c<v;){const E=c+v>>>1;n<i[E]?v=E:c=E+1}if(f=i[c],_=i[c-1],void 0===_)return this._cachedIndex=0,this.beforeStart_(0,n,f);if(void 0===f)return c=i.length,this._cachedIndex=c,this.afterEnd_(c-1,_,n)}this._cachedIndex=c,this.intervalChanged_(c,_,f)}return this.interpolate_(c,_,n,f)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(n){const i=this.resultBuffer,c=this.sampleValues,f=this.valueSize,_=n*f;for(let v=0;v!==f;++v)i[v]=c[_+v];return i}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}vl.prototype.beforeStart_=vl.prototype.copySampleValue_,vl.prototype.afterEnd_=vl.prototype.copySampleValue_;class Up extends vl{constructor(n,i,c,f){super(n,i,c,f),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Zi,endingEnd:Zi}}intervalChanged_(n,i,c){const f=this.parameterPositions;let _=n-2,v=n+1,E=f[_],w=f[v];if(void 0===E)switch(this.getSettings_().endingStart){case Ru:_=n,E=2*i-c;break;case Df:_=f.length-2,E=i+f[_]-f[_+1];break;default:_=n,E=c}if(void 0===w)switch(this.getSettings_().endingEnd){case Ru:v=n,w=2*c-i;break;case Df:v=1,w=c+f[1]-f[0];break;default:v=n-1,w=i}const S=.5*(c-i),R=this.valueSize;this._weightPrev=S/(i-E),this._weightNext=S/(w-c),this._offsetPrev=_*R,this._offsetNext=v*R}interpolate_(n,i,c,f){const _=this.resultBuffer,v=this.sampleValues,E=this.valueSize,w=n*E,S=w-E,R=this._offsetPrev,D=this._offsetNext,I=this._weightPrev,O=this._weightNext,B=(c-i)/(f-i),V=B*B,$=V*B,U=-I*$+2*I*V-I*B,L=(1+I)*$+(-1.5-2*I)*V+(-.5+I)*B+1,Y=(-1-O)*$+(1.5+O)*V+.5*B,z=O*$-O*V;for(let Q=0;Q!==E;++Q)_[Q]=U*v[R+Q]+L*v[S+Q]+Y*v[w+Q]+z*v[D+Q];return _}}class kd extends vl{constructor(n,i,c,f){super(n,i,c,f)}interpolate_(n,i,c,f){const _=this.resultBuffer,v=this.sampleValues,E=this.valueSize,w=n*E,S=w-E,R=(c-i)/(f-i),D=1-R;for(let I=0;I!==E;++I)_[I]=v[S+I]*D+v[w+I]*R;return _}}class Lg extends vl{constructor(n,i,c,f){super(n,i,c,f)}interpolate_(n){return this.copySampleValue_(n-1)}}class As{constructor(n,i,c,f){if(void 0===n)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===i||0===i.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+n);this.name=n,this.times=Kn.convertArray(i,this.TimeBufferType),this.values=Kn.convertArray(c,this.ValueBufferType),this.setInterpolation(f||this.DefaultInterpolation)}static toJSON(n){const i=n.constructor;let c;if(i.toJSON!==this.toJSON)c=i.toJSON(n);else{c={name:n.name,times:Kn.convertArray(n.times,Array),values:Kn.convertArray(n.values,Array)};const f=n.getInterpolation();f!==n.DefaultInterpolation&&(c.interpolation=f)}return c.type=n.ValueTypeName,c}InterpolantFactoryMethodDiscrete(n){return new Lg(this.times,this.values,this.getValueSize(),n)}InterpolantFactoryMethodLinear(n){return new kd(this.times,this.values,this.getValueSize(),n)}InterpolantFactoryMethodSmooth(n){return new Up(this.times,this.values,this.getValueSize(),n)}setInterpolation(n){let i;switch(n){case Ar:i=this.InterpolantFactoryMethodDiscrete;break;case Au:i=this.InterpolantFactoryMethodLinear;break;case 2302:i=this.InterpolantFactoryMethodSmooth}if(void 0===i){const c="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(n===this.DefaultInterpolation)throw new Error(c);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",c),this}return this.createInterpolant=i,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Ar;case this.InterpolantFactoryMethodLinear:return Au;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(n){if(0!==n){const i=this.times;for(let c=0,f=i.length;c!==f;++c)i[c]+=n}return this}scale(n){if(1!==n){const i=this.times;for(let c=0,f=i.length;c!==f;++c)i[c]*=n}return this}trim(n,i){const c=this.times,f=c.length;let _=0,v=f-1;for(;_!==f&&c[_]<n;)++_;for(;-1!==v&&c[v]>i;)--v;if(++v,0!==_||v!==f){_>=v&&(v=Math.max(v,1),_=v-1);const E=this.getValueSize();this.times=Kn.arraySlice(c,_,v),this.values=Kn.arraySlice(this.values,_*E,v*E)}return this}validate(){let n=!0;const i=this.getValueSize();i-Math.floor(i)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),n=!1);const c=this.times,f=this.values,_=c.length;0===_&&(console.error("THREE.KeyframeTrack: Track is empty.",this),n=!1);let v=null;for(let E=0;E!==_;E++){const w=c[E];if("number"==typeof w&&isNaN(w)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,E,w),n=!1;break}if(null!==v&&v>w){console.error("THREE.KeyframeTrack: Out of order keys.",this,E,w,v),n=!1;break}v=w}if(void 0!==f&&Kn.isTypedArray(f))for(let E=0,w=f.length;E!==w;++E){const S=f[E];if(isNaN(S)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,E,S),n=!1;break}}return n}optimize(){const n=Kn.arraySlice(this.times),i=Kn.arraySlice(this.values),c=this.getValueSize(),f=2302===this.getInterpolation(),_=n.length-1;let v=1;for(let E=1;E<_;++E){let w=!1;const S=n[E];if(S!==n[E+1]&&(1!==E||S!==n[0]))if(f)w=!0;else{const D=E*c,I=D-c,O=D+c;for(let B=0;B!==c;++B){const V=i[D+B];if(V!==i[I+B]||V!==i[O+B]){w=!0;break}}}if(w){if(E!==v){n[v]=n[E];const D=E*c,I=v*c;for(let O=0;O!==c;++O)i[I+O]=i[D+O]}++v}}if(_>0){n[v]=n[_];for(let E=_*c,w=v*c,S=0;S!==c;++S)i[w+S]=i[E+S];++v}return v!==n.length?(this.times=Kn.arraySlice(n,0,v),this.values=Kn.arraySlice(i,0,v*c)):(this.times=n,this.values=i),this}clone(){const n=Kn.arraySlice(this.times,0),i=Kn.arraySlice(this.values,0),f=new(0,this.constructor)(this.name,n,i);return f.createInterpolant=this.createInterpolant,f}}As.prototype.TimeBufferType=Float32Array,As.prototype.ValueBufferType=Float32Array,As.prototype.DefaultInterpolation=Au;class Ia extends As{}Ia.prototype.ValueTypeName="bool",Ia.prototype.ValueBufferType=Array,Ia.prototype.DefaultInterpolation=Ar,Ia.prototype.InterpolantFactoryMethodLinear=void 0,Ia.prototype.InterpolantFactoryMethodSmooth=void 0;class kp extends As{}kp.prototype.ValueTypeName="color";class El extends As{}El.prototype.ValueTypeName="number";class Oy extends vl{constructor(n,i,c,f){super(n,i,c,f)}interpolate_(n,i,c,f){const _=this.resultBuffer,v=this.sampleValues,E=this.valueSize,w=(c-i)/(f-i);let S=n*E;for(let R=S+E;S!==R;S+=4)fr.slerpFlat(_,0,v,S-E,v,S,w);return _}}class Vd extends As{InterpolantFactoryMethodLinear(n){return new Oy(this.times,this.values,this.getValueSize(),n)}}Vd.prototype.ValueTypeName="quaternion",Vd.prototype.DefaultInterpolation=Au,Vd.prototype.InterpolantFactoryMethodSmooth=void 0;class Xo extends As{}Xo.prototype.ValueTypeName="string",Xo.prototype.ValueBufferType=Array,Xo.prototype.DefaultInterpolation=Ar,Xo.prototype.InterpolantFactoryMethodLinear=void 0,Xo.prototype.InterpolantFactoryMethodSmooth=void 0;class sf extends As{}sf.prototype.ValueTypeName="vector";class Hd{constructor(n,i=-1,c,f=2500){this.name=n,this.tracks=c,this.duration=i,this.blendMode=f,this.uuid=kr(),this.duration<0&&this.resetDuration()}static parse(n){const i=[],c=n.tracks,f=1/(n.fps||1);for(let v=0,E=c.length;v!==E;++v)i.push(Ly(c[v]).scale(f));const _=new this(n.name,n.duration,i,n.blendMode);return _.uuid=n.uuid,_}static toJSON(n){const i=[],c=n.tracks,f={name:n.name,duration:n.duration,tracks:i,uuid:n.uuid,blendMode:n.blendMode};for(let _=0,v=c.length;_!==v;++_)i.push(As.toJSON(c[_]));return f}static CreateFromMorphTargetSequence(n,i,c,f){const _=i.length,v=[];for(let E=0;E<_;E++){let w=[],S=[];w.push((E+_-1)%_,E,(E+1)%_),S.push(0,1,0);const R=Kn.getKeyframeOrder(w);w=Kn.sortedArray(w,1,R),S=Kn.sortedArray(S,1,R),!f&&0===w[0]&&(w.push(_),S.push(S[0])),v.push(new El(".morphTargetInfluences["+i[E].name+"]",w,S).scale(1/c))}return new this(n,-1,v)}static findByName(n,i){let c=n;if(!Array.isArray(n)){const f=n;c=f.geometry&&f.geometry.animations||f.animations}for(let f=0;f<c.length;f++)if(c[f].name===i)return c[f];return null}static CreateClipsFromMorphTargetSequences(n,i,c){const f={},_=/^([\w-]*?)([\d]+)$/;for(let E=0,w=n.length;E<w;E++){const S=n[E],R=S.name.match(_);if(R&&R.length>1){const D=R[1];let I=f[D];I||(f[D]=I=[]),I.push(S)}}const v=[];for(const E in f)v.push(this.CreateFromMorphTargetSequence(E,f[E],i,c));return v}static parseAnimation(n,i){if(!n)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const c=function(D,I,O,B,V){if(0!==O.length){const $=[],U=[];Kn.flattenJSON(O,$,U,B),0!==$.length&&V.push(new D(I,$,U))}},f=[],_=n.name||"default",v=n.fps||30,E=n.blendMode;let w=n.length||-1;const S=n.hierarchy||[];for(let D=0;D<S.length;D++){const I=S[D].keys;if(I&&0!==I.length)if(I[0].morphTargets){const O={};let B;for(B=0;B<I.length;B++)if(I[B].morphTargets)for(let V=0;V<I[B].morphTargets.length;V++)O[I[B].morphTargets[V]]=-1;for(const V in O){const $=[],U=[];for(let L=0;L!==I[B].morphTargets.length;++L){const Y=I[B];$.push(Y.time),U.push(Y.morphTarget===V?1:0)}f.push(new El(".morphTargetInfluence["+V+"]",$,U))}w=O.length*(v||1)}else{const O=".bones["+i[D].name+"]";c(sf,O+".position",I,"pos",f),c(Vd,O+".quaternion",I,"rot",f),c(sf,O+".scale",I,"scl",f)}}return 0===f.length?null:new this(_,w,f,E)}resetDuration(){let i=0;for(let c=0,f=this.tracks.length;c!==f;++c){const _=this.tracks[c];i=Math.max(i,_.times[_.times.length-1])}return this.duration=i,this}trim(){for(let n=0;n<this.tracks.length;n++)this.tracks[n].trim(0,this.duration);return this}validate(){let n=!0;for(let i=0;i<this.tracks.length;i++)n=n&&this.tracks[i].validate();return n}optimize(){for(let n=0;n<this.tracks.length;n++)this.tracks[n].optimize();return this}clone(){const n=[];for(let i=0;i<this.tracks.length;i++)n.push(this.tracks[i].clone());return new this.constructor(this.name,this.duration,n,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Ly(p){if(void 0===p.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const n=function E0(p){switch(p.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return El;case"vector":case"vector2":case"vector3":case"vector4":return sf;case"color":return kp;case"quaternion":return Vd;case"bool":case"boolean":return Ia;case"string":return Xo}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+p)}(p.type);if(void 0===p.times){const i=[],c=[];Kn.flattenJSON(p.keys,i,c,"value"),p.times=i,p.values=c}return void 0!==n.parse?n.parse(p):new n(p.name,p.times,p.values,p.interpolation)}const ac={enabled:!1,files:{},add:function(p,n){!1!==this.enabled&&(this.files[p]=n)},get:function(p){if(!1!==this.enabled)return this.files[p]},remove:function(p){delete this.files[p]},clear:function(){this.files={}}};class af{constructor(n,i,c){const f=this;let w,_=!1,v=0,E=0;const S=[];this.onStart=void 0,this.onLoad=n,this.onProgress=i,this.onError=c,this.itemStart=function(R){E++,!1===_&&void 0!==f.onStart&&f.onStart(R,v,E),_=!0},this.itemEnd=function(R){v++,void 0!==f.onProgress&&f.onProgress(R,v,E),v===E&&(_=!1,void 0!==f.onLoad&&f.onLoad())},this.itemError=function(R){void 0!==f.onError&&f.onError(R)},this.resolveURL=function(R){return w?w(R):R},this.setURLModifier=function(R){return w=R,this},this.addHandler=function(R,D){return S.push(R,D),this},this.removeHandler=function(R){const D=S.indexOf(R);return-1!==D&&S.splice(D,2),this},this.getHandler=function(R){for(let D=0,I=S.length;D<I;D+=2){const O=S[D],B=S[D+1];if(O.global&&(O.lastIndex=0),O.test(R))return B}return null}}}const x0=new af;class Fr{constructor(n){this.manager=void 0!==n?n:x0,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(n,i){const c=this;return new Promise(function(f,_){c.load(n,f,i,_)})}parse(){}setCrossOrigin(n){return this.crossOrigin=n,this}setWithCredentials(n){return this.withCredentials=n,this}setPath(n){return this.path=n,this}setResourcePath(n){return this.resourcePath=n,this}setRequestHeader(n){return this.requestHeader=n,this}}const xl={};class Oa extends Fr{constructor(n){super(n)}load(n,i,c,f){void 0===n&&(n=""),void 0!==this.path&&(n=this.path+n),n=this.manager.resolveURL(n);const _=ac.get(n);if(void 0!==_)return this.manager.itemStart(n),setTimeout(()=>{i&&i(_),this.manager.itemEnd(n)},0),_;if(void 0!==xl[n])return void xl[n].push({onLoad:i,onProgress:c,onError:f});xl[n]=[],xl[n].push({onLoad:i,onProgress:c,onError:f});const v=new Request(n,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),E=this.mimeType,w=this.responseType;fetch(v).then(S=>{if(200===S.status||0===S.status){if(0===S.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"==typeof ReadableStream||void 0===S.body.getReader)return S;const R=xl[n],D=S.body.getReader(),I=S.headers.get("Content-Length"),O=I?parseInt(I):0,B=0!==O;let V=0;const $=new ReadableStream({start(U){!function L(){D.read().then(({done:Y,value:z})=>{if(Y)U.close();else{V+=z.byteLength;const Q=new ProgressEvent("progress",{lengthComputable:B,loaded:V,total:O});for(let re=0,ae=R.length;re<ae;re++){const ve=R[re];ve.onProgress&&ve.onProgress(Q)}U.enqueue(z),L()}})}()}});return new Response($)}throw Error(`fetch for "${S.url}" responded with ${S.status}: ${S.statusText}`)}).then(S=>{switch(w){case"arraybuffer":return S.arrayBuffer();case"blob":return S.blob();case"document":return S.text().then(R=>(new DOMParser).parseFromString(R,E));case"json":return S.json();default:if(void 0===E)return S.text();{const D=/charset="?([^;"\s]*)"?/i.exec(E),I=D&&D[1]?D[1].toLowerCase():void 0,O=new TextDecoder(I);return S.arrayBuffer().then(B=>O.decode(B))}}}).then(S=>{ac.add(n,S);const R=xl[n];delete xl[n];for(let D=0,I=R.length;D<I;D++){const O=R[D];O.onLoad&&O.onLoad(S)}}).catch(S=>{const R=xl[n];if(void 0===R)throw this.manager.itemError(n),S;delete xl[n];for(let D=0,I=R.length;D<I;D++){const O=R[D];O.onError&&O.onError(S)}this.manager.itemError(n)}).finally(()=>{this.manager.itemEnd(n)}),this.manager.itemStart(n)}setResponseType(n){return this.responseType=n,this}setMimeType(n){return this.mimeType=n,this}}class fu extends Fr{constructor(n){super(n)}load(n,i,c,f){void 0!==this.path&&(n=this.path+n),n=this.manager.resolveURL(n);const _=this,v=ac.get(n);if(void 0!==v)return _.manager.itemStart(n),setTimeout(function(){i&&i(v),_.manager.itemEnd(n)},0),v;const E=ss("img");function w(){R(),ac.add(n,this),i&&i(this),_.manager.itemEnd(n)}function S(D){R(),f&&f(D),_.manager.itemError(n),_.manager.itemEnd(n)}function R(){E.removeEventListener("load",w,!1),E.removeEventListener("error",S,!1)}return E.addEventListener("load",w,!1),E.addEventListener("error",S,!1),"data:"!==n.substr(0,5)&&void 0!==this.crossOrigin&&(E.crossOrigin=this.crossOrigin),_.manager.itemStart(n),E.src=n,E}}class Vp extends Fr{constructor(n){super(n)}load(n,i,c,f){const _=new va,v=new fu(this.manager);v.setCrossOrigin(this.crossOrigin),v.setPath(this.path);let E=0;function w(S){v.load(n[S],function(R){_.images[S]=R,E++,6===E&&(_.needsUpdate=!0,i&&i(_))},void 0,f)}for(let S=0;S<n.length;++S)w(S);return _}}class Ny extends Fr{constructor(n){super(n)}load(n,i,c,f){const _=this,v=new Cn,E=new Oa(this.manager);return E.setResponseType("arraybuffer"),E.setRequestHeader(this.requestHeader),E.setPath(this.path),E.setWithCredentials(_.withCredentials),E.load(n,function(w){const S=_.parse(w);!S||(void 0!==S.image?v.image=S.image:void 0!==S.data&&(v.image.width=S.width,v.image.height=S.height,v.image.data=S.data),v.wrapS=void 0!==S.wrapS?S.wrapS:Hi,v.wrapT=void 0!==S.wrapT?S.wrapT:Hi,v.magFilter=void 0!==S.magFilter?S.magFilter:ri,v.minFilter=void 0!==S.minFilter?S.minFilter:ri,v.anisotropy=void 0!==S.anisotropy?S.anisotropy:1,void 0!==S.encoding&&(v.encoding=S.encoding),void 0!==S.flipY&&(v.flipY=S.flipY),void 0!==S.format&&(v.format=S.format),void 0!==S.type&&(v.type=S.type),void 0!==S.mipmaps&&(v.mipmaps=S.mipmaps,v.minFilter=is),1===S.mipmapCount&&(v.minFilter=ri),void 0!==S.generateMipmaps&&(v.generateMipmaps=S.generateMipmaps),v.needsUpdate=!0,i&&i(v,S))},c,f),v}}class Gd extends Fr{constructor(n){super(n)}load(n,i,c,f){const _=new li,v=new fu(this.manager);return v.setCrossOrigin(this.crossOrigin),v.setPath(this.path),v.load(n,function(E){_.image=E,_.needsUpdate=!0,void 0!==i&&i(_)},c,f),_}}class Xs extends Ln{constructor(n,i=1){super(),this.type="Light",this.color=new vt(n),this.intensity=i}dispose(){}copy(n){return super.copy(n),this.color.copy(n.color),this.intensity=n.intensity,this}toJSON(n){const i=super.toJSON(n);return i.object.color=this.color.getHex(),i.object.intensity=this.intensity,void 0!==this.groundColor&&(i.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(i.object.distance=this.distance),void 0!==this.angle&&(i.object.angle=this.angle),void 0!==this.decay&&(i.object.decay=this.decay),void 0!==this.penumbra&&(i.object.penumbra=this.penumbra),void 0!==this.shadow&&(i.object.shadow=this.shadow.toJSON()),i}}Xs.prototype.isLight=!0;class zd extends Xs{constructor(n,i,c){super(n,c),this.type="HemisphereLight",this.position.copy(Ln.DefaultUp),this.updateMatrix(),this.groundColor=new vt(i)}copy(n){return Xs.prototype.copy.call(this,n),this.groundColor.copy(n.groundColor),this}}zd.prototype.isHemisphereLight=!0;const By=new Wt,Fg=new Z,cf=new Z;class uf{constructor(n){this.camera=n,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ne(512,512),this.map=null,this.mapPass=null,this.matrix=new Wt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Ea,this._frameExtents=new Ne(1,1),this._viewportCount=1,this._viewports=[new ei(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(n){const i=this.camera,c=this.matrix;Fg.setFromMatrixPosition(n.matrixWorld),i.position.copy(Fg),cf.setFromMatrixPosition(n.target.matrixWorld),i.lookAt(cf),i.updateMatrixWorld(),By.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(By),c.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),c.multiply(i.projectionMatrix),c.multiply(i.matrixWorldInverse)}getViewport(n){return this._viewports[n]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(n){return this.camera=n.camera.clone(),this.bias=n.bias,this.radius=n.radius,this.mapSize.copy(n.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const n={};return 0!==this.bias&&(n.bias=this.bias),0!==this.normalBias&&(n.normalBias=this.normalBias),1!==this.radius&&(n.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(n.mapSize=this.mapSize.toArray()),n.camera=this.camera.toJSON(!1).object,delete n.camera.matrix,n}}class Ng extends uf{constructor(){super(new Qi(50,1,.5,500)),this.focus=1}updateMatrices(n){const i=this.camera,c=2*xc*n.angle*this.focus,f=this.mapSize.width/this.mapSize.height,_=n.distance||i.far;(c!==i.fov||f!==i.aspect||_!==i.far)&&(i.fov=c,i.aspect=f,i.far=_,i.updateProjectionMatrix()),super.updateMatrices(n)}copy(n){return super.copy(n),this.focus=n.focus,this}}Ng.prototype.isSpotLightShadow=!0;class Hp extends Xs{constructor(n,i,c=0,f=Math.PI/3,_=0,v=1){super(n,i),this.type="SpotLight",this.position.copy(Ln.DefaultUp),this.updateMatrix(),this.target=new Ln,this.distance=c,this.angle=f,this.penumbra=_,this.decay=v,this.shadow=new Ng}get power(){return this.intensity*Math.PI}set power(n){this.intensity=n/Math.PI}dispose(){this.shadow.dispose()}copy(n){return super.copy(n),this.distance=n.distance,this.angle=n.angle,this.penumbra=n.penumbra,this.decay=n.decay,this.target=n.target.clone(),this.shadow=n.shadow.clone(),this}}Hp.prototype.isSpotLight=!0;const Gp=new Wt,pu=new Z,zp=new Z;class Wd extends uf{constructor(){super(new Qi(90,1,.5,500)),this._frameExtents=new Ne(4,2),this._viewportCount=6,this._viewports=[new ei(2,1,1,1),new ei(0,1,1,1),new ei(3,1,1,1),new ei(1,1,1,1),new ei(3,0,1,1),new ei(1,0,1,1)],this._cubeDirections=[new Z(1,0,0),new Z(-1,0,0),new Z(0,0,1),new Z(0,0,-1),new Z(0,1,0),new Z(0,-1,0)],this._cubeUps=[new Z(0,1,0),new Z(0,1,0),new Z(0,1,0),new Z(0,1,0),new Z(0,0,1),new Z(0,0,-1)]}updateMatrices(n,i=0){const c=this.camera,f=this.matrix,_=n.distance||c.far;_!==c.far&&(c.far=_,c.updateProjectionMatrix()),pu.setFromMatrixPosition(n.matrixWorld),c.position.copy(pu),zp.copy(c.position),zp.add(this._cubeDirections[i]),c.up.copy(this._cubeUps[i]),c.lookAt(zp),c.updateMatrixWorld(),f.makeTranslation(-pu.x,-pu.y,-pu.z),Gp.multiplyMatrices(c.projectionMatrix,c.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Gp)}}Wd.prototype.isPointLightShadow=!0;class Wp extends Xs{constructor(n,i,c=0,f=1){super(n,i),this.type="PointLight",this.distance=c,this.decay=f,this.shadow=new Wd}get power(){return 4*this.intensity*Math.PI}set power(n){this.intensity=n/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(n){return super.copy(n),this.distance=n.distance,this.decay=n.decay,this.shadow=n.shadow.clone(),this}}Wp.prototype.isPointLight=!0;class Uy extends uf{constructor(){super(new jl(-5,5,5,-5,.5,500))}}Uy.prototype.isDirectionalLightShadow=!0;class jp extends Xs{constructor(n,i){super(n,i),this.type="DirectionalLight",this.position.copy(Ln.DefaultUp),this.updateMatrix(),this.target=new Ln,this.shadow=new Uy}dispose(){this.shadow.dispose()}copy(n){return super.copy(n),this.target=n.target.clone(),this.shadow=n.shadow.clone(),this}}jp.prototype.isDirectionalLight=!0;class jd extends Xs{constructor(n,i){super(n,i),this.type="AmbientLight"}}jd.prototype.isAmbientLight=!0;class $d extends Xs{constructor(n,i,c=10,f=10){super(n,i),this.type="RectAreaLight",this.width=c,this.height=f}get power(){return this.intensity*this.width*this.height*Math.PI}set power(n){this.intensity=n/(this.width*this.height*Math.PI)}copy(n){return super.copy(n),this.width=n.width,this.height=n.height,this}toJSON(n){const i=super.toJSON(n);return i.object.width=this.width,i.object.height=this.height,i}}$d.prototype.isRectAreaLight=!0;class $p{constructor(){this.coefficients=[];for(let n=0;n<9;n++)this.coefficients.push(new Z)}set(n){for(let i=0;i<9;i++)this.coefficients[i].copy(n[i]);return this}zero(){for(let n=0;n<9;n++)this.coefficients[n].set(0,0,0);return this}getAt(n,i){const c=n.x,f=n.y,_=n.z,v=this.coefficients;return i.copy(v[0]).multiplyScalar(.282095),i.addScaledVector(v[1],.488603*f),i.addScaledVector(v[2],.488603*_),i.addScaledVector(v[3],.488603*c),i.addScaledVector(v[4],c*f*1.092548),i.addScaledVector(v[5],f*_*1.092548),i.addScaledVector(v[6],.315392*(3*_*_-1)),i.addScaledVector(v[7],c*_*1.092548),i.addScaledVector(v[8],.546274*(c*c-f*f)),i}getIrradianceAt(n,i){const c=n.x,f=n.y,_=n.z,v=this.coefficients;return i.copy(v[0]).multiplyScalar(.886227),i.addScaledVector(v[1],1.023328*f),i.addScaledVector(v[2],1.023328*_),i.addScaledVector(v[3],1.023328*c),i.addScaledVector(v[4],.858086*c*f),i.addScaledVector(v[5],.858086*f*_),i.addScaledVector(v[6],.743125*_*_-.247708),i.addScaledVector(v[7],.858086*c*_),i.addScaledVector(v[8],.429043*(c*c-f*f)),i}add(n){for(let i=0;i<9;i++)this.coefficients[i].add(n.coefficients[i]);return this}addScaledSH(n,i){for(let c=0;c<9;c++)this.coefficients[c].addScaledVector(n.coefficients[c],i);return this}scale(n){for(let i=0;i<9;i++)this.coefficients[i].multiplyScalar(n);return this}lerp(n,i){for(let c=0;c<9;c++)this.coefficients[c].lerp(n.coefficients[c],i);return this}equals(n){for(let i=0;i<9;i++)if(!this.coefficients[i].equals(n.coefficients[i]))return!1;return!0}copy(n){return this.set(n.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(n,i=0){const c=this.coefficients;for(let f=0;f<9;f++)c[f].fromArray(n,i+3*f);return this}toArray(n=[],i=0){const c=this.coefficients;for(let f=0;f<9;f++)c[f].toArray(n,i+3*f);return n}static getBasisAt(n,i){const c=n.x,f=n.y,_=n.z;i[0]=.282095,i[1]=.488603*f,i[2]=.488603*_,i[3]=.488603*c,i[4]=1.092548*c*f,i[5]=1.092548*f*_,i[6]=.315392*(3*_*_-1),i[7]=1.092548*c*_,i[8]=.546274*(c*c-f*f)}}$p.prototype.isSphericalHarmonics3=!0;class df extends Xs{constructor(n=new $p,i=1){super(void 0,i),this.sh=n}copy(n){return super.copy(n),this.sh.copy(n.sh),this}fromJSON(n){return this.intensity=n.intensity,this.sh.fromArray(n.sh),this}toJSON(n){const i=super.toJSON(n);return i.object.sh=this.sh.toArray(),i}}df.prototype.isLightProbe=!0;class Bg extends Fr{constructor(n){super(n),this.textures={}}load(n,i,c,f){const _=this,v=new Oa(_.manager);v.setPath(_.path),v.setRequestHeader(_.requestHeader),v.setWithCredentials(_.withCredentials),v.load(n,function(E){try{i(_.parse(JSON.parse(E)))}catch(w){f?f(w):console.error(w),_.manager.itemError(n)}},c,f)}parse(n){const i=this.textures;function c(_){return void 0===i[_]&&console.warn("THREE.MaterialLoader: Undefined texture",_),i[_]}const f=new v0[n.type];if(void 0!==n.uuid&&(f.uuid=n.uuid),void 0!==n.name&&(f.name=n.name),void 0!==n.color&&void 0!==f.color&&f.color.setHex(n.color),void 0!==n.roughness&&(f.roughness=n.roughness),void 0!==n.metalness&&(f.metalness=n.metalness),void 0!==n.sheen&&(f.sheen=n.sheen),void 0!==n.sheenColor&&(f.sheenColor=(new vt).setHex(n.sheenColor)),void 0!==n.sheenRoughness&&(f.sheenRoughness=n.sheenRoughness),void 0!==n.emissive&&void 0!==f.emissive&&f.emissive.setHex(n.emissive),void 0!==n.specular&&void 0!==f.specular&&f.specular.setHex(n.specular),void 0!==n.specularIntensity&&(f.specularIntensity=n.specularIntensity),void 0!==n.specularColor&&void 0!==f.specularColor&&f.specularColor.setHex(n.specularColor),void 0!==n.shininess&&(f.shininess=n.shininess),void 0!==n.clearcoat&&(f.clearcoat=n.clearcoat),void 0!==n.clearcoatRoughness&&(f.clearcoatRoughness=n.clearcoatRoughness),void 0!==n.transmission&&(f.transmission=n.transmission),void 0!==n.thickness&&(f.thickness=n.thickness),void 0!==n.attenuationDistance&&(f.attenuationDistance=n.attenuationDistance),void 0!==n.attenuationColor&&void 0!==f.attenuationColor&&f.attenuationColor.setHex(n.attenuationColor),void 0!==n.fog&&(f.fog=n.fog),void 0!==n.flatShading&&(f.flatShading=n.flatShading),void 0!==n.blending&&(f.blending=n.blending),void 0!==n.combine&&(f.combine=n.combine),void 0!==n.side&&(f.side=n.side),void 0!==n.shadowSide&&(f.shadowSide=n.shadowSide),void 0!==n.opacity&&(f.opacity=n.opacity),void 0!==n.transparent&&(f.transparent=n.transparent),void 0!==n.alphaTest&&(f.alphaTest=n.alphaTest),void 0!==n.depthTest&&(f.depthTest=n.depthTest),void 0!==n.depthWrite&&(f.depthWrite=n.depthWrite),void 0!==n.colorWrite&&(f.colorWrite=n.colorWrite),void 0!==n.stencilWrite&&(f.stencilWrite=n.stencilWrite),void 0!==n.stencilWriteMask&&(f.stencilWriteMask=n.stencilWriteMask),void 0!==n.stencilFunc&&(f.stencilFunc=n.stencilFunc),void 0!==n.stencilRef&&(f.stencilRef=n.stencilRef),void 0!==n.stencilFuncMask&&(f.stencilFuncMask=n.stencilFuncMask),void 0!==n.stencilFail&&(f.stencilFail=n.stencilFail),void 0!==n.stencilZFail&&(f.stencilZFail=n.stencilZFail),void 0!==n.stencilZPass&&(f.stencilZPass=n.stencilZPass),void 0!==n.wireframe&&(f.wireframe=n.wireframe),void 0!==n.wireframeLinewidth&&(f.wireframeLinewidth=n.wireframeLinewidth),void 0!==n.wireframeLinecap&&(f.wireframeLinecap=n.wireframeLinecap),void 0!==n.wireframeLinejoin&&(f.wireframeLinejoin=n.wireframeLinejoin),void 0!==n.rotation&&(f.rotation=n.rotation),1!==n.linewidth&&(f.linewidth=n.linewidth),void 0!==n.dashSize&&(f.dashSize=n.dashSize),void 0!==n.gapSize&&(f.gapSize=n.gapSize),void 0!==n.scale&&(f.scale=n.scale),void 0!==n.polygonOffset&&(f.polygonOffset=n.polygonOffset),void 0!==n.polygonOffsetFactor&&(f.polygonOffsetFactor=n.polygonOffsetFactor),void 0!==n.polygonOffsetUnits&&(f.polygonOffsetUnits=n.polygonOffsetUnits),void 0!==n.dithering&&(f.dithering=n.dithering),void 0!==n.alphaToCoverage&&(f.alphaToCoverage=n.alphaToCoverage),void 0!==n.premultipliedAlpha&&(f.premultipliedAlpha=n.premultipliedAlpha),void 0!==n.visible&&(f.visible=n.visible),void 0!==n.toneMapped&&(f.toneMapped=n.toneMapped),void 0!==n.userData&&(f.userData=n.userData),void 0!==n.vertexColors&&(f.vertexColors="number"==typeof n.vertexColors?n.vertexColors>0:n.vertexColors),void 0!==n.uniforms)for(const _ in n.uniforms){const v=n.uniforms[_];switch(f.uniforms[_]={},v.type){case"t":f.uniforms[_].value=c(v.value);break;case"c":f.uniforms[_].value=(new vt).setHex(v.value);break;case"v2":f.uniforms[_].value=(new Ne).fromArray(v.value);break;case"v3":f.uniforms[_].value=(new Z).fromArray(v.value);break;case"v4":f.uniforms[_].value=(new ei).fromArray(v.value);break;case"m3":f.uniforms[_].value=(new hr).fromArray(v.value);break;case"m4":f.uniforms[_].value=(new Wt).fromArray(v.value);break;default:f.uniforms[_].value=v.value}}if(void 0!==n.defines&&(f.defines=n.defines),void 0!==n.vertexShader&&(f.vertexShader=n.vertexShader),void 0!==n.fragmentShader&&(f.fragmentShader=n.fragmentShader),void 0!==n.extensions)for(const _ in n.extensions)f.extensions[_]=n.extensions[_];if(void 0!==n.shading&&(f.flatShading=1===n.shading),void 0!==n.size&&(f.size=n.size),void 0!==n.sizeAttenuation&&(f.sizeAttenuation=n.sizeAttenuation),void 0!==n.map&&(f.map=c(n.map)),void 0!==n.matcap&&(f.matcap=c(n.matcap)),void 0!==n.alphaMap&&(f.alphaMap=c(n.alphaMap)),void 0!==n.bumpMap&&(f.bumpMap=c(n.bumpMap)),void 0!==n.bumpScale&&(f.bumpScale=n.bumpScale),void 0!==n.normalMap&&(f.normalMap=c(n.normalMap)),void 0!==n.normalMapType&&(f.normalMapType=n.normalMapType),void 0!==n.normalScale){let _=n.normalScale;!1===Array.isArray(_)&&(_=[_,_]),f.normalScale=(new Ne).fromArray(_)}return void 0!==n.displacementMap&&(f.displacementMap=c(n.displacementMap)),void 0!==n.displacementScale&&(f.displacementScale=n.displacementScale),void 0!==n.displacementBias&&(f.displacementBias=n.displacementBias),void 0!==n.roughnessMap&&(f.roughnessMap=c(n.roughnessMap)),void 0!==n.metalnessMap&&(f.metalnessMap=c(n.metalnessMap)),void 0!==n.emissiveMap&&(f.emissiveMap=c(n.emissiveMap)),void 0!==n.emissiveIntensity&&(f.emissiveIntensity=n.emissiveIntensity),void 0!==n.specularMap&&(f.specularMap=c(n.specularMap)),void 0!==n.specularIntensityMap&&(f.specularIntensityMap=c(n.specularIntensityMap)),void 0!==n.specularColorMap&&(f.specularColorMap=c(n.specularColorMap)),void 0!==n.envMap&&(f.envMap=c(n.envMap)),void 0!==n.envMapIntensity&&(f.envMapIntensity=n.envMapIntensity),void 0!==n.reflectivity&&(f.reflectivity=n.reflectivity),void 0!==n.refractionRatio&&(f.refractionRatio=n.refractionRatio),void 0!==n.lightMap&&(f.lightMap=c(n.lightMap)),void 0!==n.lightMapIntensity&&(f.lightMapIntensity=n.lightMapIntensity),void 0!==n.aoMap&&(f.aoMap=c(n.aoMap)),void 0!==n.aoMapIntensity&&(f.aoMapIntensity=n.aoMapIntensity),void 0!==n.gradientMap&&(f.gradientMap=c(n.gradientMap)),void 0!==n.clearcoatMap&&(f.clearcoatMap=c(n.clearcoatMap)),void 0!==n.clearcoatRoughnessMap&&(f.clearcoatRoughnessMap=c(n.clearcoatRoughnessMap)),void 0!==n.clearcoatNormalMap&&(f.clearcoatNormalMap=c(n.clearcoatNormalMap)),void 0!==n.clearcoatNormalScale&&(f.clearcoatNormalScale=(new Ne).fromArray(n.clearcoatNormalScale)),void 0!==n.transmissionMap&&(f.transmissionMap=c(n.transmissionMap)),void 0!==n.thicknessMap&&(f.thicknessMap=c(n.thicknessMap)),void 0!==n.sheenColorMap&&(f.sheenColorMap=c(n.sheenColorMap)),void 0!==n.sheenRoughnessMap&&(f.sheenRoughnessMap=c(n.sheenRoughnessMap)),f}setTextures(n){return this.textures=n,this}}class hf{static decodeText(n){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(n);let i="";for(let c=0,f=n.length;c<f;c++)i+=String.fromCharCode(n[c]);try{return decodeURIComponent(escape(i))}catch{return i}}static extractUrlBase(n){const i=n.lastIndexOf("/");return-1===i?"./":n.substr(0,i+1)}static resolveURL(n,i){return"string"!=typeof n||""===n?"":(/^https?:\/\//i.test(i)&&/^\//.test(n)&&(i=i.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(n)||/^data:.*,.*$/i.test(n)||/^blob:.*$/i.test(n)?n:i+n)}}class ff extends cn{constructor(){super(),this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(n){return super.copy(n),this.instanceCount=n.instanceCount,this}clone(){return(new this.constructor).copy(this)}toJSON(){const n=super.toJSON(this);return n.instanceCount=this.instanceCount,n.isInstancedBufferGeometry=!0,n}}ff.prototype.isInstancedBufferGeometry=!0;class qp extends Fr{constructor(n){super(n)}load(n,i,c,f){const _=this,v=new Oa(_.manager);v.setPath(_.path),v.setRequestHeader(_.requestHeader),v.setWithCredentials(_.withCredentials),v.load(n,function(E){try{i(_.parse(JSON.parse(E)))}catch(w){f?f(w):console.error(w),_.manager.itemError(n)}},c,f)}parse(n){const i={},c={};function f(O,B){if(void 0!==i[B])return i[B];const $=O.interleavedBuffers[B],U=function _(O,B){if(void 0!==c[B])return c[B];const U=new Uint32Array(O.arrayBuffers[B]).buffer;return c[B]=U,U}(O,$.buffer),L=da($.type,U),Y=new ws(L,$.stride);return Y.uuid=$.uuid,i[B]=Y,Y}const v=n.isInstancedBufferGeometry?new ff:new cn,E=n.data.index;if(void 0!==E){const O=da(E.type,E.array);v.setIndex(new Un(O,1))}const w=n.data.attributes;for(const O in w){const B=w[O];let V;if(B.isInterleavedBufferAttribute){const $=f(n.data,B.data);V=new lo($,B.itemSize,B.offset,B.normalized)}else{const $=da(B.type,B.array);V=new(B.isInstancedBufferAttribute?ul:Un)($,B.itemSize,B.normalized)}void 0!==B.name&&(V.name=B.name),void 0!==B.usage&&V.setUsage(B.usage),void 0!==B.updateRange&&(V.updateRange.offset=B.updateRange.offset,V.updateRange.count=B.updateRange.count),v.setAttribute(O,V)}const S=n.data.morphAttributes;if(S)for(const O in S){const B=S[O],V=[];for(let $=0,U=B.length;$<U;$++){const L=B[$];let Y;if(L.isInterleavedBufferAttribute){const z=f(n.data,L.data);Y=new lo(z,L.itemSize,L.offset,L.normalized)}else{const z=da(L.type,L.array);Y=new Un(z,L.itemSize,L.normalized)}void 0!==L.name&&(Y.name=L.name),V.push(Y)}v.morphAttributes[O]=V}n.data.morphTargetsRelative&&(v.morphTargetsRelative=!0);const D=n.data.groups||n.data.drawcalls||n.data.offsets;if(void 0!==D)for(let O=0,B=D.length;O!==B;++O){const V=D[O];v.addGroup(V.start,V.count,V.materialIndex)}const I=n.data.boundingSphere;if(void 0!==I){const O=new Z;void 0!==I.center&&O.fromArray(I.center),v.boundingSphere=new fa(O,I.radius)}return n.name&&(v.name=n.name),n.userData&&(v.userData=n.userData),v}}const ms={UVMapping:300,CubeReflectionMapping:301,CubeRefractionMapping:302,EquirectangularReflectionMapping:303,EquirectangularRefractionMapping:304,CubeUVReflectionMapping:306,CubeUVRefractionMapping:307},Ug={RepeatWrapping:mn,ClampToEdgeWrapping:Hi,MirroredRepeatWrapping:ta},Xp={NearestFilter:sn,NearestMipmapNearestFilter:1004,NearestMipmapLinearFilter:1005,LinearFilter:ri,LinearMipmapNearestFilter:1007,LinearMipmapLinearFilter:is};class pf extends Fr{constructor(n){super(n),"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(n){return this.options=n,this}load(n,i,c,f){void 0===n&&(n=""),void 0!==this.path&&(n=this.path+n),n=this.manager.resolveURL(n);const _=this,v=ac.get(n);if(void 0!==v)return _.manager.itemStart(n),setTimeout(function(){i&&i(v),_.manager.itemEnd(n)},0),v;const E={};E.credentials="anonymous"===this.crossOrigin?"same-origin":"include",E.headers=this.requestHeader,fetch(n,E).then(function(w){return w.blob()}).then(function(w){return createImageBitmap(w,Object.assign(_.options,{colorSpaceConversion:"none"}))}).then(function(w){ac.add(n,w),i&&i(w),_.manager.itemEnd(n)}).catch(function(w){f&&f(w),_.manager.itemError(n),_.manager.itemEnd(n)}),_.manager.itemStart(n)}}let mu;pf.prototype.isImageBitmapLoader=!0;const Ml={getContext:function(){return void 0===mu&&(mu=new(window.AudioContext||window.webkitAudioContext)),mu},setContext:function(p){mu=p}};class kg extends Fr{constructor(n){super(n)}load(n,i,c,f){const _=this,v=new Oa(this.manager);v.setResponseType("arraybuffer"),v.setPath(this.path),v.setRequestHeader(this.requestHeader),v.setWithCredentials(this.withCredentials),v.load(n,function(E){try{const w=E.slice(0);Ml.getContext().decodeAudioData(w,function(R){i(R)})}catch(w){f?f(w):console.error(w),_.manager.itemError(n)}},c,f)}}class M0 extends df{constructor(n,i,c=1){super(void 0,c);const f=(new vt).set(n),_=(new vt).set(i),v=new Z(f.r,f.g,f.b),E=new Z(_.r,_.g,_.b),w=Math.sqrt(Math.PI),S=w*Math.sqrt(.75);this.sh.coefficients[0].copy(v).add(E).multiplyScalar(w),this.sh.coefficients[1].copy(v).sub(E).multiplyScalar(S)}}M0.prototype.isHemisphereLightProbe=!0;class Vg extends df{constructor(n,i=1){super(void 0,i);const c=(new vt).set(n);this.sh.coefficients[0].set(c.r,c.g,c.b).multiplyScalar(2*Math.sqrt(Math.PI))}}Vg.prototype.isAmbientLightProbe=!0;const Vy=new Wt,Yp=new Wt,lc=new Wt;class Hy{constructor(n=!0){this.autoStart=n,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=cc(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let n=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const i=cc();n=(i-this.oldTime)/1e3,this.oldTime=i,this.elapsedTime+=n}return n}}function cc(){return("undefined"==typeof performance?Date:performance).now()}const uc=new Z,Hg=new fr,w0=new Z,Yo=new Z;class dc extends Ln{constructor(n){super(),this.type="Audio",this.listener=n,this.context=n.context,this.gain=this.context.createGain(),this.gain.connect(n.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(n){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=n,this.connect(),this}setMediaElementSource(n){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(n),this.connect(),this}setMediaStreamSource(n){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(n),this.connect(),this}setBuffer(n){return this.buffer=n,this.sourceType="buffer",this.autoplay&&this.play(),this}play(n=0){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+n;const i=this.context.createBufferSource();return i.buffer=this.buffer,i.loop=this.loop,i.loopStart=this.loopStart,i.loopEnd=this.loopEnd,i.onended=this.onEnded.bind(this),i.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=i,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let n=1,i=this.filters.length;n<i;n++)this.filters[n-1].connect(this.filters[n]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let n=1,i=this.filters.length;n<i;n++)this.filters[n-1].disconnect(this.filters[n]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(n){return n||(n=[]),!0===this._connected?(this.disconnect(),this.filters=n.slice(),this.connect()):this.filters=n.slice(),this}setDetune(n){if(this.detune=n,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(n){return this.setFilters(n?[n]:[])}setPlaybackRate(n){if(!1!==this.hasPlaybackControl)return this.playbackRate=n,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(n){if(!1!==this.hasPlaybackControl)return this.loop=n,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(n){return this.loopStart=n,this}setLoopEnd(n){return this.loopEnd=n,this}getVolume(){return this.gain.gain.value}setVolume(n){return this.gain.gain.setTargetAtTime(n,this.context.currentTime,.01),this}}const gu=new Z,Gg=new fr,zy=new Z,_u=new Z;class zg{constructor(n,i=2048){this.analyser=n.context.createAnalyser(),this.analyser.fftSize=i,this.data=new Uint8Array(this.analyser.frequencyBinCount),n.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let n=0;const i=this.getFrequencyData();for(let c=0;c<i.length;c++)n+=i[c];return n/i.length}}class Wg{constructor(n,i,c){let f,_,v;switch(this.binding=n,this.valueSize=c,i){case"quaternion":f=this._slerp,_=this._slerpAdditive,v=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*c),this._workIndex=5;break;case"string":case"bool":f=this._select,_=this._select,v=this._setAdditiveIdentityOther,this.buffer=new Array(5*c);break;default:f=this._lerp,_=this._lerpAdditive,v=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*c)}this._mixBufferRegion=f,this._mixBufferRegionAdditive=_,this._setIdentity=v,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(n,i){const c=this.buffer,f=this.valueSize,_=n*f+f;let v=this.cumulativeWeight;if(0===v){for(let E=0;E!==f;++E)c[_+E]=c[E];v=i}else v+=i,this._mixBufferRegion(c,_,0,i/v,f);this.cumulativeWeight=v}accumulateAdditive(n){const i=this.buffer,c=this.valueSize,f=c*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(i,f,0,n,c),this.cumulativeWeightAdditive+=n}apply(n){const i=this.valueSize,c=this.buffer,f=n*i+i,_=this.cumulativeWeight,v=this.cumulativeWeightAdditive,E=this.binding;this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,_<1&&this._mixBufferRegion(c,f,i*this._origIndex,1-_,i),v>0&&this._mixBufferRegionAdditive(c,f,this._addIndex*i,1,i);for(let w=i,S=i+i;w!==S;++w)if(c[w]!==c[w+i]){E.setValue(c,f);break}}saveOriginalState(){const i=this.buffer,c=this.valueSize,f=c*this._origIndex;this.binding.getValue(i,f);for(let _=c,v=f;_!==v;++_)i[_]=i[f+_%c];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){this.binding.setValue(this.buffer,3*this.valueSize)}_setAdditiveIdentityNumeric(){const n=this._addIndex*this.valueSize,i=n+this.valueSize;for(let c=n;c<i;c++)this.buffer[c]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const n=this._origIndex*this.valueSize,i=this._addIndex*this.valueSize;for(let c=0;c<this.valueSize;c++)this.buffer[i+c]=this.buffer[n+c]}_select(n,i,c,f,_){if(f>=.5)for(let v=0;v!==_;++v)n[i+v]=n[c+v]}_slerp(n,i,c,f){fr.slerpFlat(n,i,n,i,n,c,f)}_slerpAdditive(n,i,c,f,_){const v=this._workIndex*_;fr.multiplyQuaternionsFlat(n,v,n,i,n,c),fr.slerpFlat(n,i,n,i,n,v,f)}_lerp(n,i,c,f,_){const v=1-f;for(let E=0;E!==_;++E){const w=i+E;n[w]=n[w]*v+n[c+E]*f}}_lerpAdditive(n,i,c,f,_){for(let v=0;v!==_;++v){const E=i+v;n[E]=n[E]+n[c+v]*f}}}const mf="\\[\\]\\.:\\/",fo=new RegExp("["+mf+"]","g"),jg="[^"+mf+"]",AE="[^"+mf.replace("\\.","")+"]",La=/((?:WC+[\/:])*)/.source.replace("WC",jg),Ko=/(WCOD+)?/.source.replace("WCOD",AE),po=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",jg),Kp=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",jg),Zp=new RegExp("^"+La+Ko+po+Kp+"$"),b0=["material","materials","bones"];class jy{constructor(n,i,c){const f=c||pi.parseTrackName(i);this._targetGroup=n,this._bindings=n.subscribe_(i,f)}getValue(n,i){this.bind();const f=this._bindings[this._targetGroup.nCachedObjects_];void 0!==f&&f.getValue(n,i)}setValue(n,i){const c=this._bindings;for(let f=this._targetGroup.nCachedObjects_,_=c.length;f!==_;++f)c[f].setValue(n,i)}bind(){const n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,c=n.length;i!==c;++i)n[i].bind()}unbind(){const n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,c=n.length;i!==c;++i)n[i].unbind()}}let pi=(()=>{class p{constructor(i,c,f){this.path=c,this.parsedPath=f||p.parseTrackName(c),this.node=p.findNode(i,this.parsedPath.nodeName)||i,this.rootNode=i,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(i,c,f){return i&&i.isAnimationObjectGroup?new p.Composite(i,c,f):new p(i,c,f)}static sanitizeNodeName(i){return i.replace(/\s/g,"_").replace(fo,"")}static parseTrackName(i){const c=Zp.exec(i);if(!c)throw new Error("PropertyBinding: Cannot parse trackName: "+i);const f={nodeName:c[2],objectName:c[3],objectIndex:c[4],propertyName:c[5],propertyIndex:c[6]},_=f.nodeName&&f.nodeName.lastIndexOf(".");if(void 0!==_&&-1!==_){const v=f.nodeName.substring(_+1);-1!==b0.indexOf(v)&&(f.nodeName=f.nodeName.substring(0,_),f.objectName=v)}if(null===f.propertyName||0===f.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+i);return f}static findNode(i,c){if(!c||""===c||"."===c||-1===c||c===i.name||c===i.uuid)return i;if(i.skeleton){const f=i.skeleton.getBoneByName(c);if(void 0!==f)return f}if(i.children){const f=function(v){for(let E=0;E<v.length;E++){const w=v[E];if(w.name===c||w.uuid===c)return w;const S=f(w.children);if(S)return S}return null},_=f(i.children);if(_)return _}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(i,c){i[c]=this.targetObject[this.propertyName]}_getValue_array(i,c){const f=this.resolvedProperty;for(let _=0,v=f.length;_!==v;++_)i[c++]=f[_]}_getValue_arrayElement(i,c){i[c]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(i,c){this.resolvedProperty.toArray(i,c)}_setValue_direct(i,c){this.targetObject[this.propertyName]=i[c]}_setValue_direct_setNeedsUpdate(i,c){this.targetObject[this.propertyName]=i[c],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(i,c){this.targetObject[this.propertyName]=i[c],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(i,c){const f=this.resolvedProperty;for(let _=0,v=f.length;_!==v;++_)f[_]=i[c++]}_setValue_array_setNeedsUpdate(i,c){const f=this.resolvedProperty;for(let _=0,v=f.length;_!==v;++_)f[_]=i[c++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(i,c){const f=this.resolvedProperty;for(let _=0,v=f.length;_!==v;++_)f[_]=i[c++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(i,c){this.resolvedProperty[this.propertyIndex]=i[c]}_setValue_arrayElement_setNeedsUpdate(i,c){this.resolvedProperty[this.propertyIndex]=i[c],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(i,c){this.resolvedProperty[this.propertyIndex]=i[c],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(i,c){this.resolvedProperty.fromArray(i,c)}_setValue_fromArray_setNeedsUpdate(i,c){this.resolvedProperty.fromArray(i,c),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(i,c){this.resolvedProperty.fromArray(i,c),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(i,c){this.bind(),this.getValue(i,c)}_setValue_unbound(i,c){this.bind(),this.setValue(i,c)}bind(){let i=this.node;const c=this.parsedPath,f=c.objectName,_=c.propertyName;let v=c.propertyIndex;if(i||(i=p.findNode(this.rootNode,c.nodeName)||this.rootNode,this.node=i),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!i)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(f){let R=c.objectIndex;switch(f){case"materials":if(!i.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!i.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);i=i.material.materials;break;case"bones":if(!i.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);i=i.skeleton.bones;for(let D=0;D<i.length;D++)if(i[D].name===R){R=D;break}break;default:if(void 0===i[f])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);i=i[f]}if(void 0!==R){if(void 0===i[R])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,i);i=i[R]}}const E=i[_];if(void 0===E)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+c.nodeName+"."+_+" but it wasn't found.",i);let w=this.Versioning.None;this.targetObject=i,void 0!==i.needsUpdate?w=this.Versioning.NeedsUpdate:void 0!==i.matrixWorldNeedsUpdate&&(w=this.Versioning.MatrixWorldNeedsUpdate);let S=this.BindingType.Direct;if(void 0!==v){if("morphTargetInfluences"===_){if(!i.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!i.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!i.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==i.morphTargetDictionary[v]&&(v=i.morphTargetDictionary[v])}S=this.BindingType.ArrayElement,this.resolvedProperty=E,this.propertyIndex=v}else void 0!==E.fromArray&&void 0!==E.toArray?(S=this.BindingType.HasFromToArray,this.resolvedProperty=E):Array.isArray(E)?(S=this.BindingType.EntireArray,this.resolvedProperty=E):this.propertyName=_;this.getValue=this.GetterByBindingType[S],this.setValue=this.SetterByBindingTypeAndVersioning[S][w]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return p.Composite=jy,p})();pi.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},pi.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},pi.prototype.GetterByBindingType=[pi.prototype._getValue_direct,pi.prototype._getValue_array,pi.prototype._getValue_arrayElement,pi.prototype._getValue_toArray],pi.prototype.SetterByBindingTypeAndVersioning=[[pi.prototype._setValue_direct,pi.prototype._setValue_direct_setNeedsUpdate,pi.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[pi.prototype._setValue_array,pi.prototype._setValue_array_setNeedsUpdate,pi.prototype._setValue_array_setMatrixWorldNeedsUpdate],[pi.prototype._setValue_arrayElement,pi.prototype._setValue_arrayElement_setNeedsUpdate,pi.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[pi.prototype._setValue_fromArray,pi.prototype._setValue_fromArray_setNeedsUpdate,pi.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class $y{constructor(){this.uuid=kr(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const n={};this._indicesByUUID=n;for(let c=0,f=arguments.length;c!==f;++c)n[arguments[c].uuid]=c;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const i=this;this.stats={objects:{get total(){return i._objects.length},get inUse(){return this.total-i.nCachedObjects_}},get bindingsPerObject(){return i._bindings.length}}}add(){const n=this._objects,i=this._indicesByUUID,c=this._paths,f=this._parsedPaths,_=this._bindings,v=_.length;let E,w=n.length,S=this.nCachedObjects_;for(let R=0,D=arguments.length;R!==D;++R){const I=arguments[R],O=I.uuid;let B=i[O];if(void 0===B){B=w++,i[O]=B,n.push(I);for(let V=0,$=v;V!==$;++V)_[V].push(new pi(I,c[V],f[V]))}else if(B<S){E=n[B];const V=--S,$=n[V];i[$.uuid]=B,n[B]=$,i[O]=V,n[V]=I;for(let U=0,L=v;U!==L;++U){const Y=_[U];let Q=Y[B];Y[B]=Y[V],void 0===Q&&(Q=new pi(I,c[U],f[U])),Y[V]=Q}}else n[B]!==E&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=S}remove(){const n=this._objects,i=this._indicesByUUID,c=this._bindings,f=c.length;let _=this.nCachedObjects_;for(let v=0,E=arguments.length;v!==E;++v){const w=arguments[v],S=w.uuid,R=i[S];if(void 0!==R&&R>=_){const D=_++,I=n[D];i[I.uuid]=R,n[R]=I,i[S]=D,n[D]=w;for(let O=0,B=f;O!==B;++O){const V=c[O],U=V[R];V[R]=V[D],V[D]=U}}}this.nCachedObjects_=_}uncache(){const n=this._objects,i=this._indicesByUUID,c=this._bindings,f=c.length;let _=this.nCachedObjects_,v=n.length;for(let E=0,w=arguments.length;E!==w;++E){const R=arguments[E].uuid,D=i[R];if(void 0!==D)if(delete i[R],D<_){const I=--_,O=n[I],B=--v,V=n[B];i[O.uuid]=D,n[D]=O,i[V.uuid]=I,n[I]=V,n.pop();for(let $=0,U=f;$!==U;++$){const L=c[$],z=L[B];L[D]=L[I],L[I]=z,L.pop()}}else{const I=--v,O=n[I];I>0&&(i[O.uuid]=D),n[D]=O,n.pop();for(let B=0,V=f;B!==V;++B){const $=c[B];$[D]=$[I],$.pop()}}}this.nCachedObjects_=_}subscribe_(n,i){const c=this._bindingsIndicesByPath;let f=c[n];const _=this._bindings;if(void 0!==f)return _[f];const v=this._paths,E=this._parsedPaths,w=this._objects,R=this.nCachedObjects_,D=new Array(w.length);f=_.length,c[n]=f,v.push(n),E.push(i),_.push(D);for(let I=R,O=w.length;I!==O;++I)D[I]=new pi(w[I],n,i);return D}unsubscribe_(n){const i=this._bindingsIndicesByPath,c=i[n];if(void 0!==c){const f=this._paths,_=this._parsedPaths,v=this._bindings,E=v.length-1,w=v[E];i[n[E]]=c,v[c]=w,v.pop(),_[c]=_[E],_.pop(),f[c]=f[E],f.pop()}}}$y.prototype.isAnimationObjectGroup=!0;class $g{constructor(n,i,c=null,f=i.blendMode){this._mixer=n,this._clip=i,this._localRoot=c,this.blendMode=f;const _=i.tracks,v=_.length,E=new Array(v),w={endingStart:Zi,endingEnd:Zi};for(let S=0;S!==v;++S){const R=_[S].createInterpolant(null);E[S]=R,R.settings=w}this._interpolantSettings=w,this._interpolants=E,this._propertyBindings=new Array(v),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(n){return this._startTime=n,this}setLoop(n,i){return this.loop=n,this.repetitions=i,this}setEffectiveWeight(n){return this.weight=n,this._effectiveWeight=this.enabled?n:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(n){return this._scheduleFading(n,0,1)}fadeOut(n){return this._scheduleFading(n,1,0)}crossFadeFrom(n,i,c){if(n.fadeOut(i),this.fadeIn(i),c){const f=this._clip.duration,_=n._clip.duration,E=f/_;n.warp(1,_/f,i),this.warp(E,1,i)}return this}crossFadeTo(n,i,c){return n.crossFadeFrom(this,i,c)}stopFading(){const n=this._weightInterpolant;return null!==n&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(n)),this}setEffectiveTimeScale(n){return this.timeScale=n,this._effectiveTimeScale=this.paused?0:n,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(n){return this.timeScale=this._clip.duration/n,this.stopWarping()}syncWith(n){return this.time=n.time,this.timeScale=n.timeScale,this.stopWarping()}halt(n){return this.warp(this._effectiveTimeScale,0,n)}warp(n,i,c){const f=this._mixer,_=f.time,v=this.timeScale;let E=this._timeScaleInterpolant;null===E&&(E=f._lendControlInterpolant(),this._timeScaleInterpolant=E);const w=E.parameterPositions,S=E.sampleValues;return w[0]=_,w[1]=_+c,S[0]=n/v,S[1]=i/v,this}stopWarping(){const n=this._timeScaleInterpolant;return null!==n&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(n)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(n,i,c,f){if(!this.enabled)return void this._updateWeight(n);const _=this._startTime;if(null!==_){const w=(n-_)*c;if(w<0||0===c)return;this._startTime=null,i=c*w}i*=this._updateTimeScale(n);const v=this._updateTime(i),E=this._updateWeight(n);if(E>0){const w=this._interpolants,S=this._propertyBindings;if(2501===this.blendMode)for(let R=0,D=w.length;R!==D;++R)w[R].evaluate(v),S[R].accumulateAdditive(E);else for(let R=0,D=w.length;R!==D;++R)w[R].evaluate(v),S[R].accumulate(f,E)}}_updateWeight(n){let i=0;if(this.enabled){i=this.weight;const c=this._weightInterpolant;if(null!==c){const f=c.evaluate(n)[0];i*=f,n>c.parameterPositions[1]&&(this.stopFading(),0===f&&(this.enabled=!1))}}return this._effectiveWeight=i,i}_updateTimeScale(n){let i=0;if(!this.paused){i=this.timeScale;const c=this._timeScaleInterpolant;null!==c&&(i*=c.evaluate(n)[0],n>c.parameterPositions[1]&&(this.stopWarping(),0===i?this.paused=!0:this.timeScale=i))}return this._effectiveTimeScale=i,i}_updateTime(n){const i=this._clip.duration,c=this.loop;let f=this.time+n,_=this._loopCount;const v=2202===c;if(0===n)return-1===_?f:v&&1==(1&_)?i-f:f;if(2200===c){-1===_&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(f>=i)f=i;else{if(!(f<0)){this.time=f;break e}f=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=f,this._mixer.dispatchEvent({type:"finished",action:this,direction:n<0?-1:1})}}else{if(-1===_&&(n>=0?(_=0,this._setEndings(!0,0===this.repetitions,v)):this._setEndings(0===this.repetitions,!0,v)),f>=i||f<0){const E=Math.floor(f/i);f-=i*E,_+=Math.abs(E);const w=this.repetitions-_;if(w<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,f=n>0?i:0,this.time=f,this._mixer.dispatchEvent({type:"finished",action:this,direction:n>0?1:-1});else{if(1===w){const S=n<0;this._setEndings(S,!S,v)}else this._setEndings(!1,!1,v);this._loopCount=_,this.time=f,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:E})}}else this.time=f;if(v&&1==(1&_))return i-f}return f}_setEndings(n,i,c){const f=this._interpolantSettings;c?(f.endingStart=Ru,f.endingEnd=Ru):(f.endingStart=n?this.zeroSlopeAtStart?Ru:Zi:Df,f.endingEnd=i?this.zeroSlopeAtEnd?Ru:Zi:Df)}_scheduleFading(n,i,c){const f=this._mixer,_=f.time;let v=this._weightInterpolant;null===v&&(v=f._lendControlInterpolant(),this._weightInterpolant=v);const E=v.parameterPositions,w=v.sampleValues;return E[0]=_,w[0]=i,E[1]=_+n,w[1]=c,this}}class yu extends ja{constructor(n){super(),this._root=n,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(n,i){const c=n._localRoot||this._root,f=n._clip.tracks,_=f.length,v=n._propertyBindings,E=n._interpolants,w=c.uuid,S=this._bindingsByRootAndName;let R=S[w];void 0===R&&(R={},S[w]=R);for(let D=0;D!==_;++D){const I=f[D],O=I.name;let B=R[O];if(void 0!==B)++B.referenceCount,v[D]=B;else{if(B=v[D],void 0!==B){null===B._cacheIndex&&(++B.referenceCount,this._addInactiveBinding(B,w,O));continue}B=new Wg(pi.create(c,O,i&&i._propertyBindings[D].binding.parsedPath),I.ValueTypeName,I.getValueSize()),++B.referenceCount,this._addInactiveBinding(B,w,O),v[D]=B}E[D].resultBuffer=B.buffer}}_activateAction(n){if(!this._isActiveAction(n)){if(null===n._cacheIndex){const c=(n._localRoot||this._root).uuid,f=n._clip.uuid,_=this._actionsByClip[f];this._bindAction(n,_&&_.knownActions[0]),this._addInactiveAction(n,f,c)}const i=n._propertyBindings;for(let c=0,f=i.length;c!==f;++c){const _=i[c];0==_.useCount++&&(this._lendBinding(_),_.saveOriginalState())}this._lendAction(n)}}_deactivateAction(n){if(this._isActiveAction(n)){const i=n._propertyBindings;for(let c=0,f=i.length;c!==f;++c){const _=i[c];0==--_.useCount&&(_.restoreOriginalState(),this._takeBackBinding(_))}this._takeBackAction(n)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const n=this;this.stats={actions:{get total(){return n._actions.length},get inUse(){return n._nActiveActions}},bindings:{get total(){return n._bindings.length},get inUse(){return n._nActiveBindings}},controlInterpolants:{get total(){return n._controlInterpolants.length},get inUse(){return n._nActiveControlInterpolants}}}}_isActiveAction(n){const i=n._cacheIndex;return null!==i&&i<this._nActiveActions}_addInactiveAction(n,i,c){const f=this._actions,_=this._actionsByClip;let v=_[i];if(void 0===v)v={knownActions:[n],actionByRoot:{}},n._byClipCacheIndex=0,_[i]=v;else{const E=v.knownActions;n._byClipCacheIndex=E.length,E.push(n)}n._cacheIndex=f.length,f.push(n),v.actionByRoot[c]=n}_removeInactiveAction(n){const i=this._actions,c=i[i.length-1],f=n._cacheIndex;c._cacheIndex=f,i[f]=c,i.pop(),n._cacheIndex=null;const _=n._clip.uuid,v=this._actionsByClip,E=v[_],w=E.knownActions,S=w[w.length-1],R=n._byClipCacheIndex;S._byClipCacheIndex=R,w[R]=S,w.pop(),n._byClipCacheIndex=null,delete E.actionByRoot[(n._localRoot||this._root).uuid],0===w.length&&delete v[_],this._removeInactiveBindingsForAction(n)}_removeInactiveBindingsForAction(n){const i=n._propertyBindings;for(let c=0,f=i.length;c!==f;++c){const _=i[c];0==--_.referenceCount&&this._removeInactiveBinding(_)}}_lendAction(n){const i=this._actions,c=n._cacheIndex,f=this._nActiveActions++,_=i[f];n._cacheIndex=f,i[f]=n,_._cacheIndex=c,i[c]=_}_takeBackAction(n){const i=this._actions,c=n._cacheIndex,f=--this._nActiveActions,_=i[f];n._cacheIndex=f,i[f]=n,_._cacheIndex=c,i[c]=_}_addInactiveBinding(n,i,c){const f=this._bindingsByRootAndName,_=this._bindings;let v=f[i];void 0===v&&(v={},f[i]=v),v[c]=n,n._cacheIndex=_.length,_.push(n)}_removeInactiveBinding(n){const i=this._bindings,c=n.binding,f=c.rootNode.uuid,_=c.path,v=this._bindingsByRootAndName,E=v[f],w=i[i.length-1],S=n._cacheIndex;w._cacheIndex=S,i[S]=w,i.pop(),delete E[_],0===Object.keys(E).length&&delete v[f]}_lendBinding(n){const i=this._bindings,c=n._cacheIndex,f=this._nActiveBindings++,_=i[f];n._cacheIndex=f,i[f]=n,_._cacheIndex=c,i[c]=_}_takeBackBinding(n){const i=this._bindings,c=n._cacheIndex,f=--this._nActiveBindings,_=i[f];n._cacheIndex=f,i[f]=n,_._cacheIndex=c,i[c]=_}_lendControlInterpolant(){const n=this._controlInterpolants,i=this._nActiveControlInterpolants++;let c=n[i];return void 0===c&&(c=new kd(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),c.__cacheIndex=i,n[i]=c),c}_takeBackControlInterpolant(n){const i=this._controlInterpolants,c=n.__cacheIndex,f=--this._nActiveControlInterpolants,_=i[f];n.__cacheIndex=f,i[f]=n,_.__cacheIndex=c,i[c]=_}clipAction(n,i,c){const f=i||this._root,_=f.uuid;let v="string"==typeof n?Hd.findByName(f,n):n;const E=null!==v?v.uuid:n,w=this._actionsByClip[E];let S=null;if(void 0===c&&(c=null!==v?v.blendMode:2500),void 0!==w){const D=w.actionByRoot[_];if(void 0!==D&&D.blendMode===c)return D;S=w.knownActions[0],null===v&&(v=S._clip)}if(null===v)return null;const R=new $g(this,v,i,c);return this._bindAction(R,S),this._addInactiveAction(R,E,_),R}existingAction(n,i){const c=i||this._root,f=c.uuid,_="string"==typeof n?Hd.findByName(c,n):n,E=this._actionsByClip[_?_.uuid:n];return void 0!==E&&E.actionByRoot[f]||null}stopAllAction(){const n=this._actions;for(let c=this._nActiveActions-1;c>=0;--c)n[c].stop();return this}update(n){const i=this._actions,c=this._nActiveActions,f=this.time+=n*=this.timeScale,_=Math.sign(n),v=this._accuIndex^=1;for(let S=0;S!==c;++S)i[S]._update(f,n,_,v);const E=this._bindings,w=this._nActiveBindings;for(let S=0;S!==w;++S)E[S].apply(v);return this}setTime(n){this.time=0;for(let i=0;i<this._actions.length;i++)this._actions[i].time=0;return this.update(n)}getRoot(){return this._root}uncacheClip(n){const i=this._actions,c=n.uuid,f=this._actionsByClip,_=f[c];if(void 0!==_){const v=_.knownActions;for(let E=0,w=v.length;E!==w;++E){const S=v[E];this._deactivateAction(S);const R=S._cacheIndex,D=i[i.length-1];S._cacheIndex=null,S._byClipCacheIndex=null,D._cacheIndex=R,i[R]=D,i.pop(),this._removeInactiveBindingsForAction(S)}delete f[c]}}uncacheRoot(n){const i=n.uuid,c=this._actionsByClip;for(const v in c){const w=c[v].actionByRoot[i];void 0!==w&&(this._deactivateAction(w),this._removeInactiveAction(w))}const _=this._bindingsByRootAndName[i];if(void 0!==_)for(const v in _){const E=_[v];E.restoreOriginalState(),this._removeInactiveBinding(E)}}uncacheAction(n,i){const c=this.existingAction(n,i);null!==c&&(this._deactivateAction(c),this._removeInactiveAction(c))}}yu.prototype._controlInterpolantsResultBuffer=new Float32Array(1);class Jp{constructor(n){"string"==typeof n&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),n=arguments[1]),this.value=n}clone(){return new Jp(void 0===this.value.clone?this.value:this.value.clone())}}class qg extends ws{constructor(n,i,c=1){super(n,i),this.meshPerAttribute=c}copy(n){return super.copy(n),this.meshPerAttribute=n.meshPerAttribute,this}clone(n){const i=super.clone(n);return i.meshPerAttribute=this.meshPerAttribute,i}toJSON(n){const i=super.toJSON(n);return i.isInstancedInterleavedBuffer=!0,i.meshPerAttribute=this.meshPerAttribute,i}}qg.prototype.isInstancedInterleavedBuffer=!0;class Xg{constructor(n,i,c,f,_){this.buffer=n,this.type=i,this.itemSize=c,this.elementSize=f,this.count=_,this.version=0}set needsUpdate(n){!0===n&&this.version++}setBuffer(n){return this.buffer=n,this}setType(n,i){return this.type=n,this.elementSize=i,this}setItemSize(n){return this.itemSize=n,this}setCount(n){return this.count=n,this}}Xg.prototype.isGLBufferAttribute=!0;function Yg(p,n){return p.distance-n.distance}function vu(p,n,i,c){if(p.layers.test(n.layers)&&p.raycast(n,i),!0===c){const f=p.children;for(let _=0,v=f.length;_<v;_++)vu(f[_],n,i,!0)}}const mo=new Ne;class wl{constructor(n=new Ne(1/0,1/0),i=new Ne(-1/0,-1/0)){this.min=n,this.max=i}set(n,i){return this.min.copy(n),this.max.copy(i),this}setFromPoints(n){this.makeEmpty();for(let i=0,c=n.length;i<c;i++)this.expandByPoint(n[i]);return this}setFromCenterAndSize(n,i){const c=mo.copy(i).multiplyScalar(.5);return this.min.copy(n).sub(c),this.max.copy(n).add(c),this}clone(){return(new this.constructor).copy(this)}copy(n){return this.min.copy(n.min),this.max.copy(n.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(n){return this.isEmpty()?n.set(0,0):n.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(n){return this.isEmpty()?n.set(0,0):n.subVectors(this.max,this.min)}expandByPoint(n){return this.min.min(n),this.max.max(n),this}expandByVector(n){return this.min.sub(n),this.max.add(n),this}expandByScalar(n){return this.min.addScalar(-n),this.max.addScalar(n),this}containsPoint(n){return!(n.x<this.min.x||n.x>this.max.x||n.y<this.min.y||n.y>this.max.y)}containsBox(n){return this.min.x<=n.min.x&&n.max.x<=this.max.x&&this.min.y<=n.min.y&&n.max.y<=this.max.y}getParameter(n,i){return i.set((n.x-this.min.x)/(this.max.x-this.min.x),(n.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(n){return!(n.max.x<this.min.x||n.min.x>this.max.x||n.max.y<this.min.y||n.min.y>this.max.y)}clampPoint(n,i){return i.copy(n).clamp(this.min,this.max)}distanceToPoint(n){return mo.copy(n).clamp(this.min,this.max).sub(n).length()}intersect(n){return this.min.max(n.min),this.max.min(n.max),this}union(n){return this.min.min(n.min),this.max.max(n.max),this}translate(n){return this.min.add(n),this.max.add(n),this}equals(n){return n.min.equals(this.min)&&n.max.equals(this.max)}}wl.prototype.isBox2=!0;const Qp=new Z,gf=new Z;class Xy{constructor(n=new Z,i=new Z){this.start=n,this.end=i}set(n,i){return this.start.copy(n),this.end.copy(i),this}copy(n){return this.start.copy(n.start),this.end.copy(n.end),this}getCenter(n){return n.addVectors(this.start,this.end).multiplyScalar(.5)}delta(n){return n.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(n,i){return this.delta(i).multiplyScalar(n).add(this.start)}closestPointToPointParameter(n,i){Qp.subVectors(n,this.start),gf.subVectors(this.end,this.start);const c=gf.dot(gf);let _=gf.dot(Qp)/c;return i&&(_=si(_,0,1)),_}closestPointToPoint(n,i,c){const f=this.closestPointToPointParameter(n,i);return this.delta(c).multiplyScalar(f).add(this.start)}applyMatrix4(n){return this.start.applyMatrix4(n),this.end.applyMatrix4(n),this}equals(n){return n.start.equals(this.start)&&n.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}}const Zo=new Z;const bl=new Z,qd=new Wt,em=new Wt;class tm extends Ss{constructor(n){const i=Yy(n),c=new cn,f=[],_=[],v=new vt(0,0,1),E=new vt(0,1,0);for(let S=0;S<i.length;S++){const R=i[S];R.parent&&R.parent.isBone&&(f.push(0,0,0),f.push(0,0,0),_.push(v.r,v.g,v.b),_.push(E.r,E.g,E.b))}c.setAttribute("position",new pt(f,3)),c.setAttribute("color",new pt(_,3)),super(c,new fi({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=n,this.bones=i,this.matrix=n.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(n){const i=this.bones,c=this.geometry,f=c.getAttribute("position");em.copy(this.root.matrixWorld).invert();for(let _=0,v=0;_<i.length;_++){const E=i[_];E.parent&&E.parent.isBone&&(qd.multiplyMatrices(em,E.matrixWorld),bl.setFromMatrixPosition(qd),f.setXYZ(v,bl.x,bl.y,bl.z),qd.multiplyMatrices(em,E.parent.matrixWorld),bl.setFromMatrixPosition(qd),f.setXYZ(v+1,bl.x,bl.y,bl.z),v+=2)}c.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(n)}}function Yy(p){const n=[];p&&p.isBone&&n.push(p);for(let i=0;i<p.children.length;i++)n.push.apply(n,Yy(p.children[i]));return n}const nm=new Z,C0=new vt,Zy=new vt;class _f extends Ss{constructor(n=10,i=10,c=4473924,f=8947848){c=new vt(c),f=new vt(f);const _=i/2,v=n/i,E=n/2,w=[],S=[];for(let I=0,O=0,B=-E;I<=i;I++,B+=v){w.push(-E,0,B,E,0,B),w.push(B,0,-E,B,0,E);const V=I===_?c:f;V.toArray(S,O),O+=3,V.toArray(S,O),O+=3,V.toArray(S,O),O+=3,V.toArray(S,O),O+=3}const R=new cn;R.setAttribute("position",new pt(w,3)),R.setAttribute("color",new pt(S,3)),super(R,new fi({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}}const Jy=new Z,yf=new Z,Qy=new Z;const Jg=new Z,Ii=new il;function Yi(p,n,i,c,f,_,v){Jg.set(f,_,v).unproject(c);const E=n[p];if(void 0!==E){const w=i.getAttribute("position");for(let S=0,R=E.length;S<R;S++)w.setXYZ(E[S],Jg.x,Jg.y,Jg.z)}}const vf=new Os;class ev extends Ss{constructor(n,i=16776960){const c=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),f=new Float32Array(24),_=new cn;_.setIndex(new Un(c,1)),_.setAttribute("position",new Un(f,3)),super(_,new fi({color:i,toneMapped:!1})),this.object=n,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(n){if(void 0!==n&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&vf.setFromObject(this.object),vf.isEmpty())return;const i=vf.min,c=vf.max,f=this.geometry.attributes.position,_=f.array;_[0]=c.x,_[1]=c.y,_[2]=c.z,_[3]=i.x,_[4]=c.y,_[5]=c.z,_[6]=i.x,_[7]=i.y,_[8]=c.z,_[9]=c.x,_[10]=i.y,_[11]=c.z,_[12]=c.x,_[13]=c.y,_[14]=i.z,_[15]=i.x,_[16]=c.y,_[17]=i.z,_[18]=i.x,_[19]=i.y,_[20]=i.z,_[21]=c.x,_[22]=i.y,_[23]=i.z,f.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(n){return this.object=n,this.update(),this}copy(n){return Ss.prototype.copy.call(this,n),this.object=n.object,this}}const Qg=new Z;let Ef,im;class e_ extends Ss{constructor(n=1){const i=[0,0,0,n,0,0,0,0,0,0,n,0,0,0,0,0,0,n],f=new cn;f.setAttribute("position",new pt(i,3)),f.setAttribute("color",new pt([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),super(f,new fi({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(n,i,c){const f=new vt,_=this.geometry.attributes.color.array;return f.set(n),f.toArray(_,0),f.toArray(_,3),f.set(i),f.toArray(_,6),f.toArray(_,9),f.set(c),f.toArray(_,12),f.toArray(_,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}const t_=new Float32Array(1),rv=new Int32Array(t_.buffer);fs.create=function(p,n){return console.log("THREE.Curve.create() has been deprecated"),p.prototype=Object.create(fs.prototype),p.prototype.constructor=p,p.prototype.getPoint=n,p},fl.prototype.fromPoints=function(p){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(p)},_f.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},tm.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Fr.prototype.extractUrlBase=function(p){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),hf.extractUrlBase(p)},Fr.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},wl.prototype.center=function(p){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(p)},wl.prototype.empty=function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},wl.prototype.isIntersectionBox=function(p){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(p)},wl.prototype.size=function(p){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(p)},Os.prototype.center=function(p){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(p)},Os.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Os.prototype.isIntersectionBox=function(p){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(p)},Os.prototype.isIntersectionSphere=function(p){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(p)},Os.prototype.size=function(p){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(p)},fa.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Ea.prototype.setFromMatrix=function(p){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(p)},Xy.prototype.center=function(p){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(p)},hr.prototype.flattenToArrayOffset=function(p,n){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(p,n)},hr.prototype.multiplyVector3=function(p){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),p.applyMatrix3(this)},hr.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},hr.prototype.applyToBufferAttribute=function(p){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),p.applyMatrix3(this)},hr.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},hr.prototype.getInverse=function(p){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(p).invert()},Wt.prototype.extractPosition=function(p){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(p)},Wt.prototype.flattenToArrayOffset=function(p,n){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(p,n)},Wt.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new Z).setFromMatrixColumn(this,3)},Wt.prototype.setRotationFromQuaternion=function(p){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(p)},Wt.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},Wt.prototype.multiplyVector3=function(p){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),p.applyMatrix4(this)},Wt.prototype.multiplyVector4=function(p){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),p.applyMatrix4(this)},Wt.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},Wt.prototype.rotateAxis=function(p){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),p.transformDirection(this)},Wt.prototype.crossVector=function(p){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),p.applyMatrix4(this)},Wt.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")},Wt.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},Wt.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},Wt.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},Wt.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},Wt.prototype.applyToBufferAttribute=function(p){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),p.applyMatrix4(this)},Wt.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},Wt.prototype.makeFrustum=function(p,n,i,c,f,_){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(p,n,c,i,f,_)},Wt.prototype.getInverse=function(p){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(p).invert()},wr.prototype.isIntersectionLine=function(p){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(p)},fr.prototype.multiplyVector3=function(p){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),p.applyQuaternion(this)},fr.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()},bc.prototype.isIntersectionBox=function(p){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(p)},bc.prototype.isIntersectionPlane=function(p){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(p)},bc.prototype.isIntersectionSphere=function(p){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(p)},zi.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},zi.prototype.barycoordFromPoint=function(p,n){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(p,n)},zi.prototype.midpoint=function(p){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(p)},zi.prototypenormal=function(p){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(p)},zi.prototype.plane=function(p){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(p)},zi.barycoordFromPoint=function(p,n,i,c,f){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),zi.getBarycoord(p,n,i,c,f)},zi.normal=function(p,n,i,c){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),zi.getNormal(p,n,i,c)},ho.prototype.extractAllPoints=function(p){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(p)},ho.prototype.extrude=function(p){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new qo(this,p)},ho.prototype.makeGeometry=function(p){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new _l(this,p)},Ne.prototype.fromAttribute=function(p,n,i){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(p,n,i)},Ne.prototype.distanceToManhattan=function(p){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(p)},Ne.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Z.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},Z.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},Z.prototype.getPositionFromMatrix=function(p){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(p)},Z.prototype.getScaleFromMatrix=function(p){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(p)},Z.prototype.getColumnFromMatrix=function(p,n){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(n,p)},Z.prototype.applyProjection=function(p){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(p)},Z.prototype.fromAttribute=function(p,n,i){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(p,n,i)},Z.prototype.distanceToManhattan=function(p){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(p)},Z.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},ei.prototype.fromAttribute=function(p,n,i){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(p,n,i)},ei.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Ln.prototype.getChildByName=function(p){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(p)},Ln.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},Ln.prototype.translate=function(p,n){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(n,p)},Ln.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},Ln.prototype.applyMatrix=function(p){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(p)},Object.defineProperties(Ln.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(p){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=p}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),hi.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")},Object.defineProperties(hi.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),Ed.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Qi.prototype.setLens=function(p,n){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==n&&(this.filmGauge=n),this.setFocalLength(p)},Object.defineProperties(Xs.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(p){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=p}},shadowCameraLeft:{set:function(p){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=p}},shadowCameraRight:{set:function(p){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=p}},shadowCameraTop:{set:function(p){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=p}},shadowCameraBottom:{set:function(p){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=p}},shadowCameraNear:{set:function(p){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=p}},shadowCameraFar:{set:function(p){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=p}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(p){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=p}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(p){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=p}},shadowMapHeight:{set:function(p){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=p}}}),Object.defineProperties(Un.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===Ur},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(Ur)}}}),Un.prototype.setDynamic=function(p){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===p?Ur:Iu),this},Un.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},Un.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},cn.prototype.addIndex=function(p){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(p)},cn.prototype.addAttribute=function(p,n){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),n&&n.isBufferAttribute||n&&n.isInterleavedBufferAttribute?"index"===p?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(n),this):this.setAttribute(p,n):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(p,new Un(arguments[1],arguments[2])))},cn.prototype.addDrawCall=function(p,n,i){void 0!==i&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(p,n)},cn.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},cn.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},cn.prototype.removeAttribute=function(p){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(p)},cn.prototype.applyMatrix=function(p){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(p)},Object.defineProperties(cn.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),ws.prototype.setDynamic=function(p){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===p?Ur:Iu),this},ws.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},qo.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},qo.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},qo.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")},pd.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")},Jp.prototype.onUpdate=function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this},Object.defineProperties(pr.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new vt}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(p){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===p}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(p){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=p}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}}),Object.defineProperties(to.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(p){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=p}}}),kn.prototype.clearTarget=function(p,n,i,c){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(p),this.clear(n,i,c)},kn.prototype.animate=function(p){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(p)},kn.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},kn.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},kn.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},kn.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},kn.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},kn.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},kn.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},kn.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},kn.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},kn.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},kn.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},kn.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},kn.prototype.enableScissorTest=function(p){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(p)},kn.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},kn.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},kn.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},kn.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},kn.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},kn.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},kn.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},kn.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},kn.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},kn.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()},Object.defineProperties(kn.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(p){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=p}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(p){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=p}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(p){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===p?Ai:Dl}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}},gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}}),Object.defineProperties(h0.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Is.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(p){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=p}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(p){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=p}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(p){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=p}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(p){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=p}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(p){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=p}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(p){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=p}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(p){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=p}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(p){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=p}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(p){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=p}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(p){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=p}}}),dc.prototype.load=function(p){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const n=this;return(new kg).load(p,function(c){n.setBuffer(c)}),this},zg.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},Eh.prototype.updateCubeMap=function(p,n){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(p,n)},Eh.prototype.clear=function(p,n,i,c){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(p,n,i,c)},Xa.crossOrigin=void 0,Xa.loadTexture=function(p,n,i,c){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const f=new Gd;f.setCrossOrigin(this.crossOrigin);const _=f.load(p,i,void 0,c);return n&&(_.mapping=n),_},Xa.loadTextureCube=function(p,n,i,c){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const f=new Vp;f.setCrossOrigin(this.crossOrigin);const _=f.load(p,i,void 0,c);return n&&(_.mapping=n),_},Xa.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},Xa.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};const k0={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")}};"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:we}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=we),N.ACESFilmicToneMapping=4,N.AddEquation=100,N.AddOperation=2,N.AdditiveAnimationBlendMode=2501,N.AdditiveBlending=2,N.AlphaFormat=1021,N.AlwaysDepth=1,N.AlwaysStencilFunc=519,N.AmbientLight=jd,N.AmbientLightProbe=Vg,N.AnimationClip=Hd,N.AnimationLoader=class lf extends Fr{constructor(n){super(n)}load(n,i,c,f){const _=this,v=new Oa(this.manager);v.setPath(this.path),v.setRequestHeader(this.requestHeader),v.setWithCredentials(this.withCredentials),v.load(n,function(E){try{i(_.parse(JSON.parse(E)))}catch(w){f?f(w):console.error(w),_.manager.itemError(n)}},c,f)}parse(n){const i=[];for(let c=0;c<n.length;c++){const f=Hd.parse(n[c]);i.push(f)}return i}},N.AnimationMixer=yu,N.AnimationObjectGroup=$y,N.AnimationUtils=Kn,N.ArcCurve=xg,N.ArrayCamera=fd,N.ArrowHelper=class nv extends Ln{constructor(n=new Z(0,0,1),i=new Z(0,0,0),c=1,f=16776960,_=.2*c,v=.2*_){super(),this.type="ArrowHelper",void 0===Ef&&(Ef=new cn,Ef.setAttribute("position",new pt([0,0,0,0,1,0],3)),im=new js(0,.5,1,5,1),im.translate(0,-.5,0)),this.position.copy(i),this.line=new Aa(Ef,new fi({color:f,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new hi(im,new as({color:f,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(n),this.setLength(c,_,v)}setDirection(n){if(n.y>.99999)this.quaternion.set(0,0,0,1);else if(n.y<-.99999)this.quaternion.set(1,0,0,0);else{Qg.set(n.z,0,-n.x).normalize();const i=Math.acos(n.y);this.quaternion.setFromAxisAngle(Qg,i)}}setLength(n,i=.2*n,c=.2*i){this.line.scale.set(1,Math.max(1e-4,n-i),1),this.line.updateMatrix(),this.cone.scale.set(c,i,c),this.cone.position.y=n,this.cone.updateMatrix()}setColor(n){this.line.material.color.set(n),this.cone.material.color.set(n)}copy(n){return super.copy(n,!1),this.line.copy(n.line),this.cone.copy(n.cone),this}},N.Audio=dc,N.AudioAnalyser=zg,N.AudioContext=Ml,N.AudioListener=class Gy extends Ln{constructor(){super(),this.type="AudioListener",this.context=Ml.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Hy}getInput(){return this.gain}removeFilter(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(n){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=n,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(n){return this.gain.gain.setTargetAtTime(n,this.context.currentTime,.01),this}updateMatrixWorld(n){super.updateMatrixWorld(n);const i=this.context.listener,c=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(uc,Hg,w0),Yo.set(0,0,-1).applyQuaternion(Hg),i.positionX){const f=this.context.currentTime+this.timeDelta;i.positionX.linearRampToValueAtTime(uc.x,f),i.positionY.linearRampToValueAtTime(uc.y,f),i.positionZ.linearRampToValueAtTime(uc.z,f),i.forwardX.linearRampToValueAtTime(Yo.x,f),i.forwardY.linearRampToValueAtTime(Yo.y,f),i.forwardZ.linearRampToValueAtTime(Yo.z,f),i.upX.linearRampToValueAtTime(c.x,f),i.upY.linearRampToValueAtTime(c.y,f),i.upZ.linearRampToValueAtTime(c.z,f)}else i.setPosition(uc.x,uc.y,uc.z),i.setOrientation(Yo.x,Yo.y,Yo.z,c.x,c.y,c.z)}},N.AudioLoader=kg,N.AxesHelper=e_,N.AxisHelper=function Jo(p){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new e_(p)},N.BackSide=1,N.BasicDepthPacking=3200,N.BasicShadowMap=0,N.BinaryTextureLoader=function B0(p){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new Ny(p)},N.Bone=xd,N.BooleanKeyframeTrack=Ia,N.BoundingBoxHelper=function lv(p,n){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new ev(p,n)},N.Box2=wl,N.Box3=Os,N.Box3Helper=class D0 extends Ss{constructor(n,i=16776960){const c=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),_=new cn;_.setIndex(new Un(c,1)),_.setAttribute("position",new pt([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(_,new fi({color:i,toneMapped:!1})),this.box=n,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(n){const i=this.box;i.isEmpty()||(i.getCenter(this.position),i.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(n))}},N.BoxBufferGeometry=_a,N.BoxGeometry=_a,N.BoxHelper=ev,N.BufferAttribute=Un,N.BufferGeometry=cn,N.BufferGeometryLoader=qp,N.ByteType=1010,N.Cache=ac,N.Camera=il,N.CameraHelper=class A0 extends Ss{constructor(n){const i=new cn,c=new fi({color:16777215,vertexColors:!0,toneMapped:!1}),f=[],_=[],v={},E=new vt(16755200),w=new vt(16711680),S=new vt(43775),R=new vt(16777215),D=new vt(3355443);function I(B,V,$){O(B,$),O(V,$)}function O(B,V){f.push(0,0,0),_.push(V.r,V.g,V.b),void 0===v[B]&&(v[B]=[]),v[B].push(f.length/3-1)}I("n1","n2",E),I("n2","n4",E),I("n4","n3",E),I("n3","n1",E),I("f1","f2",E),I("f2","f4",E),I("f4","f3",E),I("f3","f1",E),I("n1","f1",E),I("n2","f2",E),I("n3","f3",E),I("n4","f4",E),I("p","n1",w),I("p","n2",w),I("p","n3",w),I("p","n4",w),I("u1","u2",S),I("u2","u3",S),I("u3","u1",S),I("c","t",R),I("p","c",D),I("cn1","cn2",D),I("cn3","cn4",D),I("cf1","cf2",D),I("cf3","cf4",D),i.setAttribute("position",new pt(f,3)),i.setAttribute("color",new pt(_,3)),super(i,c),this.type="CameraHelper",this.camera=n,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=n.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=v,this.update()}update(){const n=this.geometry,i=this.pointMap;Ii.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Yi("c",i,n,Ii,0,0,-1),Yi("t",i,n,Ii,0,0,1),Yi("n1",i,n,Ii,-1,-1,-1),Yi("n2",i,n,Ii,1,-1,-1),Yi("n3",i,n,Ii,-1,1,-1),Yi("n4",i,n,Ii,1,1,-1),Yi("f1",i,n,Ii,-1,-1,1),Yi("f2",i,n,Ii,1,-1,1),Yi("f3",i,n,Ii,-1,1,1),Yi("f4",i,n,Ii,1,1,1),Yi("u1",i,n,Ii,.7,1.1,-1),Yi("u2",i,n,Ii,-.7,1.1,-1),Yi("u3",i,n,Ii,0,2,-1),Yi("cf1",i,n,Ii,-1,0,1),Yi("cf2",i,n,Ii,1,0,1),Yi("cf3",i,n,Ii,0,-1,1),Yi("cf4",i,n,Ii,0,1,1),Yi("cn1",i,n,Ii,-1,0,-1),Yi("cn2",i,n,Ii,1,0,-1),Yi("cn3",i,n,Ii,0,-1,-1),Yi("cn4",i,n,Ii,0,1,-1),n.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}},N.CanvasRenderer=function FE(){console.error("THREE.CanvasRenderer has been removed")},N.CanvasTexture=Eg,N.CatmullRomCurve3=Rp,N.CineonToneMapping=3,N.CircleBufferGeometry=eu,N.CircleGeometry=eu,N.ClampToEdgeWrapping=Hi,N.Clock=Hy,N.Color=vt,N.ColorKeyframeTrack=kp,N.CompressedTexture=Ap,N.CompressedTextureLoader=class Fy extends Fr{constructor(n){super(n)}load(n,i,c,f){const _=this,v=[],E=new Ap,w=new Oa(this.manager);w.setPath(this.path),w.setResponseType("arraybuffer"),w.setRequestHeader(this.requestHeader),w.setWithCredentials(_.withCredentials);let S=0;function R(D){w.load(n[D],function(I){const O=_.parse(I,!0);v[D]={width:O.width,height:O.height,format:O.format,mipmaps:O.mipmaps},S+=1,6===S&&(1===O.mipmapCount&&(E.minFilter=ri),E.image=v,E.format=O.format,E.needsUpdate=!0,i&&i(E))},c,f)}if(Array.isArray(n))for(let D=0,I=n.length;D<I;++D)R(D);else w.load(n,function(D){const I=_.parse(D,!0);if(I.isCubemap){const O=I.mipmaps.length/I.mipmapCount;for(let B=0;B<O;B++){v[B]={mipmaps:[]};for(let V=0;V<I.mipmapCount;V++)v[B].mipmaps.push(I.mipmaps[B*I.mipmapCount+V]),v[B].format=I.format,v[B].width=I.width,v[B].height=I.height}E.image=v}else E.image.width=I.width,E.image.height=I.height,E.mipmaps=I.mipmaps;1===I.mipmapCount&&(E.minFilter=ri),E.format=I.format,E.needsUpdate=!0,i&&i(E)},c,f);return E}},N.ConeBufferGeometry=dl,N.ConeGeometry=dl,N.CubeCamera=Eh,N.CubeReflectionMapping=301,N.CubeRefractionMapping=302,N.CubeTexture=va,N.CubeTextureLoader=Vp,N.CubeUVReflectionMapping=306,N.CubeUVRefractionMapping=307,N.CubicBezierCurve=Pp,N.CubicBezierCurve3=Ty,N.CubicInterpolant=Up,N.CullFaceBack=1,N.CullFaceFront=2,N.CullFaceFrontBack=3,N.CullFaceNone=0,N.Curve=fs,N.CurvePath=Op,N.CustomBlending=5,N.CustomToneMapping=5,N.CylinderBufferGeometry=js,N.CylinderGeometry=js,N.Cylindrical=class S0{constructor(n=1,i=0,c=0){return this.radius=n,this.theta=i,this.y=c,this}set(n,i,c){return this.radius=n,this.theta=i,this.y=c,this}copy(n){return this.radius=n.radius,this.theta=n.theta,this.y=n.y,this}setFromVector3(n){return this.setFromCartesianCoords(n.x,n.y,n.z)}setFromCartesianCoords(n,i,c){return this.radius=Math.sqrt(n*n+c*c),this.theta=Math.atan2(n,c),this.y=i,this}clone(){return(new this.constructor).copy(this)}},N.DataTexture=Cn,N.DataTexture2DArray=Ym,N.DataTexture3D=ap,N.DataTextureLoader=Ny,N.DataUtils=class sv{static toHalfFloat(n){n>65504&&(console.warn("THREE.DataUtils.toHalfFloat(): value exceeds 65504."),n=65504),t_[0]=n;const i=rv[0];let c=i>>16&32768,f=i>>12&2047;const _=i>>23&255;return _<103?c:_>142?(c|=31744,c|=(255==_?0:1)&&8388607&i,c):_<113?(f|=2048,c|=(f>>114-_)+(f>>113-_&1),c):(c|=_-112<<10|f>>1,c+=1&f,c)}},N.DecrementStencilOp=7683,N.DecrementWrapStencilOp=34056,N.DefaultLoadingManager=x0,N.DepthFormat=lr,N.DepthStencilFormat=bo,N.DepthTexture=$h,N.DirectionalLight=jp,N.DirectionalLightHelper=class T0 extends Ln{constructor(n,i,c){super(),this.light=n,this.light.updateMatrixWorld(),this.matrix=n.matrixWorld,this.matrixAutoUpdate=!1,this.color=c,void 0===i&&(i=1);let f=new cn;f.setAttribute("position",new pt([-i,i,0,i,i,0,i,-i,0,-i,-i,0,-i,i,0],3));const _=new fi({fog:!1,toneMapped:!1});this.lightPlane=new Aa(f,_),this.add(this.lightPlane),f=new cn,f.setAttribute("position",new pt([0,0,0,0,0,1],3)),this.targetLine=new Aa(f,_),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){Jy.setFromMatrixPosition(this.light.matrixWorld),yf.setFromMatrixPosition(this.light.target.matrixWorld),Qy.subVectors(yf,Jy),this.lightPlane.lookAt(yf),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(yf),this.targetLine.scale.z=Qy.length()}},N.DiscreteInterpolant=Lg,N.DodecahedronBufferGeometry=tu,N.DodecahedronGeometry=tu,N.DoubleSide=2,N.DstAlphaFactor=206,N.DstColorFactor=208,N.DynamicBufferAttribute=function xf(p,n){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead."),new Un(p,n).setUsage(Ur)},N.DynamicCopyUsage=35050,N.DynamicDrawUsage=Ur,N.DynamicReadUsage=35049,N.EdgesGeometry=Zh,N.EdgesHelper=function cv(p,n){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new Ss(new Zh(p.geometry),new fi({color:void 0!==n?n:16777215}))},N.EllipseCurve=Cd,N.EqualDepth=4,N.EqualStencilFunc=514,N.EquirectangularReflectionMapping=303,N.EquirectangularRefractionMapping=304,N.Euler=Cc,N.EventDispatcher=ja,N.ExtrudeBufferGeometry=qo,N.ExtrudeGeometry=qo,N.FaceColors=1,N.FileLoader=Oa,N.FlatShading=1,N.Float16BufferAttribute=Rm,N.Float32Attribute=function L0(p,n){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new pt(p,n)},N.Float32BufferAttribute=pt,N.Float64Attribute=function r_(p,n){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new Gf(p,n)},N.Float64BufferAttribute=Gf,N.FloatType=Mo,N.Fog=Xc,N.FogExp2=nc,N.Font=function Fa(){console.error("THREE.Font has been moved to /examples/jsm/loaders/FontLoader.js")},N.FontLoader=function fc(){console.error("THREE.FontLoader has been moved to /examples/jsm/loaders/FontLoader.js")},N.FramebufferTexture=Ws,N.FrontSide=0,N.Frustum=Ea,N.GLBufferAttribute=Xg,N.GLSL1="100",N.GLSL3=Tv,N.GreaterDepth=6,N.GreaterEqualDepth=5,N.GreaterEqualStencilFunc=518,N.GreaterStencilFunc=516,N.GridHelper=_f,N.Group=Go,N.HalfFloatType=gs,N.HemisphereLight=zd,N.HemisphereLightHelper=class Zg extends Ln{constructor(n,i,c){super(),this.light=n,this.light.updateMatrixWorld(),this.matrix=n.matrixWorld,this.matrixAutoUpdate=!1,this.color=c;const f=new gl(i);f.rotateY(.5*Math.PI),this.material=new as({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);const _=f.getAttribute("position"),v=new Float32Array(3*_.count);f.setAttribute("color",new Un(v,3)),this.add(new hi(f,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const n=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{const i=n.geometry.getAttribute("color");C0.copy(this.light.color),Zy.copy(this.light.groundColor);for(let c=0,f=i.count;c<f;c++){const _=c<f/2?C0:Zy;i.setXYZ(c,_.r,_.g,_.b)}i.needsUpdate=!0}n.lookAt(nm.setFromMatrixPosition(this.light.matrixWorld).negate())}},N.HemisphereLightProbe=M0,N.IcosahedronBufferGeometry=Ld,N.IcosahedronGeometry=Ld,N.ImageBitmapLoader=pf,N.ImageLoader=fu,N.ImageUtils=Xa,N.ImmediateRenderObject=function bf(){console.error("THREE.ImmediateRenderObject has been removed.")},N.IncrementStencilOp=7682,N.IncrementWrapStencilOp=34055,N.InstancedBufferAttribute=ul,N.InstancedBufferGeometry=ff,N.InstancedInterleavedBuffer=qg,N.InstancedMesh=Xh,N.Int16Attribute=function Bi(p,n){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new yh(p,n)},N.Int16BufferAttribute=yh,N.Int32Attribute=function O0(p,n){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new Qa(p,n)},N.Int32BufferAttribute=Qa,N.Int8Attribute=function I0(p,n){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new Bl(p,n)},N.Int8BufferAttribute=Bl,N.IntType=1013,N.InterleavedBuffer=ws,N.InterleavedBufferAttribute=lo,N.Interpolant=vl,N.InterpolateDiscrete=Ar,N.InterpolateLinear=Au,N.InterpolateSmooth=2302,N.InvertStencilOp=5386,N.JSONLoader=function U0(){console.error("THREE.JSONLoader has been removed.")},N.KeepStencilOp=7680,N.KeyframeTrack=As,N.LOD=Ey,N.LatheBufferGeometry=du,N.LatheGeometry=du,N.Layers=Vf,N.LensFlare=function lm(){console.error("THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js")},N.LessDepth=2,N.LessEqualDepth=3,N.LessEqualStencilFunc=515,N.LessStencilFunc=513,N.Light=Xs,N.LightProbe=df,N.Line=Aa,N.Line3=Xy,N.LineBasicMaterial=fi,N.LineCurve=hl,N.LineCurve3=Ip,N.LineDashedMaterial=Iy,N.LineLoop=bd,N.LinePieces=1,N.LineSegments=Ss,N.LineStrip=0,N.LinearEncoding=Dl,N.LinearFilter=ri,N.LinearInterpolant=kd,N.LinearMipMapLinearFilter=1008,N.LinearMipMapNearestFilter=1007,N.LinearMipmapLinearFilter=is,N.LinearMipmapNearestFilter=1007,N.LinearToneMapping=1,N.Loader=Fr,N.LoaderUtils=hf,N.LoadingManager=af,N.LoopOnce=2200,N.LoopPingPong=2202,N.LoopRepeat=2201,N.LuminanceAlphaFormat=1025,N.LuminanceFormat=1024,N.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},N.Material=pr,N.MaterialLoader=Bg,N.Math=nt,N.MathUtils=nt,N.Matrix3=hr,N.Matrix4=Wt,N.MaxEquation=104,N.Mesh=hi,N.MeshBasicMaterial=as,N.MeshDepthMaterial=zh,N.MeshDistanceMaterial=tc,N.MeshFaceMaterial=function sm(p){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),p},N.MeshLambertMaterial=Og,N.MeshMatcapMaterial=Bp,N.MeshNormalMaterial=Py,N.MeshPhongMaterial=Ud,N.MeshPhysicalMaterial=Np,N.MeshStandardMaterial=yl,N.MeshToonMaterial=Ig,N.MinEquation=103,N.MirroredRepeatWrapping=ta,N.MixOperation=1,N.MultiMaterial=function P0(p=[]){return console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),p.isMultiMaterial=!0,p.materials=p,p.clone=function(){return p.slice()},p},N.MultiplyBlending=4,N.MultiplyOperation=0,N.NearestFilter=sn,N.NearestMipMapLinearFilter=1005,N.NearestMipMapNearestFilter=1004,N.NearestMipmapLinearFilter=1005,N.NearestMipmapNearestFilter=1004,N.NeverDepth=0,N.NeverStencilFunc=512,N.NoBlending=0,N.NoColors=0,N.NoToneMapping=0,N.NormalAnimationBlendMode=2500,N.NormalBlending=1,N.NotEqualDepth=7,N.NotEqualStencilFunc=517,N.NumberKeyframeTrack=El,N.Object3D=Ln,N.ObjectLoader=class ky extends Fr{constructor(n){super(n)}load(n,i,c,f){const _=this,v=""===this.path?hf.extractUrlBase(n):this.path;this.resourcePath=this.resourcePath||v;const E=new Oa(this.manager);E.setPath(this.path),E.setRequestHeader(this.requestHeader),E.setWithCredentials(this.withCredentials),E.load(n,function(w){let S=null;try{S=JSON.parse(w)}catch(D){return void 0!==f&&f(D),void console.error("THREE:ObjectLoader: Can't parse "+n+".",D.message)}const R=S.metadata;void 0!==R&&void 0!==R.type&&"geometry"!==R.type.toLowerCase()?_.parse(S,i):console.error("THREE.ObjectLoader: Can't load "+n)},c,f)}loadAsync(n,i){var c=this;return C(function*(){const f=c,_=""===c.path?hf.extractUrlBase(n):c.path;c.resourcePath=c.resourcePath||_;const v=new Oa(c.manager);v.setPath(c.path),v.setRequestHeader(c.requestHeader),v.setWithCredentials(c.withCredentials);const E=yield v.loadAsync(n,i),w=JSON.parse(E),S=w.metadata;if(void 0===S||void 0===S.type||"geometry"===S.type.toLowerCase())throw new Error("THREE.ObjectLoader: Can't load "+n);return yield f.parseAsync(w)})()}parse(n,i){const c=this.parseAnimations(n.animations),f=this.parseShapes(n.shapes),_=this.parseGeometries(n.geometries,f),v=this.parseImages(n.images,function(){void 0!==i&&i(S)}),E=this.parseTextures(n.textures,v),w=this.parseMaterials(n.materials,E),S=this.parseObject(n.object,_,w,E,c),R=this.parseSkeletons(n.skeletons,S);if(this.bindSkeletons(S,R),void 0!==i){let D=!1;for(const I in v)if(v[I]instanceof HTMLImageElement){D=!0;break}!1===D&&i(S)}return S}parseAsync(n){var i=this;return C(function*(){const c=i.parseAnimations(n.animations),f=i.parseShapes(n.shapes),_=i.parseGeometries(n.geometries,f),v=yield i.parseImagesAsync(n.images),E=i.parseTextures(n.textures,v),w=i.parseMaterials(n.materials,E),S=i.parseObject(n.object,_,w,E,c),R=i.parseSkeletons(n.skeletons,S);return i.bindSkeletons(S,R),S})()}parseShapes(n){const i={};if(void 0!==n)for(let c=0,f=n.length;c<f;c++){const _=(new ho).fromJSON(n[c]);i[_.uuid]=_}return i}parseSkeletons(n,i){const c={},f={};if(i.traverse(function(_){_.isBone&&(f[_.uuid]=_)}),void 0!==n)for(let _=0,v=n.length;_<v;_++){const E=(new Cp).fromJSON(n[_],f);c[E.uuid]=E}return c}parseGeometries(n,i){const c={};if(void 0!==n){const f=new qp;for(let _=0,v=n.length;_<v;_++){let E;const w=n[_];switch(w.type){case"BufferGeometry":case"InstancedBufferGeometry":E=f.parse(w);break;case"Geometry":console.error("THREE.ObjectLoader: The legacy Geometry type is no longer supported.");break;default:w.type in Pg?E=Pg[w.type].fromJSON(w,i):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${w.type}"`)}E.uuid=w.uuid,void 0!==w.name&&(E.name=w.name),!0===E.isBufferGeometry&&void 0!==w.userData&&(E.userData=w.userData),c[w.uuid]=E}}return c}parseMaterials(n,i){const c={},f={};if(void 0!==n){const _=new Bg;_.setTextures(i);for(let v=0,E=n.length;v<E;v++){const w=n[v];if("MultiMaterial"===w.type){const S=[];for(let R=0;R<w.materials.length;R++){const D=w.materials[R];void 0===c[D.uuid]&&(c[D.uuid]=_.parse(D)),S.push(c[D.uuid])}f[w.uuid]=S}else void 0===c[w.uuid]&&(c[w.uuid]=_.parse(w)),f[w.uuid]=c[w.uuid]}}return f}parseAnimations(n){const i={};if(void 0!==n)for(let c=0;c<n.length;c++){const _=Hd.parse(n[c]);i[_.uuid]=_}return i}parseImages(n,i){const c=this,f={};let _;function E(w){if("string"==typeof w){const S=w;return function v(w){return c.manager.itemStart(w),_.load(w,function(){c.manager.itemEnd(w)},void 0,function(){c.manager.itemError(w),c.manager.itemEnd(w)})}(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(S)?S:c.resourcePath+S)}return w.data?{data:da(w.type,w.data),width:w.width,height:w.height}:null}if(void 0!==n&&n.length>0){const w=new af(i);_=new fu(w),_.setCrossOrigin(this.crossOrigin);for(let S=0,R=n.length;S<R;S++){const D=n[S],I=D.url;if(Array.isArray(I)){f[D.uuid]=[];for(let O=0,B=I.length;O<B;O++){const $=E(I[O]);null!==$&&($ instanceof HTMLImageElement?f[D.uuid].push($):f[D.uuid].push(new Cn($.data,$.width,$.height)))}}else{const O=E(D.url);null!==O&&(f[D.uuid]=O)}}}return f}parseImagesAsync(n){var i=this;return C(function*(){const c=i,f={};let _;function v(w){return E.apply(this,arguments)}function E(){return(E=C(function*(w){if("string"==typeof w){const S=w,R=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(S)?S:c.resourcePath+S;return yield _.loadAsync(R)}return w.data?{data:da(w.type,w.data),width:w.width,height:w.height}:null})).apply(this,arguments)}if(void 0!==n&&n.length>0){_=new fu(i.manager),_.setCrossOrigin(i.crossOrigin);for(let w=0,S=n.length;w<S;w++){const R=n[w],D=R.url;if(Array.isArray(D)){f[R.uuid]=[];for(let I=0,O=D.length;I<O;I++){const B=D[I],V=yield v(B);null!==V&&(V instanceof HTMLImageElement?f[R.uuid].push(V):f[R.uuid].push(new Cn(V.data,V.width,V.height)))}}else{const I=yield v(R.url);null!==I&&(f[R.uuid]=I)}}}return f})()}parseTextures(n,i){function c(_,v){return"number"==typeof _?_:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",_),v[_])}const f={};if(void 0!==n)for(let _=0,v=n.length;_<v;_++){const E=n[_];let w;void 0===E.image&&console.warn('THREE.ObjectLoader: No "image" specified for',E.uuid),void 0===i[E.image]&&console.warn("THREE.ObjectLoader: Undefined image",E.image);const S=i[E.image];Array.isArray(S)?(w=new va(S),6===S.length&&(w.needsUpdate=!0)):(w=S&&S.data?new Cn(S.data,S.width,S.height):new li(S),S&&(w.needsUpdate=!0)),w.uuid=E.uuid,void 0!==E.name&&(w.name=E.name),void 0!==E.mapping&&(w.mapping=c(E.mapping,ms)),void 0!==E.offset&&w.offset.fromArray(E.offset),void 0!==E.repeat&&w.repeat.fromArray(E.repeat),void 0!==E.center&&w.center.fromArray(E.center),void 0!==E.rotation&&(w.rotation=E.rotation),void 0!==E.wrap&&(w.wrapS=c(E.wrap[0],Ug),w.wrapT=c(E.wrap[1],Ug)),void 0!==E.format&&(w.format=E.format),void 0!==E.type&&(w.type=E.type),void 0!==E.encoding&&(w.encoding=E.encoding),void 0!==E.minFilter&&(w.minFilter=c(E.minFilter,Xp)),void 0!==E.magFilter&&(w.magFilter=c(E.magFilter,Xp)),void 0!==E.anisotropy&&(w.anisotropy=E.anisotropy),void 0!==E.flipY&&(w.flipY=E.flipY),void 0!==E.premultiplyAlpha&&(w.premultiplyAlpha=E.premultiplyAlpha),void 0!==E.unpackAlignment&&(w.unpackAlignment=E.unpackAlignment),void 0!==E.userData&&(w.userData=E.userData),f[E.uuid]=w}return f}parseObject(n,i,c,f,_){let v,R,D;function E(I){return void 0===i[I]&&console.warn("THREE.ObjectLoader: Undefined geometry",I),i[I]}function w(I){if(void 0!==I){if(Array.isArray(I)){const O=[];for(let B=0,V=I.length;B<V;B++){const $=I[B];void 0===c[$]&&console.warn("THREE.ObjectLoader: Undefined material",$),O.push(c[$])}return O}return void 0===c[I]&&console.warn("THREE.ObjectLoader: Undefined material",I),c[I]}}function S(I){return void 0===f[I]&&console.warn("THREE.ObjectLoader: Undefined texture",I),f[I]}switch(n.type){case"Scene":v=new pd,void 0!==n.background&&(v.background=Number.isInteger(n.background)?new vt(n.background):S(n.background)),void 0!==n.environment&&(v.environment=S(n.environment)),void 0!==n.fog&&("Fog"===n.fog.type?v.fog=new Xc(n.fog.color,n.fog.near,n.fog.far):"FogExp2"===n.fog.type&&(v.fog=new nc(n.fog.color,n.fog.density)));break;case"PerspectiveCamera":v=new Qi(n.fov,n.aspect,n.near,n.far),void 0!==n.focus&&(v.focus=n.focus),void 0!==n.zoom&&(v.zoom=n.zoom),void 0!==n.filmGauge&&(v.filmGauge=n.filmGauge),void 0!==n.filmOffset&&(v.filmOffset=n.filmOffset),void 0!==n.view&&(v.view=Object.assign({},n.view));break;case"OrthographicCamera":v=new jl(n.left,n.right,n.top,n.bottom,n.near,n.far),void 0!==n.zoom&&(v.zoom=n.zoom),void 0!==n.view&&(v.view=Object.assign({},n.view));break;case"AmbientLight":v=new jd(n.color,n.intensity);break;case"DirectionalLight":v=new jp(n.color,n.intensity);break;case"PointLight":v=new Wp(n.color,n.intensity,n.distance,n.decay);break;case"RectAreaLight":v=new $d(n.color,n.intensity,n.width,n.height);break;case"SpotLight":v=new Hp(n.color,n.intensity,n.distance,n.angle,n.penumbra,n.decay);break;case"HemisphereLight":v=new zd(n.color,n.groundColor,n.intensity);break;case"LightProbe":v=(new df).fromJSON(n);break;case"SkinnedMesh":R=E(n.geometry),D=w(n.material),v=new Ed(R,D),void 0!==n.bindMode&&(v.bindMode=n.bindMode),void 0!==n.bindMatrix&&v.bindMatrix.fromArray(n.bindMatrix),void 0!==n.skeleton&&(v.skeleton=n.skeleton);break;case"Mesh":R=E(n.geometry),D=w(n.material),v=new hi(R,D);break;case"InstancedMesh":R=E(n.geometry),D=w(n.material);const O=n.instanceMatrix,B=n.instanceColor;v=new Xh(R,D,n.count),v.instanceMatrix=new ul(new Float32Array(O.array),16),void 0!==B&&(v.instanceColor=new ul(new Float32Array(B.array),B.itemSize));break;case"LOD":v=new Ey;break;case"Line":v=new Aa(E(n.geometry),w(n.material));break;case"LineLoop":v=new bd(E(n.geometry),w(n.material));break;case"LineSegments":v=new Ss(E(n.geometry),w(n.material));break;case"PointCloud":case"Points":v=new Fn(E(n.geometry),w(n.material));break;case"Sprite":v=new Ep(w(n.material));break;case"Group":v=new Go;break;case"Bone":v=new xd;break;default:v=new Ln}if(v.uuid=n.uuid,void 0!==n.name&&(v.name=n.name),void 0!==n.matrix?(v.matrix.fromArray(n.matrix),void 0!==n.matrixAutoUpdate&&(v.matrixAutoUpdate=n.matrixAutoUpdate),v.matrixAutoUpdate&&v.matrix.decompose(v.position,v.quaternion,v.scale)):(void 0!==n.position&&v.position.fromArray(n.position),void 0!==n.rotation&&v.rotation.fromArray(n.rotation),void 0!==n.quaternion&&v.quaternion.fromArray(n.quaternion),void 0!==n.scale&&v.scale.fromArray(n.scale)),void 0!==n.castShadow&&(v.castShadow=n.castShadow),void 0!==n.receiveShadow&&(v.receiveShadow=n.receiveShadow),n.shadow&&(void 0!==n.shadow.bias&&(v.shadow.bias=n.shadow.bias),void 0!==n.shadow.normalBias&&(v.shadow.normalBias=n.shadow.normalBias),void 0!==n.shadow.radius&&(v.shadow.radius=n.shadow.radius),void 0!==n.shadow.mapSize&&v.shadow.mapSize.fromArray(n.shadow.mapSize),void 0!==n.shadow.camera&&(v.shadow.camera=this.parseObject(n.shadow.camera))),void 0!==n.visible&&(v.visible=n.visible),void 0!==n.frustumCulled&&(v.frustumCulled=n.frustumCulled),void 0!==n.renderOrder&&(v.renderOrder=n.renderOrder),void 0!==n.userData&&(v.userData=n.userData),void 0!==n.layers&&(v.layers.mask=n.layers),void 0!==n.children){const I=n.children;for(let O=0;O<I.length;O++)v.add(this.parseObject(I[O],i,c,f,_))}if(void 0!==n.animations){const I=n.animations;for(let O=0;O<I.length;O++)v.animations.push(_[I[O]])}if("LOD"===n.type){void 0!==n.autoUpdate&&(v.autoUpdate=n.autoUpdate);const I=n.levels;for(let O=0;O<I.length;O++){const B=I[O],V=v.getObjectByProperty("uuid",B.object);void 0!==V&&v.addLevel(V,B.distance)}}return v}bindSkeletons(n,i){0!==Object.keys(i).length&&n.traverse(function(c){if(!0===c.isSkinnedMesh&&void 0!==c.skeleton){const f=i[c.skeleton];void 0===f?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",c.skeleton):c.bind(f,c.bindMatrix)}})}setTexturePath(n){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(n)}},N.ObjectSpaceNormalMap=1,N.OctahedronBufferGeometry=gl,N.OctahedronGeometry=gl,N.OneFactor=201,N.OneMinusDstAlphaFactor=207,N.OneMinusDstColorFactor=209,N.OneMinusSrcAlphaFactor=205,N.OneMinusSrcColorFactor=203,N.OrthographicCamera=jl,N.PCFShadowMap=1,N.PCFSoftShadowMap=2,N.PMREMGenerator=qm,N.ParametricGeometry=function uv(){return console.error("THREE.ParametricGeometry has been moved to /examples/jsm/geometries/ParametricGeometry.js"),new cn},N.Particle=function om(p){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new Ep(p)},N.ParticleBasicMaterial=function i_(p){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new rc(p)},N.ParticleSystem=function PE(p,n){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new Fn(p,n)},N.ParticleSystemMaterial=function av(p){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new rc(p)},N.Path=fl,N.PerspectiveCamera=Qi,N.Plane=wr,N.PlaneBufferGeometry=$n,N.PlaneGeometry=$n,N.PlaneHelper=class tv extends Aa{constructor(n,i=1,c=16776960){const f=c,v=new cn;v.setAttribute("position",new pt([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),v.computeBoundingSphere(),super(v,new fi({color:f,toneMapped:!1})),this.type="PlaneHelper",this.plane=n,this.size=i;const w=new cn;w.setAttribute("position",new pt([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),w.computeBoundingSphere(),this.add(new hi(w,new as({color:f,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(n){let i=-this.plane.constant;Math.abs(i)<1e-8&&(i=1e-8),this.scale.set(.5*this.size,.5*this.size,i),this.children[0].material.side=i<0?1:0,this.lookAt(this.plane.normal),super.updateMatrixWorld(n)}},N.PointCloud=function n_(p,n){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new Fn(p,n)},N.PointCloudMaterial=function an(p){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new rc(p)},N.PointLight=Wp,N.PointLightHelper=class Ky extends hi{constructor(n,i,c){super(new Ra(i,4,2),new as({wireframe:!0,fog:!1,toneMapped:!1})),this.light=n,this.light.updateMatrixWorld(),this.color=c,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}},N.Points=Fn,N.PointsMaterial=rc,N.PolarGridHelper=class RE extends Ss{constructor(n=10,i=16,c=8,f=64,_=4473924,v=8947848){_=new vt(_),v=new vt(v);const E=[],w=[];for(let D=0;D<=i;D++){const I=D/i*(2*Math.PI),O=Math.sin(I)*n,B=Math.cos(I)*n;E.push(0,0,0),E.push(O,0,B);const V=1&D?_:v;w.push(V.r,V.g,V.b),w.push(V.r,V.g,V.b)}for(let D=0;D<=c;D++){const I=1&D?_:v,O=n-n/c*D;for(let B=0;B<f;B++){let V=B/f*(2*Math.PI),$=Math.sin(V)*O,U=Math.cos(V)*O;E.push($,0,U),w.push(I.r,I.g,I.b),V=(B+1)/f*(2*Math.PI),$=Math.sin(V)*O,U=Math.cos(V)*O,E.push($,0,U),w.push(I.r,I.g,I.b)}}const S=new cn;S.setAttribute("position",new pt(E,3)),S.setAttribute("color",new pt(w,3)),super(S,new fi({vertexColors:!0,toneMapped:!1})),this.type="PolarGridHelper"}},N.PolyhedronBufferGeometry=Cs,N.PolyhedronGeometry=Cs,N.PositionalAudio=class Wy extends dc{constructor(n){super(n),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(n){return this.panner.refDistance=n,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(n){return this.panner.rolloffFactor=n,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(n){return this.panner.distanceModel=n,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(n){return this.panner.maxDistance=n,this}setDirectionalCone(n,i,c){return this.panner.coneInnerAngle=n,this.panner.coneOuterAngle=i,this.panner.coneOuterGain=c,this}updateMatrixWorld(n){if(super.updateMatrixWorld(n),!0===this.hasPlaybackControl&&!1===this.isPlaying)return;this.matrixWorld.decompose(gu,Gg,zy),_u.set(0,0,1).applyQuaternion(Gg);const i=this.panner;if(i.positionX){const c=this.context.currentTime+this.listener.timeDelta;i.positionX.linearRampToValueAtTime(gu.x,c),i.positionY.linearRampToValueAtTime(gu.y,c),i.positionZ.linearRampToValueAtTime(gu.z,c),i.orientationX.linearRampToValueAtTime(_u.x,c),i.orientationY.linearRampToValueAtTime(_u.y,c),i.orientationZ.linearRampToValueAtTime(_u.z,c)}else i.setPosition(gu.x,gu.y,gu.z),i.setOrientation(_u.x,_u.y,_u.z)}},N.PropertyBinding=pi,N.PropertyMixer=Wg,N.QuadraticBezierCurve=su,N.QuadraticBezierCurve3=Jh,N.Quaternion=fr,N.QuaternionKeyframeTrack=Vd,N.QuaternionLinearInterpolant=Oy,N.REVISION=we,N.RGBADepthPacking=3201,N.RGBAFormat=_i,N.RGBAIntegerFormat=1033,N.RGBA_ASTC_10x10_Format=37819,N.RGBA_ASTC_10x5_Format=37816,N.RGBA_ASTC_10x6_Format=37817,N.RGBA_ASTC_10x8_Format=37818,N.RGBA_ASTC_12x10_Format=37820,N.RGBA_ASTC_12x12_Format=37821,N.RGBA_ASTC_4x4_Format=37808,N.RGBA_ASTC_5x4_Format=37809,N.RGBA_ASTC_5x5_Format=37810,N.RGBA_ASTC_6x5_Format=37811,N.RGBA_ASTC_6x6_Format=37812,N.RGBA_ASTC_8x5_Format=37813,N.RGBA_ASTC_8x6_Format=37814,N.RGBA_ASTC_8x8_Format=37815,N.RGBA_BPTC_Format=36492,N.RGBA_ETC2_EAC_Format=37496,N.RGBA_PVRTC_2BPPV1_Format=35843,N.RGBA_PVRTC_4BPPV1_Format=35842,N.RGBA_S3TC_DXT1_Format=Ct,N.RGBA_S3TC_DXT3_Format=An,N.RGBA_S3TC_DXT5_Format=Zn,N.RGBFormat=1022,N.RGB_ETC1_Format=36196,N.RGB_ETC2_Format=37492,N.RGB_PVRTC_2BPPV1_Format=35841,N.RGB_PVRTC_4BPPV1_Format=35840,N.RGB_S3TC_DXT1_Format=Tr,N.RGFormat=1030,N.RGIntegerFormat=1031,N.RawShaderMaterial=Ta,N.Ray=bc,N.Raycaster=class qy{constructor(n,i,c=0,f=1/0){this.ray=new bc(n,i),this.near=c,this.far=f,this.camera=null,this.layers=new Vf,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(n,i){this.ray.set(n,i)}setFromCamera(n,i){i&&i.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(i.matrixWorld),this.ray.direction.set(n.x,n.y,.5).unproject(i).sub(this.ray.origin).normalize(),this.camera=i):i&&i.isOrthographicCamera?(this.ray.origin.set(n.x,n.y,(i.near+i.far)/(i.near-i.far)).unproject(i),this.ray.direction.set(0,0,-1).transformDirection(i.matrixWorld),this.camera=i):console.error("THREE.Raycaster: Unsupported camera type: "+i.type)}intersectObject(n,i=!0,c=[]){return vu(n,this,c,i),c.sort(Yg),c}intersectObjects(n,i=!0,c=[]){for(let f=0,_=n.length;f<_;f++)vu(n[f],this,c,i);return c.sort(Yg),c}},N.RectAreaLight=$d,N.RedFormat=1028,N.RedIntegerFormat=1029,N.ReinhardToneMapping=2,N.RepeatWrapping=mn,N.ReplaceStencilOp=7681,N.ReverseSubtractEquation=102,N.RingBufferGeometry=Lr,N.RingGeometry=Lr,N.Scene=pd,N.SceneUtils=k0,N.ShaderChunk=on,N.ShaderLib=No,N.ShaderMaterial=to,N.ShadowMaterial=Bd,N.Shape=ho,N.ShapeBufferGeometry=_l,N.ShapeGeometry=_l,N.ShapePath=class iv{constructor(){this.type="ShapePath",this.color=new vt,this.subPaths=[],this.currentPath=null}moveTo(n,i){return this.currentPath=new fl,this.subPaths.push(this.currentPath),this.currentPath.moveTo(n,i),this}lineTo(n,i){return this.currentPath.lineTo(n,i),this}quadraticCurveTo(n,i,c,f){return this.currentPath.quadraticCurveTo(n,i,c,f),this}bezierCurveTo(n,i,c,f,_,v){return this.currentPath.bezierCurveTo(n,i,c,f,_,v),this}splineThru(n){return this.currentPath.splineThru(n),this}toShapes(n,i){function c(L){const Y=[];for(let z=0,Q=L.length;z<Q;z++){const re=L[z],ae=new ho;ae.curves=re.curves,Y.push(ae)}return Y}function f(L,Y){const z=Y.length;let Q=!1;for(let re=z-1,ae=0;ae<z;re=ae++){let ve=Y[re],ze=Y[ae],Fe=ze.x-ve.x,X=ze.y-ve.y;if(Math.abs(X)>Number.EPSILON){if(X<0&&(ve=Y[ae],Fe=-Fe,ze=Y[re],X=-X),L.y<ve.y||L.y>ze.y)continue;if(L.y===ve.y){if(L.x===ve.x)return!0}else{const de=X*(L.x-ve.x)-Fe*(L.y-ve.y);if(0===de)return!0;if(de<0)continue;Q=!Q}}else{if(L.y!==ve.y)continue;if(ze.x<=L.x&&L.x<=ve.x||ve.x<=L.x&&L.x<=ze.x)return!0}}return Q}const _=$o.isClockWise,v=this.subPaths;if(0===v.length)return[];if(!0===i)return c(v);let E,w,S;const R=[];if(1===v.length)return w=v[0],S=new ho,S.curves=w.curves,R.push(S),R;let D=!_(v[0].getPoints());D=n?!D:D;const I=[],O=[];let $,U,B=[],V=0;O[V]=void 0,B[V]=[];for(let L=0,Y=v.length;L<Y;L++)w=v[L],$=w.getPoints(),E=_($),E=n?!E:E,E?(!D&&O[V]&&V++,O[V]={s:new ho,p:$},O[V].s.curves=w.curves,D&&V++,B[V]=[]):B[V].push({h:w,p:$[0]});if(!O[0])return c(v);if(O.length>1){let L=!1;const Y=[];for(let z=0,Q=O.length;z<Q;z++)I[z]=[];for(let z=0,Q=O.length;z<Q;z++){const re=B[z];for(let ae=0;ae<re.length;ae++){const ve=re[ae];let ze=!0;for(let Fe=0;Fe<O.length;Fe++)f(ve.p,O[Fe].p)&&(z!==Fe&&Y.push({froms:z,tos:Fe,hole:ae}),ze?(ze=!1,I[Fe].push(ve)):L=!0);ze&&I[z].push(ve)}}Y.length>0&&(L||(B=I))}for(let L=0,Y=O.length;L<Y;L++){S=O[L].s,R.push(S),U=B[L];for(let z=0,Q=U.length;z<Q;z++)S.holes.push(U[z].h)}return R}},N.ShapeUtils=$o,N.ShortType=1011,N.Skeleton=Cp,N.SkeletonHelper=tm,N.SkinnedMesh=Ed,N.SmoothShading=2,N.Sphere=fa,N.SphereBufferGeometry=Ra,N.SphereGeometry=Ra,N.Spherical=class DE{constructor(n=1,i=0,c=0){return this.radius=n,this.phi=i,this.theta=c,this}set(n,i,c){return this.radius=n,this.phi=i,this.theta=c,this}copy(n){return this.radius=n.radius,this.phi=n.phi,this.theta=n.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(n){return this.setFromCartesianCoords(n.x,n.y,n.z)}setFromCartesianCoords(n,i,c){return this.radius=Math.sqrt(n*n+i*i+c*c),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(n,c),this.phi=Math.acos(si(i/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}},N.SphericalHarmonics3=$p,N.SplineCurve=Qh,N.SpotLight=Hp,N.SpotLightHelper=class Kg extends Ln{constructor(n,i){super(),this.light=n,this.light.updateMatrixWorld(),this.matrix=n.matrixWorld,this.matrixAutoUpdate=!1,this.color=i;const c=new cn,f=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let v=0,E=1,w=32;v<w;v++,E++){const S=v/w*Math.PI*2,R=E/w*Math.PI*2;f.push(Math.cos(S),Math.sin(S),1,Math.cos(R),Math.sin(R),1)}c.setAttribute("position",new pt(f,3));const _=new fi({fog:!1,toneMapped:!1});this.cone=new Ss(c,_),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateMatrixWorld();const n=this.light.distance?this.light.distance:1e3,i=n*Math.tan(this.light.angle);this.cone.scale.set(i,i,n),Zo.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Zo),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}},N.Sprite=Ep,N.SpriteMaterial=Yc,N.SrcAlphaFactor=204,N.SrcAlphaSaturateFactor=210,N.SrcColorFactor=202,N.StaticCopyUsage=35046,N.StaticDrawUsage=Iu,N.StaticReadUsage=35045,N.StereoCamera=class Xi{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Qi,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Qi,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(n){const i=this._cache;if(i.focus!==n.focus||i.fov!==n.fov||i.aspect!==n.aspect*this.aspect||i.near!==n.near||i.far!==n.far||i.zoom!==n.zoom||i.eyeSep!==this.eyeSep){i.focus=n.focus,i.fov=n.fov,i.aspect=n.aspect*this.aspect,i.near=n.near,i.far=n.far,i.zoom=n.zoom,i.eyeSep=this.eyeSep,lc.copy(n.projectionMatrix);const f=i.eyeSep/2,_=f*i.near/i.focus,v=i.near*Math.tan(Ec*i.fov*.5)/i.zoom;let E,w;Yp.elements[12]=-f,Vy.elements[12]=f,E=-v*i.aspect+_,w=v*i.aspect+_,lc.elements[0]=2*i.near/(w-E),lc.elements[8]=(w+E)/(w-E),this.cameraL.projectionMatrix.copy(lc),E=-v*i.aspect-_,w=v*i.aspect-_,lc.elements[0]=2*i.near/(w-E),lc.elements[8]=(w+E)/(w-E),this.cameraR.projectionMatrix.copy(lc)}this.cameraL.matrixWorld.copy(n.matrixWorld).multiply(Yp),this.cameraR.matrixWorld.copy(n.matrixWorld).multiply(Vy)}},N.StreamCopyUsage=35042,N.StreamDrawUsage=35040,N.StreamReadUsage=35041,N.StringKeyframeTrack=Xo,N.SubtractEquation=101,N.SubtractiveBlending=3,N.TOUCH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},N.TangentSpaceNormalMap=0,N.TetrahedronBufferGeometry=Pa,N.TetrahedronGeometry=Pa,N.TextGeometry=function s_(){return console.error("THREE.TextGeometry has been moved to /examples/jsm/geometries/TextGeometry.js"),new cn},N.Texture=li,N.TextureLoader=Gd,N.TorusBufferGeometry=Fd,N.TorusGeometry=Fd,N.TorusKnotBufferGeometry=hu,N.TorusKnotGeometry=hu,N.Triangle=zi,N.TriangleFanDrawMode=2,N.TriangleStripDrawMode=1,N.TrianglesDrawMode=0,N.TubeBufferGeometry=Nd,N.TubeGeometry=Nd,N.UVMapping=300,N.Uint16Attribute=function OE(p,n){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new Ro(p,n)},N.Uint16BufferAttribute=Ro,N.Uint32Attribute=function LE(p,n){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new kl(p,n)},N.Uint32BufferAttribute=kl,N.Uint8Attribute=function am(p,n){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new Ja(p,n)},N.Uint8BufferAttribute=Ja,N.Uint8ClampedAttribute=function Mf(p,n){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new Ul(p,n)},N.Uint8ClampedBufferAttribute=Ul,N.Uniform=Jp,N.UniformsLib=bt,N.UniformsUtils=Im,N.UnsignedByteType=vr,N.UnsignedInt248Type=sa,N.UnsignedIntType=ra,N.UnsignedShort4444Type=1017,N.UnsignedShort5551Type=1018,N.UnsignedShortType=na,N.VSMShadowMap=3,N.Vector2=Ne,N.Vector3=Z,N.Vector4=ei,N.VectorKeyframeTrack=sf,N.Vertex=function IE(p,n,i){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new Z(p,n,i)},N.VertexColors=2,N.VideoTexture=vg,N.WebGL1Renderer=qc,N.WebGLCubeRenderTarget=Wu,N.WebGLMultipleRenderTargets=x_,N.WebGLMultisampleRenderTarget=Bu,N.WebGLRenderTarget=Is,N.WebGLRenderTargetCube=function wf(p,n,i){return console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options )."),new Wu(p,i)},N.WebGLRenderer=kn,N.WebGLUtils=yy,N.WireframeGeometry=Rg,N.WireframeHelper=function F0(p,n){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new Ss(new Rg(p.geometry),new fi({color:void 0!==n?n:16777215}))},N.WrapAroundEnding=Df,N.XHRLoader=function N0(p){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new Oa(p)},N.ZeroCurvatureEnding=Zi,N.ZeroFactor=200,N.ZeroSlopeEnding=Ru,N.ZeroStencilOp=0,N._SRGBAFormat=1035,N.sRGBEncoding=Ai,Object.defineProperty(N,"__esModule",{value:!0})}(ce)},5506:(ye,ce,j)=>{"use strict";var C=j(5e3);let N=null;function we(){return N}const me=new C.OlP("DocumentToken");let _e=(()=>{class u{historyGo(s){throw new Error("Not implemented")}}return u.\u0275fac=function(s){return new(s||u)},u.\u0275prov=C.Yz7({token:u,factory:function(){return function fe(){return(0,C.LFG)(be)}()},providedIn:"platform"}),u})();const Se=new C.OlP("Location Initialized");let be=(()=>{class u extends _e{constructor(s){super(),this._doc=s,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return we().getBaseHref(this._doc)}onPopState(s){const h=we().getGlobalEventTarget(this._doc,"window");return h.addEventListener("popstate",s,!1),()=>h.removeEventListener("popstate",s)}onHashChange(s){const h=we().getGlobalEventTarget(this._doc,"window");return h.addEventListener("hashchange",s,!1),()=>h.removeEventListener("hashchange",s)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(s){this.location.pathname=s}pushState(s,h,g){De()?this._history.pushState(s,h,g):this.location.hash=g}replaceState(s,h,g){De()?this._history.replaceState(s,h,g):this.location.hash=g}forward(){this._history.forward()}back(){this._history.back()}historyGo(s=0){this._history.go(s)}getState(){return this._history.state}}return u.\u0275fac=function(s){return new(s||u)(C.LFG(me))},u.\u0275prov=C.Yz7({token:u,factory:function(){return function lt(){return new be((0,C.LFG)(me))}()},providedIn:"platform"}),u})();function De(){return!!window.history.pushState}function at(u,r){if(0==u.length)return r;if(0==r.length)return u;let s=0;return u.endsWith("/")&&s++,r.startsWith("/")&&s++,2==s?u+r.substring(1):1==s?u+r:u+"/"+r}function Ye(u){const r=u.match(/#|\?|$/),s=r&&r.index||u.length;return u.slice(0,s-("/"===u[s-1]?1:0))+u.slice(s)}function dt(u){return u&&"?"!==u[0]?"?"+u:u}let rt=(()=>{class u{historyGo(s){throw new Error("Not implemented")}}return u.\u0275fac=function(s){return new(s||u)},u.\u0275prov=C.Yz7({token:u,factory:function(){return function mt(u){const r=(0,C.LFG)(me).location;return new Et((0,C.LFG)(_e),r&&r.origin||"")}()},providedIn:"root"}),u})();const ht=new C.OlP("appBaseHref");let Et=(()=>{class u extends rt{constructor(s,h){if(super(),this._platformLocation=s,this._removeListenerFns=[],null==h&&(h=this._platformLocation.getBaseHrefFromDOM()),null==h)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=h}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(s){this._removeListenerFns.push(this._platformLocation.onPopState(s),this._platformLocation.onHashChange(s))}getBaseHref(){return this._baseHref}prepareExternalUrl(s){return at(this._baseHref,s)}path(s=!1){const h=this._platformLocation.pathname+dt(this._platformLocation.search),g=this._platformLocation.hash;return g&&s?`${h}${g}`:h}pushState(s,h,g,x){const b=this.prepareExternalUrl(g+dt(x));this._platformLocation.pushState(s,h,b)}replaceState(s,h,g,x){const b=this.prepareExternalUrl(g+dt(x));this._platformLocation.replaceState(s,h,b)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(s=0){var h,g;null===(g=(h=this._platformLocation).historyGo)||void 0===g||g.call(h,s)}}return u.\u0275fac=function(s){return new(s||u)(C.LFG(_e),C.LFG(ht,8))},u.\u0275prov=C.Yz7({token:u,factory:u.\u0275fac}),u})(),yt=(()=>{class u extends rt{constructor(s,h){super(),this._platformLocation=s,this._baseHref="",this._removeListenerFns=[],null!=h&&(this._baseHref=h)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(s){this._removeListenerFns.push(this._platformLocation.onPopState(s),this._platformLocation.onHashChange(s))}getBaseHref(){return this._baseHref}path(s=!1){let h=this._platformLocation.hash;return null==h&&(h="#"),h.length>0?h.substring(1):h}prepareExternalUrl(s){const h=at(this._baseHref,s);return h.length>0?"#"+h:h}pushState(s,h,g,x){let b=this.prepareExternalUrl(g+dt(x));0==b.length&&(b=this._platformLocation.pathname),this._platformLocation.pushState(s,h,b)}replaceState(s,h,g,x){let b=this.prepareExternalUrl(g+dt(x));0==b.length&&(b=this._platformLocation.pathname),this._platformLocation.replaceState(s,h,b)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(s=0){var h,g;null===(g=(h=this._platformLocation).historyGo)||void 0===g||g.call(h,s)}}return u.\u0275fac=function(s){return new(s||u)(C.LFG(_e),C.LFG(ht,8))},u.\u0275prov=C.Yz7({token:u,factory:u.\u0275fac}),u})(),Bt=(()=>{class u{constructor(s,h){this._subject=new C.vpe,this._urlChangeListeners=[],this._platformStrategy=s;const g=this._platformStrategy.getBaseHref();this._platformLocation=h,this._baseHref=Ye(en(g)),this._platformStrategy.onPopState(x=>{this._subject.emit({url:this.path(!0),pop:!0,state:x.state,type:x.type})})}path(s=!1){return this.normalize(this._platformStrategy.path(s))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(s,h=""){return this.path()==this.normalize(s+dt(h))}normalize(s){return u.stripTrailingSlash(function Qt(u,r){return u&&r.startsWith(u)?r.substring(u.length):r}(this._baseHref,en(s)))}prepareExternalUrl(s){return s&&"/"!==s[0]&&(s="/"+s),this._platformStrategy.prepareExternalUrl(s)}go(s,h="",g=null){this._platformStrategy.pushState(g,"",s,h),this._notifyUrlChangeListeners(this.prepareExternalUrl(s+dt(h)),g)}replaceState(s,h="",g=null){this._platformStrategy.replaceState(g,"",s,h),this._notifyUrlChangeListeners(this.prepareExternalUrl(s+dt(h)),g)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(s=0){var h,g;null===(g=(h=this._platformStrategy).historyGo)||void 0===g||g.call(h,s)}onUrlChange(s){this._urlChangeListeners.push(s),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(h=>{this._notifyUrlChangeListeners(h.url,h.state)}))}_notifyUrlChangeListeners(s="",h){this._urlChangeListeners.forEach(g=>g(s,h))}subscribe(s,h,g){return this._subject.subscribe({next:s,error:h,complete:g})}}return u.normalizeQueryParams=dt,u.joinWithSlash=at,u.stripTrailingSlash=Ye,u.\u0275fac=function(s){return new(s||u)(C.LFG(rt),C.LFG(_e))},u.\u0275prov=C.Yz7({token:u,factory:function(){return function Ut(){return new Bt((0,C.LFG)(rt),(0,C.LFG)(_e))}()},providedIn:"root"}),u})();function en(u){return u.replace(/\/index.html$/,"")}class ua{constructor(r,s,h,g){this.$implicit=r,this.ngForOf=s,this.index=h,this.count=g}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Mr=(()=>{class u{constructor(s,h,g){this._viewContainer=s,this._template=h,this._differs=g,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(s){this._ngForOf=s,this._ngForOfDirty=!0}set ngForTrackBy(s){this._trackByFn=s}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(s){s&&(this._template=s)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const s=this._ngForOf;!this._differ&&s&&(this._differ=this._differs.find(s).create(this.ngForTrackBy))}if(this._differ){const s=this._differ.diff(this._ngForOf);s&&this._applyChanges(s)}}_applyChanges(s){const h=this._viewContainer;s.forEachOperation((g,x,b)=>{if(null==g.previousIndex)h.createEmbeddedView(this._template,new ua(g.item,this._ngForOf,-1,-1),null===b?void 0:b);else if(null==b)h.remove(null===x?void 0:x);else if(null!==x){const A=h.get(x);h.move(A,b),za(A,g)}});for(let g=0,x=h.length;g<x;g++){const A=h.get(g).context;A.index=g,A.count=x,A.ngForOf=this._ngForOf}s.forEachIdentityChange(g=>{za(h.get(g.currentIndex),g)})}static ngTemplateContextGuard(s,h){return!0}}return u.\u0275fac=function(s){return new(s||u)(C.Y36(C.s_b),C.Y36(C.Rgc),C.Y36(C.ZZ4))},u.\u0275dir=C.lG2({type:u,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),u})();function za(u,r){u.context.$implicit=r.item}let Ue=(()=>{class u{constructor(s,h){this._viewContainer=s,this._context=new pe,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=h}set ngIf(s){this._context.$implicit=this._context.ngIf=s,this._updateView()}set ngIfThen(s){Le("ngIfThen",s),this._thenTemplateRef=s,this._thenViewRef=null,this._updateView()}set ngIfElse(s){Le("ngIfElse",s),this._elseTemplateRef=s,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(s,h){return!0}}return u.\u0275fac=function(s){return new(s||u)(C.Y36(C.s_b),C.Y36(C.Rgc))},u.\u0275dir=C.lG2({type:u,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),u})();class pe{constructor(){this.$implicit=null,this.ngIf=null}}function Le(u,r){if(r&&!r.createEmbeddedView)throw new Error(`${u} must be a TemplateRef, but received '${(0,C.AaK)(r)}'.`)}let Wa=(()=>{class u{}return u.\u0275fac=function(s){return new(s||u)},u.\u0275mod=C.oAB({type:u}),u.\u0275inj=C.cJS({}),u})();let Cv=(()=>{class u{}return u.\u0275prov=(0,C.Yz7)({token:u,providedIn:"root",factory:()=>new gm((0,C.LFG)(me),window)}),u})();class gm{constructor(r,s){this.document=r,this.window=s,this.offset=()=>[0,0]}setOffset(r){this.offset=Array.isArray(r)?()=>r:r}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(r){this.supportsScrolling()&&this.window.scrollTo(r[0],r[1])}scrollToAnchor(r){if(!this.supportsScrolling())return;const s=function _m(u,r){const s=u.getElementById(r)||u.getElementsByName(r)[0];if(s)return s;if("function"==typeof u.createTreeWalker&&u.body&&(u.body.createShadowRoot||u.body.attachShadow)){const h=u.createTreeWalker(u.body,NodeFilter.SHOW_ELEMENT);let g=h.currentNode;for(;g;){const x=g.shadowRoot;if(x){const b=x.getElementById(r)||x.querySelector(`[name="${r}"]`);if(b)return b}g=h.nextNode()}}return null}(this.document,r);s&&(this.scrollToElement(s),s.focus())}setHistoryScrollRestoration(r){if(this.supportScrollRestoration()){const s=this.window.history;s&&s.scrollRestoration&&(s.scrollRestoration=r)}}scrollToElement(r){const s=r.getBoundingClientRect(),h=s.left+this.window.pageXOffset,g=s.top+this.window.pageYOffset,x=this.offset();this.window.scrollTo(h-x[0],g-x[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const r=m_(this.window.history)||m_(Object.getPrototypeOf(this.window.history));return!(!r||!r.writable&&!r.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function m_(u){return Object.getOwnPropertyDescriptor(u,"scrollRestoration")}class dr extends class ja extends class Te{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function he(u){N||(N=u)}(new dr)}onAndCancel(r,s,h){return r.addEventListener(s,h,!1),()=>{r.removeEventListener(s,h,!1)}}dispatchEvent(r,s){r.dispatchEvent(s)}remove(r){r.parentNode&&r.parentNode.removeChild(r)}createElement(r,s){return(s=s||this.getDefaultDocument()).createElement(r)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(r){return r.nodeType===Node.ELEMENT_NODE}isShadowRoot(r){return r instanceof DocumentFragment}getGlobalEventTarget(r,s){return"window"===s?window:"document"===s?r:"body"===s?r.body:null}getBaseHref(r){const s=function Ec(){return di=di||document.querySelector("base"),di?di.getAttribute("href"):null}();return null==s?null:function kr(u){xc=xc||document.createElement("a"),xc.setAttribute("href",u);const r=xc.pathname;return"/"===r.charAt(0)?r:`/${r}`}(s)}resetBaseElement(){di=null}getUserAgent(){return window.navigator.userAgent}getCookie(r){return function Al(u,r){r=encodeURIComponent(r);for(const s of u.split(";")){const h=s.indexOf("="),[g,x]=-1==h?[s,""]:[s.slice(0,h),s.slice(h+1)];if(g.trim()===r)return decodeURIComponent(x)}return null}(document.cookie,r)}}let xc,di=null;const si=new C.OlP("TRANSITION_ID"),vm=[{provide:C.ip1,useFactory:function ym(u,r,s){return()=>{s.get(C.CZH).donePromise.then(()=>{const h=we(),g=r.querySelectorAll(`style[ng-transition="${u}"]`);for(let x=0;x<g.length;x++)h.remove(g[x])})}},deps:[si,me,C.zs3],multi:!0}];class Rl{static init(){(0,C.VLi)(new Rl)}addToWindow(r){C.dqk.getAngularTestability=(h,g=!0)=>{const x=r.findTestabilityInTree(h,g);if(null==x)throw new Error("Could not find testability for element.");return x},C.dqk.getAllAngularTestabilities=()=>r.getAllTestabilities(),C.dqk.getAllAngularRootElements=()=>r.getAllRootElements(),C.dqk.frameworkStabilizers||(C.dqk.frameworkStabilizers=[]),C.dqk.frameworkStabilizers.push(h=>{const g=C.dqk.getAllAngularTestabilities();let x=g.length,b=!1;const A=function(k){b=b||k,x--,0==x&&h(b)};g.forEach(function(k){k.whenStable(A)})})}findTestabilityInTree(r,s,h){if(null==s)return null;const g=r.getTestability(s);return null!=g?g:h?we().isShadowRoot(s)?this.findTestabilityInTree(r,s.host,!0):this.findTestabilityInTree(r,s.parentElement,!0):null}}let Dr=(()=>{class u{build(){return new XMLHttpRequest}}return u.\u0275fac=function(s){return new(s||u)},u.\u0275prov=C.Yz7({token:u,factory:u.\u0275fac}),u})();const ch=new C.OlP("EventManagerPlugins");let Ou=(()=>{class u{constructor(s,h){this._zone=h,this._eventNameToPlugin=new Map,s.forEach(g=>g.manager=this),this._plugins=s.slice().reverse()}addEventListener(s,h,g){return this._findPluginFor(h).addEventListener(s,h,g)}addGlobalEventListener(s,h,g){return this._findPluginFor(h).addGlobalEventListener(s,h,g)}getZone(){return this._zone}_findPluginFor(s){const h=this._eventNameToPlugin.get(s);if(h)return h;const g=this._plugins;for(let x=0;x<g.length;x++){const b=g[x];if(b.supports(s))return this._eventNameToPlugin.set(s,b),b}throw new Error(`No event manager plugin found for event ${s}`)}}return u.\u0275fac=function(s){return new(s||u)(C.LFG(ch),C.LFG(C.R0b))},u.\u0275prov=C.Yz7({token:u,factory:u.\u0275fac}),u})();class g_{constructor(r){this._doc=r}addGlobalEventListener(r,s,h){const g=we().getGlobalEventTarget(this._doc,r);if(!g)throw new Error(`Unsupported event target ${g} for event ${s}`);return this.addEventListener(g,s,h)}}let $a=(()=>{class u{constructor(){this._stylesSet=new Set}addStyles(s){const h=new Set;s.forEach(g=>{this._stylesSet.has(g)||(this._stylesSet.add(g),h.add(g))}),this.onStylesAdded(h)}onStylesAdded(s){}getAllStyles(){return Array.from(this._stylesSet)}}return u.\u0275fac=function(s){return new(s||u)},u.\u0275prov=C.Yz7({token:u,factory:u.\u0275fac}),u})(),Lu=(()=>{class u extends $a{constructor(s){super(),this._doc=s,this._hostNodes=new Map,this._hostNodes.set(s.head,[])}_addStylesToHost(s,h,g){s.forEach(x=>{const b=this._doc.createElement("style");b.textContent=x,g.push(h.appendChild(b))})}addHost(s){const h=[];this._addStylesToHost(this._stylesSet,s,h),this._hostNodes.set(s,h)}removeHost(s){const h=this._hostNodes.get(s);h&&h.forEach(If),this._hostNodes.delete(s)}onStylesAdded(s){this._hostNodes.forEach((h,g)=>{this._addStylesToHost(s,g,h)})}ngOnDestroy(){this._hostNodes.forEach(s=>s.forEach(If))}}return u.\u0275fac=function(s){return new(s||u)(C.LFG(me))},u.\u0275prov=C.Yz7({token:u,factory:u.\u0275fac}),u})();function If(u){we().remove(u)}const _n={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},__=/%COMP%/g;function nt(u,r,s){for(let h=0;h<r.length;h++){let g=r[h];Array.isArray(g)?nt(u,g,s):(g=g.replace(__,u),s.push(g))}return s}function Ne(u){return r=>{if("__ngUnwrap__"===r)return u;!1===u(r)&&(r.preventDefault(),r.returnValue=!1)}}let Fi=(()=>{class u{constructor(s,h,g){this.eventManager=s,this.sharedStylesHost=h,this.appId=g,this.rendererByCompId=new Map,this.defaultRenderer=new Of(s)}createRenderer(s,h){if(!s||!h)return this.defaultRenderer;switch(h.encapsulation){case C.ifc.Emulated:{let g=this.rendererByCompId.get(h.id);return g||(g=new Lf(this.eventManager,this.sharedStylesHost,h,this.appId),this.rendererByCompId.set(h.id,g)),g.applyToHost(s),g}case 1:case C.ifc.ShadowDom:return new Ps(this.eventManager,this.sharedStylesHost,s,h);default:if(!this.rendererByCompId.has(h.id)){const g=nt(h.id,h.styles,[]);this.sharedStylesHost.addStyles(g),this.rendererByCompId.set(h.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return u.\u0275fac=function(s){return new(s||u)(C.LFG(Ou),C.LFG(Lu),C.LFG(C.AFp))},u.\u0275prov=C.Yz7({token:u,factory:u.\u0275fac}),u})();class Of{constructor(r){this.eventManager=r,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(r,s){return s?document.createElementNS(_n[s]||s,r):document.createElement(r)}createComment(r){return document.createComment(r)}createText(r){return document.createTextNode(r)}appendChild(r,s){r.appendChild(s)}insertBefore(r,s,h){r&&r.insertBefore(s,h)}removeChild(r,s){r&&r.removeChild(s)}selectRootElement(r,s){let h="string"==typeof r?document.querySelector(r):r;if(!h)throw new Error(`The selector "${r}" did not match any elements`);return s||(h.textContent=""),h}parentNode(r){return r.parentNode}nextSibling(r){return r.nextSibling}setAttribute(r,s,h,g){if(g){s=g+":"+s;const x=_n[g];x?r.setAttributeNS(x,s,h):r.setAttribute(s,h)}else r.setAttribute(s,h)}removeAttribute(r,s,h){if(h){const g=_n[h];g?r.removeAttributeNS(g,s):r.removeAttribute(`${h}:${s}`)}else r.removeAttribute(s)}addClass(r,s){r.classList.add(s)}removeClass(r,s){r.classList.remove(s)}setStyle(r,s,h,g){g&(C.JOm.DashCase|C.JOm.Important)?r.style.setProperty(s,h,g&C.JOm.Important?"important":""):r.style[s]=h}removeStyle(r,s,h){h&C.JOm.DashCase?r.style.removeProperty(s):r.style[s]=""}setProperty(r,s,h){r[s]=h}setValue(r,s){r.nodeValue=s}listen(r,s,h){return"string"==typeof r?this.eventManager.addGlobalEventListener(r,s,Ne(h)):this.eventManager.addEventListener(r,s,Ne(h))}}class Lf extends Of{constructor(r,s,h,g){super(r),this.component=h;const x=nt(g+"-"+h.id,h.styles,[]);s.addStyles(x),this.contentAttr=function E_(u){return"_ngcontent-%COMP%".replace(__,u)}(g+"-"+h.id),this.hostAttr=function Av(u){return"_nghost-%COMP%".replace(__,u)}(g+"-"+h.id)}applyToHost(r){super.setAttribute(r,this.hostAttr,"")}createElement(r,s){const h=super.createElement(r,s);return super.setAttribute(h,this.contentAttr,""),h}}class Ps extends Of{constructor(r,s,h,g){super(r),this.sharedStylesHost=s,this.hostEl=h,this.shadowRoot=h.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const x=nt(g.id,g.styles,[]);for(let b=0;b<x.length;b++){const A=document.createElement("style");A.textContent=x[b],this.shadowRoot.appendChild(A)}}nodeOrShadowRoot(r){return r===this.hostEl?this.shadowRoot:r}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(r,s){return super.appendChild(this.nodeOrShadowRoot(r),s)}insertBefore(r,s,h){return super.insertBefore(this.nodeOrShadowRoot(r),s,h)}removeChild(r,s){return super.removeChild(this.nodeOrShadowRoot(r),s)}parentNode(r){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(r)))}}let Mm=(()=>{class u extends g_{constructor(s){super(s)}supports(s){return!0}addEventListener(s,h,g){return s.addEventListener(h,g,!1),()=>this.removeEventListener(s,h,g)}removeEventListener(s,h,g){return s.removeEventListener(h,g)}}return u.\u0275fac=function(s){return new(s||u)(C.LFG(me))},u.\u0275prov=C.Yz7({token:u,factory:u.\u0275fac}),u})();const Ff=["alt","control","meta","shift"],Fu={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},vt={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},_s={alt:u=>u.altKey,control:u=>u.ctrlKey,meta:u=>u.metaKey,shift:u=>u.shiftKey};let Xa=(()=>{class u extends g_{constructor(s){super(s)}supports(s){return null!=u.parseEventName(s)}addEventListener(s,h,g){const x=u.parseEventName(h),b=u.eventCallback(x.fullKey,g,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>we().onAndCancel(s,x.domEventName,b))}static parseEventName(s){const h=s.toLowerCase().split("."),g=h.shift();if(0===h.length||"keydown"!==g&&"keyup"!==g)return null;const x=u._normalizeKey(h.pop());let b="";if(Ff.forEach(k=>{const G=h.indexOf(k);G>-1&&(h.splice(G,1),b+=k+".")}),b+=x,0!=h.length||0===x.length)return null;const A={};return A.domEventName=g,A.fullKey=b,A}static getEventFullKey(s){let h="",g=function Nu(u){let r=u.key;if(null==r){if(r=u.keyIdentifier,null==r)return"Unidentified";r.startsWith("U+")&&(r=String.fromCharCode(parseInt(r.substring(2),16)),3===u.location&&vt.hasOwnProperty(r)&&(r=vt[r]))}return Fu[r]||r}(s);return g=g.toLowerCase()," "===g?g="space":"."===g&&(g="dot"),Ff.forEach(x=>{x!=g&&_s[x](s)&&(h+=x+".")}),h+=g,h}static eventCallback(s,h,g){return x=>{u.getEventFullKey(x)===s&&g.runGuarded(()=>h(x))}}static _normalizeKey(s){return"esc"===s?"escape":s}}return u.\u0275fac=function(s){return new(s||u)(C.LFG(me))},u.\u0275prov=C.Yz7({token:u,factory:u.\u0275fac}),u})();const x_=(0,C.eFA)(C._c5,"browser",[{provide:C.Lbi,useValue:"browser"},{provide:C.g9A,useValue:function li(){dr.makeCurrent(),Rl.init()},multi:!0},{provide:me,useFactory:function ei(){return(0,C.RDi)(document),document},deps:[]}]),Bu=[{provide:C.zSh,useValue:"root"},{provide:C.qLn,useFactory:function wm(){return new C.qLn},deps:[]},{provide:ch,useClass:Mm,multi:!0,deps:[me,C.R0b,C.Lbi]},{provide:ch,useClass:Xa,multi:!0,deps:[me]},{provide:Fi,useClass:Fi,deps:[Ou,Lu,C.AFp]},{provide:C.FYo,useExisting:Fi},{provide:$a,useExisting:Lu},{provide:Lu,useClass:Lu,deps:[me]},{provide:C.dDg,useClass:C.dDg,deps:[C.R0b]},{provide:Ou,useClass:Ou,deps:[ch,C.R0b]},{provide:class Si{},useClass:Dr,deps:[]}];let fr=(()=>{class u{constructor(s){if(s)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(s){return{ngModule:u,providers:[{provide:C.AFp,useValue:s.appId},{provide:si,useExisting:C.AFp},vm]}}}return u.\u0275fac=function(s){return new(s||u)(C.LFG(u,12))},u.\u0275mod=C.oAB({type:u}),u.\u0275inj=C.cJS({providers:Bu,imports:[Wa,C.hGG]}),u})();function fh(u,r,s,h){var b,g=arguments.length,x=g<3?r:null===h?h=Object.getOwnPropertyDescriptor(r,s):h;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)x=Reflect.decorate(u,r,s,h);else for(var A=u.length-1;A>=0;A--)(b=u[A])&&(x=(g<3?b(x):g>3?b(r,s,x):b(r,s))||x);return g>3&&x&&Object.defineProperty(r,s,x),x}function Fl(u,r,s,h,g,x,b){try{var A=u[x](b),k=A.value}catch(G){return void s(G)}A.done?r(k):Promise.resolve(k).then(h,g)}function Za(u){return function(){var r=this,s=arguments;return new Promise(function(h,g){var x=u.apply(r,s);function b(k){Fl(x,h,g,b,A,"next",k)}function A(k){Fl(x,h,g,b,A,"throw",k)}b(void 0)})}}"undefined"!=typeof window&&window;const Hf=window.ShadowRoot&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,_h=Symbol(),Ac=new Map;class Nl{constructor(r,s){if(this._$cssResult$=!0,s!==_h)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=r}get styleSheet(){let r=Ac.get(this.cssText);return Hf&&void 0===r&&(Ac.set(this.cssText,r=new CSSStyleSheet),r.replaceSync(this.cssText)),r}toString(){return this.cssText}}const Dm=(u,...r)=>{const s=1===u.length?u[0]:r.reduce((h,g,x)=>h+(b=>{if(!0===b._$cssResult$)return b.cssText;if("number"==typeof b)return b;throw Error("Value passed to 'css' function must be a 'css' function result: "+b+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(g)+u[x+1],u[0]);return new Nl(s,_h)},as=Hf?u=>u:u=>u instanceof CSSStyleSheet?(r=>{let s="";for(const h of r.cssRules)s+=h.cssText;return(u=>new Nl("string"==typeof u?u:u+"",_h))(s)})(u):u;var oi;const Dc=window.trustedTypes,Un=Dc?Dc.emptyScript:"",Bl=window.reactiveElementPolyfillSupport,Ja={toAttribute(u,r){switch(r){case Boolean:u=u?Un:null;break;case Object:case Array:u=null==u?u:JSON.stringify(u)}return u},fromAttribute(u,r){let s=u;switch(r){case Boolean:s=null!==u;break;case Number:s=null===u?null:Number(u);break;case Object:case Array:try{s=JSON.parse(u)}catch{s=null}}return s}},Ul=(u,r)=>r!==u&&(r==r||u==u),yh={attribute:!0,type:String,converter:Ja,reflect:!1,hasChanged:Ul};class Ro extends HTMLElement{constructor(){super(),this._$Et=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Ei=null,this.o()}static addInitializer(r){var s;null!==(s=this.l)&&void 0!==s||(this.l=[]),this.l.push(r)}static get observedAttributes(){this.finalize();const r=[];return this.elementProperties.forEach((s,h)=>{const g=this._$Eh(h,s);void 0!==g&&(this._$Eu.set(g,h),r.push(g))}),r}static createProperty(r,s=yh){if(s.state&&(s.attribute=!1),this.finalize(),this.elementProperties.set(r,s),!s.noAccessor&&!this.prototype.hasOwnProperty(r)){const h="symbol"==typeof r?Symbol():"__"+r,g=this.getPropertyDescriptor(r,h,s);void 0!==g&&Object.defineProperty(this.prototype,r,g)}}static getPropertyDescriptor(r,s,h){return{get(){return this[s]},set(g){const x=this[r];this[s]=g,this.requestUpdate(r,x,h)},configurable:!0,enumerable:!0}}static getPropertyOptions(r){return this.elementProperties.get(r)||yh}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;const r=Object.getPrototypeOf(this);if(r.finalize(),this.elementProperties=new Map(r.elementProperties),this._$Eu=new Map,this.hasOwnProperty("properties")){const s=this.properties,h=[...Object.getOwnPropertyNames(s),...Object.getOwnPropertySymbols(s)];for(const g of h)this.createProperty(g,s[g])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(r){const s=[];if(Array.isArray(r)){const h=new Set(r.flat(1/0).reverse());for(const g of h)s.unshift(as(g))}else void 0!==r&&s.push(as(r));return s}static _$Eh(r,s){const h=s.attribute;return!1===h?void 0:"string"==typeof h?h:"string"==typeof r?r.toLowerCase():void 0}o(){var r;this._$Ep=new Promise(s=>this.enableUpdating=s),this._$AL=new Map,this._$Em(),this.requestUpdate(),null===(r=this.constructor.l)||void 0===r||r.forEach(s=>s(this))}addController(r){var s,h;(null!==(s=this._$Eg)&&void 0!==s?s:this._$Eg=[]).push(r),void 0!==this.renderRoot&&this.isConnected&&(null===(h=r.hostConnected)||void 0===h||h.call(r))}removeController(r){var s;null===(s=this._$Eg)||void 0===s||s.splice(this._$Eg.indexOf(r)>>>0,1)}_$Em(){this.constructor.elementProperties.forEach((r,s)=>{this.hasOwnProperty(s)&&(this._$Et.set(s,this[s]),delete this[s])})}createRenderRoot(){var r;const s=null!==(r=this.shadowRoot)&&void 0!==r?r:this.attachShadow(this.constructor.shadowRootOptions);return((u,r)=>{Hf?u.adoptedStyleSheets=r.map(s=>s instanceof CSSStyleSheet?s:s.styleSheet):r.forEach(s=>{const h=document.createElement("style"),g=window.litNonce;void 0!==g&&h.setAttribute("nonce",g),h.textContent=s.cssText,u.appendChild(h)})})(s,this.constructor.elementStyles),s}connectedCallback(){var r;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(r=this._$Eg)||void 0===r||r.forEach(s=>{var h;return null===(h=s.hostConnected)||void 0===h?void 0:h.call(s)})}enableUpdating(r){}disconnectedCallback(){var r;null===(r=this._$Eg)||void 0===r||r.forEach(s=>{var h;return null===(h=s.hostDisconnected)||void 0===h?void 0:h.call(s)})}attributeChangedCallback(r,s,h){this._$AK(r,h)}_$ES(r,s,h=yh){var g,x;const b=this.constructor._$Eh(r,h);if(void 0!==b&&!0===h.reflect){const A=(null!==(x=null===(g=h.converter)||void 0===g?void 0:g.toAttribute)&&void 0!==x?x:Ja.toAttribute)(s,h.type);this._$Ei=r,null==A?this.removeAttribute(b):this.setAttribute(b,A),this._$Ei=null}}_$AK(r,s){var h,g,x;const b=this.constructor,A=b._$Eu.get(r);if(void 0!==A&&this._$Ei!==A){const k=b.getPropertyOptions(A),G=k.converter,q=null!==(x=null!==(g=null===(h=G)||void 0===h?void 0:h.fromAttribute)&&void 0!==g?g:"function"==typeof G?G:null)&&void 0!==x?x:Ja.fromAttribute;this._$Ei=A,this[A]=q(s,k.type),this._$Ei=null}}requestUpdate(r,s,h){let g=!0;void 0!==r&&(((h=h||this.constructor.getPropertyOptions(r)).hasChanged||Ul)(this[r],s)?(this._$AL.has(r)||this._$AL.set(r,s),!0===h.reflect&&this._$Ei!==r&&(void 0===this._$EC&&(this._$EC=new Map),this._$EC.set(r,h))):g=!1),!this.isUpdatePending&&g&&(this._$Ep=this._$E_())}_$E_(){var r=this;return Za(function*(){r.isUpdatePending=!0;try{yield r._$Ep}catch(h){Promise.reject(h)}const s=r.scheduleUpdate();return null!=s&&(yield s),!r.isUpdatePending})()}scheduleUpdate(){return this.performUpdate()}performUpdate(){var r;if(!this.isUpdatePending)return;this._$Et&&(this._$Et.forEach((g,x)=>this[x]=g),this._$Et=void 0);let s=!1;const h=this._$AL;try{s=this.shouldUpdate(h),s?(this.willUpdate(h),null===(r=this._$Eg)||void 0===r||r.forEach(g=>{var x;return null===(x=g.hostUpdate)||void 0===x?void 0:x.call(g)}),this.update(h)):this._$EU()}catch(g){throw s=!1,this._$EU(),g}s&&this._$AE(h)}willUpdate(r){}_$AE(r){var s;null===(s=this._$Eg)||void 0===s||s.forEach(h=>{var g;return null===(g=h.hostUpdated)||void 0===g?void 0:g.call(h)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(r)),this.updated(r)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$Ep}shouldUpdate(r){return!0}update(r){void 0!==this._$EC&&(this._$EC.forEach((s,h)=>this._$ES(h,this[h],s)),this._$EC=void 0),this._$EU()}updated(r){}firstUpdated(r){}}var Qa;Ro.finalized=!0,Ro.elementProperties=new Map,Ro.elementStyles=[],Ro.shadowRootOptions={mode:"open"},null==Bl||Bl({ReactiveElement:Ro}),(null!==(oi=globalThis.reactiveElementVersions)&&void 0!==oi?oi:globalThis.reactiveElementVersions=[]).push("1.3.1");const kl=globalThis.trustedTypes,Rm=kl?kl.createPolicy("lit-html",{createHTML:u=>u}):void 0,pt=`lit$${(Math.random()+"").slice(9)}$`,Gf="?"+pt,aE=`<${Gf}>`,Vr=document,Gu=(u="")=>Vr.createComment(u),el=u=>null===u||"object"!=typeof u&&"function"!=typeof u,Ns=Array.isArray,xi=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,cn=/-->/g,Wi=/>/g,vs=/>|[ \x09\n\x0c\r](?:([^\s"'>=/]+)([ \x09\n\x0c\r]*=[ \x09\n\x0c\r]*(?:[^ \x09\n\x0c\r"'`<>=]|("|')|))|$)/g,Vl=/'/g,Hl=/"/g,tl=/^(?:script|style|textarea|title)$/i,Ji=u=>(r,...s)=>({_$litType$:u,strings:r,values:s}),Bs=Ji(1),Po=(Ji(2),Symbol.for("lit-noChange")),Ci=Symbol.for("lit-nothing"),zu=new WeakMap,nl=Vr.createTreeWalker(Vr,129,null,!1);class Rc{constructor({strings:r,_$litType$:s},h){let g;this.parts=[];let x=0,b=0;const A=r.length-1,k=this.parts,[G,q]=((u,r)=>{const s=u.length-1,h=[];let g,x=2===r?"<svg>":"",b=xi;for(let k=0;k<s;k++){const G=u[k];let q,K,ne=-1,se=0;for(;se<G.length&&(b.lastIndex=se,K=b.exec(G),null!==K);)se=b.lastIndex,b===xi?"!--"===K[1]?b=cn:void 0!==K[1]?b=Wi:void 0!==K[2]?(tl.test(K[2])&&(g=RegExp("</"+K[2],"g")),b=vs):void 0!==K[3]&&(b=vs):b===vs?">"===K[0]?(b=null!=g?g:xi,ne=-1):void 0===K[1]?ne=-2:(ne=b.lastIndex-K[2].length,q=K[1],b=void 0===K[3]?vs:'"'===K[3]?Hl:Vl):b===Hl||b===Vl?b=vs:b===cn||b===Wi?b=xi:(b=vs,g=void 0);const Me=b===vs&&u[k+1].startsWith("/>")?" ":"";x+=b===xi?G+aE:ne>=0?(h.push(q),G.slice(0,ne)+"$lit$"+G.slice(ne)+pt+Me):G+pt+(-2===ne?(h.push(void 0),k):Me)}const A=x+(u[s]||"<?>")+(2===r?"</svg>":"");if(!Array.isArray(u)||!u.hasOwnProperty("raw"))throw Error("invalid template strings array");return[void 0!==Rm?Rm.createHTML(A):A,h]})(r,s);if(this.el=Rc.createElement(G,h),nl.currentNode=this.el.content,2===s){const K=this.el.content,ne=K.firstChild;ne.remove(),K.append(...ne.childNodes)}for(;null!==(g=nl.nextNode())&&k.length<A;){if(1===g.nodeType){if(g.hasAttributes()){const K=[];for(const ne of g.getAttributeNames())if(ne.endsWith("$lit$")||ne.startsWith(pt)){const se=q[b++];if(K.push(ne),void 0!==se){const Me=g.getAttribute(se.toLowerCase()+"$lit$").split(pt),ue=/([.?@])?(.*)/.exec(se);k.push({type:1,index:x,name:ue[2],strings:Me,ctor:"."===ue[1]?jf:"?"===ue[1]?Pc:"@"===ue[1]?Pr:ga})}else k.push({type:6,index:x})}for(const ne of K)g.removeAttribute(ne)}if(tl.test(g.tagName)){const K=g.textContent.split(pt),ne=K.length-1;if(ne>0){g.textContent=kl?kl.emptyScript:"";for(let se=0;se<ne;se++)g.append(K[se],Gu()),nl.nextNode(),k.push({type:2,index:++x});g.append(K[ne],Gu())}}}else if(8===g.nodeType)if(g.data===Gf)k.push({type:2,index:x});else{let K=-1;for(;-1!==(K=g.data.indexOf(pt,K+1));)k.push({type:7,index:x}),K+=pt.length-1}x++}}static createElement(r,s){const h=Vr.createElement("template");return h.innerHTML=r,h}}function ma(u,r,s=u,h){var g,x,b,A;if(r===Po)return r;let k=void 0!==h?null===(g=s._$Cl)||void 0===g?void 0:g[h]:s._$Cu;const G=el(r)?void 0:r._$litDirective$;return(null==k?void 0:k.constructor)!==G&&(null===(x=null==k?void 0:k._$AO)||void 0===x||x.call(k,!1),void 0===G?k=void 0:(k=new G(u),k._$AT(u,s,h)),void 0!==h?(null!==(b=(A=s)._$Cl)&&void 0!==b?b:A._$Cl=[])[h]=k:s._$Cu=k),void 0!==k&&(r=ma(u,k._$AS(u,r.values),k,h)),r}class Rr{constructor(r,s){this.v=[],this._$AN=void 0,this._$AD=r,this._$AM=s}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}p(r){var s;const{el:{content:h},parts:g}=this._$AD,x=(null!==(s=null==r?void 0:r.creationScope)&&void 0!==s?s:Vr).importNode(h,!0);nl.currentNode=x;let b=nl.nextNode(),A=0,k=0,G=g[0];for(;void 0!==G;){if(A===G.index){let q;2===G.type?q=new hi(b,b.nextSibling,this,r):1===G.type?q=new G.ctor(b,G.name,G.strings,this,r):6===G.type&&(q=new Im(b,this,r)),this.v.push(q),G=g[++k]}A!==(null==G?void 0:G.index)&&(b=nl.nextNode(),A++)}return x}m(r){let s=0;for(const h of this.v)void 0!==h&&(void 0!==h.strings?(h._$AI(r,h,s),s+=h.strings.length-2):h._$AI(r[s])),s++}}class hi{constructor(r,s,h,g){var x;this.type=2,this._$AH=Ci,this._$AN=void 0,this._$AA=r,this._$AB=s,this._$AM=h,this.options=g,this._$Cg=null===(x=null==g?void 0:g.isConnected)||void 0===x||x}get _$AU(){var r,s;return null!==(s=null===(r=this._$AM)||void 0===r?void 0:r._$AU)&&void 0!==s?s:this._$Cg}get parentNode(){let r=this._$AA.parentNode;const s=this._$AM;return void 0!==s&&11===r.nodeType&&(r=s.parentNode),r}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(r,s=this){r=ma(this,r,s),el(r)?r===Ci||null==r||""===r?(this._$AH!==Ci&&this._$AR(),this._$AH=Ci):r!==this._$AH&&r!==Po&&this.$(r):void 0!==r._$litType$?this.T(r):void 0!==r.nodeType?this.k(r):(u=>{var r;return Ns(u)||"function"==typeof(null===(r=u)||void 0===r?void 0:r[Symbol.iterator])})(r)?this.S(r):this.$(r)}A(r,s=this._$AB){return this._$AA.parentNode.insertBefore(r,s)}k(r){this._$AH!==r&&(this._$AR(),this._$AH=this.A(r))}$(r){this._$AH!==Ci&&el(this._$AH)?this._$AA.nextSibling.data=r:this.k(Vr.createTextNode(r)),this._$AH=r}T(r){var s;const{values:h,_$litType$:g}=r,x="number"==typeof g?this._$AC(r):(void 0===g.el&&(g.el=Rc.createElement(g.h,this.options)),g);if((null===(s=this._$AH)||void 0===s?void 0:s._$AD)===x)this._$AH.m(h);else{const b=new Rr(x,this),A=b.p(this.options);b.m(h),this.k(A),this._$AH=b}}_$AC(r){let s=zu.get(r.strings);return void 0===s&&zu.set(r.strings,s=new Rc(r)),s}S(r){Ns(this._$AH)||(this._$AH=[],this._$AR());const s=this._$AH;let h,g=0;for(const x of r)g===s.length?s.push(h=new hi(this.A(Gu()),this.A(Gu()),this,this.options)):h=s[g],h._$AI(x),g++;g<s.length&&(this._$AR(h&&h._$AB.nextSibling,g),s.length=g)}_$AR(r=this._$AA.nextSibling,s){var h;for(null===(h=this._$AP)||void 0===h||h.call(this,!1,!0,s);r&&r!==this._$AB;){const g=r.nextSibling;r.remove(),r=g}}setConnected(r){var s;void 0===this._$AM&&(this._$Cg=r,null===(s=this._$AP)||void 0===s||s.call(this,r))}}class ga{constructor(r,s,h,g,x){this.type=1,this._$AH=Ci,this._$AN=void 0,this.element=r,this.name=s,this._$AM=g,this.options=x,h.length>2||""!==h[0]||""!==h[1]?(this._$AH=Array(h.length-1).fill(new String),this.strings=h):this._$AH=Ci}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(r,s=this,h,g){const x=this.strings;let b=!1;if(void 0===x)r=ma(this,r,s,0),b=!el(r)||r!==this._$AH&&r!==Po,b&&(this._$AH=r);else{const A=r;let k,G;for(r=x[0],k=0;k<x.length-1;k++)G=ma(this,A[h+k],s,k),G===Po&&(G=this._$AH[k]),b||(b=!el(G)||G!==this._$AH[k]),G===Ci?r=Ci:r!==Ci&&(r+=(null!=G?G:"")+x[k+1]),this._$AH[k]=G}b&&!g&&this.C(r)}C(r){r===Ci?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=r?r:"")}}class jf extends ga{constructor(){super(...arguments),this.type=3}C(r){this.element[this.name]=r===Ci?void 0:r}}const _a=kl?kl.emptyScript:"";class Pc extends ga{constructor(){super(...arguments),this.type=4}C(r){r&&r!==Ci?this.element.setAttribute(this.name,_a):this.element.removeAttribute(this.name)}}class Pr extends ga{constructor(r,s,h,g,x){super(r,s,h,g,x),this.type=5}_$AI(r,s=this){var h;if((r=null!==(h=ma(this,r,s,0))&&void 0!==h?h:Ci)===Po)return;const g=this._$AH,x=r===Ci&&g!==Ci||r.capture!==g.capture||r.once!==g.once||r.passive!==g.passive,b=r!==Ci&&(g===Ci||x);x&&this.element.removeEventListener(this.name,this,g),b&&this.element.addEventListener(this.name,this,r),this._$AH=r}handleEvent(r){var s,h;"function"==typeof this._$AH?this._$AH.call(null!==(h=null===(s=this.options)||void 0===s?void 0:s.host)&&void 0!==h?h:this.element,r):this._$AH.handleEvent(r)}}class Im{constructor(r,s,h){this.element=r,this.type=6,this._$AN=void 0,this._$AM=s,this.options=h}get _$AU(){return this._$AM._$AU}_$AI(r){ma(this,r)}}const C_=window.litHtmlPolyfillSupport;var to,il;null==C_||C_(Rc,hi),(null!==(Qa=globalThis.litHtmlVersions)&&void 0!==Qa?Qa:globalThis.litHtmlVersions=[]).push("2.2.1");class ya extends Ro{constructor(){super(...arguments),this.renderOptions={host:this},this._$Dt=void 0}createRenderRoot(){var r,s;const h=super.createRenderRoot();return null!==(r=(s=this.renderOptions).renderBefore)&&void 0!==r||(s.renderBefore=h.firstChild),h}update(r){const s=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(r),this._$Dt=((u,r,s)=>{var h,g;const x=null!==(h=null==s?void 0:s.renderBefore)&&void 0!==h?h:r;let b=x._$litPart$;if(void 0===b){const A=null!==(g=null==s?void 0:s.renderBefore)&&void 0!==g?g:null;x._$litPart$=b=new hi(r.insertBefore(Gu(),A),A,void 0,null!=s?s:{})}return b._$AI(u),b})(s,this.renderRoot,this.renderOptions)}connectedCallback(){var r;super.connectedCallback(),null===(r=this._$Dt)||void 0===r||r.setConnected(!0)}disconnectedCallback(){var r;super.disconnectedCallback(),null===(r=this._$Dt)||void 0===r||r.setConnected(!1)}render(){return Po}}ya.finalized=!0,ya._$litElement$=!0,null===(to=globalThis.litElementHydrateSupport)||void 0===to||to.call(globalThis,{LitElement:ya});const Io=globalThis.litElementPolyfillSupport;null==Io||Io({LitElement:ya}),(null!==(il=globalThis.litElementVersions)&&void 0!==il?il:globalThis.litElementVersions=[]).push("3.2.0");const va=u=>r=>{return"function"==typeof r?(h=r,window.customElements.define(u,h),h):((s,h)=>{const{kind:g,elements:x}=h;return{kind:g,elements:x,finisher(b){window.customElements.define(s,b)}}})(u,r);var h};function wr(u){if(void 0===u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u}function Oo(u,r){u.prototype=Object.create(r.prototype),u.prototype.constructor=u,u.__proto__=r}window;var ji,Pi,Ma,Nm,qu,P_,L_,Fc,zm,k,G,q,K,ne,se,u,r,s,h,g,x,b,A,Me,Ir={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Ea={duration:.5,overwrite:!1,delay:0},Us=1e8,$n=1e-8,xh=2*Math.PI,Mh=xh/4,Nv=0,T_=Math.sqrt,Bv=Math.cos,$f=Math.sin,Ni=function(r){return"string"==typeof r},er=function(r){return"function"==typeof r},ks=function(r){return"number"==typeof r},Lm=function(r){return void 0===r},xa=function(r){return"object"==typeof r},Hr=function(r){return!1!==r},wh=function(){return"undefined"!=typeof window},bh=function(r){return er(r)||Ni(r)},A_="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},Gr=Array.isArray,Gl=/(?:-?\.?\d|\.)+/gi,ju=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,$u=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,D_=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,Fm=/[+-]=-?[.\d]+/,R_=/[^,'"\[\]\s]+/gi,uE=/[\d.+\-=]+(?:e[-+]\d*)*/i,ls={},rl={},I_=function(r){return(rl=Yu(r,ls))&&Uo},O_=function(r,s){return console.warn("Invalid property",r,"set to",s,"Missing plugin? gsap.registerPlugin()")},Ic=function(r,s){return!s&&console.warn(r)},qf=function(r,s){return r&&(ls[r]=s)&&rl&&(rl[r]=s)||ls},Xu=function(){return 0},Xf={},sl=[],Yf={},Vs={},Bm={},F_=30,Kf=[],wa="",Oc=function(r){var h,g,s=r[0];if(xa(s)||er(s)||(r=[r]),!(h=(s._gsap||{}).harness)){for(g=Kf.length;g--&&!Kf[g].targetTest(s););h=Kf[g]}for(g=r.length;g--;)r[g]&&(r[g]._gsap||(r[g]._gsap=new Bo(r[g],h)))||r.splice(g,1);return r},Lc=function(r){return r._gsap||Oc(Lo(r))[0]._gsap},Uv=function(r,s,h){return(h=r[s])&&er(h)?r[s]():Lm(h)&&r.getAttribute&&r.getAttribute(s)||h},Hs=function(r,s){return(r=r.split(",")).forEach(s)||r},mr=function(r){return Math.round(1e5*r)/1e5||0},cs=function(r){return Math.round(1e7*r)/1e7||0},dE=function(r,s){for(var h=s.length,g=0;r.indexOf(s[g])<0&&++g<h;);return g<h},Sh=function(){var h,g,r=sl.length,s=sl.slice(0);for(Yf={},sl.length=0,h=0;h<r;h++)(g=s[h])&&g._lazy&&(g.render(g._lazy[0],g._lazy[1],!0)._lazy=0)},N_=function(r,s,h,g){sl.length&&Sh(),r.render(s,h,g),sl.length&&Sh()},B_=function(r){var s=parseFloat(r);return(s||0===s)&&(r+"").match(R_).length<2?s:Ni(r)?r.trim():r},U_=function(r){return r},no=function(r,s){for(var h in s)h in r||(r[h]=s[h]);return r},Yu=function(r,s){for(var h in s)r[h]=s[h];return r},Ch=function u(r,s){for(var h in s)"__proto__"!==h&&"constructor"!==h&&"prototype"!==h&&(r[h]=xa(s[h])?u(r[h]||(r[h]={}),s[h]):s[h]);return r},Th=function(r,s){var g,h={};for(g in r)g in s||(h[g]=r[g]);return h},Es=function(r){var s=r.parent||Pi,h=r.keyframes?function(r){return function(s,h){for(var g in h)g in s||"duration"===g&&r||"ease"===g||(s[g]=h[g])}}(Gr(r.keyframes)):no;if(Hr(r.inherit))for(;s;)h(r,s.vars.defaults),s=s.parent||s._dp;return r},Dh=function(r,s,h,g){void 0===h&&(h="_first"),void 0===g&&(g="_last");var x=s._prev,b=s._next;x?x._next=b:r[h]===s&&(r[h]=b),b?b._prev=x:r[g]===s&&(r[g]=x),s._next=s._prev=s.parent=null},ba=function(r,s){r.parent&&(!s||r.parent.autoRemoveChildren)&&r.parent.remove(r),r._act=0},Ku=function(r,s){if(r&&(!s||s._end>r._dur||s._start<0))for(var h=r;h;)h._dirty=1,h=h.parent;return r},fE=function(r){for(var s=r.parent;s&&s.parent;)s._dirty=1,s.totalDuration(),s=s.parent;return r},pE=function u(r){return!r||r._ts&&u(r.parent)},Zf=function(r){return r._repeat?zl(r._tTime,r=r.duration()+r._rDelay)*r:0},zl=function(r,s){var h=Math.floor(r/=s);return r&&h===r?h-1:h},Zu=function(r,s){return(r-s._start)*s._ts+(s._ts>=0?0:s._dirty?s.totalDuration():s._tDur)},Um=function(r){return r._end=cs(r._start+(r._tDur/Math.abs(r._ts||r._rts||$n)||0))},kv=function(r,s){var h=r._dp;return h&&h.smoothChildTiming&&r._ts&&(r._start=cs(h._time-(r._ts>0?s/r._ts:((r._dirty?r.totalDuration():r._tDur)-s)/-r._ts)),Um(r),h._dirty||Ku(h,r)),r},km=function(r,s){var h;if((s._time||s._initted&&!s._dur)&&(h=Zu(r.rawTime(),s),(!s._dur||Ju(0,s.totalDuration(),h)-s._tTime>$n)&&s.render(h,!0)),Ku(r,s)._dp&&r._initted&&r._time>=r._dur&&r._ts){if(r._dur<r.duration())for(h=r;h._dp;)h.rawTime()>=0&&h.totalTime(h._tTime),h=h._dp;r._zTime=-$n}},Sa=function(r,s,h,g){return s.parent&&ba(s),s._start=cs((ks(h)?h:h||r!==Pi?io(r,h,s):r._time)+s._delay),s._end=cs(s._start+(s.totalDuration()/Math.abs(s.timeScale())||0)),function(r,s,h,g,x){void 0===h&&(h="_first"),void 0===g&&(g="_last");var A,b=r[g];if(x)for(A=s[x];b&&b[x]>A;)b=b._prev;b?(s._next=b._next,b._next=s):(s._next=r[h],r[h]=s),s._next?s._next._prev=s:r[g]=s,s._prev=b,s.parent=s._dp=r}(r,s,"_first","_last",r._sort?"_start":0),Jf(s)||(r._recent=s),g||km(r,s),r},V_=function(r,s){return(ls.ScrollTrigger||O_("scrollTrigger",s))&&ls.ScrollTrigger.create(s,r)},H_=function(r,s,h,g){return so(r,s),r._initted?!h&&r._pt&&(r._dur&&!1!==r.vars.lazy||!r._dur&&r.vars.lazy)&&L_!==ro.frame?(sl.push(r),r._lazy=[s,g],1):void 0:1},Vv=function u(r){var s=r.parent;return s&&s._ts&&s._initted&&!s._lock&&(s.rawTime()<0||u(s))},Jf=function(r){var s=r.data;return"isFromStart"===s||"isStart"===s},Wl=function(r,s,h,g){var x=r._repeat,b=cs(s)||0,A=r._tTime/r._tDur;return A&&!g&&(r._time*=b/r._dur),r._dur=b,r._tDur=x?x<0?1e10:cs(b*(x+1)+r._rDelay*x):b,A>0&&!g?kv(r,r._tTime=r._tDur*A):r.parent&&Um(r),h||Ku(r.parent,r),r},G_=function(r){return r instanceof jr?Ku(r):Wl(r,r._dur)},tr={_start:0,endTime:Xu,totalDuration:Xu},io=function u(r,s,h){var A,k,G,g=r.labels,x=r._recent||tr,b=r.duration()>=Us?x.endTime(!1):r._dur;return Ni(s)&&(isNaN(s)||s in g)?(k=s.charAt(0),G="%"===s.substr(-1),A=s.indexOf("="),"<"===k||">"===k?(A>=0&&(s=s.replace(/=/,"")),("<"===k?x._start:x.endTime(x._repeat>=0))+(parseFloat(s.substr(1))||0)*(G?(A<0?x:h).totalDuration()/100:1)):A<0?(s in g||(g[s]=b),g[s]):(k=parseFloat(s.charAt(A-1)+s.substr(A+1)),G&&h&&(k=k/100*(Gr(h)?h[0]:h).totalDuration()),A>1?u(r,s.substr(0,A-1),h)+k:b+k)):null==s?b:+s},Rh=function(r,s,h){var A,k,g=ks(s[1]),x=(g?2:1)+(r<2?0:1),b=s[x];if(g&&(b.duration=s[1]),b.parent=h,r){for(A=b,k=h;k&&!("immediateRender"in A);)A=k.vars.defaults||{},k=Hr(k.vars.inherit)&&k.parent;b.immediateRender=Hr(A.immediateRender),r<2?b.runBackwards=1:b.startAt=s[x-1]}return new nr(s[0],b,s[x+1])},Ca=function(r,s){return r||0===r?s(r):s},Ju=function(r,s,h){return h<r?r:h>s?s:h},xs=function(r,s){return Ni(r)&&(s=uE.exec(r))?r.substr(s.index+s[0].length):""},Vm=[].slice,z_=function(r,s){return r&&xa(r)&&"length"in r&&(!s&&!r.length||r.length-1 in r&&xa(r[0]))&&!r.nodeType&&r!==Ma},Lo=function(r,s,h){return!Ni(r)||h||!Nm&&Oh()?Gr(r)?function(r,s,h){return void 0===h&&(h=[]),r.forEach(function(g){var x;return Ni(g)&&!s||z_(g,1)?(x=h).push.apply(x,Lo(g)):h.push(g)})||h}(r,h):z_(r)?Vm.call(r,0):r?[r]:[]:Vm.call((s||qu).querySelectorAll(r),0)},Qu=function(r){return r.sort(function(){return.5-Math.random()})},zr=function(r){if(er(r))return r;var s=xa(r)?r:{each:r},h=on(s.ease),g=s.from||0,x=parseFloat(s.base)||0,b={},A=g>0&&g<1,k=isNaN(g)||A,G=s.axis,q=g,K=g;return Ni(g)?q=K={center:.5,edges:.5,end:1}[g]||0:!A&&k&&(q=g[0],K=g[1]),function(ne,se,Me){var ot,Mt,Dt,It,ft,wt,zt,Gt,Nt,ue=(Me||s).length,He=b[ue];if(!He){if(!(Nt="auto"===s.grid?0:(s.grid||[1,Us])[1])){for(zt=-Us;zt<(zt=Me[Nt++].getBoundingClientRect().left)&&Nt<ue;);Nt--}for(He=b[ue]=[],ot=k?Math.min(Nt,ue)*q-.5:g%Nt,Mt=Nt===Us?0:k?ue*K/Nt-.5:g/Nt|0,zt=0,Gt=Us,wt=0;wt<ue;wt++)Dt=wt%Nt-ot,It=Mt-(wt/Nt|0),He[wt]=ft=G?Math.abs("y"===G?It:Dt):T_(Dt*Dt+It*It),ft>zt&&(zt=ft),ft<Gt&&(Gt=ft);"random"===g&&Qu(He),He.max=zt-Gt,He.min=Gt,He.v=ue=(parseFloat(s.amount)||parseFloat(s.each)*(Nt>ue?ue-1:G?"y"===G?ue/Nt:Nt:Math.max(Nt,ue/Nt))||0)*("edges"===g?-1:1),He.b=ue<0?x-ue:x,He.u=xs(s.amount||s.each)||0,h=h&&ue<0?Yv(h):h}return ue=(He[ne]-He.min)/He.max||0,cs(He.b+(h?h(ue):ue)*He.v)+He.u}},Ph=function(r){var s=Math.pow(10,((r+"").split(".")[1]||"").length);return function(h){var g=Math.round(parseFloat(h)/r)*r*s;return(g-g%1)/s+(ks(h)?0:xs(h))}},Hm=function(r,s){var g,x,h=Gr(r);return!h&&xa(r)&&(g=h=r.radius||Us,r.values?(r=Lo(r.values),(x=!ks(r[0]))&&(g*=g)):r=Ph(r.increment)),Ca(s,h?er(r)?function(b){return x=r(b),Math.abs(x-b)<=g?x:b}:function(b){for(var ne,se,A=parseFloat(x?b.x:b),k=parseFloat(x?b.y:0),G=Us,q=0,K=r.length;K--;)(ne=x?(ne=r[K].x-A)*ne+(se=r[K].y-k)*se:Math.abs(r[K]-A))<G&&(G=ne,q=K);return q=!g||G<=g?r[q]:b,x||q===b||ks(b)?q:q+xs(b)}:Ph(r))},Gm=function(r,s,h,g){return Ca(Gr(r)?!s:!0===h?!!(h=0):!g,function(){return Gr(r)?r[~~(Math.random()*r.length)]:(h=h||1e-5)&&(g=h<1?Math.pow(10,(h+"").length-2):1)&&Math.floor(Math.round((r-h/2+Math.random()*(s-r+.99*h))/h)*h*g)/g})},Wv=function(r,s,h){return Ca(h,function(g){return r[~~s(g)]})},ep=function(r){for(var g,x,b,A,s=0,h="";~(g=r.indexOf("random(",s));)b=r.indexOf(")",g),A="["===r.charAt(g+7),x=r.substr(g+7,b-g-7).match(A?R_:Gl),h+=r.substr(s,g-s)+Gm(A?x:+x[0],A?0:+x[1],+x[2]||1e-5),s=b+1;return h+r.substr(s,r.length-s)},j_=function(r,s,h,g,x){var b=s-r,A=g-h;return Ca(x,function(k){return h+((k-r)/b*A||0)})},$_=function(r,s,h){var b,A,k,g=r.labels,x=Us;for(b in g)(A=g[b]-s)<0==!!h&&A&&x>(A=Math.abs(A))&&(k=b,x=A);return k},Fo=function(r,s,h){var b,A,g=r.vars,x=g[s];if(x)return b=g[s+"Params"],A=g.callbackScope||r,h&&sl.length&&Sh(),b?x.apply(A,b):x.call(A)},tp=function(r){return ba(r),r.scrollTrigger&&r.scrollTrigger.kill(!1),r.progress()<1&&Fo(r,"onInterrupt"),r},yE=function(r){var s=(r=!r.name&&r.default||r).name,h=er(r),g=s&&!h&&r.init?function(){this._props=[]}:r,x={init:Xu,render:Fh,add:jl,kill:K_,modifier:id,rawVars:0},b={targetTest:0,get:0,getSetter:Xl,aliases:{},register:0};if(Oh(),r!==g){if(Vs[s])return;no(g,no(Th(r,x),b)),Yu(g.prototype,Yu(x,Th(r,b))),Vs[g.prop=s]=g,r.targetTest&&(Kf.push(g),Xf[s]=1),s=("css"===s?"CSS":s.charAt(0).toUpperCase()+s.substr(1))+"Plugin"}qf(s,g),r.register&&r.register(Uo,g,qr)},Mi=255,ed={aqua:[0,Mi,Mi],lime:[0,Mi,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Mi],navy:[0,0,128],white:[Mi,Mi,Mi],olive:[128,128,0],yellow:[Mi,Mi,0],orange:[Mi,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Mi,0,0],pink:[Mi,192,203],cyan:[0,Mi,Mi],transparent:[Mi,Mi,Mi,0]},q_=function(r,s,h){return(6*(r+=r<0?1:r>1?-1:0)<1?s+(h-s)*r*6:r<.5?h:3*r<2?s+(h-s)*(2/3-r)*6:s)*Mi+.5|0},$v=function(r,s,h){var x,b,A,k,G,q,K,ne,se,Me,g=r?ks(r)?[r>>16,r>>8&Mi,r&Mi]:0:ed.black;if(!g){if(","===r.substr(-1)&&(r=r.substr(0,r.length-1)),ed[r])g=ed[r];else if("#"===r.charAt(0)){if(r.length<6&&(x=r.charAt(1),b=r.charAt(2),A=r.charAt(3),r="#"+x+x+b+b+A+A+(5===r.length?r.charAt(4)+r.charAt(4):"")),9===r.length)return[(g=parseInt(r.substr(1,6),16))>>16,g>>8&Mi,g&Mi,parseInt(r.substr(7),16)/255];g=[(r=parseInt(r.substr(1),16))>>16,r>>8&Mi,r&Mi]}else if("hsl"===r.substr(0,3))if(g=Me=r.match(Gl),s){if(~r.indexOf("="))return g=r.match(ju),h&&g.length<4&&(g[3]=1),g}else k=+g[0]%360/360,G=+g[1]/100,x=2*(q=+g[2]/100)-(b=q<=.5?q*(G+1):q+G-q*G),g.length>3&&(g[3]*=1),g[0]=q_(k+1/3,x,b),g[1]=q_(k,x,b),g[2]=q_(k-1/3,x,b);else g=r.match(Gl)||ed.transparent;g=g.map(Number)}return s&&!Me&&(x=g[0]/Mi,b=g[1]/Mi,A=g[2]/Mi,q=((K=Math.max(x,b,A))+(ne=Math.min(x,b,A)))/2,K===ne?k=G=0:(se=K-ne,G=q>.5?se/(2-K-ne):se/(K+ne),k=K===x?(b-A)/se+(b<A?6:0):K===b?(A-x)/se+2:(x-b)/se+4,k*=60),g[0]=~~(k+.5),g[1]=~~(100*G+.5),g[2]=~~(100*q+.5)),h&&g.length<4&&(g[3]=1),g},np=function(r){var s=[],h=[],g=-1;return r.split(Nc).forEach(function(x){var b=x.match($u)||[];s.push.apply(s,b),h.push(g+=b.length+1)}),s.c=h,s},qv=function(r,s,h){var k,G,q,K,g="",x=(r+g).match(Nc),b=s?"hsla(":"rgba(",A=0;if(!x)return r;if(x=x.map(function(ne){return(ne=$v(ne,s,1))&&b+(s?ne[0]+","+ne[1]+"%,"+ne[2]+"%,"+ne[3]:ne.join(","))+")"}),h&&(q=np(r),(k=h.c).join(g)!==q.c.join(g)))for(K=(G=r.replace(Nc,"1").split($u)).length-1;A<K;A++)g+=G[A]+(~k.indexOf(A)?x.shift()||b+"0,0,0,0)":(q.length?q:x.length?x:h).shift());if(!G)for(K=(G=r.split(Nc)).length-1;A<K;A++)g+=G[A]+x[A];return g+G[K]},Nc=function(){var r,u="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(r in ed)u+="|"+r+"\\b";return new RegExp(u+")","gi")}(),vE=/hsl[a]?\(/,Xv=function(r){var h,s=r.join(" ");if(Nc.lastIndex=0,Nc.test(s))return h=vE.test(s),r[1]=qv(r[1],h),r[0]=qv(r[0],h,np(r[1])),!0},ro=(u=Date.now,r=500,s=33,h=u(),g=h,b=x=1e3/240,Me=function ue(He){var Dt,It,ft,wt,ot=u()-g,Mt=!0===He;if(ot>r&&(h+=ot-s),((Dt=(ft=(g+=ot)-h)-b)>0||Mt)&&(wt=++K.frame,ne=ft-1e3*K.time,K.time=ft/=1e3,b+=Dt+(Dt>=x?4:x-Dt),It=1),Mt||(k=G(ue)),It)for(se=0;se<A.length;se++)A[se](ft,ne,wt,He)},K={time:0,frame:0,tick:function(){Me(!0)},deltaRatio:function(He){return ne/(1e3/(He||60))},wake:function(){P_&&(!Nm&&wh()&&(Ma=Nm=window,qu=Ma.document||{},ls.gsap=Uo,(Ma.gsapVersions||(Ma.gsapVersions=[])).push(Uo.version),I_(rl||Ma.GreenSockGlobals||!Ma.gsap&&Ma||{}),q=Ma.requestAnimationFrame),k&&K.sleep(),G=q||function(He){return setTimeout(He,b-1e3*K.time+1|0)},zm=1,Me(2))},sleep:function(){(q?Ma.cancelAnimationFrame:clearTimeout)(k),zm=0,G=Xu},lagSmoothing:function(He,ot){r=He||1/$n,s=Math.min(ot,r,0)},fps:function(He){b=1e3*K.time+(x=1e3/(He||240))},add:function(He){A.indexOf(He)<0&&A.push(He),Oh()},remove:function(He,ot){~(ot=A.indexOf(He))&&A.splice(ot,1)&&se>=ot&&se--},_listeners:A=[]}),Oh=function(){return!zm&&ro.wake()},zn={},EE=/^[\d.\-M][\d.\-,\s]/,xE=/["']/g,ME=function(r){for(var A,k,G,s={},h=r.substr(1,r.length-3).split(":"),g=h[0],x=1,b=h.length;x<b;x++)k=h[x],A=x!==b-1?k.lastIndexOf(","):k.length,G=k.substr(0,A),s[g]=isNaN(G)?G.replace(xE,"").trim():+G,g=k.substr(A+1).trim();return s},Yv=function(r){return function(s){return 1-r(1-s)}},td=function u(r,s){for(var g,h=r._first;h;)h instanceof jr?u(h,s):h.vars.yoyoEase&&(!h._yoyo||!h._repeat)&&h._yoyo!==s&&(h.timeline?u(h.timeline,s):(g=h._ease,h._ease=h._yEase,h._yEase=g,h._yoyo=s)),h=h._next},on=function(r,s){return r&&(er(r)?r:zn[r]||function(r){var s=(r+"").split("("),h=zn[s[0]];return h&&s.length>1&&h.config?h.config.apply(null,~r.indexOf("{")?[ME(s[1])]:function(r){var s=r.indexOf("(")+1,h=r.indexOf(")"),g=r.indexOf("(",s);return r.substring(s,~g&&g<h?r.indexOf(")",h+1):h)}(r).split(",").map(B_)):zn._CE&&EE.test(r)?zn._CE("",r):h}(r))||s},bt=function(r,s,h,g){void 0===h&&(h=function(k){return 1-s(1-k)}),void 0===g&&(g=function(k){return k<.5?s(2*k)/2:1-s(2*(1-k))/2});var b,x={easeIn:s,easeOut:h,easeInOut:g};return Hs(r,function(A){for(var k in zn[A]=ls[A]=x,zn[b=A.toLowerCase()]=h,x)zn[b+("easeIn"===k?".in":"easeOut"===k?".out":".inOut")]=zn[A+"."+k]=x[k]}),x},No=function(r){return function(s){return s<.5?(1-r(1-2*s))/2:.5+r(2*(s-.5))/2}},ip=function u(r,s,h){var g=s>=1?s:1,x=(h||(r?.3:.45))/(s<1?s:1),b=x/xh*(Math.asin(1/g)||0),A=function(q){return 1===q?1:g*Math.pow(2,-10*q)*$f((q-b)*x)+1},k="out"===r?A:"in"===r?function(G){return 1-A(1-G)}:No(A);return x=xh/x,k.config=function(G,q){return u(r,G,q)},k},X_=function u(r,s){void 0===s&&(s=1.70158);var h=function(b){return b?--b*b*((s+1)*b+s)+1:0},g="out"===r?h:"in"===r?function(x){return 1-h(1-x)}:No(h);return g.config=function(x){return u(r,x)},g};Hs("Linear,Quad,Cubic,Quart,Quint,Strong",function(u,r){var s=r<5?r+1:r;bt(u+",Power"+(s-1),r?function(h){return Math.pow(h,s)}:function(h){return h},function(h){return 1-Math.pow(1-h,s)},function(h){return h<.5?Math.pow(2*h,s)/2:1-Math.pow(2*(1-h),s)/2})}),zn.Linear.easeNone=zn.none=zn.Linear.easeIn,bt("Elastic",ip("in"),ip("out"),ip()),function(u,r){var x=function(A){return A<.36363636363636365?u*A*A:A<.7272727272727273?u*Math.pow(A-1.5/r,2)+.75:A<.9090909090909092?u*(A-=2.25/r)*A+.9375:u*Math.pow(A-2.625/r,2)+.984375};bt("Bounce",function(b){return 1-x(1-b)},x)}(7.5625,2.75),bt("Expo",function(u){return u?Math.pow(2,10*(u-1)):0}),bt("Circ",function(u){return-(T_(1-u*u)-1)}),bt("Sine",function(u){return 1===u?1:1-Bv(u*Mh)}),bt("Back",X_("in"),X_("out"),X_()),zn.SteppedEase=zn.steps=ls.SteppedEase={config:function(r,s){void 0===r&&(r=1);var h=1/r,g=r+(s?0:1),x=s?1:0;return function(A){return((g*Ju(0,.99999999,A)|0)+x)*h}}},Ea.ease=zn["quad.out"],Hs("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(u){return wa+=u+","+u+"Params,"});var Bo=function(r,s){this.id=Nv++,r._gsap=this,this.target=r,this.harness=s,this.get=s?s.get:Uv,this.set=s?s.getSetter:Xl},Bc=function(){function u(s){this.vars=s,this._delay=+s.delay||0,(this._repeat=s.repeat===1/0?-2:s.repeat||0)&&(this._rDelay=s.repeatDelay||0,this._yoyo=!!s.yoyo||!!s.yoyoEase),this._ts=1,Wl(this,+s.duration,1,1),this.data=s.data,zm||ro.wake()}var r=u.prototype;return r.delay=function(h){return h||0===h?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+h-this._delay),this._delay=h,this):this._delay},r.duration=function(h){return arguments.length?this.totalDuration(this._repeat>0?h+(h+this._rDelay)*this._repeat:h):this.totalDuration()&&this._dur},r.totalDuration=function(h){return arguments.length?(this._dirty=0,Wl(this,this._repeat<0?h:(h-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},r.totalTime=function(h,g){if(Oh(),!arguments.length)return this._tTime;var x=this._dp;if(x&&x.smoothChildTiming&&this._ts){for(kv(this,h),!x._dp||x.parent||km(x,this);x&&x.parent;)x.parent._time!==x._start+(x._ts>=0?x._tTime/x._ts:(x.totalDuration()-x._tTime)/-x._ts)&&x.totalTime(x._tTime,!0),x=x.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&h<this._tDur||this._ts<0&&h>0||!this._tDur&&!h)&&Sa(this._dp,this,this._start-this._delay)}return(this._tTime!==h||!this._dur&&!g||this._initted&&Math.abs(this._zTime)===$n||!h&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=h),N_(this,h,g)),this},r.time=function(h,g){return arguments.length?this.totalTime(Math.min(this.totalDuration(),h+Zf(this))%(this._dur+this._rDelay)||(h?this._dur:0),g):this._time},r.totalProgress=function(h,g){return arguments.length?this.totalTime(this.totalDuration()*h,g):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},r.progress=function(h,g){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?h:1-h)+Zf(this),g):this.duration()?Math.min(1,this._time/this._dur):this.ratio},r.iteration=function(h,g){var x=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(h-1)*x,g):this._repeat?zl(this._tTime,x)+1:1},r.timeScale=function(h){if(!arguments.length)return this._rts===-$n?0:this._rts;if(this._rts===h)return this;var g=this.parent&&this._ts?Zu(this.parent._time,this):this._tTime;return this._rts=+h||0,this._ts=this._ps||h===-$n?0:this._rts,fE(this.totalTime(Ju(-this._delay,this._tDur,g),!0)),Um(this),this},r.paused=function(h){return arguments.length?(this._ps!==h&&(this._ps=h,h?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Oh(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&Math.abs(this._zTime)!==$n&&(this._tTime-=$n)))),this):this._ps},r.startTime=function(h){if(arguments.length){this._start=h;var g=this.parent||this._dp;return g&&(g._sort||!this.parent)&&Sa(g,this,h-this._delay),this}return this._start},r.endTime=function(h){return this._start+(Hr(h)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},r.rawTime=function(h){var g=this.parent||this._dp;return g?h&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Zu(g.rawTime(h),this):this._tTime:this._tTime},r.globalTime=function(h){for(var g=this,x=arguments.length?h:g.rawTime();g;)x=g._start+x/(g._ts||1),g=g._dp;return x},r.repeat=function(h){return arguments.length?(this._repeat=h===1/0?-2:h,G_(this)):-2===this._repeat?1/0:this._repeat},r.repeatDelay=function(h){if(arguments.length){var g=this._time;return this._rDelay=h,G_(this),g?this.time(g):this}return this._rDelay},r.yoyo=function(h){return arguments.length?(this._yoyo=h,this):this._yoyo},r.seek=function(h,g){return this.totalTime(io(this,h),Hr(g))},r.restart=function(h,g){return this.play().totalTime(h?-this._delay:0,Hr(g))},r.play=function(h,g){return null!=h&&this.seek(h,g),this.reversed(!1).paused(!1)},r.reverse=function(h,g){return null!=h&&this.seek(h||this.totalDuration(),g),this.reversed(!0).paused(!1)},r.pause=function(h,g){return null!=h&&this.seek(h,g),this.paused(!0)},r.resume=function(){return this.paused(!1)},r.reversed=function(h){return arguments.length?(!!h!==this.reversed()&&this.timeScale(-this._rts||(h?-$n:0)),this):this._rts<0},r.invalidate=function(){return this._initted=this._act=0,this._zTime=-$n,this},r.isActive=function(){var x,h=this.parent||this._dp,g=this._start;return!(h&&!(this._ts&&this._initted&&h.isActive()&&(x=h.rawTime(!0))>=g&&x<this.endTime(!0)-$n))},r.eventCallback=function(h,g,x){var b=this.vars;return arguments.length>1?(g?(b[h]=g,x&&(b[h+"Params"]=x),"onUpdate"===h&&(this._onUpdate=g)):delete b[h],this):b[h]},r.then=function(h){var g=this;return new Promise(function(x){var b=er(h)?h:U_,A=function(){var G=g.then;g.then=null,er(b)&&(b=b(g))&&(b.then||b===g)&&(g.then=G),x(b),g.then=G};g._initted&&1===g.totalProgress()&&g._ts>=0||!g._tTime&&g._ts<0?A():g._prom=A})},r.kill=function(){tp(this)},u}();no(Bc.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-$n,_prom:0,_ps:!1,_rts:1});var jr=function(u){function r(h,g){var x;return void 0===h&&(h={}),(x=u.call(this,h)||this).labels={},x.smoothChildTiming=!!h.smoothChildTiming,x.autoRemoveChildren=!!h.autoRemoveChildren,x._sort=Hr(h.sortChildren),Pi&&Sa(h.parent||Pi,wr(x),g),h.reversed&&x.reverse(),h.paused&&x.paused(!0),h.scrollTrigger&&V_(wr(x),h.scrollTrigger),x}Oo(r,u);var s=r.prototype;return s.to=function(g,x,b){return Rh(0,arguments,this),this},s.from=function(g,x,b){return Rh(1,arguments,this),this},s.fromTo=function(g,x,b,A){return Rh(2,arguments,this),this},s.set=function(g,x,b){return x.duration=0,x.parent=this,Es(x).repeatDelay||(x.repeat=0),x.immediateRender=!!x.immediateRender,new nr(g,x,io(this,b),1),this},s.call=function(g,x,b){return Sa(this,nr.delayedCall(0,g,x),b)},s.staggerTo=function(g,x,b,A,k,G,q){return b.duration=x,b.stagger=b.stagger||A,b.onComplete=G,b.onCompleteParams=q,b.parent=this,new nr(g,b,io(this,k)),this},s.staggerFrom=function(g,x,b,A,k,G,q){return b.runBackwards=1,Es(b).immediateRender=Hr(b.immediateRender),this.staggerTo(g,x,b,A,k,G,q)},s.staggerFromTo=function(g,x,b,A,k,G,q,K){return A.startAt=b,Es(A).immediateRender=Hr(A.immediateRender),this.staggerTo(g,x,A,k,G,q,K)},s.render=function(g,x,b){var ne,se,Me,ue,He,ot,Mt,Dt,It,ft,wt,zt,A=this._time,k=this._dirty?this.totalDuration():this._tDur,G=this._dur,q=g<=0?0:cs(g),K=this._zTime<0!=g<0&&(this._initted||!G);if(this!==Pi&&q>k&&g>=0&&(q=k),q!==this._tTime||b||K){if(A!==this._time&&G&&(q+=this._time-A,g+=this._time-A),ne=q,It=this._start,ot=!(Dt=this._ts),K&&(G||(A=this._zTime),(g||!x)&&(this._zTime=g)),this._repeat){if(wt=this._yoyo,He=G+this._rDelay,this._repeat<-1&&g<0)return this.totalTime(100*He+g,x,b);if(ne=cs(q%He),q===k?(ue=this._repeat,ne=G):((ue=~~(q/He))&&ue===q/He&&(ne=G,ue--),ne>G&&(ne=G)),ft=zl(this._tTime,He),!A&&this._tTime&&ft!==ue&&(ft=ue),wt&&1&ue&&(ne=G-ne,zt=1),ue!==ft&&!this._lock){var Gt=wt&&1&ft,Nt=Gt===(wt&&1&ue);if(ue<ft&&(Gt=!Gt),A=Gt?0:G,this._lock=1,this.render(A||(zt?0:cs(ue*He)),x,!G)._lock=0,this._tTime=q,!x&&this.parent&&Fo(this,"onRepeat"),this.vars.repeatRefresh&&!zt&&(this.invalidate()._lock=1),A&&A!==this._time||ot!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(G=this._dur,k=this._tDur,Nt&&(this._lock=2,this.render(A=Gt?G:-1e-4,!0),this.vars.repeatRefresh&&!zt&&this.invalidate()),this._lock=0,!this._ts&&!ot)return this;td(this,zt)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(Mt=function(r,s,h){var g;if(h>s)for(g=r._first;g&&g._start<=h;){if("isPause"===g.data&&g._start>s)return g;g=g._next}else for(g=r._last;g&&g._start>=h;){if("isPause"===g.data&&g._start<s)return g;g=g._prev}}(this,cs(A),cs(ne)),Mt&&(q-=ne-(ne=Mt._start))),this._tTime=q,this._time=ne,this._act=!Dt,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=g,A=0),!A&&ne&&!x&&(Fo(this,"onStart"),this._tTime!==q))return this;if(ne>=A&&g>=0)for(se=this._first;se;){if(Me=se._next,(se._act||ne>=se._start)&&se._ts&&Mt!==se){if(se.parent!==this)return this.render(g,x,b);if(se.render(se._ts>0?(ne-se._start)*se._ts:(se._dirty?se.totalDuration():se._tDur)+(ne-se._start)*se._ts,x,b),ne!==this._time||!this._ts&&!ot){Mt=0,Me&&(q+=this._zTime=-$n);break}}se=Me}else{se=this._last;for(var ii=g<0?g:ne;se;){if(Me=se._prev,(se._act||ii<=se._end)&&se._ts&&Mt!==se){if(se.parent!==this)return this.render(g,x,b);if(se.render(se._ts>0?(ii-se._start)*se._ts:(se._dirty?se.totalDuration():se._tDur)+(ii-se._start)*se._ts,x,b),ne!==this._time||!this._ts&&!ot){Mt=0,Me&&(q+=this._zTime=ii?-$n:$n);break}}se=Me}}if(Mt&&!x&&(this.pause(),Mt.render(ne>=A?0:-$n)._zTime=ne>=A?1:-1,this._ts))return this._start=It,Um(this),this.render(g,x,b);this._onUpdate&&!x&&Fo(this,"onUpdate",!0),(q===k&&k>=this.totalDuration()||!q&&A)&&(It===this._start||Math.abs(Dt)!==Math.abs(this._ts))&&(this._lock||((g||!G)&&(q===k&&this._ts>0||!q&&this._ts<0)&&ba(this,1),!x&&(!(g<0)||A)&&(q||A||!k)&&(Fo(this,q===k&&g>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(q<k&&this.timeScale()>0)&&this._prom())))}return this},s.add=function(g,x){var b=this;if(ks(x)||(x=io(this,x,g)),!(g instanceof Bc)){if(Gr(g))return g.forEach(function(A){return b.add(A,x)}),this;if(Ni(g))return this.addLabel(g,x);if(!er(g))return this;g=nr.delayedCall(0,g)}return this!==g?Sa(this,g,x):this},s.getChildren=function(g,x,b,A){void 0===g&&(g=!0),void 0===x&&(x=!0),void 0===b&&(b=!0),void 0===A&&(A=-Us);for(var k=[],G=this._first;G;)G._start>=A&&(G instanceof nr?x&&k.push(G):(b&&k.push(G),g&&k.push.apply(k,G.getChildren(!0,x,b)))),G=G._next;return k},s.getById=function(g){for(var x=this.getChildren(1,1,1),b=x.length;b--;)if(x[b].vars.id===g)return x[b]},s.remove=function(g){return Ni(g)?this.removeLabel(g):er(g)?this.killTweensOf(g):(Dh(this,g),g===this._recent&&(this._recent=this._last),Ku(this))},s.totalTime=function(g,x){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=cs(ro.time-(this._ts>0?g/this._ts:(this.totalDuration()-g)/-this._ts))),u.prototype.totalTime.call(this,g,x),this._forcing=0,this):this._tTime},s.addLabel=function(g,x){return this.labels[g]=io(this,x),this},s.removeLabel=function(g){return delete this.labels[g],this},s.addPause=function(g,x,b){var A=nr.delayedCall(0,x||Xu,b);return A.data="isPause",this._hasPause=1,Sa(this,A,io(this,g))},s.removePause=function(g){var x=this._first;for(g=io(this,g);x;)x._start===g&&"isPause"===x.data&&ba(x),x=x._next},s.killTweensOf=function(g,x,b){for(var A=this.getTweensOf(g,b),k=A.length;k--;)$r!==A[k]&&A[k].kill(g,x);return this},s.getTweensOf=function(g,x){for(var q,b=[],A=Lo(g),k=this._first,G=ks(x);k;)k instanceof nr?dE(k._targets,A)&&(G?(!$r||k._initted&&k._ts)&&k.globalTime(0)<=x&&k.globalTime(k.totalDuration())>x:!x||k.isActive())&&b.push(k):(q=k.getTweensOf(A,x)).length&&b.push.apply(b,q),k=k._next;return b},s.tweenTo=function(g,x){x=x||{};var se,b=this,A=io(b,g),G=x.startAt,q=x.onStart,K=x.onStartParams,ne=x.immediateRender,Me=nr.to(b,no({ease:x.ease||"none",lazy:!1,immediateRender:!1,time:A,overwrite:"auto",duration:x.duration||Math.abs((A-(G&&"time"in G?G.time:b._time))/b.timeScale())||$n,onStart:function(){if(b.pause(),!se){var He=x.duration||Math.abs((A-(G&&"time"in G?G.time:b._time))/b.timeScale());Me._dur!==He&&Wl(Me,He,0,1).render(Me._time,!0,!0),se=1}q&&q.apply(Me,K||[])}},x));return ne?Me.render(0):Me},s.tweenFromTo=function(g,x,b){return this.tweenTo(x,no({startAt:{time:io(this,g)}},b))},s.recent=function(){return this._recent},s.nextLabel=function(g){return void 0===g&&(g=this._time),$_(this,io(this,g))},s.previousLabel=function(g){return void 0===g&&(g=this._time),$_(this,io(this,g),1)},s.currentLabel=function(g){return arguments.length?this.seek(g,!0):this.previousLabel(this._time+$n)},s.shiftChildren=function(g,x,b){void 0===b&&(b=0);for(var G,A=this._first,k=this.labels;A;)A._start>=b&&(A._start+=g,A._end+=g),A=A._next;if(x)for(G in k)k[G]>=b&&(k[G]+=g);return Ku(this)},s.invalidate=function(){var g=this._first;for(this._lock=0;g;)g.invalidate(),g=g._next;return u.prototype.invalidate.call(this)},s.clear=function(g){void 0===g&&(g=!0);for(var b,x=this._first;x;)b=x._next,this.remove(x),x=b;return this._dp&&(this._time=this._tTime=this._pTime=0),g&&(this.labels={}),Ku(this)},s.totalDuration=function(g){var G,q,K,x=0,b=this,A=b._last,k=Us;if(arguments.length)return b.timeScale((b._repeat<0?b.duration():b.totalDuration())/(b.reversed()?-g:g));if(b._dirty){for(K=b.parent;A;)G=A._prev,A._dirty&&A.totalDuration(),(q=A._start)>k&&b._sort&&A._ts&&!b._lock?(b._lock=1,Sa(b,A,q-A._delay,1)._lock=0):k=q,q<0&&A._ts&&(x-=q,(!K&&!b._dp||K&&K.smoothChildTiming)&&(b._start+=q/b._ts,b._time-=q,b._tTime-=q),b.shiftChildren(-q,!1,-1/0),k=0),A._end>x&&A._ts&&(x=A._end),A=G;Wl(b,b===Pi&&b._time>x?b._time:x,1,1),b._dirty=0}return b._tDur},r.updateRoot=function(g){if(Pi._ts&&(N_(Pi,Zu(g,Pi)),L_=ro.frame),ro.frame>=F_){F_+=Ir.autoSleep||120;var x=Pi._first;if((!x||!x._ts)&&Ir.autoSleep&&ro._listeners.length<2){for(;x&&!x._ts;)x=x._next;x||ro.sleep()}}},r}(Bc);no(jr.prototype,{_lock:0,_hasPause:0,_forcing:0});var $r,Kv=function(r,s,h,g,x,b,A){var K,ne,se,Me,ue,He,ot,Mt,k=new qr(this._pt,r,s,0,1,Y_,null,x),G=0,q=0;for(k.b=h,k.e=g,h+="",(ot=~(g+="").indexOf("random("))&&(g=ep(g)),b&&(b(Mt=[h,g],r,s),h=Mt[0],g=Mt[1]),ne=h.match(D_)||[];K=D_.exec(g);)Me=K[0],ue=g.substring(G,K.index),se?se=(se+1)%5:"rgba("===ue.substr(-5)&&(se=1),Me!==ne[q++]&&(He=parseFloat(ne[q-1])||0,k._pt={_next:k._pt,p:ue||1===q?ue:",",s:He,c:"="===Me.charAt(1)?parseFloat(Me.substr(2))*("-"===Me.charAt(0)?-1:1):parseFloat(Me)-He,m:se&&se<4?Math.round:0},G=D_.lastIndex);return k.c=G<g.length?g.substring(G,g.length):"",k.fp=A,(Fm.test(g)||ot)&&(k.e=0),this._pt=k,k},jl=function(r,s,h,g,x,b,A,k,G){er(g)&&(g=g(x||0,r,b));var se,q=r[s],K="get"!==h?h:er(q)?G?r[s.indexOf("set")||!er(r["get"+s.substr(3)])?s:"get"+s.substr(3)](G):r[s]():q,ne=er(q)?G?jm:Lh:nd;if(Ni(g)&&(~g.indexOf("random(")&&(g=ep(g)),"="===g.charAt(1)&&((se=parseFloat(K)+parseFloat(g.substr(2))*("-"===g.charAt(0)?-1:1)+(xs(K)||0))||0===se)&&(g=se)),K!==g)return isNaN(K*g)||""===g?(!q&&!(s in r)&&O_(s,g),Kv.call(this,r,s,K,g,ne,k||Ir.stringFilter,G)):(se=new qr(this._pt,r,s,+K||0,g-(K||0),"boolean"==typeof q?qm:$m,0,ne),G&&(se.fp=G),A&&se.modifier(A,this,r),this._pt=se)},$l=function(r,s,h,g,x,b){var A,k,G,q;if(Vs[r]&&!1!==(A=new Vs[r]).init(x,A.rawVars?s[r]:function(r,s,h,g,x){if(er(r)&&(r=ol(r,x,s,h,g)),!xa(r)||r.style&&r.nodeType||Gr(r)||A_(r))return Ni(r)?ol(r,x,s,h,g):r;var A,b={};for(A in r)b[A]=ol(r[A],x,s,h,g);return b}(s[r],g,x,b,h),h,g,b)&&(h._pt=k=new qr(h._pt,x,r,0,1,A.render,A,0,A.priority),h!==Fc))for(G=h._ptLookup[h._targets.indexOf(x)],q=A._props.length;q--;)G[A._props[q]]=k;return A},so=function u(r,s){var wt,zt,Gt,Nt,ii,ki,Nr,yr,Vi,Sr,sr,Ks,Cf,h=r.vars,g=h.ease,x=h.startAt,b=h.immediateRender,A=h.lazy,k=h.onUpdate,G=h.onUpdateParams,q=h.callbackScope,K=h.runBackwards,ne=h.yoyoEase,se=h.keyframes,Me=h.autoRevert,ue=r._dur,He=r._startAt,ot=r._targets,Mt=r.parent,Dt=Mt&&"nested"===Mt.data?Mt.parent._targets:ot,It="auto"===r._overwrite&&!ji,ft=r.timeline;if(ft&&(!se||!g)&&(g="none"),r._ease=on(g,Ea.ease),r._yEase=ne?Yv(on(!0===ne?g:ne,Ea.ease)):0,ne&&r._yoyo&&!r._repeat&&(ne=r._yEase,r._yEase=r._ease,r._ease=ne),r._from=!ft&&!!h.runBackwards,!ft||se&&!h.stagger){if(Ks=(yr=ot[0]?Lc(ot[0]).harness:0)&&h[yr.prop],wt=Th(h,Xf),He&&ba(He.render(-1,!0)),x)if(ba(r._startAt=nr.set(ot,no({data:"isStart",overwrite:!1,parent:Mt,immediateRender:!0,lazy:Hr(A),startAt:null,delay:0,onUpdate:k,onUpdateParams:G,callbackScope:q,stagger:0},x))),s<0&&!b&&!Me&&r._startAt.render(-1,!0),b){if(s>0&&!Me&&(r._startAt=0),ue&&s<=0)return void(s&&(r._zTime=s))}else!1===Me&&(r._startAt=0);else if(K&&ue)if(He)!Me&&(r._startAt=0);else if(s&&(b=!1),Gt=no({overwrite:!1,data:"isFromStart",lazy:b&&Hr(A),immediateRender:b,stagger:0,parent:Mt},wt),Ks&&(Gt[yr.prop]=Ks),ba(r._startAt=nr.set(ot,Gt)),s<0&&r._startAt.render(-1,!0),r._zTime=s,b){if(!s)return}else u(r._startAt,$n);for(r._pt=0,A=ue&&Hr(A)||A&&!ue,zt=0;zt<ot.length;zt++){if(Nr=(ii=ot[zt])._gsap||Oc(ot)[zt]._gsap,r._ptLookup[zt]=Sr={},Yf[Nr.id]&&sl.length&&Sh(),sr=Dt===ot?zt:Dt.indexOf(ii),yr&&!1!==(Vi=new yr).init(ii,Ks||wt,r,sr,Dt)&&(r._pt=Nt=new qr(r._pt,ii,Vi.name,0,1,Vi.render,Vi,0,Vi.priority),Vi._props.forEach(function(Tf){Sr[Tf]=Nt}),Vi.priority&&(ki=1)),!yr||Ks)for(Gt in wt)Vs[Gt]&&(Vi=$l(Gt,wt,r,sr,ii,Dt))?Vi.priority&&(ki=1):Sr[Gt]=Nt=jl.call(r,ii,Gt,"get",wt[Gt],sr,Dt,0,h.stringFilter);r._op&&r._op[zt]&&r.kill(ii,r._op[zt]),It&&r._pt&&($r=r,Pi.killTweensOf(ii,Sr,r.globalTime(s)),Cf=!r.parent,$r=0),r._pt&&A&&(Yf[Nr.id]=1)}ki&&Xm(r),r._onInit&&r._onInit(r)}r._onUpdate=k,r._initted=(!r._op||r._pt)&&!Cf,se&&s<=0&&ft.render(Us,!0,!0)},Wm=function(r,s,h,g){var b,A,x=s.ease||g||"power1.inOut";if(Gr(s))A=h[r]||(h[r]=[]),s.forEach(function(k,G){return A.push({t:G/(s.length-1)*100,v:k,e:x})});else for(b in s)A=h[b]||(h[b]=[]),"ease"===b||A.push({t:parseFloat(r),v:s[b],e:x})},ol=function(r,s,h,g,x){return er(r)?r.call(s,h,g,x):Ni(r)&&~r.indexOf("random(")?ep(r):r},al=wa+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase",ql={};Hs(al+",id,stagger,delay,duration,paused,scrollTrigger",function(u){return ql[u]=1});var nr=function(u){function r(h,g,x,b){var A;"number"==typeof g&&(x.duration=g,g=x,x=null);var It,ft,wt,zt,Gt,Nt,ii,ki,k=(A=u.call(this,b?g:Es(g))||this).vars,G=k.duration,q=k.delay,K=k.immediateRender,ne=k.stagger,se=k.overwrite,Me=k.keyframes,ue=k.defaults,He=k.scrollTrigger,ot=k.yoyoEase,Mt=g.parent||Pi,Dt=(Gr(h)||A_(h)?ks(h[0]):"length"in g)?[h]:Lo(h);if(A._targets=Dt.length?Oc(Dt):Ic("GSAP target "+h+" not found. https://greensock.com",!Ir.nullTargetWarn)||[],A._ptLookup=[],A._overwrite=se,Me||ne||bh(G)||bh(q)){if(g=A.vars,(It=A.timeline=new jr({data:"nested",defaults:ue||{}})).kill(),It.parent=It._dp=wr(A),It._start=0,ne||bh(G)||bh(q)){if(zt=Dt.length,ii=ne&&zr(ne),xa(ne))for(Gt in ne)~al.indexOf(Gt)&&(ki||(ki={}),ki[Gt]=ne[Gt]);for(ft=0;ft<zt;ft++)(wt=Th(g,ql)).stagger=0,ot&&(wt.yoyoEase=ot),ki&&Yu(wt,ki),Nt=Dt[ft],wt.duration=+ol(G,wr(A),ft,Nt,Dt),wt.delay=(+ol(q,wr(A),ft,Nt,Dt)||0)-A._delay,!ne&&1===zt&&wt.delay&&(A._delay=q=wt.delay,A._start+=q,wt.delay=0),It.to(Nt,wt,ii?ii(ft,Nt,Dt):0),It._ease=zn.none;It.duration()?G=q=0:A.timeline=0}else if(Me){Es(no(It.vars.defaults,{ease:"none"})),It._ease=on(Me.ease||g.ease||"none");var yr,Vi,Sr,Nr=0;if(Gr(Me))Me.forEach(function(sr){return It.to(Dt,sr,">")});else{for(Gt in wt={},Me)"ease"===Gt||"easeEach"===Gt||Wm(Gt,Me[Gt],wt,Me.easeEach);for(Gt in wt)for(yr=wt[Gt].sort(function(sr,Ks){return sr.t-Ks.t}),Nr=0,ft=0;ft<yr.length;ft++)(Sr={ease:(Vi=yr[ft]).e,duration:(Vi.t-(ft?yr[ft-1].t:0))/100*G})[Gt]=Vi.v,It.to(Dt,Sr,Nr),Nr+=Sr.duration;It.duration()<G&&It.to({},{duration:G-It.duration()})}}G||A.duration(G=It.duration())}else A.timeline=0;return!0===se&&!ji&&($r=wr(A),Pi.killTweensOf(Dt),$r=0),Sa(Mt,wr(A),x),g.reversed&&A.reverse(),g.paused&&A.paused(!0),(K||!G&&!Me&&A._start===cs(Mt._time)&&Hr(K)&&pE(wr(A))&&"nested"!==Mt.data)&&(A._tTime=-$n,A.render(Math.max(0,-q))),He&&V_(wr(A),He),A}Oo(r,u);var s=r.prototype;return s.render=function(g,x,b){var K,ne,se,Me,ue,He,ot,Mt,Dt,A=this._time,k=this._tDur,G=this._dur,q=g>k-$n&&g>=0?k:g<$n?0:g;if(G){if(q!==this._tTime||!g||b||!this._initted&&this._tTime||this._startAt&&this._zTime<0!=g<0){if(K=q,Mt=this.timeline,this._repeat){if(Me=G+this._rDelay,this._repeat<-1&&g<0)return this.totalTime(100*Me+g,x,b);if(K=cs(q%Me),q===k?(se=this._repeat,K=G):((se=~~(q/Me))&&se===q/Me&&(K=G,se--),K>G&&(K=G)),(He=this._yoyo&&1&se)&&(Dt=this._yEase,K=G-K),ue=zl(this._tTime,Me),K===A&&!b&&this._initted)return this;se!==ue&&(Mt&&this._yEase&&td(Mt,He),this.vars.repeatRefresh&&!He&&!this._lock&&(this._lock=b=1,this.render(cs(Me*se),!0).invalidate()._lock=0))}if(!this._initted){if(H_(this,g<0?g:K,b,x))return this._tTime=0,this;if(G!==this._dur)return this.render(g,x,b)}if(this._tTime=q,this._time=K,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=ot=(Dt||this._ease)(K/G),this._from&&(this.ratio=ot=1-ot),K&&!A&&!x&&(Fo(this,"onStart"),this._tTime!==q))return this;for(ne=this._pt;ne;)ne.r(ot,ne.d),ne=ne._next;Mt&&Mt.render(g<0?g:!K&&He?-$n:Mt._dur*Mt._ease(K/this._dur),x,b)||this._startAt&&(this._zTime=g),this._onUpdate&&!x&&(g<0&&this._startAt&&this._startAt.render(g,!0,b),Fo(this,"onUpdate")),this._repeat&&se!==ue&&this.vars.onRepeat&&!x&&this.parent&&Fo(this,"onRepeat"),(q===this._tDur||!q)&&this._tTime===q&&(g<0&&this._startAt&&!this._onUpdate&&this._startAt.render(g,!0,!0),(g||!G)&&(q===this._tDur&&this._ts>0||!q&&this._ts<0)&&ba(this,1),!x&&(!(g<0)||A)&&(q||A)&&(Fo(this,q===k?"onComplete":"onReverseComplete",!0),this._prom&&!(q<k&&this.timeScale()>0)&&this._prom()))}}else!function(r,s,h,g){var G,q,K,x=r.ratio,b=s<0||!s&&(!r._start&&Vv(r)&&(r._initted||!Jf(r))||(r._ts<0||r._dp._ts<0)&&!Jf(r))?0:1,A=r._rDelay,k=0;if(A&&r._repeat&&(k=Ju(0,r._tDur,s),q=zl(k,A),r._yoyo&&1&q&&(b=1-b),q!==zl(r._tTime,A)&&(x=1-b,r.vars.repeatRefresh&&r._initted&&r.invalidate())),b!==x||g||r._zTime===$n||!s&&r._zTime){if(!r._initted&&H_(r,s,g,h))return;for(K=r._zTime,r._zTime=s||(h?$n:0),h||(h=s&&!K),r.ratio=b,r._from&&(b=1-b),r._time=0,r._tTime=k,G=r._pt;G;)G.r(b,G.d),G=G._next;r._startAt&&s<0&&r._startAt.render(s,!0,!0),r._onUpdate&&!h&&Fo(r,"onUpdate"),k&&r._repeat&&!h&&r.parent&&Fo(r,"onRepeat"),(s>=r._tDur||s<0)&&r.ratio===b&&(b&&ba(r,1),h||(Fo(r,b?"onComplete":"onReverseComplete",!0),r._prom&&r._prom()))}else r._zTime||(r._zTime=s)}(this,g,x,b);return this},s.targets=function(){return this._targets},s.invalidate=function(){return this._pt=this._op=this._startAt=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(),u.prototype.invalidate.call(this)},s.kill=function(g,x){if(void 0===x&&(x="all"),!(g||x&&"all"!==x))return this._lazy=this._pt=0,this.parent?tp(this):this;if(this.timeline){var b=this.timeline.totalDuration();return this.timeline.killTweensOf(g,x,$r&&!0!==$r.vars.overwrite)._first||tp(this),this.parent&&b!==this.timeline.totalDuration()&&Wl(this,this._dur*this.timeline._tDur/b,0,1),this}var K,ne,se,Me,ue,He,ot,A=this._targets,k=g?Lo(g):A,G=this._ptLookup,q=this._pt;if((!x||"all"===x)&&function(r,s){for(var h=r.length,g=h===s.length;g&&h--&&r[h]===s[h];);return h<0}(A,k))return"all"===x&&(this._pt=0),tp(this);for(K=this._op=this._op||[],"all"!==x&&(Ni(x)&&(ue={},Hs(x,function(Mt){return ue[Mt]=1}),x=ue),x=function(r,s){var x,b,A,k,h=r[0]?Lc(r[0]).harness:0,g=h&&h.aliases;if(!g)return s;for(b in x=Yu({},s),g)if(b in x)for(A=(k=g[b].split(",")).length;A--;)x[k[A]]=x[b];return x}(A,x)),ot=A.length;ot--;)if(~k.indexOf(A[ot]))for(ue in ne=G[ot],"all"===x?(K[ot]=x,Me=ne,se={}):(se=K[ot]=K[ot]||{},Me=x),Me)(He=ne&&ne[ue])&&((!("kill"in He.d)||!0===He.d.kill(ue))&&Dh(this,He,"_pt"),delete ne[ue]),"all"!==se&&(se[ue]=1);return this._initted&&!this._pt&&q&&tp(this),this},r.to=function(g,x){return new r(g,x,arguments[2])},r.from=function(g,x){return Rh(1,arguments)},r.delayedCall=function(g,x,b,A){return new r(x,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:g,onComplete:x,onReverseComplete:x,onCompleteParams:b,onReverseCompleteParams:b,callbackScope:A})},r.fromTo=function(g,x,b){return Rh(2,arguments)},r.set=function(g,x){return x.duration=0,x.repeatDelay||(x.repeat=0),new r(g,x)},r.killTweensOf=function(g,x,b){return Pi.killTweensOf(g,x,b)},r}(Bc);no(nr.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),Hs("staggerTo,staggerFrom,staggerFromTo",function(u){nr[u]=function(){var r=new jr,s=Vm.call(arguments,0);return s.splice("staggerFromTo"===u?5:4,0,0),r[u].apply(r,s)}});var nd=function(r,s,h){return r[s]=h},Lh=function(r,s,h){return r[s](h)},jm=function(r,s,h,g){return r[s](g.fp,h)},Uc=function(r,s,h){return r.setAttribute(s,h)},Xl=function(r,s){return er(r[s])?Lh:Lm(r[s])&&r.setAttribute?Uc:nd},$m=function(r,s){return s.set(s.t,s.p,Math.round(1e6*(s.s+s.c*r))/1e6,s)},qm=function(r,s){return s.set(s.t,s.p,!!(s.s+s.c*r),s)},Y_=function(r,s){var h=s._pt,g="";if(!r&&s.b)g=s.b;else if(1===r&&s.e)g=s.e;else{for(;h;)g=h.p+(h.m?h.m(h.s+h.c*r):Math.round(1e4*(h.s+h.c*r))/1e4)+g,h=h._next;g+=s.c}s.set(s.t,s.p,g,s)},Fh=function(r,s){for(var h=s._pt;h;)h.r(r,h.d),h=h._next},id=function(r,s,h,g){for(var b,x=this._pt;x;)b=x._next,x.p===g&&x.modifier(r,s,h),x=b},K_=function(r){for(var h,g,s=this._pt;s;)g=s._next,s.p===r&&!s.op||s.op===r?Dh(this,s,"_pt"):s.dep||(h=1),s=g;return!h},sp=function(r,s,h,g){g.mSet(r,s,g.m.call(g.tween,h,g.mt),g)},Xm=function(r){for(var h,g,x,b,s=r._pt;s;){for(h=s._next,g=x;g&&g.pr>s.pr;)g=g._next;(s._prev=g?g._prev:b)?s._prev._next=s:x=s,(s._next=g)?g._prev=s:b=s,s=h}r._pt=x},qr=function(){function u(s,h,g,x,b,A,k,G,q){this.t=h,this.s=x,this.c=b,this.p=g,this.r=A||$m,this.d=k||this,this.set=G||nd,this.pr=q||0,this._next=s,s&&(s._prev=this)}return u.prototype.modifier=function(h,g,x){this.mSet=this.mSet||this.set,this.set=sp,this.m=h,this.mt=x,this.tween=g},u}();Hs(wa+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(u){return Xf[u]=1}),ls.TweenMax=ls.TweenLite=nr,ls.TimelineLite=ls.TimelineMax=jr,Pi=new jr({sortChildren:!1,defaults:Ea,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),Ir.stringFilter=Xv;var Nh={registerPlugin:function(){for(var r=arguments.length,s=new Array(r),h=0;h<r;h++)s[h]=arguments[h];s.forEach(function(g){return yE(g)})},timeline:function(r){return new jr(r)},getTweensOf:function(r,s){return Pi.getTweensOf(r,s)},getProperty:function(r,s,h,g){Ni(r)&&(r=Lo(r)[0]);var x=Lc(r||{}).get,b=h?U_:B_;return"native"===h&&(h=""),r&&(s?b((Vs[s]&&Vs[s].get||x)(r,s,h,g)):function(A,k,G){return b((Vs[A]&&Vs[A].get||x)(r,A,k,G))})},quickSetter:function(r,s,h){if((r=Lo(r)).length>1){var g=r.map(function(q){return Uo.quickSetter(q,s,h)}),x=g.length;return function(q){for(var K=x;K--;)g[K](q)}}var b=Vs[s],A=Lc(r=r[0]||{}),k=A.harness&&(A.harness.aliases||{})[s]||s,G=b?function(q){var K=new b;Fc._pt=0,K.init(r,h?q+h:q,Fc,0,[r]),K.render(1,K),Fc._pt&&Fh(1,Fc)}:A.set(r,k);return b?G:function(q){return G(r,k,h?q+h:q,A,1)}},isTweening:function(r){return Pi.getTweensOf(r,!0).length>0},defaults:function(r){return r&&r.ease&&(r.ease=on(r.ease,Ea.ease)),Ch(Ea,r||{})},config:function(r){return Ch(Ir,r||{})},registerEffect:function(r){var s=r.name,h=r.effect,x=r.defaults,b=r.extendTimeline;(r.plugins||"").split(",").forEach(function(A){return A&&!Vs[A]&&!ls[A]&&Ic(s+" effect requires "+A+" plugin.")}),Bm[s]=function(A,k,G){return h(Lo(A),no(k||{},x),G)},b&&(jr.prototype[s]=function(A,k,G){return this.add(Bm[s](A,xa(k)?k:(G=k)&&{},this),G)})},registerEase:function(r,s){zn[r]=on(s)},parseEase:function(r,s){return arguments.length?on(r,s):zn},getById:function(r){return Pi.getById(r)},exportRoot:function(r,s){void 0===r&&(r={});var g,x,h=new jr(r);for(h.smoothChildTiming=Hr(r.smoothChildTiming),Pi.remove(h),h._dp=0,h._time=h._tTime=Pi._time,g=Pi._first;g;)x=g._next,(s||!(!g._dur&&g instanceof nr&&g.vars.onComplete===g._targets[0]))&&Sa(h,g,g._start-g._delay),g=x;return Sa(Pi,h,0),h},utils:{wrap:function u(r,s,h){var g=s-r;return Gr(r)?Wv(r,u(0,r.length),s):Ca(h,function(x){return(g+(x-r)%g)%g+r})},wrapYoyo:function u(r,s,h){var g=s-r,x=2*g;return Gr(r)?Wv(r,u(0,r.length-1),s):Ca(h,function(b){return r+((b=(x+(b-r)%x)%x||0)>g?x-b:b)})},distribute:zr,random:Gm,snap:Hm,normalize:function(r,s,h){return j_(r,s,0,1,h)},getUnit:xs,clamp:function(r,s,h){return Ca(h,function(g){return Ju(r,s,g)})},splitColor:$v,toArray:Lo,selector:function(r){return r=Lo(r)[0]||Ic("Invalid scope")||{},function(s){var h=r.current||r.nativeElement||r;return Lo(s,h.querySelectorAll?h:h===r?Ic("Invalid scope")||qu.createElement("div"):r)}},mapRange:j_,pipe:function(){for(var r=arguments.length,s=new Array(r),h=0;h<r;h++)s[h]=arguments[h];return function(g){return s.reduce(function(x,b){return b(x)},g)}},unitize:function(r,s){return function(h){return r(parseFloat(h))+(s||xs(h))}},interpolate:function u(r,s,h,g){var x=isNaN(r+s)?0:function(se){return(1-se)*r+se*s};if(!x){var k,G,q,K,ne,b=Ni(r),A={};if(!0===h&&(g=1)&&(h=null),b)r={p:r},s={p:s};else if(Gr(r)&&!Gr(s)){for(q=[],ne=(K=r.length)-2,G=1;G<K;G++)q.push(u(r[G-1],r[G]));K--,x=function(Me){Me*=K;var ue=Math.min(ne,~~Me);return q[ue](Me-ue)},h=s}else g||(r=Yu(Gr(r)?[]:{},r));if(!q){for(k in s)jl.call(A,r,k,"get",s[k]);x=function(Me){return Fh(Me,A)||(b?r.p:r)}}}return Ca(h,x)},shuffle:Qu},install:I_,effects:Bm,ticker:ro,updateRoot:jr.updateRoot,plugins:Vs,globalTimeline:Pi,core:{PropTween:qr,globals:qf,Tween:nr,Timeline:jr,Animation:Bc,getCache:Lc,_removeLinkedListItem:Dh,suppressOverwrites:function(r){return ji=r}}};Hs("to,from,fromTo,delayedCall,set,killTweensOf",function(u){return Nh[u]=nr[u]}),ro.add(jr.updateRoot),Fc=Nh.to({},{duration:0});var Z_=function(r,s){for(var h=r._pt;h&&h.p!==s&&h.op!==s&&h.fp!==s;)h=h._next;return h},op=function(r,s){return{name:r,rawVars:1,init:function(g,x,b){b._onInit=function(A){var k,G;if(Ni(x)&&(k={},Hs(x,function(q){return k[q]=1}),x=k),s){for(G in k={},x)k[G]=s(x[G]);x=k}!function(r,s){var g,x,b,h=r._targets;for(g in s)for(x=h.length;x--;)(b=r._ptLookup[x][g])&&(b=b.d)&&(b._pt&&(b=Z_(b,g)),b&&b.modifier&&b.modifier(s[g],r,h[x],g))}(A,x)}}}},Uo=Nh.registerPlugin({name:"attr",init:function(r,s,h,g,x){var b,A;for(b in s)(A=this.add(r,"setAttribute",(r.getAttribute(b)||0)+"",s[b],g,x,0,0,b))&&(A.op=b),this._props.push(b)}},{name:"endArray",init:function(r,s){for(var h=s.length;h--;)this.add(r,h,r[h]||0,s[h])}},op("roundProps",Ph),op("modifiers"),op("snap",Hm))||Nh;nr.version=jr.version=Uo.version="3.9.1",P_=1,wh()&&Oh();var Or,oo,Yl,up,sd,iy,hp,Kl={},Vc=180/Math.PI,Xr=Math.PI/180,od=Math.atan2,Qm=1e8,sy=/([A-Z])/g,e0=/(?:left|right|width|margin|padding|x)/i,t0=/[\s,\(]\S/,Zl={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},eg=function(r,s){return s.set(s.t,s.p,Math.round(1e4*(s.s+s.c*r))/1e4+s.u,s)},n0=function(r,s){return s.set(s.t,s.p,1===r?s.e:Math.round(1e4*(s.s+s.c*r))/1e4+s.u,s)},r0=function(r,s){return s.set(s.t,s.p,r?Math.round(1e4*(s.s+s.c*r))/1e4+s.u:s.b,s)},s0=function(r,s){var h=s.s+s.c*r;s.set(s.t,s.p,~~(h+(h<0?-.5:.5))+s.u,s)},Mn=function(r,s){return s.set(s.t,s.p,r?s.e:s.b,s)},tg=function(r,s){return s.set(s.t,s.p,1!==r?s.b:s.e,s)},oy=function(r,s,h){return r.style[s]=h},ay=function(r,s,h){return r.style.setProperty(s,h)},dp=function(r,s,h){return r._gsap[s]=h},ko=function(r,s,h){return r._gsap.scaleX=r._gsap.scaleY=h},ly=function(r,s,h,g,x){var b=r._gsap;b.scaleX=b.scaleY=h,b.renderTransform(x,b)},o0=function(r,s,h,g,x){var b=r._gsap;b[s]=h,b.renderTransform(x,b)},gr="transform",Yr=gr+"Origin",fp=function(r,s){var h=oo.createElementNS?oo.createElementNS((s||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),r):oo.createElement(r);return h.style?h:oo.createElement(r)},Vo=function u(r,s,h){var g=getComputedStyle(r);return g[s]||g.getPropertyValue(s.replace(sy,"-$1").toLowerCase())||g.getPropertyValue(s)||!h&&u(r,Hc(s)||s,1)||""},a0="O,Moz,ms,Ms,Webkit".split(","),Hc=function(r,s,h){var x=(s||sd).style,b=5;if(r in x&&!h)return r;for(r=r.charAt(0).toUpperCase()+r.substr(1);b--&&!(a0[b]+r in x););return b<0?null:(3===b?"ms":b>=0?a0[b]:"")+r},cy=function(){"undefined"!=typeof window&&window.document&&(Or=window,Yl=(oo=Or.document).documentElement,sd=fp("div")||{style:{}},fp("div"),gr=Hc(gr),Yr=gr+"Origin",sd.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",hp=!!Hc("perspective"),up=1)},ad=function u(r){var b,s=fp("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),h=this.parentNode,g=this.nextSibling,x=this.style.cssText;if(Yl.appendChild(s),s.appendChild(this),this.style.display="block",r)try{b=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=u}catch{}else this._gsapBBox&&(b=this._gsapBBox());return h&&(g?h.insertBefore(this,g):h.appendChild(this)),Yl.removeChild(s),this.style.cssText=x,b},Uh=function(r,s){for(var h=s.length;h--;)if(r.hasAttribute(s[h]))return r.getAttribute(s[h])},pp=function(r){var s;try{s=r.getBBox()}catch{s=ad.call(r,!0)}return s&&(s.width||s.height)||r.getBBox===ad||(s=ad.call(r,!0)),!s||s.width||s.x||s.y?s:{x:+Uh(r,["x","cx","x1"])||0,y:+Uh(r,["y","cy","y1"])||0,width:0,height:0}},mp=function(r){return!(!r.getCTM||r.parentNode&&!r.ownerSVGElement||!pp(r))},Gc=function(r,s){if(s){var h=r.style;s in Kl&&s!==Yr&&(s=gr),h.removeProperty?(("ms"===s.substr(0,2)||"webkit"===s.substr(0,6))&&(s="-"+s),h.removeProperty(s.replace(sy,"-$1").toLowerCase())):h.removeAttribute(s)}},zc=function(r,s,h,g,x,b){var A=new qr(r._pt,s,h,0,1,b?tg:Mn);return r._pt=A,A.b=g,A.e=x,r._props.push(h),A},ng={deg:1,rad:1,turn:1},ll=function u(r,s,h,g){var Me,ue,He,ot,x=parseFloat(h)||0,b=(h+"").trim().substr((x+"").length)||"px",A=sd.style,k=e0.test(s),G="svg"===r.tagName.toLowerCase(),q=(G?"client":"offset")+(k?"Width":"Height"),K=100,ne="px"===g,se="%"===g;return g===b||!x||ng[g]||ng[b]?x:("px"!==b&&!ne&&(x=u(r,s,h,"px")),ot=r.getCTM&&mp(r),!se&&"%"!==b||!Kl[s]&&!~s.indexOf("adius")?(A[k?"width":"height"]=K+(ne?b:g),ue=~s.indexOf("adius")||"em"===g&&r.appendChild&&!G?r:r.parentNode,ot&&(ue=(r.ownerSVGElement||{}).parentNode),(!ue||ue===oo||!ue.appendChild)&&(ue=oo.body),(He=ue._gsap)&&se&&He.width&&k&&He.time===ro.time?mr(x/He.width*K):((se||"%"===b)&&(A.position=Vo(r,"position")),ue===r&&(A.position="static"),ue.appendChild(sd),Me=sd[q],ue.removeChild(sd),A.position="absolute",k&&se&&((He=Lc(ue)).time=ro.time,He.width=ue[q]),mr(ne?Me*x/K:Me&&x?K/Me*x:0))):(Me=ot?r.getBBox()[k?"width":"height"]:r[q],mr(se?x/Me*K:x/100*Me)))},cl=function(r,s,h,g){var x;return up||cy(),s in Zl&&"transform"!==s&&~(s=Zl[s]).indexOf(",")&&(s=s.split(",")[0]),Kl[s]&&"transform"!==s?(x=_p(r,g),x="transformOrigin"!==s?x[s]:x.svg?x.origin:ag(Vo(r,Yr))+" "+x.zOrigin+"px"):(!(x=r.style[s])||"auto"===x||g||~(x+"").indexOf("calc("))&&(x=rg[s]&&rg[s](r,s,h)||Vo(r,s)||Uv(r,s)||("opacity"===s?1:0)),h&&!~(x+"").trim().indexOf(" ")?ll(r,s,x,h)+h:x},uy=function(r,s,h,g){if(!h||"none"===h){var x=Hc(s,r,1),b=x&&Vo(r,x,1);b&&b!==h?(s=x,h=b):"borderColor"===s&&(h=Vo(r,"borderTopColor"))}var q,K,ne,se,Me,ue,He,ot,Mt,Dt,It,ft,A=new qr(this._pt,r.style,s,0,1,Y_),k=0,G=0;if(A.b=h,A.e=g,h+="","auto"==(g+="")&&(r.style[s]=g,g=Vo(r,s)||g,r.style[s]=h),Xv(q=[h,g]),g=q[1],ne=(h=q[0]).match($u)||[],(g.match($u)||[]).length){for(;K=$u.exec(g);)He=K[0],Mt=g.substring(k,K.index),Me?Me=(Me+1)%5:("rgba("===Mt.substr(-5)||"hsla("===Mt.substr(-5))&&(Me=1),He!==(ue=ne[G++]||"")&&(se=parseFloat(ue)||0,It=ue.substr((se+"").length),(ft="="===He.charAt(1)?+(He.charAt(0)+"1"):0)&&(He=He.substr(2)),ot=parseFloat(He),Dt=He.substr((ot+"").length),k=$u.lastIndex-Dt.length,Dt||(Dt=Dt||Ir.units[s]||It,k===g.length&&(g+=Dt,A.e+=Dt)),It!==Dt&&(se=ll(r,s,ue,Dt)||0),A._pt={_next:A._pt,p:Mt||1===G?Mt:",",s:se,c:ft?ft*ot:ot-se,m:Me&&Me<4||"zIndex"===s?Math.round:0});A.c=k<g.length?g.substring(k,g.length):""}else A.r="display"===s&&"none"===g?tg:Mn;return Fm.test(g)&&(A.e=0),this._pt=A,A},ig={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},Wc=function(r){var s=r.split(" "),h=s[0],g=s[1]||"50%";return("top"===h||"bottom"===h||"left"===g||"right"===g)&&(r=h,h=g,g=r),s[0]=ig[h]||h,s[1]=ig[g]||g,s.join(" ")},dy=function(r,s){if(s.tween&&s.tween._time===s.tween._dur){var A,k,G,h=s.t,x=s.u,b=h._gsap;if("all"===x||!0===x)h.style.cssText="",k=1;else for(G=(x=x.split(",")).length;--G>-1;)Kl[A=x[G]]&&(k=1,A="transformOrigin"===A?Yr:gr),Gc(h,A);k&&(Gc(h,gr),b&&(b.svg&&h.removeAttribute("transform"),_p(h,1),b.uncache=1))}},rg={clearProps:function(r,s,h,g,x){if("isFromStart"!==x.data){var b=r._pt=new qr(r._pt,s,h,0,0,dy);return b.u=g,b.pr=-10,b.tween=x,r._props.push(h),1}}},ld=[1,0,0,1,0,0],sg={},og=function(r){return"matrix(1, 0, 0, 1, 0, 0)"===r||"none"===r||!r},gp=function(r){var s=Vo(r,gr);return og(s)?ld:s.substr(7).match(ju).map(mr)},hy=function(r,s){var b,A,k,G,h=r._gsap||Lc(r),g=r.style,x=gp(r);return h.svg&&r.getAttribute("transform")?"1,0,0,1,0,0"===(x=[(k=r.transform.baseVal.consolidate().matrix).a,k.b,k.c,k.d,k.e,k.f]).join(",")?ld:x:(x===ld&&!r.offsetParent&&r!==Yl&&!h.svg&&(k=g.display,g.display="block",(!(b=r.parentNode)||!r.offsetParent)&&(G=1,A=r.nextSibling,Yl.appendChild(r)),x=gp(r),k?g.display=k:Gc(r,"display"),G&&(A?b.insertBefore(r,A):b?b.appendChild(r):Yl.removeChild(r))),s&&x.length>6?[x[0],x[1],x[4],x[5],x[12],x[13]]:x)},fy=function(r,s,h,g,x,b){var wt,zt,Nt,A=r._gsap,k=x||hy(r,!0),G=A.xOrigin||0,q=A.yOrigin||0,K=A.xOffset||0,ne=A.yOffset||0,se=k[0],Me=k[1],ue=k[2],He=k[3],ot=k[4],Mt=k[5],Dt=s.split(" "),It=parseFloat(Dt[0])||0,ft=parseFloat(Dt[1])||0;h?k!==ld&&(zt=se*He-Me*ue)&&(Nt=It*(-Me/zt)+ft*(se/zt)-(se*Mt-Me*ot)/zt,It=It*(He/zt)+ft*(-ue/zt)+(ue*Mt-He*ot)/zt,ft=Nt):(It=(wt=pp(r)).x+(~Dt[0].indexOf("%")?It/100*wt.width:It),ft=wt.y+(~(Dt[1]||Dt[0]).indexOf("%")?ft/100*wt.height:ft)),g||!1!==g&&A.smooth?(A.xOffset=K+((ot=It-G)*se+(Mt=ft-q)*ue)-ot,A.yOffset=ne+(ot*Me+Mt*He)-Mt):A.xOffset=A.yOffset=0,A.xOrigin=It,A.yOrigin=ft,A.smooth=!!g,A.origin=s,A.originIsAbsolute=!!h,r.style[Yr]="0px 0px",b&&(zc(b,A,"xOrigin",G,It),zc(b,A,"yOrigin",q,ft),zc(b,A,"xOffset",K,A.xOffset),zc(b,A,"yOffset",ne,A.yOffset)),r.setAttribute("data-svg-origin",It+" "+ft)},_p=function(r,s){var h=r._gsap||new Bo(r);if("x"in h&&!s&&!h.uncache)return h;var G,q,K,ne,se,Me,ue,He,ot,Mt,Dt,It,ft,wt,zt,Gt,Nt,ii,ki,Nr,yr,Vi,Sr,sr,Ks,Cf,Tf,dm,Af,Z0,gc,eh,g=r.style,x=h.scaleX<0,b="px",A="deg",k=Vo(r,Yr)||"0";return G=q=K=Me=ue=He=ot=Mt=Dt=0,ne=se=1,h.svg=!(!r.getCTM||!mp(r)),wt=hy(r,h.svg),h.svg&&(sr=(!h.uncache||"0px 0px"===k)&&!s&&r.getAttribute("data-svg-origin"),fy(r,sr||k,!!sr||h.originIsAbsolute,!1!==h.smooth,wt)),It=h.xOrigin||0,ft=h.yOrigin||0,wt!==ld&&(ii=wt[0],ki=wt[1],Nr=wt[2],yr=wt[3],G=Vi=wt[4],q=Sr=wt[5],6===wt.length?(ne=Math.sqrt(ii*ii+ki*ki),se=Math.sqrt(yr*yr+Nr*Nr),Me=ii||ki?od(ki,ii)*Vc:0,(ot=Nr||yr?od(Nr,yr)*Vc+Me:0)&&(se*=Math.abs(Math.cos(ot*Xr))),h.svg&&(G-=It-(It*ii+ft*Nr),q-=ft-(It*ki+ft*yr))):(Z0=wt[7],Tf=wt[8],dm=wt[9],gc=wt[11],G=wt[12],q=wt[13],K=wt[14],ue=(zt=od(eh=wt[6],Af=wt[10]))*Vc,zt&&(sr=Vi*(Gt=Math.cos(-zt))+Tf*(Nt=Math.sin(-zt)),Ks=Sr*Gt+dm*Nt,Cf=eh*Gt+Af*Nt,Tf=Vi*-Nt+Tf*Gt,dm=Sr*-Nt+dm*Gt,Af=eh*-Nt+Af*Gt,gc=Z0*-Nt+gc*Gt,Vi=sr,Sr=Ks,eh=Cf),He=(zt=od(-Nr,Af))*Vc,zt&&(Gt=Math.cos(-zt),gc=yr*(Nt=Math.sin(-zt))+gc*Gt,ii=sr=ii*Gt-Tf*Nt,ki=Ks=ki*Gt-dm*Nt,Nr=Cf=Nr*Gt-Af*Nt),Me=(zt=od(ki,ii))*Vc,zt&&(sr=ii*(Gt=Math.cos(zt))+ki*(Nt=Math.sin(zt)),Ks=Vi*Gt+Sr*Nt,ki=ki*Gt-ii*Nt,Sr=Sr*Gt-Vi*Nt,ii=sr,Vi=Ks),ue&&Math.abs(ue)+Math.abs(Me)>359.9&&(ue=Me=0,He=180-He),ne=mr(Math.sqrt(ii*ii+ki*ki+Nr*Nr)),se=mr(Math.sqrt(Sr*Sr+eh*eh)),zt=od(Vi,Sr),ot=Math.abs(zt)>2e-4?zt*Vc:0,Dt=gc?1/(gc<0?-gc:gc):0),h.svg&&(sr=r.getAttribute("transform"),h.forceCSS=r.setAttribute("transform","")||!og(Vo(r,gr)),sr&&r.setAttribute("transform",sr))),Math.abs(ot)>90&&Math.abs(ot)<270&&(x?(ne*=-1,ot+=Me<=0?180:-180,Me+=Me<=0?180:-180):(se*=-1,ot+=ot<=0?180:-180)),h.x=G-((h.xPercent=G&&(h.xPercent||(Math.round(r.offsetWidth/2)===Math.round(-G)?-50:0)))?r.offsetWidth*h.xPercent/100:0)+b,h.y=q-((h.yPercent=q&&(h.yPercent||(Math.round(r.offsetHeight/2)===Math.round(-q)?-50:0)))?r.offsetHeight*h.yPercent/100:0)+b,h.z=K+b,h.scaleX=mr(ne),h.scaleY=mr(se),h.rotation=mr(Me)+A,h.rotationX=mr(ue)+A,h.rotationY=mr(He)+A,h.skewX=ot+A,h.skewY=Mt+A,h.transformPerspective=Dt+b,(h.zOrigin=parseFloat(k.split(" ")[2])||0)&&(g[Yr]=ag(k)),h.xOffset=h.yOffset=0,h.force3D=Ir.force3D,h.renderTransform=h.svg?Ql:hp?c0:l0,h.uncache=0,h},ag=function(r){return(r=r.split(" "))[0]+" "+r[1]},cd=function(r,s,h){var g=xs(s);return mr(parseFloat(s)+parseFloat(ll(r,"x",h+"px",g)))+g},l0=function(r,s){s.z="0px",s.rotationY=s.rotationX="0deg",s.force3D=0,c0(r,s)},jc="0deg",yp="0px",Jl=") ",c0=function(r,s){var h=s||this,g=h.xPercent,x=h.yPercent,b=h.x,A=h.y,k=h.z,G=h.rotation,q=h.rotationY,K=h.rotationX,ne=h.skewX,se=h.skewY,Me=h.scaleX,ue=h.scaleY,He=h.transformPerspective,ot=h.force3D,Mt=h.target,Dt=h.zOrigin,It="",ft="auto"===ot&&r&&1!==r||!0===ot;if(Dt&&(K!==jc||q!==jc)){var Nt,wt=parseFloat(q)*Xr,zt=Math.sin(wt),Gt=Math.cos(wt);wt=parseFloat(K)*Xr,Nt=Math.cos(wt),b=cd(Mt,b,zt*Nt*-Dt),A=cd(Mt,A,-Math.sin(wt)*-Dt),k=cd(Mt,k,Gt*Nt*-Dt+Dt)}He!==yp&&(It+="perspective("+He+Jl),(g||x)&&(It+="translate("+g+"%, "+x+"%) "),(ft||b!==yp||A!==yp||k!==yp)&&(It+=k!==yp||ft?"translate3d("+b+", "+A+", "+k+") ":"translate("+b+", "+A+Jl),G!==jc&&(It+="rotate("+G+Jl),q!==jc&&(It+="rotateY("+q+Jl),K!==jc&&(It+="rotateX("+K+Jl),(ne!==jc||se!==jc)&&(It+="skew("+ne+", "+se+Jl),(1!==Me||1!==ue)&&(It+="scale("+Me+", "+ue+Jl),Mt.style[gr]=It||"translate(0, 0)"},Ql=function(r,s){var ft,wt,zt,Gt,Nt,h=s||this,g=h.xPercent,x=h.yPercent,b=h.x,A=h.y,k=h.rotation,G=h.skewX,q=h.skewY,K=h.scaleX,ne=h.scaleY,se=h.target,Me=h.xOrigin,ue=h.yOrigin,He=h.xOffset,ot=h.yOffset,Mt=h.forceCSS,Dt=parseFloat(b),It=parseFloat(A);k=parseFloat(k),G=parseFloat(G),(q=parseFloat(q))&&(G+=q=parseFloat(q),k+=q),k||G?(k*=Xr,G*=Xr,ft=Math.cos(k)*K,wt=Math.sin(k)*K,zt=Math.sin(k-G)*-ne,Gt=Math.cos(k-G)*ne,G&&(q*=Xr,Nt=Math.tan(G-q),zt*=Nt=Math.sqrt(1+Nt*Nt),Gt*=Nt,q&&(Nt=Math.tan(q),ft*=Nt=Math.sqrt(1+Nt*Nt),wt*=Nt)),ft=mr(ft),wt=mr(wt),zt=mr(zt),Gt=mr(Gt)):(ft=K,Gt=ne,wt=zt=0),(Dt&&!~(b+"").indexOf("px")||It&&!~(A+"").indexOf("px"))&&(Dt=ll(se,"x",b,"px"),It=ll(se,"y",A,"px")),(Me||ue||He||ot)&&(Dt=mr(Dt+Me-(Me*ft+ue*zt)+He),It=mr(It+ue-(Me*wt+ue*Gt)+ot)),(g||x)&&(Nt=se.getBBox(),Dt=mr(Dt+g/100*Nt.width),It=mr(It+x/100*Nt.height)),se.setAttribute("transform",Nt="matrix("+ft+","+wt+","+zt+","+Gt+","+Dt+","+It+")"),Mt&&(se.style[gr]=Nt)},lg=function(r,s,h,g,x,b){var ne,se,A=360,k=Ni(x),G=parseFloat(x)*(k&&~x.indexOf("rad")?Vc:1),q=b?G*b:G-g,K=g+q+"deg";return k&&("short"===(ne=x.split("_")[1])&&(q%=A)!=q%180&&(q+=q<0?A:-A),"cw"===ne&&q<0?q=(q+A*Qm)%A-~~(q/A)*A:"ccw"===ne&&q>0&&(q=(q-A*Qm)%A-~~(q/A)*A)),r._pt=se=new qr(r._pt,s,h,g,q,n0),se.e=K,se.u="deg",r._props.push(h),se},cg=function(r,s){for(var h in s)r[h]=s[h];return r},py=function(r,s,h){var A,k,G,q,K,ne,Me,g=cg({},h._gsap),b=h.style;for(k in g.svg?(G=h.getAttribute("transform"),h.setAttribute("transform",""),b[gr]=s,A=_p(h,1),Gc(h,gr),h.setAttribute("transform",G)):(G=getComputedStyle(h)[gr],b[gr]=s,A=_p(h,1),b[gr]=G),Kl)(G=g[k])!==(q=A[k])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(k)<0&&(K=xs(G)!==(Me=xs(q))?ll(h,k,G,Me):parseFloat(G),ne=parseFloat(q),r._pt=new qr(r._pt,A,k,K,ne-K,eg),r._pt.u=Me||0,r._props.push(k));cg(A,g)};Hs("padding,margin,Width,Radius",function(u,r){var s="Top",h="Right",g="Bottom",x="Left",b=(r<3?[s,h,g,x]:[s+x,s+h,g+h,g+x]).map(function(A){return r<2?u+A:"border"+A+u});rg[r>1?"border"+u:u]=function(A,k,G,q,K){var ne,se;if(arguments.length<4)return ne=b.map(function(Me){return cl(A,Me,G)}),5===(se=ne.join(" ")).split(ne[0]).length?ne[0]:se;ne=(q+"").split(" "),se={},b.forEach(function(Me,ue){return se[Me]=ne[ue]=ne[ue]||ne[(ue-1)/2|0]}),A.init(k,se,K)}});var kh={name:"css",register:cy,targetTest:function(r){return r.style&&r.nodeType},init:function(r,s,h,g,x){var G,q,K,ne,se,Me,ue,He,ot,Mt,Dt,It,ft,wt,zt,b=this._props,A=r.style,k=h.vars.startAt;for(ue in up||cy(),s)if("autoRound"!==ue&&(q=s[ue],!Vs[ue]||!$l(ue,s,h,g,r,x)))if(Me=rg[ue],"function"==(se=typeof q)&&(se=typeof(q=q.call(h,g,r,x))),"string"===se&&~q.indexOf("random(")&&(q=ep(q)),Me)Me(this,r,ue,q,h)&&(zt=1);else if("--"===ue.substr(0,2))G=(getComputedStyle(r).getPropertyValue(ue)+"").trim(),q+="",Nc.lastIndex=0,Nc.test(G)||(He=xs(G),ot=xs(q)),ot?He!==ot&&(G=ll(r,ue,G,ot)+ot):He&&(q+=He),this.add(A,"setProperty",G,q,g,x,0,0,ue),b.push(ue);else if("undefined"!==se){if(k&&ue in k?(G="function"==typeof k[ue]?k[ue].call(h,g,r,x):k[ue],Ni(G)&&~G.indexOf("random(")&&(G=ep(G)),xs(G+"")||(G+=Ir.units[ue]||xs(cl(r,ue))||""),"="===(G+"").charAt(1)&&(G=cl(r,ue))):G=cl(r,ue),ne=parseFloat(G),(Mt="string"===se&&"="===q.charAt(1)?+(q.charAt(0)+"1"):0)&&(q=q.substr(2)),K=parseFloat(q),ue in Zl&&("autoAlpha"===ue&&(1===ne&&"hidden"===cl(r,"visibility")&&K&&(ne=0),zc(this,A,"visibility",ne?"inherit":"hidden",K?"inherit":"hidden",!K)),"scale"!==ue&&"transform"!==ue&&~(ue=Zl[ue]).indexOf(",")&&(ue=ue.split(",")[0])),Dt=ue in Kl)if(It||((ft=r._gsap).renderTransform&&!s.parseTransform||_p(r,s.parseTransform),wt=!1!==s.smoothOrigin&&ft.smooth,(It=this._pt=new qr(this._pt,A,gr,0,1,ft.renderTransform,ft,0,-1)).dep=1),"scale"===ue)this._pt=new qr(this._pt,ft,"scaleY",ft.scaleY,(Mt?Mt*K:K-ft.scaleY)||0),b.push("scaleY",ue),ue+="X";else{if("transformOrigin"===ue){q=Wc(q),ft.svg?fy(r,q,0,wt,0,this):((ot=parseFloat(q.split(" ")[2])||0)!==ft.zOrigin&&zc(this,ft,"zOrigin",ft.zOrigin,ot),zc(this,A,ue,ag(G),ag(q)));continue}if("svgOrigin"===ue){fy(r,q,1,wt,0,this);continue}if(ue in sg){lg(this,ft,ue,ne,q,Mt);continue}if("smoothOrigin"===ue){zc(this,ft,"smooth",ft.smooth,q);continue}if("force3D"===ue){ft[ue]=q;continue}if("transform"===ue){py(this,q,r);continue}}else ue in A||(ue=Hc(ue)||ue);if(Dt||(K||0===K)&&(ne||0===ne)&&!t0.test(q)&&ue in A)K||(K=0),(He=(G+"").substr((ne+"").length))!==(ot=xs(q)||(ue in Ir.units?Ir.units[ue]:He))&&(ne=ll(r,ue,G,ot)),this._pt=new qr(this._pt,Dt?ft:A,ue,ne,Mt?Mt*K:K-ne,Dt||"px"!==ot&&"zIndex"!==ue||!1===s.autoRound?eg:s0),this._pt.u=ot||0,He!==ot&&"%"!==ot&&(this._pt.b=G,this._pt.r=r0);else if(ue in A)uy.call(this,r,ue,G,q);else{if(!(ue in r)){O_(ue,q);continue}this.add(r,ue,G||r[ue],q,g,x)}b.push(ue)}zt&&Xm(this)},get:cl,aliases:Zl,getSetter:function(r,s,h){var g=Zl[s];return g&&g.indexOf(",")<0&&(s=g),s in Kl&&s!==Yr&&(r._gsap.x||cl(r,"x"))?h&&iy===h?"scale"===s?ko:dp:(iy=h||{})&&("scale"===s?ly:o0):r.style&&!Lm(r.style[s])?oy:~s.indexOf("-")?ay:Xl(r,s)},core:{_removeProperty:Gc,_getMatrix:hy}};Uo.utils.checkPrefix=Hc,function(u,r,s,h){var g=Hs(u+","+r+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",function(x){Kl[x]=1});Hs(r,function(x){Ir.units[x]="deg",sg[x]=1}),Zl[g[13]]=u+","+r,Hs("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",function(x){var b=x.split(":");Zl[b[1]]=g[b[0]]})}("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY"),Hs("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(u){Ir.units[u]="px"}),Uo.registerPlugin(kh);var ud=Uo.registerPlugin(kh)||Uo,us=j(457),dn=j(9646),ao=j(1135),ec=j(8306);const{isArray:ug}=Array,{getPrototypeOf:u0,prototype:gy,keys:d0}=Object;var Ho=j(4671),Yn=j(4004);const{isArray:dd}=Array;var Gh=j(7669);var Kr=j(5403),vp=j(9672);function hg(...u){const r=(0,Gh.yG)(u),s=(0,Gh.jO)(u),{args:h,keys:g}=function _y(u){if(1===u.length){const r=u[0];if(ug(r))return{args:r,keys:null};if(function Vh(u){return u&&"object"==typeof u&&u0(u)===gy}(r)){const s=d0(r);return{args:s.map(h=>r[h]),keys:s}}}return{args:u,keys:null}}(u);if(0===h.length)return(0,us.D)([],r);const x=new ec.y(function zh(u,r,s=Ho.y){return h=>{tc(r,()=>{const{length:g}=u,x=new Array(g);let b=g,A=g;for(let k=0;k<g;k++)tc(r,()=>{const G=(0,us.D)(u[k],r);let q=!1;G.subscribe(new Kr.Q(h,K=>{x[k]=K,q||(q=!0,A--),A||h.next(s(x.slice()))},()=>{--b||h.complete()}))},h)},h)}}(h,r,g?b=>function dg(u,r){return u.reduce((s,h,g)=>(s[h]=r[g],s),{})}(g,b):Ho.y));return s?x.pipe(function $c(u){return(0,Yn.U)(r=>function Hh(u,r){return dd(r)?u(...r):u(r)}(u,r))}(s)):x}function tc(u,r,s){u?(0,vp.f)(s,u,r):r()}var fg=j(576);function hd(u,r){const s=(0,fg.m)(u)?u:()=>u,h=g=>g.error(s());return new ec.y(r?g=>r.schedule(h,0,g):h)}const Wh=(0,j(3888).d)(u=>function(){u(this),this.name="EmptyError",this.message="no elements in sequence"});var jh=j(8189);function fd(...u){return function yy(){return(0,jh.J)(1)}()((0,us.D)(u,(0,Gh.yG)(u)))}var Go=j(8421);function vy(u){return new ec.y(r=>{(0,Go.Xf)(u()).subscribe(r)})}var $i=j(515),$h=j(727),Gs=j(4482);function f0(){return(0,Gs.e)((u,r)=>{let s=null;u._refCount++;const h=new Kr.Q(r,void 0,void 0,void 0,()=>{if(!u||u._refCount<=0||0<--u._refCount)return void(s=null);const g=u._connection,x=s;s=null,g&&(!x||g===x)&&g.unsubscribe(),r.unsubscribe()});u.subscribe(h),h.closed||(s=u.connect())})}class CE extends ec.y{constructor(r,s){super(),this.source=r,this.subjectFactory=s,this._subject=null,this._refCount=0,this._connection=null,(0,Gs.A)(r)&&(this.lift=r.lift)}_subscribe(r){return this.getSubject().subscribe(r)}getSubject(){const r=this._subject;return(!r||r.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:r}=this;this._subject=this._connection=null,null==r||r.unsubscribe()}connect(){let r=this._connection;if(!r){r=this._connection=new $h.w0;const s=this.getSubject();r.add(this.source.subscribe(new Kr.Q(s,void 0,()=>{this._teardown(),s.complete()},h=>{this._teardown(),s.error(h)},()=>this._teardown()))),r.closed&&(this._connection=null,r=$h.w0.EMPTY)}return r}refCount(){return f0()(this)}}var kn=j(7579),qc=j(3900),nc=j(5698),pd=j(5026),ws=j(9300),ci=j(262),lo=j(4351);function Yc(u){return u<=0?()=>$i.E:(0,Gs.e)((r,s)=>{let h=[];r.subscribe(new Kr.Q(s,g=>{h.push(g),u<h.length&&h.shift()},()=>{for(const g of h)s.next(g);s.complete()},void 0,()=>{h=null}))})}function Kc(u=md){return(0,Gs.e)((r,s)=>{let h=!1;r.subscribe(new Kr.Q(s,g=>{h=!0,s.next(g)},()=>h?s.complete():s.error(u())))})}function md(){return new Wh}function Zc(u){return(0,Gs.e)((r,s)=>{let h=!1;r.subscribe(new Kr.Q(s,g=>{h=!0,s.next(g)},()=>{h||s.next(u),s.complete()}))})}function co(u,r){const s=arguments.length>=2;return h=>h.pipe(u?(0,ws.h)((g,x)=>u(g,x,h)):Ho.y,(0,nc.q)(1),s?Zc(r):Kc(()=>new Wh))}var qi=j(5577);function bs(u,r,s){const h=(0,fg.m)(u)||r||s?{next:u,error:r,complete:s}:u;return h?(0,Gs.e)((g,x)=>{var b;null===(b=h.subscribe)||void 0===b||b.call(h);let A=!0;g.subscribe(new Kr.Q(x,k=>{var G;null===(G=h.next)||void 0===G||G.call(h,k),x.next(k)},()=>{var k;A=!1,null===(k=h.complete)||void 0===k||k.call(h),x.complete()},k=>{var G;A=!1,null===(G=h.error)||void 0===G||G.call(h,k),x.error(k)},()=>{var k,G;A&&(null===(k=h.unsubscribe)||void 0===k||k.call(h)),null===(G=h.finalize)||void 0===G||G.call(h)}))}):Ho.y}class ds{constructor(r,s){this.id=r,this.url=s}}class _d extends ds{constructor(r,s,h="imperative",g=null){super(r,s),this.navigationTrigger=h,this.restoredState=g}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class yd extends ds{constructor(r,s,h){super(r,s),this.urlAfterRedirects=h}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class pg extends ds{constructor(r,s,h){super(r,s),this.reason=h}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class mg extends ds{constructor(r,s,h){super(r,s),this.error=h}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ep extends ds{constructor(r,s,h,g){super(r,s),this.urlAfterRedirects=h,this.state=g}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xp extends ds{constructor(r,s,h,g){super(r,s),this.urlAfterRedirects=h,this.state=g}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Mp extends ds{constructor(r,s,h,g,x){super(r,s),this.urlAfterRedirects=h,this.state=g,this.shouldActivate=x}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class wp extends ds{constructor(r,s,h,g){super(r,s),this.urlAfterRedirects=h,this.state=g}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ey extends ds{constructor(r,s,h,g){super(r,s),this.urlAfterRedirects=h,this.state=g}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class gg{constructor(r){this.route=r}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class vd{constructor(r){this.route=r}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class bp{constructor(r){this.snapshot=r}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class p0{constructor(r){this.snapshot=r}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Sp{constructor(r){this.snapshot=r}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ed{constructor(r){this.snapshot=r}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xd{constructor(r,s,h){this.routerEvent=r,this.position=s,this.anchor=h}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Cn="primary";class xy{constructor(r){this.params=r||{}}has(r){return Object.prototype.hasOwnProperty.call(this.params,r)}get(r){if(this.has(r)){const s=this.params[r];return Array.isArray(s)?s[0]:s}return null}getAll(r){if(this.has(r)){const s=this.params[r];return Array.isArray(s)?s:[s]}return[]}get keys(){return Object.keys(this.params)}}function ic(u){return new xy(u)}const Cp="ngNavigationCancelingError";function ul(u){const r=Error("NavigationCancelingError: "+u);return r[Cp]=!0,r}function yg(u,r,s){const h=s.path.split("/");if(h.length>u.length||"full"===s.pathMatch&&(r.hasChildren()||h.length<u.length))return null;const g={};for(let x=0;x<h.length;x++){const b=h[x],A=u[x];if(b.startsWith(":"))g[b.substring(1)]=A;else if(b!==A.path)return null}return{consumed:u.slice(0,h.length),posParams:g}}function hs(u,r){const s=u?Object.keys(u):void 0,h=r?Object.keys(r):void 0;if(!s||!h||s.length!=h.length)return!1;let g;for(let x=0;x<s.length;x++)if(g=s[x],!Xh(u[g],r[g]))return!1;return!0}function Xh(u,r){if(Array.isArray(u)&&Array.isArray(r)){if(u.length!==r.length)return!1;const s=[...u].sort(),h=[...r].sort();return s.every((g,x)=>h[x]===g)}return u===r}function fi(u){return Array.prototype.concat.apply([],u)}function Md(u){return u.length>0?u[u.length-1]:null}function br(u,r){for(const s in u)u.hasOwnProperty(s)&&r(u[s],s)}function zo(u){return(0,C.CqO)(u)?u:(0,C.QGY)(u)?(0,us.D)(Promise.resolve(u)):(0,dn.of)(u)}const Aa={exact:function bd(u,r,s){if(!Ws(u.segments,r.segments)||!Qc(u.segments,r.segments,s)||u.numberOfChildren!==r.numberOfChildren)return!1;for(const h in r.children)if(!u.children[h]||!bd(u.children[h],r.children[h],s))return!1;return!0},subset:Tp},Yh={exact:function Ss(u,r){return hs(u,r)},subset:function rc(u,r){return Object.keys(r).length<=Object.keys(u).length&&Object.keys(r).every(s=>Xh(u[s],r[s]))},ignored:()=>!0};function Jc(u,r,s){return Aa[s.paths](u.root,r.root,s.matrixParams)&&Yh[s.queryParams](u.queryParams,r.queryParams)&&!("exact"===s.fragment&&u.fragment!==r.fragment)}function Tp(u,r,s){return Kh(u,r,r.segments,s)}function Kh(u,r,s,h){if(u.segments.length>s.length){const g=u.segments.slice(0,s.length);return!(!Ws(g,s)||r.hasChildren()||!Qc(g,s,h))}if(u.segments.length===s.length){if(!Ws(u.segments,s)||!Qc(u.segments,s,h))return!1;for(const g in r.children)if(!u.children[g]||!Tp(u.children[g],r.children[g],h))return!1;return!0}{const g=s.slice(0,u.segments.length),x=s.slice(u.segments.length);return!!(Ws(u.segments,g)&&Qc(u.segments,g,h)&&u.children[Cn])&&Kh(u.children[Cn],r,x,h)}}function Qc(u,r,s){return r.every((h,g)=>Yh[s](u[g].parameters,h.parameters))}class uo{constructor(r,s,h){this.root=r,this.queryParams=s,this.fragment=h}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ic(this.queryParams)),this._queryParamMap}toString(){return js.serialize(this)}}class Fn{constructor(r,s){this.segments=r,this.children=s,this.parent=null,br(s,(h,g)=>h.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return dl(this)}}class Sd{constructor(r,s){this.path=r,this.parameters=s}get parameterMap(){return this._parameterMap||(this._parameterMap=ic(this.parameters)),this._parameterMap}toString(){return fs(this)}}function Ws(u,r){return u.length===r.length&&u.every((s,h)=>s.path===r[h].path)}class Eg{}class eu{parse(r){const s=new wy(r);return new uo(s.parseRootSegment(),s.parseQueryParams(),s.parseFragment())}serialize(r){const s=`/${Cs(r.root,!0)}`,h=function xg(u){const r=Object.keys(u).map(s=>{const h=u[s];return Array.isArray(h)?h.map(g=>`${nu(s)}=${nu(g)}`).join("&"):`${nu(s)}=${nu(h)}`}).filter(s=>!!s);return r.length?`?${r.join("&")}`:""}(r.queryParams),g="string"==typeof r.fragment?`#${function Ts(u){return encodeURI(u)}(r.fragment)}`:"";return`${s}${h}${g}`}}const js=new eu;function dl(u){return u.segments.map(r=>fs(r)).join("/")}function Cs(u,r){if(!u.hasChildren())return dl(u);if(r){const s=u.children[Cn]?Cs(u.children[Cn],!1):"",h=[];return br(u.children,(g,x)=>{x!==Cn&&h.push(`${x}:${Cs(g,!1)}`)}),h.length>0?`${s}(${h.join("//")})`:s}{const s=function Ap(u,r){let s=[];return br(u.children,(h,g)=>{g===Cn&&(s=s.concat(r(h,g)))}),br(u.children,(h,g)=>{g!==Cn&&(s=s.concat(r(h,g)))}),s}(u,(h,g)=>g===Cn?[Cs(u.children[Cn],!1)]:[`${g}:${Cs(h,!1)}`]);return 1===Object.keys(u.children).length&&null!=u.children[Cn]?`${dl(u)}/${s[0]}`:`${dl(u)}/(${s.join("//")})`}}function tu(u){return encodeURIComponent(u).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function nu(u){return tu(u).replace(/%3B/gi,";")}function iu(u){return tu(u).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function sc(u){return decodeURIComponent(u)}function Zh(u){return sc(u.replace(/\+/g,"%20"))}function fs(u){return`${iu(u.path)}${function Cd(u){return Object.keys(u).map(r=>`;${iu(r)}=${iu(u[r])}`).join("")}(u.parameters)}`}const Mg=/^[^\/()?;=#]+/;function ru(u){const r=u.match(Mg);return r?r[0]:""}const wg=/^[^=?&#]+/,My=/^[^&#]+/;class wy{constructor(r){this.url=r,this.remaining=r}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Fn([],{}):new Fn([],this.parseChildren())}parseQueryParams(){const r={};if(this.consumeOptional("?"))do{this.parseQueryParam(r)}while(this.consumeOptional("&"));return r}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const r=[];for(this.peekStartsWith("(")||r.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),r.push(this.parseSegment());let s={};this.peekStartsWith("/(")&&(this.capture("/"),s=this.parseParens(!0));let h={};return this.peekStartsWith("(")&&(h=this.parseParens(!1)),(r.length>0||Object.keys(s).length>0)&&(h[Cn]=new Fn(r,s)),h}parseSegment(){const r=ru(this.remaining);if(""===r&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(r),new Sd(sc(r),this.parseMatrixParams())}parseMatrixParams(){const r={};for(;this.consumeOptional(";");)this.parseParam(r);return r}parseParam(r){const s=ru(this.remaining);if(!s)return;this.capture(s);let h="";if(this.consumeOptional("=")){const g=ru(this.remaining);g&&(h=g,this.capture(h))}r[sc(s)]=sc(h)}parseQueryParam(r){const s=function Dp(u){const r=u.match(wg);return r?r[0]:""}(this.remaining);if(!s)return;this.capture(s);let h="";if(this.consumeOptional("=")){const b=function Rp(u){const r=u.match(My);return r?r[0]:""}(this.remaining);b&&(h=b,this.capture(h))}const g=Zh(s),x=Zh(h);if(r.hasOwnProperty(g)){let b=r[g];Array.isArray(b)||(b=[b],r[g]=b),b.push(x)}else r[g]=x}parseParens(r){const s={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const h=ru(this.remaining),g=this.remaining[h.length];if("/"!==g&&")"!==g&&";"!==g)throw new Error(`Cannot parse url '${this.url}'`);let x;h.indexOf(":")>-1?(x=h.substr(0,h.indexOf(":")),this.capture(x),this.capture(":")):r&&(x=Cn);const b=this.parseChildren();s[x]=1===Object.keys(b).length?b[Cn]:new Fn([],b),this.consumeOptional("//")}return s}peekStartsWith(r){return this.remaining.startsWith(r)}consumeOptional(r){return!!this.peekStartsWith(r)&&(this.remaining=this.remaining.substring(r.length),!0)}capture(r){if(!this.consumeOptional(r))throw new Error(`Expected "${r}".`)}}class by{constructor(r){this._root=r}get root(){return this._root.value}parent(r){const s=this.pathFromRoot(r);return s.length>1?s[s.length-2]:null}children(r){const s=Sy(r,this._root);return s?s.children.map(h=>h.value):[]}firstChild(r){const s=Sy(r,this._root);return s&&s.children.length>0?s.children[0].value:null}siblings(r){const s=Cy(r,this._root);return s.length<2?[]:s[s.length-2].children.map(g=>g.value).filter(g=>g!==r)}pathFromRoot(r){return Cy(r,this._root).map(s=>s.value)}}function Sy(u,r){if(u===r.value)return r;for(const s of r.children){const h=Sy(u,s);if(h)return h}return null}function Cy(u,r){if(u===r.value)return[r];for(const s of r.children){const h=Cy(u,s);if(h.length)return h.unshift(r),h}return[]}class ps{constructor(r,s){this.value=r,this.children=s}toString(){return`TreeNode(${this.value})`}}function Td(u){const r={};return u&&u.children.forEach(s=>r[s.value.outlet]=s),r}class bg extends by{constructor(r,s){super(r),this.snapshot=s,su(this,r)}toString(){return this.snapshot.toString()}}function Sg(u,r){const s=function TE(u,r){const b=new hl([],{},{},"",{},Cn,r,null,u.root,-1,{});return new Ip("",new ps(b,[]))}(u,r),h=new ao.X([new Sd("",{})]),g=new ao.X({}),x=new ao.X({}),b=new ao.X({}),A=new ao.X(""),k=new ir(h,g,b,A,x,Cn,r,s.root);return k.snapshot=s.root,new bg(new ps(k,[]),s)}class ir{constructor(r,s,h,g,x,b,A,k){this.url=r,this.params=s,this.queryParams=h,this.fragment=g,this.data=x,this.outlet=b,this.component=A,this._futureSnapshot=k}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Yn.U)(r=>ic(r)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Yn.U)(r=>ic(r)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Pp(u,r="emptyOnly"){const s=u.pathFromRoot;let h=0;if("always"!==r)for(h=s.length-1;h>=1;){const g=s[h],x=s[h-1];if(g.routeConfig&&""===g.routeConfig.path)h--;else{if(x.component)break;h--}}return function Ty(u){return u.reduce((r,s)=>({params:Object.assign(Object.assign({},r.params),s.params),data:Object.assign(Object.assign({},r.data),s.data),resolve:Object.assign(Object.assign({},r.resolve),s._resolvedData)}),{params:{},data:{},resolve:{}})}(s.slice(h))}class hl{constructor(r,s,h,g,x,b,A,k,G,q,K){this.url=r,this.params=s,this.queryParams=h,this.fragment=g,this.data=x,this.outlet=b,this.component=A,this.routeConfig=k,this._urlSegment=G,this._lastPathIndex=q,this._resolve=K}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ic(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ic(this.queryParams)),this._queryParamMap}toString(){const r=this.url.map(h=>h.toString()).join("/");return`Route(url:'${r}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Ip extends by{constructor(r,s){super(s),this.url=r,su(this,s)}toString(){return Jh(this._root)}}function su(u,r){r.value._routerState=u,r.children.forEach(s=>su(u,s))}function Jh(u){const r=u.children.length>0?` { ${u.children.map(Jh).join(", ")} } `:"";return`${u.value}${r}`}function Qh(u){if(u.snapshot){const r=u.snapshot,s=u._futureSnapshot;u.snapshot=s,hs(r.queryParams,s.queryParams)||u.queryParams.next(s.queryParams),r.fragment!==s.fragment&&u.fragment.next(s.fragment),hs(r.params,s.params)||u.params.next(s.params),function qh(u,r){if(u.length!==r.length)return!1;for(let s=0;s<u.length;++s)if(!hs(u[s],r[s]))return!1;return!0}(r.url,s.url)||u.url.next(s.url),hs(r.data,s.data)||u.data.next(s.data)}else u.snapshot=u._futureSnapshot,u.data.next(u._futureSnapshot.data)}function Ad(u,r){const s=hs(u.params,r.params)&&function vg(u,r){return Ws(u,r)&&u.every((s,h)=>hs(s.parameters,r[h].parameters))}(u.url,r.url);return s&&!(!u.parent!=!r.parent)&&(!u.parent||Ad(u.parent,r.parent))}function fl(u,r,s){if(s&&u.shouldReuseRoute(r.value,s.value.snapshot)){const h=s.value;h._futureSnapshot=r.value;const g=function ho(u,r,s){return r.children.map(h=>{for(const g of s.children)if(u.shouldReuseRoute(h.value,g.value.snapshot))return fl(u,h,g);return fl(u,h)})}(u,r,s);return new ps(h,g)}{if(u.shouldAttach(r.value)){const x=u.retrieve(r.value);if(null!==x){const b=x.route;return b.value._futureSnapshot=r.value,b.children=r.children.map(A=>fl(u,A)),b}}const h=function g0(u){return new ir(new ao.X(u.url),new ao.X(u.params),new ao.X(u.queryParams),new ao.X(u.fragment),new ao.X(u.data),u.outlet,u.component,u)}(r.value),g=r.children.map(x=>fl(u,x));return new ps(h,g)}}function Wo(u){return"object"==typeof u&&null!=u&&!u.outlets&&!u.segmentPath}function pl(u){return"object"==typeof u&&null!=u&&u.outlets}function Cg(u,r,s,h,g){let x={};return h&&br(h,(b,A)=>{x[A]=Array.isArray(b)?b.map(k=>`${k}`):`${b}`}),new uo(s.root===u?r:Dy(s.root,u,r),x,g)}function Dy(u,r,s){const h={};return br(u.children,(g,x)=>{h[x]=g===r?s:Dy(g,r,s)}),new Fn(u.segments,h)}class ef{constructor(r,s,h){if(this.isAbsolute=r,this.numberOfDoubleDots=s,this.commands=h,r&&h.length>0&&Wo(h[0]))throw new Error("Root segment cannot have matrix parameters");const g=h.find(pl);if(g&&g!==Md(h))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Tg{constructor(r,s,h){this.segmentGroup=r,this.processChildren=s,this.index=h}}function Lp(u,r,s){if(u||(u=new Fn([],{})),0===u.segments.length&&u.hasChildren())return $s(u,r,s);const h=function nf(u,r,s){let h=0,g=r;const x={match:!1,pathIndex:0,commandIndex:0};for(;g<u.segments.length;){if(h>=s.length)return x;const b=u.segments[g],A=s[h];if(pl(A))break;const k=`${A}`,G=h<s.length-1?s[h+1]:null;if(g>0&&void 0===k)break;if(k&&G&&"object"==typeof G&&void 0===G.outlets){if(!qs(k,G,b))return x;h+=2}else{if(!qs(k,{},b))return x;h++}g++}return{match:!0,pathIndex:g,commandIndex:h}}(u,r,s),g=s.slice(h.commandIndex);if(h.match&&h.pathIndex<u.segments.length){const x=new Fn(u.segments.slice(0,h.pathIndex),{});return x.children[Cn]=new Fn(u.segments.slice(h.pathIndex),u.children),$s(x,0,g)}return h.match&&0===g.length?new Fn(u.segments,{}):h.match&&!u.hasChildren()?rr(u,r,s):h.match?$s(u,0,g):rr(u,r,s)}function $s(u,r,s){if(0===s.length)return new Fn(u.segments,{});{const h=function y0(u){return pl(u[0])?u[0].outlets:{[Cn]:u}}(s),g={};return br(h,(x,b)=>{"string"==typeof x&&(x=[x]),null!==x&&(g[b]=Lp(u.children[b],r,x))}),br(u.children,(x,b)=>{void 0===h[b]&&(g[b]=x)}),new Fn(u.segments,g)}}function rr(u,r,s){const h=u.segments.slice(0,r);let g=0;for(;g<s.length;){const x=s[g];if(pl(x)){const k=ou(x.outlets);return new Fn(h,k)}if(0===g&&Wo(s[0])){h.push(new Sd(u.segments[r].path,Da(s[0]))),g++;continue}const b=pl(x)?x.outlets[Cn]:`${x}`,A=g<s.length-1?s[g+1]:null;b&&A&&Wo(A)?(h.push(new Sd(b,Da(A))),g+=2):(h.push(new Sd(b,{})),g++)}return new Fn(h,{})}function ou(u){const r={};return br(u,(s,h)=>{"string"==typeof s&&(s=[s]),null!==s&&(r[h]=rr(new Fn([],{}),0,s))}),r}function Da(u){const r={};return br(u,(s,h)=>r[h]=`${s}`),r}function qs(u,r,s){return u==s.path&&hs(r,s.parameters)}class ml{constructor(r,s,h,g){this.routeReuseStrategy=r,this.futureState=s,this.currState=h,this.forwardEvent=g}activate(r){const s=this.futureState._root,h=this.currState?this.currState._root:null;this.deactivateChildRoutes(s,h,r),Qh(this.futureState.root),this.activateChildRoutes(s,h,r)}deactivateChildRoutes(r,s,h){const g=Td(s);r.children.forEach(x=>{const b=x.value.outlet;this.deactivateRoutes(x,g[b],h),delete g[b]}),br(g,(x,b)=>{this.deactivateRouteAndItsChildren(x,h)})}deactivateRoutes(r,s,h){const g=r.value,x=s?s.value:null;if(g===x)if(g.component){const b=h.getContext(g.outlet);b&&this.deactivateChildRoutes(r,s,b.children)}else this.deactivateChildRoutes(r,s,h);else x&&this.deactivateRouteAndItsChildren(s,h)}deactivateRouteAndItsChildren(r,s){r.value.component&&this.routeReuseStrategy.shouldDetach(r.value.snapshot)?this.detachAndStoreRouteSubtree(r,s):this.deactivateRouteAndOutlet(r,s)}detachAndStoreRouteSubtree(r,s){const h=s.getContext(r.value.outlet),g=h&&r.value.component?h.children:s,x=Td(r);for(const b of Object.keys(x))this.deactivateRouteAndItsChildren(x[b],g);if(h&&h.outlet){const b=h.outlet.detach(),A=h.children.onOutletDeactivated();this.routeReuseStrategy.store(r.value.snapshot,{componentRef:b,route:r,contexts:A})}}deactivateRouteAndOutlet(r,s){const h=s.getContext(r.value.outlet),g=h&&r.value.component?h.children:s,x=Td(r);for(const b of Object.keys(x))this.deactivateRouteAndItsChildren(x[b],g);h&&h.outlet&&(h.outlet.deactivate(),h.children.onOutletDeactivated(),h.attachRef=null,h.resolver=null,h.route=null)}activateChildRoutes(r,s,h){const g=Td(s);r.children.forEach(x=>{this.activateRoutes(x,g[x.value.outlet],h),this.forwardEvent(new Ed(x.value.snapshot))}),r.children.length&&this.forwardEvent(new p0(r.value.snapshot))}activateRoutes(r,s,h){const g=r.value,x=s?s.value:null;if(Qh(g),g===x)if(g.component){const b=h.getOrCreateContext(g.outlet);this.activateChildRoutes(r,s,b.children)}else this.activateChildRoutes(r,s,h);else if(g.component){const b=h.getOrCreateContext(g.outlet);if(this.routeReuseStrategy.shouldAttach(g.snapshot)){const A=this.routeReuseStrategy.retrieve(g.snapshot);this.routeReuseStrategy.store(g.snapshot,null),b.children.onOutletReAttached(A.contexts),b.attachRef=A.componentRef,b.route=A.route.value,b.outlet&&b.outlet.attach(A.componentRef,A.route.value),Qh(A.route.value),this.activateChildRoutes(r,null,b.children)}else{const A=function au(u){for(let r=u.parent;r;r=r.parent){const s=r.routeConfig;if(s&&s._loadedConfig)return s._loadedConfig;if(s&&s.component)return null}return null}(g.snapshot),k=A?A.module.componentFactoryResolver:null;b.attachRef=null,b.route=g,b.resolver=k,b.outlet&&b.outlet.activateWith(g,k),this.activateChildRoutes(r,null,b.children)}}else this.activateChildRoutes(r,null,h)}}class jo{constructor(r,s){this.routes=r,this.module=s}}function Zr(u){return"function"==typeof u}function Jr(u){return u instanceof uo}const oc=Symbol("INITIAL_VALUE");function Od(){return(0,qc.w)(u=>hg(u.map(r=>r.pipe((0,nc.q)(1),function Xc(...u){const r=(0,Gh.yG)(u);return(0,Gs.e)((s,h)=>{(r?fd(u,s,r):fd(u,s)).subscribe(h)})}(oc)))).pipe((0,pd.R)((r,s)=>{let h=!1;return s.reduce((g,x,b)=>g!==oc?g:(x===oc&&(h=!0),h||!1!==x&&b!==s.length-1&&!Jr(x)?g:x),r)},oc),(0,ws.h)(r=>r!==oc),(0,Yn.U)(r=>Jr(r)?r:!0===r),(0,nc.q)(1)))}class $o{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new uu,this.attachRef=null}}class uu{constructor(){this.contexts=new Map}onChildOutletCreated(r,s){const h=this.getOrCreateContext(r);h.outlet=s,this.contexts.set(r,h)}onChildOutletDestroyed(r){const s=this.getContext(r);s&&(s.outlet=null,s.attachRef=null)}onOutletDeactivated(){const r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let s=this.getContext(r);return s||(s=new $o,this.contexts.set(r,s)),s}getContext(r){return this.contexts.get(r)||null}}let rf=(()=>{class u{constructor(s,h,g,x,b){this.parentContexts=s,this.location=h,this.resolver=g,this.changeDetector=b,this.activated=null,this._activatedRoute=null,this.activateEvents=new C.vpe,this.deactivateEvents=new C.vpe,this.attachEvents=new C.vpe,this.detachEvents=new C.vpe,this.name=x||Cn,s.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const s=this.parentContexts.getContext(this.name);s&&s.route&&(s.attachRef?this.attach(s.attachRef,s.route):this.activateWith(s.route,s.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const s=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(s.instance),s}attach(s,h){this.activated=s,this._activatedRoute=h,this.location.insert(s.hostView),this.attachEvents.emit(s.instance)}deactivate(){if(this.activated){const s=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(s)}}activateWith(s,h){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=s;const b=(h=h||this.resolver).resolveComponentFactory(s._futureSnapshot.routeConfig.component),A=this.parentContexts.getOrCreateContext(this.name).children,k=new qo(s,A,this.location.injector);this.activated=this.location.createComponent(b,this.location.length,k),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return u.\u0275fac=function(s){return new(s||u)(C.Y36(uu),C.Y36(C.s_b),C.Y36(C._Vd),C.$8M("name"),C.Y36(C.sBO))},u.\u0275dir=C.lG2({type:u,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),u})();class qo{constructor(r,s,h){this.route=r,this.childContexts=s,this.parent=h}get(r,s){return r===ir?this.route:r===uu?this.childContexts:this.parent.get(r,s)}}let Ag=(()=>{class u{}return u.\u0275fac=function(s){return new(s||u)},u.\u0275cmp=C.Xpm({type:u,selectors:[["ng-component"]],decls:1,vars:0,template:function(s,h){1&s&&C._UZ(0,"router-outlet")},directives:[rf],encapsulation:2}),u})();function Dg(u,r=""){for(let s=0;s<u.length;s++){const h=u[s];Ld(h,du(r,h))}}function Ld(u,r){u.children&&Dg(u.children,r)}function du(u,r){return r?u||r.path?u&&!r.path?`${u}/`:!u&&r.path?r.path:`${u}/${r.path}`:"":u}function gl(u){const r=u.children&&u.children.map(gl),s=r?Object.assign(Object.assign({},u),{children:r}):Object.assign({},u);return!s.component&&(r||s.loadChildren)&&s.outlet&&s.outlet!==Cn&&(s.component=Ag),s}function Lr(u){return u.outlet||Cn}function _l(u,r){const s=u.filter(h=>Lr(h)===r);return s.push(...u.filter(h=>Lr(h)!==r)),s}const Ry={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Ra(u,r,s){var h;if(""===r.path)return"full"===r.pathMatch&&(u.hasChildren()||s.length>0)?Object.assign({},Ry):{matched:!0,consumedSegments:[],remainingSegments:s,parameters:{},positionalParamSegments:{}};const x=(r.matcher||yg)(s,u,r);if(!x)return Object.assign({},Ry);const b={};br(x.posParams,(k,G)=>{b[G]=k.path});const A=x.consumed.length>0?Object.assign(Object.assign({},b),x.consumed[x.consumed.length-1].parameters):b;return{matched:!0,consumedSegments:x.consumed,remainingSegments:s.slice(x.consumed.length),parameters:A,positionalParamSegments:null!==(h=x.posParams)&&void 0!==h?h:{}}}function Pa(u,r,s,h,g="corrected"){if(s.length>0&&function Nd(u,r,s){return s.some(h=>Fp(u,r,h)&&Lr(h)!==Cn)}(u,s,h)){const b=new Fn(r,function hu(u,r,s,h){const g={};g[Cn]=h,h._sourceSegment=u,h._segmentIndexShift=r.length;for(const x of s)if(""===x.path&&Lr(x)!==Cn){const b=new Fn([],{});b._sourceSegment=u,b._segmentIndexShift=r.length,g[Lr(x)]=b}return g}(u,r,h,new Fn(s,u.children)));return b._sourceSegment=u,b._segmentIndexShift=r.length,{segmentGroup:b,slicedSegments:[]}}if(0===s.length&&function Rg(u,r,s){return s.some(h=>Fp(u,r,h))}(u,s,h)){const b=new Fn(u.segments,function Fd(u,r,s,h,g,x){const b={};for(const A of h)if(Fp(u,s,A)&&!g[Lr(A)]){const k=new Fn([],{});k._sourceSegment=u,k._segmentIndexShift="legacy"===x?u.segments.length:r.length,b[Lr(A)]=k}return Object.assign(Object.assign({},g),b)}(u,r,s,h,u.children,g));return b._sourceSegment=u,b._segmentIndexShift=r.length,{segmentGroup:b,slicedSegments:s}}const x=new Fn(u.segments,u.children);return x._sourceSegment=u,x._segmentIndexShift=r.length,{segmentGroup:x,slicedSegments:s}}function Fp(u,r,s){return(!(u.hasChildren()||r.length>0)||"full"!==s.pathMatch)&&""===s.path}function Pg(u,r,s,h){return!!(Lr(u)===h||h!==Cn&&Fp(r,s,u))&&("**"===u.path||Ra(r,u,s).matched)}function Bd(u,r,s){return 0===r.length&&!u.children[s]}class yl{constructor(r){this.segmentGroup=r||null}}class Np{constructor(r){this.urlTree=r}}function Ud(u){return hd(new yl(u))}function Ig(u){return hd(new Np(u))}function Py(u){return hd(new Error(`Only absolute redirects can have named outlets. redirectTo: '${u}'`))}class Iy{constructor(r,s,h,g,x){this.configLoader=s,this.urlSerializer=h,this.urlTree=g,this.config=x,this.allowRedirects=!0,this.ngModule=r.get(C.h0i)}apply(){const r=Pa(this.urlTree.root,[],[],this.config).segmentGroup,s=new Fn(r.segments,r.children);return this.expandSegmentGroup(this.ngModule,this.config,s,Cn).pipe((0,Yn.U)(x=>this.createUrlTree(Kn(x),this.urlTree.queryParams,this.urlTree.fragment))).pipe((0,ci.K)(x=>{if(x instanceof Np)return this.allowRedirects=!1,this.match(x.urlTree);throw x instanceof yl?this.noMatchError(x):x}))}match(r){return this.expandSegmentGroup(this.ngModule,this.config,r.root,Cn).pipe((0,Yn.U)(g=>this.createUrlTree(Kn(g),r.queryParams,r.fragment))).pipe((0,ci.K)(g=>{throw g instanceof yl?this.noMatchError(g):g}))}noMatchError(r){return new Error(`Cannot match any routes. URL Segment: '${r.segmentGroup}'`)}createUrlTree(r,s,h){const g=r.segments.length>0?new Fn([],{[Cn]:r}):r;return new uo(g,s,h)}expandSegmentGroup(r,s,h,g){return 0===h.segments.length&&h.hasChildren()?this.expandChildren(r,s,h).pipe((0,Yn.U)(x=>new Fn([],x))):this.expandSegment(r,h,s,h.segments,g,!0)}expandChildren(r,s,h){const g=[];for(const x of Object.keys(h.children))"primary"===x?g.unshift(x):g.push(x);return(0,us.D)(g).pipe((0,lo.b)(x=>{const b=h.children[x],A=_l(s,x);return this.expandSegmentGroup(r,A,b,x).pipe((0,Yn.U)(k=>({segment:k,outlet:x})))}),(0,pd.R)((x,b)=>(x[b.outlet]=b.segment,x),{}),function gd(u,r){const s=arguments.length>=2;return h=>h.pipe(u?(0,ws.h)((g,x)=>u(g,x,h)):Ho.y,Yc(1),s?Zc(r):Kc(()=>new Wh))}())}expandSegment(r,s,h,g,x,b){return(0,us.D)(h).pipe((0,lo.b)(A=>this.expandSegmentAgainstRoute(r,s,h,A,g,x,b).pipe((0,ci.K)(G=>{if(G instanceof yl)return(0,dn.of)(null);throw G}))),co(A=>!!A),(0,ci.K)((A,k)=>{if(A instanceof Wh||"EmptyError"===A.name)return Bd(s,g,x)?(0,dn.of)(new Fn([],{})):Ud(s);throw A}))}expandSegmentAgainstRoute(r,s,h,g,x,b,A){return Pg(g,s,x,b)?void 0===g.redirectTo?this.matchSegmentAgainstRoute(r,s,g,x,b):A&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(r,s,h,g,x,b):Ud(s):Ud(s)}expandSegmentAgainstRouteUsingRedirect(r,s,h,g,x,b){return"**"===g.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(r,h,g,b):this.expandRegularSegmentAgainstRouteUsingRedirect(r,s,h,g,x,b)}expandWildCardWithParamsAgainstRouteUsingRedirect(r,s,h,g){const x=this.applyRedirectCommands([],h.redirectTo,{});return h.redirectTo.startsWith("/")?Ig(x):this.lineralizeSegments(h,x).pipe((0,qi.z)(b=>{const A=new Fn(b,{});return this.expandSegment(r,A,s,b,g,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(r,s,h,g,x,b){const{matched:A,consumedSegments:k,remainingSegments:G,positionalParamSegments:q}=Ra(s,g,x);if(!A)return Ud(s);const K=this.applyRedirectCommands(k,g.redirectTo,q);return g.redirectTo.startsWith("/")?Ig(K):this.lineralizeSegments(g,K).pipe((0,qi.z)(ne=>this.expandSegment(r,s,h,ne.concat(G),b,!1)))}matchSegmentAgainstRoute(r,s,h,g,x){if("**"===h.path)return h.loadChildren?(h._loadedConfig?(0,dn.of)(h._loadedConfig):this.configLoader.load(r.injector,h)).pipe((0,Yn.U)(K=>(h._loadedConfig=K,new Fn(g,{})))):(0,dn.of)(new Fn(g,{}));const{matched:b,consumedSegments:A,remainingSegments:k}=Ra(s,h,g);return b?this.getChildConfig(r,h,g).pipe((0,qi.z)(q=>{const K=q.module,ne=q.routes,{segmentGroup:se,slicedSegments:Me}=Pa(s,A,k,ne),ue=new Fn(se.segments,se.children);if(0===Me.length&&ue.hasChildren())return this.expandChildren(K,ne,ue).pipe((0,Yn.U)(Dt=>new Fn(A,Dt)));if(0===ne.length&&0===Me.length)return(0,dn.of)(new Fn(A,{}));const He=Lr(h)===x;return this.expandSegment(K,ue,ne,Me,He?Cn:x,!0).pipe((0,Yn.U)(Mt=>new Fn(A.concat(Mt.segments),Mt.children)))})):Ud(s)}getChildConfig(r,s,h){return s.children?(0,dn.of)(new jo(s.children,r)):s.loadChildren?void 0!==s._loadedConfig?(0,dn.of)(s._loadedConfig):this.runCanLoadGuards(r.injector,s,h).pipe((0,qi.z)(g=>g?this.configLoader.load(r.injector,s).pipe((0,Yn.U)(x=>(s._loadedConfig=x,x))):function Og(u){return hd(ul(`Cannot load children because the guard of the route "path: '${u.path}'" returned false`))}(s))):(0,dn.of)(new jo([],r))}runCanLoadGuards(r,s,h){const g=s.canLoad;if(!g||0===g.length)return(0,dn.of)(!0);const x=g.map(b=>{const A=r.get(b);let k;if(function Pd(u){return u&&Zr(u.canLoad)}(A))k=A.canLoad(s,h);else{if(!Zr(A))throw new Error("Invalid CanLoad guard");k=A(s,h)}return zo(k)});return(0,dn.of)(x).pipe(Od(),bs(b=>{if(!Jr(b))return;const A=ul(`Redirecting to "${this.urlSerializer.serialize(b)}"`);throw A.url=b,A}),(0,Yn.U)(b=>!0===b))}lineralizeSegments(r,s){let h=[],g=s.root;for(;;){if(h=h.concat(g.segments),0===g.numberOfChildren)return(0,dn.of)(h);if(g.numberOfChildren>1||!g.children[Cn])return Py(r.redirectTo);g=g.children[Cn]}}applyRedirectCommands(r,s,h){return this.applyRedirectCreatreUrlTree(s,this.urlSerializer.parse(s),r,h)}applyRedirectCreatreUrlTree(r,s,h,g){const x=this.createSegmentGroup(r,s.root,h,g);return new uo(x,this.createQueryParams(s.queryParams,this.urlTree.queryParams),s.fragment)}createQueryParams(r,s){const h={};return br(r,(g,x)=>{if("string"==typeof g&&g.startsWith(":")){const A=g.substring(1);h[x]=s[A]}else h[x]=g}),h}createSegmentGroup(r,s,h,g){const x=this.createSegments(r,s.segments,h,g);let b={};return br(s.children,(A,k)=>{b[k]=this.createSegmentGroup(r,A,h,g)}),new Fn(x,b)}createSegments(r,s,h,g){return s.map(x=>x.path.startsWith(":")?this.findPosParam(r,x,g):this.findOrReturn(x,h))}findPosParam(r,s,h){const g=h[s.path.substring(1)];if(!g)throw new Error(`Cannot redirect to '${r}'. Cannot find '${s.path}'.`);return g}findOrReturn(r,s){let h=0;for(const g of s){if(g.path===r.path)return s.splice(h),g;h++}return r}}function Kn(u){const r={};for(const h of Object.keys(u.children)){const x=Kn(u.children[h]);(x.segments.length>0||x.hasChildren())&&(r[h]=x)}return function v0(u){if(1===u.numberOfChildren&&u.children[Cn]){const r=u.children[Cn];return new Fn(u.segments.concat(r.segments),r.children)}return u}(new Fn(u.segments,r))}class Up{constructor(r){this.path=r,this.route=this.path[this.path.length-1]}}class kd{constructor(r,s){this.component=r,this.route=s}}function Lg(u,r,s){const h=u._root;return El(h,r?r._root:null,s,[h.value])}function Ia(u,r,s){const h=function kp(u){if(!u)return null;for(let r=u.parent;r;r=r.parent){const s=r.routeConfig;if(s&&s._loadedConfig)return s._loadedConfig}return null}(r);return(h?h.module.injector:s).get(u)}function El(u,r,s,h,g={canDeactivateChecks:[],canActivateChecks:[]}){const x=Td(r);return u.children.forEach(b=>{(function Oy(u,r,s,h,g={canDeactivateChecks:[],canActivateChecks:[]}){const x=u.value,b=r?r.value:null,A=s?s.getContext(u.value.outlet):null;if(b&&x.routeConfig===b.routeConfig){const k=function Vd(u,r,s){if("function"==typeof s)return s(u,r);switch(s){case"pathParamsChange":return!Ws(u.url,r.url);case"pathParamsOrQueryParamsChange":return!Ws(u.url,r.url)||!hs(u.queryParams,r.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ad(u,r)||!hs(u.queryParams,r.queryParams);default:return!Ad(u,r)}}(b,x,x.routeConfig.runGuardsAndResolvers);k?g.canActivateChecks.push(new Up(h)):(x.data=b.data,x._resolvedData=b._resolvedData),El(u,r,x.component?A?A.children:null:s,h,g),k&&A&&A.outlet&&A.outlet.isActivated&&g.canDeactivateChecks.push(new kd(A.outlet.component,b))}else b&&Xo(r,A,g),g.canActivateChecks.push(new Up(h)),El(u,null,x.component?A?A.children:null:s,h,g)})(b,x[b.value.outlet],s,h.concat([b.value]),g),delete x[b.value.outlet]}),br(x,(b,A)=>Xo(b,s.getContext(A),g)),g}function Xo(u,r,s){const h=Td(u),g=u.value;br(h,(x,b)=>{Xo(x,g.component?r?r.children.getContext(b):null:r,s)}),s.canDeactivateChecks.push(new kd(g.component&&r&&r.outlet&&r.outlet.isActivated?r.outlet.component:null,g))}class xl{}function Oa(u){return new ec.y(r=>r.error(u))}class Fy{constructor(r,s,h,g,x,b){this.rootComponentType=r,this.config=s,this.urlTree=h,this.url=g,this.paramsInheritanceStrategy=x,this.relativeLinkResolution=b}recognize(){const r=Pa(this.urlTree.root,[],[],this.config.filter(b=>void 0===b.redirectTo),this.relativeLinkResolution).segmentGroup,s=this.processSegmentGroup(this.config,r,Cn);if(null===s)return null;const h=new hl([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Cn,this.rootComponentType,null,this.urlTree.root,-1,{}),g=new ps(h,s),x=new Ip(this.url,g);return this.inheritParamsAndData(x._root),x}inheritParamsAndData(r){const s=r.value,h=Pp(s,this.paramsInheritanceStrategy);s.params=Object.freeze(h.params),s.data=Object.freeze(h.data),r.children.forEach(g=>this.inheritParamsAndData(g))}processSegmentGroup(r,s,h){return 0===s.segments.length&&s.hasChildren()?this.processChildren(r,s):this.processSegment(r,s,s.segments,h)}processChildren(r,s){const h=[];for(const x of Object.keys(s.children)){const b=s.children[x],A=_l(r,x),k=this.processSegmentGroup(A,b,x);if(null===k)return null;h.push(...k)}const g=Gd(h);return function fu(u){u.sort((r,s)=>r.value.outlet===Cn?-1:s.value.outlet===Cn?1:r.value.outlet.localeCompare(s.value.outlet))}(g),g}processSegment(r,s,h,g){for(const x of r){const b=this.processSegmentAgainstRoute(x,s,h,g);if(null!==b)return b}return Bd(s,h,g)?[]:null}processSegmentAgainstRoute(r,s,h,g){if(r.redirectTo||!Pg(r,s,h,g))return null;let x,b=[],A=[];if("**"===r.path){const se=h.length>0?Md(h).parameters:{};x=new hl(h,se,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Fg(r),Lr(r),r.component,r,zd(s),By(s)+h.length,cf(r))}else{const se=Ra(s,r,h);if(!se.matched)return null;b=se.consumedSegments,A=se.remainingSegments,x=new hl(b,se.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Fg(r),Lr(r),r.component,r,zd(s),By(s)+b.length,cf(r))}const k=function Vp(u){return u.children?u.children:u.loadChildren?u._loadedConfig.routes:[]}(r),{segmentGroup:G,slicedSegments:q}=Pa(s,b,A,k.filter(se=>void 0===se.redirectTo),this.relativeLinkResolution);if(0===q.length&&G.hasChildren()){const se=this.processChildren(k,G);return null===se?null:[new ps(x,se)]}if(0===k.length&&0===q.length)return[new ps(x,[])];const K=Lr(r)===g,ne=this.processSegment(k,G,q,K?Cn:g);return null===ne?null:[new ps(x,ne)]}}function Ny(u){const r=u.value.routeConfig;return r&&""===r.path&&void 0===r.redirectTo}function Gd(u){const r=[],s=new Set;for(const h of u){if(!Ny(h)){r.push(h);continue}const g=r.find(x=>h.value.routeConfig===x.value.routeConfig);void 0!==g?(g.children.push(...h.children),s.add(g)):r.push(h)}for(const h of s){const g=Gd(h.children);r.push(new ps(h.value,g))}return r.filter(h=>!s.has(h))}function zd(u){let r=u;for(;r._sourceSegment;)r=r._sourceSegment;return r}function By(u){let r=u,s=r._segmentIndexShift?r._segmentIndexShift:0;for(;r._sourceSegment;)r=r._sourceSegment,s+=r._segmentIndexShift?r._segmentIndexShift:0;return s-1}function Fg(u){return u.data||{}}function cf(u){return u.resolve||{}}function pu(u){return[...Object.keys(u),...Object.getOwnPropertySymbols(u)]}function Wd(u){return(0,qc.w)(r=>{const s=u(r);return s?(0,us.D)(s).pipe((0,Yn.U)(()=>r)):(0,dn.of)(r)})}class jp extends class Uy{shouldDetach(r){return!1}store(r,s){}shouldAttach(r){return!1}retrieve(r){return null}shouldReuseRoute(r,s){return r.routeConfig===s.routeConfig}}{}const jd=new C.OlP("ROUTES");class $d{constructor(r,s,h,g){this.injector=r,this.compiler=s,this.onLoadStartListener=h,this.onLoadEndListener=g}load(r,s){if(s._loader$)return s._loader$;this.onLoadStartListener&&this.onLoadStartListener(s);const g=this.loadModuleFactory(s.loadChildren).pipe((0,Yn.U)(x=>{this.onLoadEndListener&&this.onLoadEndListener(s);const b=x.create(r);return new jo(fi(b.injector.get(jd,void 0,C.XFs.Self|C.XFs.Optional)).map(gl),b)}),(0,ci.K)(x=>{throw s._loader$=void 0,x}));return s._loader$=new CE(g,()=>new kn.x).pipe(f0()),s._loader$}loadModuleFactory(r){return zo(r()).pipe((0,qi.z)(s=>s instanceof C.YKP?(0,dn.of)(s):(0,us.D)(this.compiler.compileModuleAsync(s))))}}class df{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,s){return r}}function Bg(u){throw u}function hf(u,r,s){return r.parse("/")}function ff(u,r){return(0,dn.of)(null)}const qp={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ky={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ms=(()=>{class u{constructor(s,h,g,x,b,A,k){this.rootComponentType=s,this.urlSerializer=h,this.rootContexts=g,this.location=x,this.config=k,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new kn.x,this.errorHandler=Bg,this.malformedUriErrorHandler=hf,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:ff,afterPreactivation:ff},this.urlHandlingStrategy=new df,this.routeReuseStrategy=new jp,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=b.get(C.h0i),this.console=b.get(C.c2e);const K=b.get(C.R0b);this.isNgZoneEnabled=K instanceof C.R0b&&C.R0b.isInAngularZone(),this.resetConfig(k),this.currentUrlTree=function wd(){return new uo(new Fn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new $d(b,A,ne=>this.triggerEvent(new gg(ne)),ne=>this.triggerEvent(new vd(ne))),this.routerState=Sg(this.currentUrlTree,this.rootComponentType),this.transitions=new ao.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var s;return null===(s=this.location.getState())||void 0===s?void 0:s.\u0275routerPageId}setupNavigations(s){const h=this.events;return s.pipe((0,ws.h)(g=>0!==g.id),(0,Yn.U)(g=>Object.assign(Object.assign({},g),{extractedUrl:this.urlHandlingStrategy.extract(g.rawUrl)})),(0,qc.w)(g=>{let x=!1,b=!1;return(0,dn.of)(g).pipe(bs(A=>{this.currentNavigation={id:A.id,initialUrl:A.currentRawUrl,extractedUrl:A.extractedUrl,trigger:A.source,extras:A.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,qc.w)(A=>{const k=this.browserUrlTree.toString(),G=!this.navigated||A.extractedUrl.toString()!==k||k!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||G)&&this.urlHandlingStrategy.shouldProcessUrl(A.rawUrl))return Xp(A.source)&&(this.browserUrlTree=A.extractedUrl),(0,dn.of)(A).pipe((0,qc.w)(K=>{const ne=this.transitions.getValue();return h.next(new _d(K.id,this.serializeUrl(K.extractedUrl),K.source,K.restoredState)),ne!==this.transitions.getValue()?$i.E:Promise.resolve(K)}),function vl(u,r,s,h){return(0,qc.w)(g=>function Bp(u,r,s,h,g){return new Iy(u,r,s,h,g).apply()}(u,r,s,g.extractedUrl,h).pipe((0,Yn.U)(x=>Object.assign(Object.assign({},g),{urlAfterRedirects:x}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),bs(K=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:K.urlAfterRedirects})}),function uf(u,r,s,h,g){return(0,qi.z)(x=>function lf(u,r,s,h,g="emptyOnly",x="legacy"){try{const b=new Fy(u,r,s,h,g,x).recognize();return null===b?Oa(new xl):(0,dn.of)(b)}catch(b){return Oa(b)}}(u,r,x.urlAfterRedirects,s(x.urlAfterRedirects),h,g).pipe((0,Yn.U)(b=>Object.assign(Object.assign({},x),{targetSnapshot:b}))))}(this.rootComponentType,this.config,K=>this.serializeUrl(K),this.paramsInheritanceStrategy,this.relativeLinkResolution),bs(K=>{if("eager"===this.urlUpdateStrategy){if(!K.extras.skipLocationChange){const se=this.urlHandlingStrategy.merge(K.urlAfterRedirects,K.rawUrl);this.setBrowserUrl(se,K)}this.browserUrlTree=K.urlAfterRedirects}const ne=new Ep(K.id,this.serializeUrl(K.extractedUrl),this.serializeUrl(K.urlAfterRedirects),K.targetSnapshot);h.next(ne)}));if(G&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:ne,extractedUrl:se,source:Me,restoredState:ue,extras:He}=A,ot=new _d(ne,this.serializeUrl(se),Me,ue);h.next(ot);const Mt=Sg(se,this.rootComponentType).snapshot;return(0,dn.of)(Object.assign(Object.assign({},A),{targetSnapshot:Mt,urlAfterRedirects:se,extras:Object.assign(Object.assign({},He),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=A.rawUrl,A.resolve(null),$i.E}),Wd(A=>{const{targetSnapshot:k,id:G,extractedUrl:q,rawUrl:K,extras:{skipLocationChange:ne,replaceUrl:se}}=A;return this.hooks.beforePreactivation(k,{navigationId:G,appliedUrlTree:q,rawUrlTree:K,skipLocationChange:!!ne,replaceUrl:!!se})}),bs(A=>{const k=new xp(A.id,this.serializeUrl(A.extractedUrl),this.serializeUrl(A.urlAfterRedirects),A.targetSnapshot);this.triggerEvent(k)}),(0,Yn.U)(A=>Object.assign(Object.assign({},A),{guards:Lg(A.targetSnapshot,A.currentSnapshot,this.rootContexts)})),function sf(u,r){return(0,qi.z)(s=>{const{targetSnapshot:h,currentSnapshot:g,guards:{canActivateChecks:x,canDeactivateChecks:b}}=s;return 0===b.length&&0===x.length?(0,dn.of)(Object.assign(Object.assign({},s),{guardsResult:!0})):function Hd(u,r,s,h){return(0,us.D)(u).pipe((0,qi.z)(g=>function Fr(u,r,s,h,g){const x=r&&r.routeConfig?r.routeConfig.canDeactivate:null;if(!x||0===x.length)return(0,dn.of)(!0);const b=x.map(A=>{const k=Ia(A,r,g);let G;if(function Id(u){return u&&Zr(u.canDeactivate)}(k))G=zo(k.canDeactivate(u,r,s,h));else{if(!Zr(k))throw new Error("Invalid CanDeactivate guard");G=zo(k(u,r,s,h))}return G.pipe(co())});return(0,dn.of)(b).pipe(Od())}(g.component,g.route,s,r,h)),co(g=>!0!==g,!0))}(b,h,g,u).pipe((0,qi.z)(A=>A&&function Rd(u){return"boolean"==typeof u}(A)?function E0(u,r,s,h){return(0,us.D)(r).pipe((0,lo.b)(g=>fd(function ac(u,r){return null!==u&&r&&r(new bp(u)),(0,dn.of)(!0)}(g.route.parent,h),function Ly(u,r){return null!==u&&r&&r(new Sp(u)),(0,dn.of)(!0)}(g.route,h),function x0(u,r,s){const h=r[r.length-1],x=r.slice(0,r.length-1).reverse().map(b=>function As(u){const r=u.routeConfig?u.routeConfig.canActivateChild:null;return r&&0!==r.length?{node:u,guards:r}:null}(b)).filter(b=>null!==b).map(b=>vy(()=>{const A=b.guards.map(k=>{const G=Ia(k,b.node,s);let q;if(function cu(u){return u&&Zr(u.canActivateChild)}(G))q=zo(G.canActivateChild(h,u));else{if(!Zr(G))throw new Error("Invalid CanActivateChild guard");q=zo(G(h,u))}return q.pipe(co())});return(0,dn.of)(A).pipe(Od())}));return(0,dn.of)(x).pipe(Od())}(u,g.path,s),function af(u,r,s){const h=r.routeConfig?r.routeConfig.canActivate:null;if(!h||0===h.length)return(0,dn.of)(!0);const g=h.map(x=>vy(()=>{const b=Ia(x,r,s);let A;if(function lu(u){return u&&Zr(u.canActivate)}(b))A=zo(b.canActivate(r,u));else{if(!Zr(b))throw new Error("Invalid CanActivate guard");A=zo(b(r,u))}return A.pipe(co())}));return(0,dn.of)(g).pipe(Od())}(u,g.route,s))),co(g=>!0!==g,!0))}(h,x,u,r):(0,dn.of)(A)),(0,Yn.U)(A=>Object.assign(Object.assign({},s),{guardsResult:A})))})}(this.ngModule.injector,A=>this.triggerEvent(A)),bs(A=>{if(Jr(A.guardsResult)){const G=ul(`Redirecting to "${this.serializeUrl(A.guardsResult)}"`);throw G.url=A.guardsResult,G}const k=new Mp(A.id,this.serializeUrl(A.extractedUrl),this.serializeUrl(A.urlAfterRedirects),A.targetSnapshot,!!A.guardsResult);this.triggerEvent(k)}),(0,ws.h)(A=>!!A.guardsResult||(this.restoreHistory(A),this.cancelNavigationTransition(A,""),!1)),Wd(A=>{if(A.guards.canActivateChecks.length)return(0,dn.of)(A).pipe(bs(k=>{const G=new wp(k.id,this.serializeUrl(k.extractedUrl),this.serializeUrl(k.urlAfterRedirects),k.targetSnapshot);this.triggerEvent(G)}),(0,qc.w)(k=>{let G=!1;return(0,dn.of)(k).pipe(function Ng(u,r){return(0,qi.z)(s=>{const{targetSnapshot:h,guards:{canActivateChecks:g}}=s;if(!g.length)return(0,dn.of)(s);let x=0;return(0,us.D)(g).pipe((0,lo.b)(b=>function Hp(u,r,s,h){return function Gp(u,r,s,h){const g=pu(u);if(0===g.length)return(0,dn.of)({});const x={};return(0,us.D)(g).pipe((0,qi.z)(b=>function zp(u,r,s,h){const g=Ia(u,r,h);return zo(g.resolve?g.resolve(r,s):g(r,s))}(u[b],r,s,h).pipe(bs(A=>{x[b]=A}))),Yc(1),(0,qi.z)(()=>pu(x).length===g.length?(0,dn.of)(x):$i.E))}(u._resolve,u,r,h).pipe((0,Yn.U)(x=>(u._resolvedData=x,u.data=Object.assign(Object.assign({},u.data),Pp(u,s).resolve),null)))}(b.route,h,u,r)),bs(()=>x++),Yc(1),(0,qi.z)(b=>x===g.length?(0,dn.of)(s):$i.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),bs({next:()=>G=!0,complete:()=>{G||(this.restoreHistory(k),this.cancelNavigationTransition(k,"At least one route resolver didn't emit any value."))}}))}),bs(k=>{const G=new Ey(k.id,this.serializeUrl(k.extractedUrl),this.serializeUrl(k.urlAfterRedirects),k.targetSnapshot);this.triggerEvent(G)}))}),Wd(A=>{const{targetSnapshot:k,id:G,extractedUrl:q,rawUrl:K,extras:{skipLocationChange:ne,replaceUrl:se}}=A;return this.hooks.afterPreactivation(k,{navigationId:G,appliedUrlTree:q,rawUrlTree:K,skipLocationChange:!!ne,replaceUrl:!!se})}),(0,Yn.U)(A=>{const k=function Op(u,r,s){const h=fl(u,r._root,s?s._root:void 0);return new bg(h,r)}(this.routeReuseStrategy,A.targetSnapshot,A.currentRouterState);return Object.assign(Object.assign({},A),{targetRouterState:k})}),bs(A=>{this.currentUrlTree=A.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(A.urlAfterRedirects,A.rawUrl),this.routerState=A.targetRouterState,"deferred"===this.urlUpdateStrategy&&(A.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,A),this.browserUrlTree=A.urlAfterRedirects)}),((u,r,s)=>(0,Yn.U)(h=>(new ml(r,h.targetRouterState,h.currentRouterState,s).activate(u),h)))(this.rootContexts,this.routeReuseStrategy,A=>this.triggerEvent(A)),bs({next(){x=!0},complete(){x=!0}}),function zs(u){return(0,Gs.e)((r,s)=>{try{r.subscribe(s)}finally{s.add(u)}})}(()=>{var A;x||b||this.cancelNavigationTransition(g,`Navigation ID ${g.id} is not equal to the current navigation id ${this.navigationId}`),(null===(A=this.currentNavigation)||void 0===A?void 0:A.id)===g.id&&(this.currentNavigation=null)}),(0,ci.K)(A=>{if(b=!0,function _g(u){return u&&u[Cp]}(A)){const k=Jr(A.url);k||(this.navigated=!0,this.restoreHistory(g,!0));const G=new pg(g.id,this.serializeUrl(g.extractedUrl),A.message);h.next(G),k?setTimeout(()=>{const q=this.urlHandlingStrategy.merge(A.url,this.rawUrlTree),K={skipLocationChange:g.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Xp(g.source)};this.scheduleNavigation(q,"imperative",null,K,{resolve:g.resolve,reject:g.reject,promise:g.promise})},0):g.resolve(!1)}else{this.restoreHistory(g,!0);const k=new mg(g.id,this.serializeUrl(g.extractedUrl),A);h.next(k);try{g.resolve(this.errorHandler(A))}catch(G){g.reject(G)}}return $i.E}))}))}resetRootComponentType(s){this.rootComponentType=s,this.routerState.root.component=this.rootComponentType}setTransition(s){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),s))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(s=>{const h="popstate"===s.type?"popstate":"hashchange";"popstate"===h&&setTimeout(()=>{var g;const x={replaceUrl:!0},b=(null===(g=s.state)||void 0===g?void 0:g.navigationId)?s.state:null;if(b){const k=Object.assign({},b);delete k.navigationId,delete k.\u0275routerPageId,0!==Object.keys(k).length&&(x.state=k)}const A=this.parseUrl(s.url);this.scheduleNavigation(A,h,b,x)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(s){this.events.next(s)}resetConfig(s){Dg(s),this.config=s.map(gl),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(s,h={}){const{relativeTo:g,queryParams:x,fragment:b,queryParamsHandling:A,preserveFragment:k}=h,G=g||this.routerState.root,q=k?this.currentUrlTree.fragment:b;let K=null;switch(A){case"merge":K=Object.assign(Object.assign({},this.currentUrlTree.queryParams),x);break;case"preserve":K=this.currentUrlTree.queryParams;break;default:K=x||null}return null!==K&&(K=this.removeEmptyProps(K)),function Ay(u,r,s,h,g){if(0===s.length)return Cg(r.root,r.root,r,h,g);const x=function Dd(u){if("string"==typeof u[0]&&1===u.length&&"/"===u[0])return new ef(!0,0,u);let r=0,s=!1;const h=u.reduce((g,x,b)=>{if("object"==typeof x&&null!=x){if(x.outlets){const A={};return br(x.outlets,(k,G)=>{A[G]="string"==typeof k?k.split("/"):k}),[...g,{outlets:A}]}if(x.segmentPath)return[...g,x.segmentPath]}return"string"!=typeof x?[...g,x]:0===b?(x.split("/").forEach((A,k)=>{0==k&&"."===A||(0==k&&""===A?s=!0:".."===A?r++:""!=A&&g.push(A))}),g):[...g,x]},[]);return new ef(s,r,h)}(s);if(x.toRoot())return Cg(r.root,new Fn([],{}),r,h,g);const b=function tf(u,r,s){if(u.isAbsolute)return new Tg(r.root,!0,0);if(-1===s.snapshot._lastPathIndex){const x=s.snapshot._urlSegment;return new Tg(x,x===r.root,0)}const h=Wo(u.commands[0])?0:1;return function _0(u,r,s){let h=u,g=r,x=s;for(;x>g;){if(x-=g,h=h.parent,!h)throw new Error("Invalid number of '../'");g=h.segments.length}return new Tg(h,!1,g-x)}(s.snapshot._urlSegment,s.snapshot._lastPathIndex+h,u.numberOfDoubleDots)}(x,r,u),A=b.processChildren?$s(b.segmentGroup,b.index,x.commands):Lp(b.segmentGroup,b.index,x.commands);return Cg(b.segmentGroup,A,r,h,g)}(G,this.currentUrlTree,s,K,null!=q?q:null)}navigateByUrl(s,h={skipLocationChange:!1}){const g=Jr(s)?s:this.parseUrl(s),x=this.urlHandlingStrategy.merge(g,this.rawUrlTree);return this.scheduleNavigation(x,"imperative",null,h)}navigate(s,h={skipLocationChange:!1}){return function Ug(u){for(let r=0;r<u.length;r++){const s=u[r];if(null==s)throw new Error(`The requested path contains ${s} segment at index ${r}`)}}(s),this.navigateByUrl(this.createUrlTree(s,h),h)}serializeUrl(s){return this.urlSerializer.serialize(s)}parseUrl(s){let h;try{h=this.urlSerializer.parse(s)}catch(g){h=this.malformedUriErrorHandler(g,this.urlSerializer,s)}return h}isActive(s,h){let g;if(g=!0===h?Object.assign({},qp):!1===h?Object.assign({},ky):h,Jr(s))return Jc(this.currentUrlTree,s,g);const x=this.parseUrl(s);return Jc(this.currentUrlTree,x,g)}removeEmptyProps(s){return Object.keys(s).reduce((h,g)=>{const x=s[g];return null!=x&&(h[g]=x),h},{})}processNavigations(){this.navigations.subscribe(s=>{this.navigated=!0,this.lastSuccessfulId=s.id,this.currentPageId=s.targetPageId,this.events.next(new yd(s.id,this.serializeUrl(s.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,s.resolve(!0)},s=>{this.console.warn(`Unhandled Navigation Error: ${s}`)})}scheduleNavigation(s,h,g,x,b){var A,k;if(this.disposed)return Promise.resolve(!1);let G,q,K;b?(G=b.resolve,q=b.reject,K=b.promise):K=new Promise((Me,ue)=>{G=Me,q=ue});const ne=++this.navigationId;let se;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(g=this.location.getState()),se=g&&g.\u0275routerPageId?g.\u0275routerPageId:x.replaceUrl||x.skipLocationChange?null!==(A=this.browserPageId)&&void 0!==A?A:0:(null!==(k=this.browserPageId)&&void 0!==k?k:0)+1):se=0,this.setTransition({id:ne,targetPageId:se,source:h,restoredState:g,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:s,extras:x,resolve:G,reject:q,promise:K,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),K.catch(Me=>Promise.reject(Me))}setBrowserUrl(s,h){const g=this.urlSerializer.serialize(s),x=Object.assign(Object.assign({},h.extras.state),this.generateNgRouterState(h.id,h.targetPageId));this.location.isCurrentPathEqualTo(g)||h.extras.replaceUrl?this.location.replaceState(g,"",x):this.location.go(g,"",x)}restoreHistory(s,h=!1){var g,x;if("computed"===this.canceledNavigationResolution){const b=this.currentPageId-s.targetPageId;"popstate"!==s.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(g=this.currentNavigation)||void 0===g?void 0:g.finalUrl)||0===b?this.currentUrlTree===(null===(x=this.currentNavigation)||void 0===x?void 0:x.finalUrl)&&0===b&&(this.resetState(s),this.browserUrlTree=s.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(b)}else"replace"===this.canceledNavigationResolution&&(h&&this.resetState(s),this.resetUrlToCurrentUrlTree())}resetState(s){this.routerState=s.currentRouterState,this.currentUrlTree=s.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,s.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(s,h){const g=new pg(s.id,this.serializeUrl(s.extractedUrl),h);this.triggerEvent(g),s.resolve(!1)}generateNgRouterState(s,h){return"computed"===this.canceledNavigationResolution?{navigationId:s,\u0275routerPageId:h}:{navigationId:s}}}return u.\u0275fac=function(s){C.$Z()},u.\u0275prov=C.Yz7({token:u,factory:u.\u0275fac}),u})();function Xp(u){return"imperative"!==u}class Vg{}class Yp{preload(r,s){return(0,dn.of)(null)}}let lc=(()=>{class u{constructor(s,h,g,x){this.router=s,this.injector=g,this.preloadingStrategy=x,this.loader=new $d(g,h,k=>s.triggerEvent(new gg(k)),k=>s.triggerEvent(new vd(k)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,ws.h)(s=>s instanceof yd),(0,lo.b)(()=>this.preload())).subscribe(()=>{})}preload(){const s=this.injector.get(C.h0i);return this.processRoutes(s,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(s,h){const g=[];for(const x of h)if(x.loadChildren&&!x.canLoad&&x._loadedConfig){const b=x._loadedConfig;g.push(this.processRoutes(b.module,b.routes))}else x.loadChildren&&!x.canLoad?g.push(this.preloadConfig(s,x)):x.children&&g.push(this.processRoutes(s,x.children));return(0,us.D)(g).pipe((0,jh.J)(),(0,Yn.U)(x=>{}))}preloadConfig(s,h){return this.preloadingStrategy.preload(h,()=>(h._loadedConfig?(0,dn.of)(h._loadedConfig):this.loader.load(s.injector,h)).pipe((0,qi.z)(x=>(h._loadedConfig=x,this.processRoutes(x.module,x.routes)))))}}return u.\u0275fac=function(s){return new(s||u)(C.LFG(ms),C.LFG(C.Sil),C.LFG(C.zs3),C.LFG(Vg))},u.\u0275prov=C.Yz7({token:u,factory:u.\u0275fac}),u})(),Xi=(()=>{class u{constructor(s,h,g={}){this.router=s,this.viewportScroller=h,this.options=g,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},g.scrollPositionRestoration=g.scrollPositionRestoration||"disabled",g.anchorScrolling=g.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(s=>{s instanceof _d?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=s.navigationTrigger,this.restoredId=s.restoredState?s.restoredState.navigationId:0):s instanceof yd&&(this.lastId=s.id,this.scheduleScrollEvent(s,this.router.parseUrl(s.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(s=>{s instanceof xd&&(s.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(s.position):s.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(s.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(s,h){this.router.triggerEvent(new xd(s,"popstate"===this.lastSource?this.store[this.restoredId]:null,h))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return u.\u0275fac=function(s){C.$Z()},u.\u0275prov=C.Yz7({token:u,factory:u.\u0275fac}),u})();const cc=new C.OlP("ROUTER_CONFIGURATION"),uc=new C.OlP("ROUTER_FORROOT_GUARD"),Hg=[Bt,{provide:Eg,useClass:eu},{provide:ms,useFactory:function zy(u,r,s,h,g,x,b={},A,k){const G=new ms(null,u,r,s,h,g,fi(x));return A&&(G.urlHandlingStrategy=A),k&&(G.routeReuseStrategy=k),function _u(u,r){u.errorHandler&&(r.errorHandler=u.errorHandler),u.malformedUriErrorHandler&&(r.malformedUriErrorHandler=u.malformedUriErrorHandler),u.onSameUrlNavigation&&(r.onSameUrlNavigation=u.onSameUrlNavigation),u.paramsInheritanceStrategy&&(r.paramsInheritanceStrategy=u.paramsInheritanceStrategy),u.relativeLinkResolution&&(r.relativeLinkResolution=u.relativeLinkResolution),u.urlUpdateStrategy&&(r.urlUpdateStrategy=u.urlUpdateStrategy),u.canceledNavigationResolution&&(r.canceledNavigationResolution=u.canceledNavigationResolution)}(b,G),b.enableTracing&&G.events.subscribe(q=>{var K,ne;null===(K=console.group)||void 0===K||K.call(console,`Router Event: ${q.constructor.name}`),console.log(q.toString()),console.log(q),null===(ne=console.groupEnd)||void 0===ne||ne.call(console)}),G},deps:[Eg,uu,Bt,C.zs3,C.Sil,jd,cc,[class $p{},new C.FiY],[class Wp{},new C.FiY]]},uu,{provide:ir,useFactory:function Wy(u){return u.routerState.root},deps:[ms]},lc,Yp,class Vy{preload(r,s){return s().pipe((0,ci.K)(()=>(0,dn.of)(null)))}},{provide:cc,useValue:{enableTracing:!1}}];function w0(){return new C.PXZ("Router",ms)}let Yo=(()=>{class u{constructor(s,h){}static forRoot(s,h){return{ngModule:u,providers:[Hg,Gg(s),{provide:uc,useFactory:gu,deps:[[ms,new C.FiY,new C.tp0]]},{provide:cc,useValue:h||{}},{provide:rt,useFactory:dc,deps:[_e,[new C.tBr(ht),new C.FiY],cc]},{provide:Xi,useFactory:Gy,deps:[ms,Cv,cc]},{provide:Vg,useExisting:h&&h.preloadingStrategy?h.preloadingStrategy:Yp},{provide:C.PXZ,multi:!0,useFactory:w0},[zg,{provide:C.ip1,multi:!0,useFactory:Wg,deps:[zg]},{provide:fo,useFactory:mf,deps:[zg]},{provide:C.tb,multi:!0,useExisting:fo}]]}}static forChild(s){return{ngModule:u,providers:[Gg(s)]}}}return u.\u0275fac=function(s){return new(s||u)(C.LFG(uc,8),C.LFG(ms,8))},u.\u0275mod=C.oAB({type:u}),u.\u0275inj=C.cJS({}),u})();function Gy(u,r,s){return s.scrollOffset&&r.setOffset(s.scrollOffset),new Xi(u,r,s)}function dc(u,r,s={}){return s.useHash?new yt(u,r):new Et(u,r)}function gu(u){return"guarded"}function Gg(u){return[{provide:C.deG,multi:!0,useValue:u},{provide:jd,multi:!0,useValue:u}]}let zg=(()=>{class u{constructor(s){this.injector=s,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new kn.x}appInitializer(){return this.injector.get(Se,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let h=null;const g=new Promise(A=>h=A),x=this.injector.get(ms),b=this.injector.get(cc);return"disabled"===b.initialNavigation?(x.setUpLocationChangeListener(),h(!0)):"enabled"===b.initialNavigation||"enabledBlocking"===b.initialNavigation?(x.hooks.afterPreactivation=()=>this.initNavigation?(0,dn.of)(null):(this.initNavigation=!0,h(!0),this.resultOfPreactivationDone),x.initialNavigation()):h(!0),g})}bootstrapListener(s){const h=this.injector.get(cc),g=this.injector.get(lc),x=this.injector.get(Xi),b=this.injector.get(ms),A=this.injector.get(C.z2F);s===A.components[0]&&(("enabledNonBlocking"===h.initialNavigation||void 0===h.initialNavigation)&&b.initialNavigation(),g.setUpPreloading(),x.init(),b.resetRootComponentType(A.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return u.\u0275fac=function(s){return new(s||u)(C.LFG(C.zs3))},u.\u0275prov=C.Yz7({token:u,factory:u.\u0275fac}),u})();function Wg(u){return u.appInitializer.bind(u)}function mf(u){return u.bootstrapListener.bind(u)}const fo=new C.OlP("Router Initializer");function La(u,r){if(1&u&&(C.TgZ(0,"div",1)(1,"h3"),C._uU(2),C.qZA(),C.TgZ(3,"caption"),C._uU(4),C.qZA(),C.Hsn(5),C.qZA()),2&u){const s=C.oxw();C.xp6(2),C.Oqu(s.model.title),C.xp6(2),C.Oqu(s.model.description)}}const Ko=["*"];let po=(()=>{class u{}return u.\u0275fac=function(s){return new(s||u)},u.\u0275mod=C.oAB({type:u}),u.\u0275inj=C.cJS({imports:[[Wa]]}),u})(),Kp=class extends ya{render(){return Bs`
      <div>
        <svg width="59" height="53" viewBox="0 0 59 53" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M36.9766 42.8203L47.0312 13.875H51.9297L39.2969 48H35.8047L36.9766 42.8203ZM27.5781 13.875L37.5391 42.8203L38.7812 48H35.2891L22.6797 13.875H27.5781Z" fill="#363A46"/>
          <circle cx="25" cy="11" r="10" fill="#363A46"/>
          <circle cx="48" cy="21" r="10" fill="#363A46"/>
          <path d="M2.65711 27.3903C1.79263 22.4916 5.56098 18 10.5354 18H11.5516C13.7527 18 15.8565 18.9068 17.3677 20.507L19.7256 23.0036C21.8658 25.2696 21.9327 28.7912 19.8802 31.1369V31.1369C17.9306 33.365 17.9123 36.7149 19.7944 39.0003V39.0003C21.8597 41.5082 21.6612 45.2306 19.2954 47.4573L17.3103 49.3256C15.8263 50.7223 13.8653 51.5 11.8274 51.5H10.5857C5.59447 51.5 1.82188 46.9796 2.71474 42.0689L3.74363 36.41C3.91319 35.4774 3.91567 34.5221 3.75094 33.5887L2.65711 27.3903Z" fill="#363A46"/>
        </svg>
      </div>
    `}};Kp.styles=Dm`
    div {
      position: fixed;
      margin: var(--margin);
      padding: var(--padding);
      background-color: var(--surface-color);
      clip-path: polygon(0 0, 100% 0, 85% 100%, 15% 100%);
    }
  `,Kp=fh([va("main-logo")],Kp);let Zp=class extends ya{render(){return Bs`<div>
            <div class="scroll-icon"/>
            <p>scroll</p>
        </div>`}};Zp.styles=Dm`
      p {
        margin-left: -3rem;
      }
      .scroll-icon,
      .scroll-icon:before {
        position: absolute;
        left: 50%;
        bottom: var(--margin);
      }
      .scroll-icon {
        height: 3rem;
        width: 1.5rem;
        color: var(--text-color);
        box-shadow: inset 0 0 0 1px var(--text-color);
        border-radius: 4rem;
      }
      .scroll-icon:before {
        top: 0.5rem;
        width: 0.5rem;
        height: 0.5rem;
        margin-left: -0.25rem;
        background: var(--text-color);
        border-radius: 0.25rem;
        animation-duration: 1.5s;
        animation-iteration-count: infinite;
        animation-name: scroll;
        content: '';
      }

      @keyframes scroll {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
          transform: translateY(1.5rem);
        }
      }
    `,Zp=fh([va("scroll-icon")],Zp);let b0=(()=>{class u{constructor(){}ngOnInit(){}}return u.\u0275fac=function(s){return new(s||u)},u.\u0275cmp=C.Xpm({type:u,selectors:[["lib-card-tilted"]],inputs:{model:"model"},ngContentSelectors:Ko,decls:1,vars:1,consts:[["class","card-tilted",4,"ngIf"],[1,"card-tilted"]],template:function(s,h){1&s&&(C.F$t(),C.YNc(0,La,6,2,"div",0)),2&s&&C.Q6J("ngIf",h.model)},directives:[Ue],styles:["[_ngcontent-%COMP%]:root{--primary-color: #363a46;--on-primary-color: #ffffff;--secondary-color: #a9fe00;--on-secondary-color: #ffffff;--surface-color: #ffffff;--on-surface-color: #000000;--headline-color: #000000;--text-color: #000000;--background-color: #ffffff;--on-background-color: #000000;--highlight-color: #f1f1f1;--disabled-color: #c1c1c1}[_ngcontent-%COMP%]:root{--margin: 1rem;--padding: .5rem;--radius: .25rem;--box-shadow: 0 0 1rem 0 var(--highlight-color)}body[_ngcontent-%COMP%]{margin:0;padding:0;background-color:var(--background-color);color:#000}a[_ngcontent-%COMP%], [_ngcontent-%COMP%]:active, [_ngcontent-%COMP%]:focus, [_ngcontent-%COMP%]:visited{text-decoration:none;outline:none;color:#000}a[_ngcontent-%COMP%]:hover{cursor:pointer}a[_ngcontent-%COMP%]:disabled{background:var(--disabled-color)}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%]{margin:0;padding:0;color:#000}p[_ngcontent-%COMP%], .ebv__headline[_ngcontent-%COMP%]{color:#000}.ebv__subtitle[_ngcontent-%COMP%]{color:#aaa;text-transform:uppercase}.ebv__body[_ngcontent-%COMP%]{color:#000}.ebv__success[_ngcontent-%COMP%], .ebv__ok[_ngcontent-%COMP%]{color:#0d0}.ebv__warning[_ngcontent-%COMP%]{color:#fe0}.ebv__error[_ngcontent-%COMP%]{color:#b00020}button[_ngcontent-%COMP%]{padding:var(--padding);background-color:var(--primary-color);color:var(--on-primary-color);border:none;border-radius:var(--radius)}button[_ngcontent-%COMP%]:hover{background-color:var(--highlight-color);color:var(--primary-color);border:1px solid var(--highlight-color);cursor:pointer}button[_ngcontent-%COMP%]:disabled{background-color:var(--disabled-color)}.secondary-button[_ngcontent-%COMP%]{background-color:var(--on-primary-color);color:var(--primary-color);border:1px solid var(--primary-color)}.page[_ngcontent-%COMP%], .page--shadow[_ngcontent-%COMP%]{z-index:10;background-color:var(--background-color);color:var(--on-background-color);margin:0;padding:var(--padding);border-radius:var(--radius)}.page--shadow[_ngcontent-%COMP%]{box-shadow:0 0 1rem 0 var(--highlight-color)}.page--full[_ngcontent-%COMP%]{z-index:100;position:absolute;display:flex;background-color:var(--background-color);left:0;right:0;top:0;bottom:0;margin:0}.card-tilted[_ngcontent-%COMP%]{position:relative;display:grid;margin:var(--margin);padding:var(--padding);min-height:18rem;max-width:32rem;background-color:var(--surface-color);color:var(--on-surface-color);border-radius:var(--radius);text-align:left;transform:rotateX(2deg) rotateY(-3deg) rotate(2deg);perspective:16rem;box-shadow:0 0 .5rem 0 var(--primary-color)}.card-tilted[_ngcontent-%COMP%]:hover{background-color:var(--on-surface-color);color:var(--surface-color)}"]}),u})(),jy=(()=>{class u{}return u.\u0275fac=function(s){return new(s||u)},u.\u0275mod=C.oAB({type:u}),u.\u0275inj=C.cJS({imports:[[Wa]]}),u})(),pi=(()=>{class u{constructor(s){this.element=s,this.duration=1,this.delay=0,this.complete=new C.vpe,this.reverseComplete=new C.vpe,this.timeline=ud.timeline({onComplete:h=>this.complete.emit(),onReverseComplete:h=>this.reverseComplete.emit(),paused:!0,reversed:!0})}animateIn(){this.timeline.isActive()&&this.timeline.kill(),this.timeline.play()}}return u.\u0275fac=function(s){return new(s||u)(C.Y36(C.SBq))},u.\u0275dir=C.lG2({type:u,selectors:[["","coreAnimation",""]],inputs:{duration:"duration",delay:"delay"},outputs:{complete:"complete",reverseComplete:"reverseComplete"}}),u})(),$y=(()=>{class u extends pi{constructor(s){super(s),this.element=s}ngOnInit(){this.animateIn()}animateIn(){this.timeline.from(this.element.nativeElement,{opacity:0,duration:this.duration,delay:this.delay}),super.animateIn()}}return u.\u0275fac=function(s){return new(s||u)(C.Y36(C.SBq))},u.\u0275dir=C.lG2({type:u,selectors:[["","fadeInAnimation",""]],features:[C.qOj]}),u})(),$g=(()=>{class u extends pi{constructor(s){super(s),this.element=s}ngOnInit(){this.animateIn()}animateIn(){this.timeline.from(this.element.nativeElement,{y:innerHeight,duration:this.duration,delay:this.delay,ease:"elastic.out(1, 0.9)"}),super.animateIn()}}return u.\u0275fac=function(s){return new(s||u)(C.Y36(C.SBq))},u.\u0275dir=C.lG2({type:u,selectors:[["","slideUpAnimation",""]],features:[C.qOj]}),u})(),yu=(()=>{class u{}return u.\u0275fac=function(s){return new(s||u)},u.\u0275mod=C.oAB({type:u}),u.\u0275inj=C.cJS({imports:[[Wa]]}),u})(),Jp=(()=>{class u{}return u.\u0275fac=function(s){return new(s||u)},u.\u0275cmp=C.Xpm({type:u,selectors:[["lib-unauthorized-page"]],decls:9,vars:0,consts:[[1,"page"],[1,"ebv__headline"],[1,"ebv__subtitle"],[1,"ebv__body"],["href",""]],template:function(s,h){1&s&&(C.TgZ(0,"div",0)(1,"h1",1),C._uU(2,"401 Unauthorized"),C.qZA(),C.TgZ(3,"h4",2),C._uU(4,"Missing permission to access this resource."),C.qZA(),C._UZ(5,"p",3),C.TgZ(6,"a",4)(7,"button"),C._uU(8,"BACK HOME"),C.qZA()()())},encapsulation:2}),u})(),qg=(()=>{class u{}return u.\u0275fac=function(s){return new(s||u)},u.\u0275cmp=C.Xpm({type:u,selectors:[["lib-not-found-page"]],decls:6,vars:0,consts:[[1,"page"],[1,"ebv__headline"],[1,"ebv__subtitle"],[1,"pm__body"]],template:function(s,h){1&s&&(C.TgZ(0,"div",0)(1,"h1",1),C._uU(2,"404 Page Not Found"),C.qZA(),C.TgZ(3,"h4",2),C._uU(4,"The resource you are trying to access does not exist."),C.qZA(),C._UZ(5,"p",3),C.qZA())},encapsulation:2}),u})(),Xg=(()=>{class u{}return u.\u0275fac=function(s){return new(s||u)},u.\u0275mod=C.oAB({type:u}),u.\u0275inj=C.cJS({imports:[[Wa]]}),u})();const qy=[{path:"unauthorized",pathMatch:"prefix",component:Jp},{path:"**",component:qg}];let Yg=(()=>{class u{}return u.\u0275fac=function(s){return new(s||u)},u.\u0275mod=C.oAB({type:u}),u.\u0275inj=C.cJS({imports:[[Yo.forChild(qy)],Yo]}),u})(),vu=(()=>{class u{}return u.\u0275fac=function(s){return new(s||u)},u.\u0275mod=C.oAB({type:u}),u.\u0275inj=C.cJS({imports:[[Wa,Yg,po,jy,yu,Xg],Wa,po,jy,yu,Xg]}),u})();var mo=j(2323),wl=j(6451),Qp=j(5032);class Zo{constructor(r,s,h){this.kind=r,this.value=s,this.error=h,this.hasValue="N"===r}observe(r){return Kg(this,r)}do(r,s,h){const{kind:g,value:x,error:b}=this;return"N"===g?null==r?void 0:r(x):"E"===g?null==s?void 0:s(b):null==h?void 0:h()}accept(r,s,h){var g;return(0,fg.m)(null===(g=r)||void 0===g?void 0:g.next)?this.observe(r):this.do(r,s,h)}toObservable(){const{kind:r,value:s,error:h}=this,g="N"===r?(0,dn.of)(s):"E"===r?hd(()=>h):"C"===r?$i.E:0;if(!g)throw new TypeError(`Unexpected notification kind ${r}`);return g}static createNext(r){return new Zo("N",r)}static createError(r){return new Zo("E",void 0,r)}static createComplete(){return Zo.completeNotification}}function Kg(u,r){var s,h,g;const{kind:x,value:b,error:A}=u;if("string"!=typeof x)throw new TypeError('Invalid notification, missing "kind"');"N"===x?null===(s=r.next)||void 0===s||s.call(r,b):"E"===x?null===(h=r.error)||void 0===h||h.call(r,A):null===(g=r.complete)||void 0===g||g.call(r)}function qd(u,r,s,h){return(0,Gs.e)((g,x)=>{let b;r&&"function"!=typeof r?({duration:s,element:b,connector:h}=r):b=r;const A=new Map,k=ne=>{A.forEach(ne),ne(x)},G=ne=>k(se=>se.error(ne)),q=new em(x,ne=>{try{const se=u(ne);let Me=A.get(se);if(!Me){A.set(se,Me=h?h():new kn.x);const ue=function K(ne,se){const Me=new ec.y(ue=>{q.activeGroups++;const He=se.subscribe(ue);return()=>{He.unsubscribe(),0==--q.activeGroups&&q.teardownAttempted&&q.unsubscribe()}});return Me.key=ne,Me}(se,Me);if(x.next(ue),s){const He=new Kr.Q(Me,()=>{Me.complete(),null==He||He.unsubscribe()},void 0,void 0,()=>A.delete(se));q.add((0,Go.Xf)(s(ue)).subscribe(He))}}Me.next(b?b(ne):ne)}catch(se){G(se)}},()=>k(ne=>ne.complete()),G,()=>A.clear());g.subscribe(q)})}Zo.completeNotification=new Zo("C");class em extends Kr.Q{constructor(){super(...arguments),this.activeGroups=0,this.teardownAttempted=!1}unsubscribe(){this.teardownAttempted=!0,0===this.activeGroups&&super.unsubscribe()}}function tm(u,r){return r?s=>s.pipe(tm((h,g)=>(0,Go.Xf)(u(h,g)).pipe((0,Yn.U)((x,b)=>r(h,x,g,b))))):(0,Gs.e)((s,h)=>{let g=0,x=null,b=!1;s.subscribe(new Kr.Q(h,A=>{x||(x=new Kr.Q(h,void 0,()=>{x=null,b&&h.complete()}),(0,Go.Xf)(u(A,g++)).subscribe(x))},()=>{b=!0,!x&&h.complete()}))})}const nm="__@ngrx/effects_create__";function Zy(u){return Object.getOwnPropertyNames(u).filter(h=>!(!u[h]||!u[h].hasOwnProperty(nm))&&u[h][nm].hasOwnProperty("dispatch")).map(h=>Object.assign({propertyName:h},u[h][nm]))}function Zg(u){return Object.getPrototypeOf(u)}const _f="__@ngrx/effects__";function Jy(u){return(0,mo.qC)(T0,Zg)(u)}function T0(u){return function yf(u){return u.constructor.hasOwnProperty(_f)}(u)?u.constructor[_f]:[]}function A0(u,r,s){const h=Zg(u).constructor.name,g=function Ii(u){return[Jy,Zy].reduce((s,h)=>s.concat(h(u)),[])}(u).map(({propertyName:x,dispatch:b,useEffectsErrorHandler:A})=>{const k="function"==typeof u[x]?u[x]():u[x],G=A?s(k,r):k;return!1===b?G.pipe(function gf(){return(0,Gs.e)((u,r)=>{u.subscribe(new Kr.Q(r,Qp.Z))})}()):G.pipe(function bl(){return(0,Gs.e)((u,r)=>{u.subscribe(new Kr.Q(r,s=>{r.next(Zo.createNext(s))},()=>{r.next(Zo.createComplete()),r.complete()},s=>{r.next(Zo.createError(s)),r.complete()}))})}()).pipe((0,Yn.U)(K=>({effect:u[x],notification:K,propertyName:x,sourceName:h,sourceInstance:u})))});return(0,wl.T)(...g)}function vf(u,r,s=10){return u.pipe((0,ci.K)(h=>(r&&r.handleError(h),s<=1?u:vf(u,r,s-1))))}let ev=(()=>{class u extends ec.y{constructor(s){super(),s&&(this.source=s)}lift(s){const h=new u;return h.source=this,h.operator=s,h}}return u.\u0275fac=function(s){return new(s||u)(C.LFG(mo.Y$))},u.\u0275prov=C.Yz7({token:u,factory:u.\u0275fac}),u})();function sv(u){return Sl(u,"ngrxOnInitEffects")}function Sl(u,r){return u&&r in u&&"function"==typeof u[r]}const ov=new C.OlP("@ngrx/effects Internal Root Guard"),rm=new C.OlP("@ngrx/effects User Provided Effects"),hc=new C.OlP("@ngrx/effects Internal Root Effects"),R0=new C.OlP("@ngrx/effects Root Effects"),sm=new C.OlP("@ngrx/effects Internal Feature Effects"),P0=new C.OlP("@ngrx/effects Feature Effects"),n_=new C.OlP("@ngrx/effects Effects Error Handler");let om=(()=>{class u extends kn.x{constructor(s,h){super(),this.errorHandler=s,this.effectsErrorHandler=h}addEffects(s){this.next(s)}toActions(){return this.pipe(qd(Zg),(0,qi.z)(s=>s.pipe(qd(PE))),(0,qi.z)(s=>{const h=s.pipe(tm(x=>function an(u,r){return s=>{const h=A0(s,u,r);return function t_(u){return Sl(u,"ngrxOnRunEffects")}(s)?s.ngrxOnRunEffects(h):h}}(this.errorHandler,this.effectsErrorHandler)(x)),(0,Yn.U)(x=>(function tv(u,r){if("N"===u.notification.kind){const s=u.notification.value;!function Qg(u){return"function"!=typeof u&&u&&u.type&&"string"==typeof u.type}(s)&&r.handleError(new Error(`Effect ${function Ef({propertyName:u,sourceInstance:r,sourceName:s}){const h="function"==typeof r[u];return`"${s}.${String(u)}${h?"()":""}"`}(u)} dispatched an invalid action: ${function im(u){try{return JSON.stringify(u)}catch{return u}}(s)}`))}}(x,this.errorHandler),x.notification)),(0,ws.h)(x=>"N"===x.kind&&null!=x.value),function Yy(){return(0,Gs.e)((u,r)=>{u.subscribe(new Kr.Q(r,s=>Kg(s,r)))})}()),g=s.pipe((0,nc.q)(1),(0,ws.h)(sv),(0,Yn.U)(x=>x.ngrxOnInitEffects()));return(0,wl.T)(h,g)}))}}return u.\u0275fac=function(s){return new(s||u)(C.LFG(C.qLn),C.LFG(n_))},u.\u0275prov=C.Yz7({token:u,factory:u.\u0275fac}),u})();function PE(u){return function e_(u){return Sl(u,"ngrxOnIdentifyEffects")}(u)?u.ngrxOnIdentifyEffects():""}let i_=(()=>{class u{constructor(s,h){this.effectSources=s,this.store=h,this.effectsSubscription=null}start(){this.effectsSubscription||(this.effectsSubscription=this.effectSources.toActions().subscribe(this.store))}ngOnDestroy(){this.effectsSubscription&&(this.effectsSubscription.unsubscribe(),this.effectsSubscription=null)}}return u.\u0275fac=function(s){return new(s||u)(C.LFG(om),C.LFG(mo.yh))},u.\u0275prov=C.Yz7({token:u,factory:u.\u0275fac}),u})();const av="@ngrx/effects/init";(0,mo.PH)(av);let xf=(()=>{class u{constructor(s,h,g,x,b,A,k){this.sources=s,h.start(),x.forEach(G=>s.addEffects(G)),g.dispatch({type:av})}addEffects(s){this.sources.addEffects(s)}}return u.\u0275fac=function(s){return new(s||u)(C.LFG(om),C.LFG(i_),C.LFG(mo.yh),C.LFG(R0),C.LFG(mo.cr,8),C.LFG(mo.CK,8),C.LFG(ov,8))},u.\u0275mod=C.oAB({type:u}),u.\u0275inj=C.cJS({}),u})(),I0=(()=>{class u{constructor(s,h,g,x){h.forEach(b=>b.forEach(A=>s.addEffects(A)))}}return u.\u0275fac=function(s){return new(s||u)(C.LFG(xf),C.LFG(P0),C.LFG(mo.cr,8),C.LFG(mo.CK,8))},u.\u0275mod=C.oAB({type:u}),u.\u0275inj=C.cJS({}),u})(),am=(()=>{class u{static forFeature(s=[]){return{ngModule:I0,providers:[s,{provide:sm,multi:!0,useValue:s},{provide:rm,multi:!0,useValue:[]},{provide:P0,multi:!0,useFactory:Mf,deps:[C.zs3,sm,rm]}]}}static forRoot(s=[]){return{ngModule:xf,providers:[{provide:n_,useValue:vf},i_,om,ev,s,{provide:hc,useValue:[s]},{provide:ov,useFactory:OE,deps:[[i_,new C.FiY,new C.tp0],[hc,new C.PiD]]},{provide:rm,multi:!0,useValue:[]},{provide:R0,useFactory:Mf,deps:[C.zs3,hc,rm]}]}}}return u.\u0275fac=function(s){return new(s||u)},u.\u0275mod=C.oAB({type:u}),u.\u0275inj=C.cJS({}),u})();function Mf(u,r,s){const h=[];for(const g of r)h.push(...g);for(const g of s)h.push(...g);return function Bi(u,r){return r.map(s=>u.get(s))}(u,h)}function OE(u,r){if((1!==r.length||0!==r[0].length)&&u)throw new TypeError("EffectsModule.forRoot() called twice. Feature modules should use EffectsModule.forFeature() instead.");return"guarded"}var L0=j(9565);var Jo=j(5970);class lv{constructor(){this.dx=0,this.dy=0}onMouseMove(r){this.dx=r.movementX,this.dy=r.movementY}clear(){this.dx=0,this.dy=0}}class F0{constructor(r){this.mouse=new lv,this.clock=new Jo.Clock,this.params=r,this.renderer=this.makeRenderer(),this.camera=this.makeCamera(),this.helix=class cv{static makeHelix(r){const s=new Jo.BufferGeometry,h=new Float32Array(3*r.points.amount),b=(r.landscape?innerWidth/innerHeight:innerHeight/innerWidth)*r.distance;let A=0;for(let K=0;K<r.points.amount;K++)h[A++]=(Math.random()-.5)*b,h[A++]=(Math.random()-.5)*b,h[A++]=(Math.random()-.5)*b;s.setAttribute("position",new Jo.BufferAttribute(h,3));const G=(new Jo.TextureLoader).load("assets/particle-point.png"),q=new Jo.PointsMaterial({size:r.points.size,sizeAttenuation:!0,map:G,alphaTest:.5,transparent:!0});return new Jo.Points(s,q)}}.makeHelix(this.params),this.scene=this.makeScene()}animate(){const r=this.clock.getDelta(),h=this.helix.geometry.getAttribute("position").array.map(g=>g+.001*(Math.random()-.5)*r);this.helix.geometry.setAttribute("position",new Jo.BufferAttribute(h,3)),this.helix.rotateX(.1*r),this.helix.rotateX(.05*this.mouse.dy*r),this.helix.rotateY(.05*this.mouse.dx*r),this.mouse.clear(),this.renderer.render(this.scene,this.camera)}onMouseMove(r){this.mouse.onMouseMove(r)}makeScene(){const r=new Jo.Scene;return r.add(this.helix),r}makeCamera(){const r=new Jo.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,1e3);return r.translateZ(this.params.distance),r}makeRenderer(){const r=new Jo.WebGLRenderer({alpha:!0});return r.setSize(window.innerWidth,window.innerHeight),r}}function N0(u,r){if(1&u){const s=C.EpF();C.TgZ(0,"lib-card-tilted",11),C.NdJ("click",function(){const x=C.CHM(s).$implicit;return C.oxw().onPortfolioCardClicked(x)}),C.qZA()}if(2&u){const h=r.index;C.Q6J("model",r.$implicit)("duration",1)("delay",.5*h)}}function B0(u,r){1&u&&C._UZ(0,"scroll-icon")}const wf=function(){return{zIndex:"2"}},U0=[{path:"",pathMatch:"full",component:(()=>{class u{constructor(s){this.route=s,this.CARD_EASE="elastic.out(1, 0.9)",this.landscape=innerHeight/innerWidth<1,this.scrollIconVisible=!0,this.portfolioCards=[{title:"Ecommerce Storefront",description:"",url:"/shop"},{title:"Enterprise Portal",description:"",url:"/portal"},{title:"News Board",description:"",url:"/impact"},{title:"API Integration",description:"",url:"/api"}],this.positionY=0}ngAfterViewInit(){this.addParticles()}onPortfolioCardClicked(s){var h=this;return Za(function*(){h.stopAnimations(),h.animateTransition().then(()=>h.route.navigate([s.url]))})()}onMouseWheel(s){if(!this.landscape)return;this.scrollIconVisible=!1;const h=document.querySelectorAll("lib-card-tilted");if(!h||0==h.length)return;const g=parseFloat(getComputedStyle(h[0]).height);this.updatePositionY(s.deltaY,g,h.length-1),this.moveCards(h)}updatePositionY(s,h,g){const x=-h*g,b=h;this.positionY+=s>0?-h:h,this.positionY<=x?this.positionY=x:this.positionY>=b&&(this.positionY=0,this.scrollIconVisible=!0)}moveCards(s){s.forEach(h=>{ud.to(h,{y:this.positionY,duration:.5,ease:this.CARD_EASE})})}animateTransition(){return Za(function*(){return new Promise((s,h)=>{let g=document.querySelector(".transitions-view");g||h(),ud.to(g,{display:"block",left:"-50vw",duration:.5}).eventCallback("onComplete",s)})})()}addParticles(){this.particles=new F0({color:0,points:{amount:100,size:.25},distance:5,landscape:this.landscape}),document.addEventListener("mousemove",h=>{var g;null===(g=this.particles)||void 0===g||g.onMouseMove(h)});const s=document.getElementById("particles");s&&(s.appendChild(this.particles.renderer.domElement),this.animateParticles())}animateParticles(){console.log("a"),this.particles&&(this.particles.animate(),requestAnimationFrame(()=>{this.particles&&this.animateParticles()}))}stopAnimations(){this.particles=void 0}}return u.\u0275fac=function(s){return new(s||u)(C.Y36(ms))},u.\u0275cmp=C.Xpm({type:u,selectors:[["app-main-page"]],decls:14,vars:10,consts:[[1,"layout"],[1,"background-view"],["id","particles"],[1,"foreground-view",3,"wheel"],[1,"page-header"],["id","header-title","fadeInAnimation","",3,"duration","delay"],["id","header-description","fadeInAnimation","",3,"duration","delay"],[3,"className"],["slideUpAnimation","",3,"model","duration","delay","click",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"transitions-view"],["slideUpAnimation","",3,"model","duration","delay","click"]],template:function(s,h){1&s&&(C.TgZ(0,"div",0),C._UZ(1,"main-logo"),C.TgZ(2,"div",1),C._UZ(3,"div",2),C.qZA(),C.TgZ(4,"div",3),C.NdJ("wheel",function(x){return h.onMouseWheel(x)}),C.TgZ(5,"div",4)(6,"h1",5),C._uU(7,"Eduardo B. V"),C.qZA(),C.TgZ(8,"p",6),C._uU(9,"my personal portfolio"),C.qZA()(),C.TgZ(10,"div",7),C.YNc(11,N0,1,3,"lib-card-tilted",8),C.qZA(),C.YNc(12,B0,1,0,"scroll-icon",9),C.qZA(),C._UZ(13,"div",10),C.qZA()),2&s&&(C.xp6(1),C.Akn(C.DdM(9,wf)),C.xp6(5),C.Q6J("duration",1)("delay",1),C.xp6(2),C.Q6J("duration",1)("delay",1.5),C.xp6(2),C.Q6J("className",h.landscape?"projects-landscape":"projects-portrait"),C.xp6(1),C.Q6J("ngForOf",h.portfolioCards),C.xp6(1),C.Q6J("ngIf",h.scrollIconVisible&&h.landscape))},directives:[$y,Mr,b0,$g,Ue],styles:["[_ngcontent-%COMP%]:root{--primary-color: #363a46;--on-primary-color: #ffffff;--secondary-color: #a9fe00;--on-secondary-color: #ffffff;--surface-color: #ffffff;--on-surface-color: #000000;--headline-color: #000000;--text-color: #000000;--background-color: #ffffff;--on-background-color: #000000;--highlight-color: #f1f1f1;--disabled-color: #c1c1c1}[_ngcontent-%COMP%]:root{--margin: 1rem;--padding: .5rem;--radius: .25rem;--box-shadow: 0 0 1rem 0 var(--highlight-color)}body[_ngcontent-%COMP%]{margin:0;padding:0;background-color:var(--background-color);color:#000}a[_ngcontent-%COMP%], [_ngcontent-%COMP%]:active, [_ngcontent-%COMP%]:focus, [_ngcontent-%COMP%]:visited{text-decoration:none;outline:none;color:#000}a[_ngcontent-%COMP%]:hover{cursor:pointer}a[_ngcontent-%COMP%]:disabled{background:var(--disabled-color)}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%]{margin:0;padding:0;color:#000}p[_ngcontent-%COMP%], .ebv__headline[_ngcontent-%COMP%]{color:#000}.ebv__subtitle[_ngcontent-%COMP%]{color:#aaa;text-transform:uppercase}.ebv__body[_ngcontent-%COMP%]{color:#000}.ebv__success[_ngcontent-%COMP%], .ebv__ok[_ngcontent-%COMP%]{color:#0d0}.ebv__warning[_ngcontent-%COMP%]{color:#fe0}.ebv__error[_ngcontent-%COMP%]{color:#b00020}button[_ngcontent-%COMP%]{padding:var(--padding);background-color:var(--primary-color);color:var(--on-primary-color);border:none;border-radius:var(--radius)}button[_ngcontent-%COMP%]:hover{background-color:var(--highlight-color);color:var(--primary-color);border:1px solid var(--highlight-color);cursor:pointer}button[_ngcontent-%COMP%]:disabled{background-color:var(--disabled-color)}.secondary-button[_ngcontent-%COMP%]{background-color:var(--on-primary-color);color:var(--primary-color);border:1px solid var(--primary-color)}.page[_ngcontent-%COMP%], .page--shadow[_ngcontent-%COMP%]{z-index:10;background-color:var(--background-color);color:var(--on-background-color);margin:0;padding:var(--padding);border-radius:var(--radius)}.page--shadow[_ngcontent-%COMP%]{box-shadow:0 0 1rem 0 var(--highlight-color)}.page--full[_ngcontent-%COMP%]{z-index:100;position:absolute;display:flex;background-color:var(--background-color);left:0;right:0;top:0;bottom:0;margin:0}.layout[_ngcontent-%COMP%]{height:100vh;overflow:hidden}.background-view[_ngcontent-%COMP%]{top:0;left:0;background-color:var(--secondary-color)}.foreground-view[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100vh;width:100vw;z-index:10;display:flex;flex-flow:row wrap}.page-header[_ngcontent-%COMP%]{margin:25vw auto var(--margin) auto}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{background-color:var(--surface-color);padding:var(--padding);-webkit-clip-path:polygon(0 0%,100% 0%,100% 80%,90% 100%,0 100%);clip-path:polygon(0 0%,100% 0%,100% 80%,90% 100%,0 100%)}.page-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:end}.projects-landscape[_ngcontent-%COMP%]{display:flex;flex-flow:column nowrap;overflow-y:hidden;min-width:50vw;max-height:100vh}.projects-portrait[_ngcontent-%COMP%]{display:flex;flex-flow:column nowrap;min-width:100vw}.transitions-view[_ngcontent-%COMP%]{display:none;position:absolute;top:0;left:100vw;height:100vh;width:100vw;z-index:20;background-color:var(--surface-color);transform:scaleX(2);-webkit-clip-path:polygon(0% 0%,100% 0%,100% 100%,61.41% 100%,61.39% 94%,57.61% 93.75%,57.88% 87.75%,53.26% 88%,53.26% 82%,48.91% 82%,49.18% 75.2%,45.14% 75.26%,45.11% 68.15%,40.06% 68.15%,40.06% 60.33%,35.39% 60.33%,35.39% 54.26%,30.05% 54.01%,30.05% 46.69%,24.79% 46.44%,24.79% 39.34%,21.04% 39.34%,21.04% 32.57%,15.7% 32.57%,15.7% 26.12%,10.57% 25.87%,11.11% 20.54%,6.68% 20.54%,6.68% 14.24%,2.72% 13.99%,2.72% 8.5%,0% 8.5%);clip-path:polygon(0% 0%,100% 0%,100% 100%,61.41% 100%,61.39% 94%,57.61% 93.75%,57.88% 87.75%,53.26% 88%,53.26% 82%,48.91% 82%,49.18% 75.2%,45.14% 75.26%,45.11% 68.15%,40.06% 68.15%,40.06% 60.33%,35.39% 60.33%,35.39% 54.26%,30.05% 54.01%,30.05% 46.69%,24.79% 46.44%,24.79% 39.34%,21.04% 39.34%,21.04% 32.57%,15.7% 32.57%,15.7% 26.12%,10.57% 25.87%,11.11% 20.54%,6.68% 20.54%,6.68% 14.24%,2.72% 13.99%,2.72% 8.5%,0% 8.5%)}"]}),u})()}];let k0=(()=>{class u{}return u.\u0275fac=function(s){return new(s||u)},u.\u0275mod=C.oAB({type:u}),u.\u0275inj=C.cJS({imports:[[Yo.forRoot(U0)],Yo]}),u})(),lm=(()=>{class u{constructor(){this.title="shell"}}return u.\u0275fac=function(s){return new(s||u)},u.\u0275cmp=C.Xpm({type:u,selectors:[["app-root"]],decls:1,vars:0,template:function(s,h){1&s&&C._UZ(0,"router-outlet")},directives:[rf],styles:[""]}),u})(),UE=(()=>{class u{}return u.\u0275fac=function(s){return new(s||u)},u.\u0275mod=C.oAB({type:u}),u.\u0275inj=C.cJS({}),u})(),QE=(()=>{class u{}return u.\u0275fac=function(s){return new(s||u)},u.\u0275mod=C.oAB({type:u}),u.\u0275inj=C.cJS({imports:[[UE]]}),u})(),ex=(()=>{class u{}return u.\u0275fac=function(s){return new(s||u)},u.\u0275mod=C.oAB({type:u}),u.\u0275inj=C.cJS({imports:[QE]}),u})(),tx=(()=>{class u{}return u.\u0275fac=function(s){return new(s||u)},u.\u0275mod=C.oAB({type:u}),u.\u0275inj=C.cJS({imports:[[Wa,vu,ex]]}),u})(),Mx=(()=>{class u{}return u.\u0275fac=function(s){return new(s||u)},u.\u0275mod=C.oAB({type:u,bootstrap:[lm]}),u.\u0275inj=C.cJS({providers:[],imports:[[fr,k0,mo.Aw.forRoot({}),am.forRoot([]),L0.FT.instrument({maxAge:25,logOnly:true}),vu,tx]]}),u})();(0,C.G48)(),x_().bootstrapModule(Mx).catch(u=>console.error(u))},1135:(ye,ce,j)=>{"use strict";j.d(ce,{X:()=>N});var C=j(7579);class N extends C.x{constructor(Oe){super(),this._value=Oe}get value(){return this.getValue()}_subscribe(Oe){const he=super._subscribe(Oe);return!he.closed&&Oe.next(this._value),he}getValue(){const{hasError:Oe,thrownError:he,_value:Te}=this;if(Oe)throw he;return this._throwIfClosed(),Te}next(Oe){super.next(this._value=Oe)}}},8306:(ye,ce,j)=>{"use strict";j.d(ce,{y:()=>Se});var C=j(930),N=j(727),we=j(8822),Oe=j(4671);var me=j(2416),_e=j(576),fe=j(2806);let Se=(()=>{class at{constructor(dt){dt&&(this._subscribe=dt)}lift(dt){const rt=new at;return rt.source=this,rt.operator=dt,rt}subscribe(dt,rt,mt){const ht=function lt(at){return at&&at instanceof C.Lv||function De(at){return at&&(0,_e.m)(at.next)&&(0,_e.m)(at.error)&&(0,_e.m)(at.complete)}(at)&&(0,N.Nn)(at)}(dt)?dt:new C.Hp(dt,rt,mt);return(0,fe.x)(()=>{const{operator:Et,source:yt}=this;ht.add(Et?Et.call(ht,yt):yt?this._subscribe(ht):this._trySubscribe(ht))}),ht}_trySubscribe(dt){try{return this._subscribe(dt)}catch(rt){dt.error(rt)}}forEach(dt,rt){return new(rt=be(rt))((mt,ht)=>{let Et;Et=this.subscribe(yt=>{try{dt(yt)}catch(Bt){ht(Bt),null==Et||Et.unsubscribe()}},ht,mt)})}_subscribe(dt){var rt;return null===(rt=this.source)||void 0===rt?void 0:rt.subscribe(dt)}[we.L](){return this}pipe(...dt){return function Te(at){return 0===at.length?Oe.y:1===at.length?at[0]:function(dt){return at.reduce((rt,mt)=>mt(rt),dt)}}(dt)(this)}toPromise(dt){return new(dt=be(dt))((rt,mt)=>{let ht;this.subscribe(Et=>ht=Et,Et=>mt(Et),()=>rt(ht))})}}return at.create=Ye=>new at(Ye),at})();function be(at){var Ye;return null!==(Ye=null!=at?at:me.v.Promise)&&void 0!==Ye?Ye:Promise}},4707:(ye,ce,j)=>{"use strict";j.d(ce,{t:()=>we});var C=j(7579),N=j(6063);class we extends C.x{constructor(he=1/0,Te=1/0,me=N.l){super(),this._bufferSize=he,this._windowTime=Te,this._timestampProvider=me,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=Te===1/0,this._bufferSize=Math.max(1,he),this._windowTime=Math.max(1,Te)}next(he){const{isStopped:Te,_buffer:me,_infiniteTimeWindow:_e,_timestampProvider:fe,_windowTime:Se}=this;Te||(me.push(he),!_e&&me.push(fe.now()+Se)),this._trimBuffer(),super.next(he)}_subscribe(he){this._throwIfClosed(),this._trimBuffer();const Te=this._innerSubscribe(he),{_infiniteTimeWindow:me,_buffer:_e}=this,fe=_e.slice();for(let Se=0;Se<fe.length&&!he.closed;Se+=me?1:2)he.next(fe[Se]);return this._checkFinalizedStatuses(he),Te}_trimBuffer(){const{_bufferSize:he,_timestampProvider:Te,_buffer:me,_infiniteTimeWindow:_e}=this,fe=(_e?1:2)*he;if(he<1/0&&fe<me.length&&me.splice(0,me.length-fe),!_e){const Se=Te.now();let be=0;for(let De=1;De<me.length&&me[De]<=Se;De+=2)be=De;be&&me.splice(0,be+1)}}}},7579:(ye,ce,j)=>{"use strict";j.d(ce,{x:()=>me});var C=j(8306),N=j(727);const Oe=(0,j(3888).d)(fe=>function(){fe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var he=j(8737),Te=j(2806);let me=(()=>{class fe extends C.y{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(be){const De=new _e(this,this);return De.operator=be,De}_throwIfClosed(){if(this.closed)throw new Oe}next(be){(0,Te.x)(()=>{if(this._throwIfClosed(),!this.isStopped){const De=this.observers.slice();for(const lt of De)lt.next(be)}})}error(be){(0,Te.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=be;const{observers:De}=this;for(;De.length;)De.shift().error(be)}})}complete(){(0,Te.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:be}=this;for(;be.length;)be.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var be;return(null===(be=this.observers)||void 0===be?void 0:be.length)>0}_trySubscribe(be){return this._throwIfClosed(),super._trySubscribe(be)}_subscribe(be){return this._throwIfClosed(),this._checkFinalizedStatuses(be),this._innerSubscribe(be)}_innerSubscribe(be){const{hasError:De,isStopped:lt,observers:at}=this;return De||lt?N.Lc:(at.push(be),new N.w0(()=>(0,he.P)(at,be)))}_checkFinalizedStatuses(be){const{hasError:De,thrownError:lt,isStopped:at}=this;De?be.error(lt):at&&be.complete()}asObservable(){const be=new C.y;return be.source=this,be}}return fe.create=(Se,be)=>new _e(Se,be),fe})();class _e extends me{constructor(Se,be){super(),this.destination=Se,this.source=be}next(Se){var be,De;null===(De=null===(be=this.destination)||void 0===be?void 0:be.next)||void 0===De||De.call(be,Se)}error(Se){var be,De;null===(De=null===(be=this.destination)||void 0===be?void 0:be.error)||void 0===De||De.call(be,Se)}complete(){var Se,be;null===(be=null===(Se=this.destination)||void 0===Se?void 0:Se.complete)||void 0===be||be.call(Se)}_subscribe(Se){var be,De;return null!==(De=null===(be=this.source)||void 0===be?void 0:be.subscribe(Se))&&void 0!==De?De:N.Lc}}},930:(ye,ce,j)=>{"use strict";j.d(ce,{Hp:()=>lt,Lv:()=>De});var C=j(576),N=j(727),we=j(2416),Oe=j(7849),he=j(5032);const Te=fe("C",void 0,void 0);function fe(mt,ht,Et){return{kind:mt,value:ht,error:Et}}var Se=j(3410),be=j(2806);class De extends N.w0{constructor(ht){super(),this.isStopped=!1,ht?(this.destination=ht,(0,N.Nn)(ht)&&ht.add(this)):this.destination=rt}static create(ht,Et,yt){return new lt(ht,Et,yt)}next(ht){this.isStopped?dt(function _e(mt){return fe("N",mt,void 0)}(ht),this):this._next(ht)}error(ht){this.isStopped?dt(function me(mt){return fe("E",void 0,mt)}(ht),this):(this.isStopped=!0,this._error(ht))}complete(){this.isStopped?dt(Te,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ht){this.destination.next(ht)}_error(ht){try{this.destination.error(ht)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class lt extends De{constructor(ht,Et,yt){let Bt;if(super(),(0,C.m)(ht))Bt=ht;else if(ht){let Ut;({next:Bt,error:Et,complete:yt}=ht),this&&we.v.useDeprecatedNextContext?(Ut=Object.create(ht),Ut.unsubscribe=()=>this.unsubscribe()):Ut=ht,Bt=null==Bt?void 0:Bt.bind(Ut),Et=null==Et?void 0:Et.bind(Ut),yt=null==yt?void 0:yt.bind(Ut)}this.destination={next:Bt?at(Bt):he.Z,error:at(null!=Et?Et:Ye),complete:yt?at(yt):he.Z}}}function at(mt,ht){return(...Et)=>{try{mt(...Et)}catch(yt){we.v.useDeprecatedSynchronousErrorHandling?(0,be.O)(yt):(0,Oe.h)(yt)}}}function Ye(mt){throw mt}function dt(mt,ht){const{onStoppedNotification:Et}=we.v;Et&&Se.z.setTimeout(()=>Et(mt,ht))}const rt={closed:!0,next:he.Z,error:Ye,complete:he.Z}},727:(ye,ce,j)=>{"use strict";j.d(ce,{Lc:()=>Te,w0:()=>he,Nn:()=>me});var C=j(576);const we=(0,j(3888).d)(fe=>function(be){fe(this),this.message=be?`${be.length} errors occurred during unsubscription:\n${be.map((De,lt)=>`${lt+1}) ${De.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=be});var Oe=j(8737);class he{constructor(Se){this.initialTeardown=Se,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let Se;if(!this.closed){this.closed=!0;const{_parentage:be}=this;if(be)if(this._parentage=null,Array.isArray(be))for(const at of be)at.remove(this);else be.remove(this);const{initialTeardown:De}=this;if((0,C.m)(De))try{De()}catch(at){Se=at instanceof we?at.errors:[at]}const{_teardowns:lt}=this;if(lt){this._teardowns=null;for(const at of lt)try{_e(at)}catch(Ye){Se=null!=Se?Se:[],Ye instanceof we?Se=[...Se,...Ye.errors]:Se.push(Ye)}}if(Se)throw new we(Se)}}add(Se){var be;if(Se&&Se!==this)if(this.closed)_e(Se);else{if(Se instanceof he){if(Se.closed||Se._hasParent(this))return;Se._addParent(this)}(this._teardowns=null!==(be=this._teardowns)&&void 0!==be?be:[]).push(Se)}}_hasParent(Se){const{_parentage:be}=this;return be===Se||Array.isArray(be)&&be.includes(Se)}_addParent(Se){const{_parentage:be}=this;this._parentage=Array.isArray(be)?(be.push(Se),be):be?[be,Se]:Se}_removeParent(Se){const{_parentage:be}=this;be===Se?this._parentage=null:Array.isArray(be)&&(0,Oe.P)(be,Se)}remove(Se){const{_teardowns:be}=this;be&&(0,Oe.P)(be,Se),Se instanceof he&&Se._removeParent(this)}}he.EMPTY=(()=>{const fe=new he;return fe.closed=!0,fe})();const Te=he.EMPTY;function me(fe){return fe instanceof he||fe&&"closed"in fe&&(0,C.m)(fe.remove)&&(0,C.m)(fe.add)&&(0,C.m)(fe.unsubscribe)}function _e(fe){(0,C.m)(fe)?fe():fe.unsubscribe()}},2416:(ye,ce,j)=>{"use strict";j.d(ce,{v:()=>C});const C={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(ye,ce,j)=>{"use strict";j.d(ce,{E:()=>N});const N=new(j(8306).y)(he=>he.complete())},457:(ye,ce,j)=>{"use strict";j.d(ce,{D:()=>Ut});var C=j(8421),N=j(5363),we=j(4482);function Oe(Qt,en=0){return(0,we.e)((Pn,Ae)=>{Ae.add(Qt.schedule(()=>Pn.subscribe(Ae),en))})}var me=j(8306),fe=j(2202),Se=j(576),be=j(9672);function lt(Qt,en){if(!Qt)throw new Error("Iterable cannot be null");return new me.y(Pn=>{(0,be.f)(Pn,en,()=>{const Ae=Qt[Symbol.asyncIterator]();(0,be.f)(Pn,en,()=>{Ae.next().then($e=>{$e.done?Pn.complete():Pn.next($e.value)})},0,!0)})})}var at=j(3670),Ye=j(8239),dt=j(1144),rt=j(6495),mt=j(2206),ht=j(4532),Et=j(3260);function Ut(Qt,en){return en?function Bt(Qt,en){if(null!=Qt){if((0,at.c)(Qt))return function he(Qt,en){return(0,C.Xf)(Qt).pipe(Oe(en),(0,N.Q)(en))}(Qt,en);if((0,dt.z)(Qt))return function _e(Qt,en){return new me.y(Pn=>{let Ae=0;return en.schedule(function(){Ae===Qt.length?Pn.complete():(Pn.next(Qt[Ae++]),Pn.closed||this.schedule())})})}(Qt,en);if((0,Ye.t)(Qt))return function Te(Qt,en){return(0,C.Xf)(Qt).pipe(Oe(en),(0,N.Q)(en))}(Qt,en);if((0,mt.D)(Qt))return lt(Qt,en);if((0,rt.T)(Qt))return function De(Qt,en){return new me.y(Pn=>{let Ae;return(0,be.f)(Pn,en,()=>{Ae=Qt[fe.h](),(0,be.f)(Pn,en,()=>{let $e,qe;try{({value:$e,done:qe}=Ae.next())}catch(et){return void Pn.error(et)}qe?Pn.complete():Pn.next($e)},0,!0)}),()=>(0,Se.m)(null==Ae?void 0:Ae.return)&&Ae.return()})}(Qt,en);if((0,Et.L)(Qt))return function yt(Qt,en){return lt((0,Et.Q)(Qt),en)}(Qt,en)}throw(0,ht.z)(Qt)}(Qt,en):(0,C.Xf)(Qt)}},8421:(ye,ce,j)=>{"use strict";j.d(ce,{Xf:()=>lt});var C=j(5987),N=j(1144),we=j(8239),Oe=j(8306),he=j(3670),Te=j(2206),me=j(4532),_e=j(6495),fe=j(3260),Se=j(576),be=j(7849),De=j(8822);function lt(yt){if(yt instanceof Oe.y)return yt;if(null!=yt){if((0,he.c)(yt))return function at(yt){return new Oe.y(Bt=>{const Ut=yt[De.L]();if((0,Se.m)(Ut.subscribe))return Ut.subscribe(Bt);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(yt);if((0,N.z)(yt))return function Ye(yt){return new Oe.y(Bt=>{for(let Ut=0;Ut<yt.length&&!Bt.closed;Ut++)Bt.next(yt[Ut]);Bt.complete()})}(yt);if((0,we.t)(yt))return function dt(yt){return new Oe.y(Bt=>{yt.then(Ut=>{Bt.closed||(Bt.next(Ut),Bt.complete())},Ut=>Bt.error(Ut)).then(null,be.h)})}(yt);if((0,Te.D)(yt))return mt(yt);if((0,_e.T)(yt))return function rt(yt){return new Oe.y(Bt=>{for(const Ut of yt)if(Bt.next(Ut),Bt.closed)return;Bt.complete()})}(yt);if((0,fe.L)(yt))return function ht(yt){return mt((0,fe.Q)(yt))}(yt)}throw(0,me.z)(yt)}function mt(yt){return new Oe.y(Bt=>{(function Et(yt,Bt){var Ut,Qt,en,Pn;return(0,C.mG)(this,void 0,void 0,function*(){try{for(Ut=(0,C.KL)(yt);!(Qt=yield Ut.next()).done;)if(Bt.next(Qt.value),Bt.closed)return}catch(Ae){en={error:Ae}}finally{try{Qt&&!Qt.done&&(Pn=Ut.return)&&(yield Pn.call(Ut))}finally{if(en)throw en.error}}Bt.complete()})})(yt,Bt).catch(Ut=>Bt.error(Ut))})}},6451:(ye,ce,j)=>{"use strict";j.d(ce,{T:()=>Te});var C=j(8189),N=j(8421),we=j(515),Oe=j(7669),he=j(457);function Te(...me){const _e=(0,Oe.yG)(me),fe=(0,Oe._6)(me,1/0),Se=me;return Se.length?1===Se.length?(0,N.Xf)(Se[0]):(0,C.J)(fe)((0,he.D)(Se,_e)):we.E}},9646:(ye,ce,j)=>{"use strict";j.d(ce,{of:()=>we});var C=j(7669),N=j(457);function we(...Oe){const he=(0,C.yG)(Oe);return(0,N.D)(Oe,he)}},5403:(ye,ce,j)=>{"use strict";j.d(ce,{Q:()=>N});var C=j(930);class N extends C.Lv{constructor(Oe,he,Te,me,_e){super(Oe),this.onFinalize=_e,this._next=he?function(fe){try{he(fe)}catch(Se){Oe.error(Se)}}:super._next,this._error=me?function(fe){try{me(fe)}catch(Se){Oe.error(Se)}finally{this.unsubscribe()}}:super._error,this._complete=Te?function(){try{Te()}catch(fe){Oe.error(fe)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var Oe;const{closed:he}=this;super.unsubscribe(),!he&&(null===(Oe=this.onFinalize)||void 0===Oe||Oe.call(this))}}},262:(ye,ce,j)=>{"use strict";j.d(ce,{K:()=>Oe});var C=j(8421),N=j(5403),we=j(4482);function Oe(he){return(0,we.e)((Te,me)=>{let Se,_e=null,fe=!1;_e=Te.subscribe(new N.Q(me,void 0,void 0,be=>{Se=(0,C.Xf)(he(be,Oe(he)(Te))),_e?(_e.unsubscribe(),_e=null,Se.subscribe(me)):fe=!0})),fe&&(_e.unsubscribe(),_e=null,Se.subscribe(me))})}},4351:(ye,ce,j)=>{"use strict";j.d(ce,{b:()=>we});var C=j(5577),N=j(576);function we(Oe,he){return(0,N.m)(he)?(0,C.z)(Oe,he,1):(0,C.z)(Oe,1)}},8372:(ye,ce,j)=>{"use strict";j.d(ce,{b:()=>Oe});var C=j(4986),N=j(4482),we=j(5403);function Oe(he,Te=C.z){return(0,N.e)((me,_e)=>{let fe=null,Se=null,be=null;const De=()=>{if(fe){fe.unsubscribe(),fe=null;const at=Se;Se=null,_e.next(at)}};function lt(){const at=be+he,Ye=Te.now();if(Ye<at)return fe=this.schedule(void 0,at-Ye),void _e.add(fe);De()}me.subscribe(new we.Q(_e,at=>{Se=at,be=Te.now(),fe||(fe=Te.schedule(lt,he),_e.add(fe))},()=>{De(),_e.complete()},void 0,()=>{Se=fe=null}))})}},9300:(ye,ce,j)=>{"use strict";j.d(ce,{h:()=>we});var C=j(4482),N=j(5403);function we(Oe,he){return(0,C.e)((Te,me)=>{let _e=0;Te.subscribe(new N.Q(me,fe=>Oe.call(he,fe,_e++)&&me.next(fe)))})}},4004:(ye,ce,j)=>{"use strict";j.d(ce,{U:()=>we});var C=j(4482),N=j(5403);function we(Oe,he){return(0,C.e)((Te,me)=>{let _e=0;Te.subscribe(new N.Q(me,fe=>{me.next(Oe.call(he,fe,_e++))}))})}},8189:(ye,ce,j)=>{"use strict";j.d(ce,{J:()=>we});var C=j(5577),N=j(4671);function we(Oe=1/0){return(0,C.z)(N.y,Oe)}},5577:(ye,ce,j)=>{"use strict";j.d(ce,{z:()=>_e});var C=j(4004),N=j(8421),we=j(4482),Oe=j(9672),he=j(5403),me=j(576);function _e(fe,Se,be=1/0){return(0,me.m)(Se)?_e((De,lt)=>(0,C.U)((at,Ye)=>Se(De,at,lt,Ye))((0,N.Xf)(fe(De,lt))),be):("number"==typeof Se&&(be=Se),(0,we.e)((De,lt)=>function Te(fe,Se,be,De,lt,at,Ye,dt){const rt=[];let mt=0,ht=0,Et=!1;const yt=()=>{Et&&!rt.length&&!mt&&Se.complete()},Bt=Qt=>mt<De?Ut(Qt):rt.push(Qt),Ut=Qt=>{at&&Se.next(Qt),mt++;let en=!1;(0,N.Xf)(be(Qt,ht++)).subscribe(new he.Q(Se,Pn=>{null==lt||lt(Pn),at?Bt(Pn):Se.next(Pn)},()=>{en=!0},void 0,()=>{if(en)try{for(mt--;rt.length&&mt<De;){const Pn=rt.shift();Ye?(0,Oe.f)(Se,Ye,()=>Ut(Pn)):Ut(Pn)}yt()}catch(Pn){Se.error(Pn)}}))};return fe.subscribe(new he.Q(Se,Bt,()=>{Et=!0,yt()})),()=>{null==dt||dt()}}(De,lt,fe,be)))}},5363:(ye,ce,j)=>{"use strict";j.d(ce,{Q:()=>Oe});var C=j(9672),N=j(4482),we=j(5403);function Oe(he,Te=0){return(0,N.e)((me,_e)=>{me.subscribe(new we.Q(_e,fe=>(0,C.f)(_e,he,()=>_e.next(fe),Te),()=>(0,C.f)(_e,he,()=>_e.complete(),Te),fe=>(0,C.f)(_e,he,()=>_e.error(fe),Te)))})}},5026:(ye,ce,j)=>{"use strict";j.d(ce,{R:()=>Oe});var C=j(4482),N=j(5403);function we(he,Te,me,_e,fe){return(Se,be)=>{let De=me,lt=Te,at=0;Se.subscribe(new N.Q(be,Ye=>{const dt=at++;lt=De?he(lt,Ye,dt):(De=!0,Ye),_e&&be.next(lt)},fe&&(()=>{De&&be.next(lt),be.complete()})))}}function Oe(he,Te){return(0,C.e)(we(he,Te,arguments.length>=2,!0))}},3099:(ye,ce,j)=>{"use strict";j.d(ce,{B:()=>Te});var C=j(457),N=j(5698),we=j(7579),Oe=j(930),he=j(4482);function Te(_e={}){const{connector:fe=(()=>new we.x),resetOnError:Se=!0,resetOnComplete:be=!0,resetOnRefCountZero:De=!0}=_e;return lt=>{let at=null,Ye=null,dt=null,rt=0,mt=!1,ht=!1;const Et=()=>{null==Ye||Ye.unsubscribe(),Ye=null},yt=()=>{Et(),at=dt=null,mt=ht=!1},Bt=()=>{const Ut=at;yt(),null==Ut||Ut.unsubscribe()};return(0,he.e)((Ut,Qt)=>{rt++,!ht&&!mt&&Et();const en=dt=null!=dt?dt:fe();Qt.add(()=>{rt--,0===rt&&!ht&&!mt&&(Ye=me(Bt,De))}),en.subscribe(Qt),at||(at=new Oe.Hp({next:Pn=>en.next(Pn),error:Pn=>{ht=!0,Et(),Ye=me(yt,Se,Pn),en.error(Pn)},complete:()=>{mt=!0,Et(),Ye=me(yt,be),en.complete()}}),(0,C.D)(Ut).subscribe(at))})(lt)}}function me(_e,fe,...Se){return!0===fe?(_e(),null):!1===fe?null:fe(...Se).pipe((0,N.q)(1)).subscribe(()=>_e())}},5684:(ye,ce,j)=>{"use strict";j.d(ce,{T:()=>N});var C=j(9300);function N(we){return(0,C.h)((Oe,he)=>we<=he)}},3900:(ye,ce,j)=>{"use strict";j.d(ce,{w:()=>Oe});var C=j(8421),N=j(4482),we=j(5403);function Oe(he,Te){return(0,N.e)((me,_e)=>{let fe=null,Se=0,be=!1;const De=()=>be&&!fe&&_e.complete();me.subscribe(new we.Q(_e,lt=>{null==fe||fe.unsubscribe();let at=0;const Ye=Se++;(0,C.Xf)(he(lt,Ye)).subscribe(fe=new we.Q(_e,dt=>_e.next(Te?Te(lt,dt,Ye,at++):dt),()=>{fe=null,De()}))},()=>{be=!0,De()}))})}},5698:(ye,ce,j)=>{"use strict";j.d(ce,{q:()=>Oe});var C=j(515),N=j(4482),we=j(5403);function Oe(he){return he<=0?()=>C.E:(0,N.e)((Te,me)=>{let _e=0;Te.subscribe(new we.Q(me,fe=>{++_e<=he&&(me.next(fe),he<=_e&&me.complete())}))})}},2722:(ye,ce,j)=>{"use strict";j.d(ce,{R:()=>he});var C=j(4482),N=j(5403),we=j(8421),Oe=j(5032);function he(Te){return(0,C.e)((me,_e)=>{(0,we.Xf)(Te).subscribe(new N.Q(_e,()=>_e.complete(),Oe.Z)),!_e.closed&&me.subscribe(_e)})}},1749:(ye,ce,j)=>{"use strict";j.d(ce,{V:()=>fe});var C=j(4986),we=j(4482),Oe=j(8421),he=j(3888),Te=j(5403),me=j(9672);const _e=(0,he.d)(be=>function(lt=null){be(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=lt});function fe(be,De){const{first:lt,each:at,with:Ye=Se,scheduler:dt=(null!=De?De:C.z),meta:rt=null}=function N(be){return be instanceof Date&&!isNaN(be)}(be)?{first:be}:"number"==typeof be?{each:be}:be;if(null==lt&&null==at)throw new TypeError("No timeout provided.");return(0,we.e)((mt,ht)=>{let Et,yt,Bt=null,Ut=0;const Qt=en=>{yt=(0,me.f)(ht,dt,()=>{try{Et.unsubscribe(),(0,Oe.Xf)(Ye({meta:rt,lastValue:Bt,seen:Ut})).subscribe(ht)}catch(Pn){ht.error(Pn)}},en)};Et=mt.subscribe(new Te.Q(ht,en=>{null==yt||yt.unsubscribe(),Ut++,ht.next(Bt=en),at>0&&Qt(at)},void 0,void 0,()=>{(null==yt?void 0:yt.closed)||null==yt||yt.unsubscribe(),Bt=null})),Qt(null!=lt?"number"==typeof lt?lt:+lt-dt.now():at)})}function Se(be){throw new _e(be)}},1365:(ye,ce,j)=>{"use strict";j.d(ce,{M:()=>me});var C=j(4482),N=j(5403),we=j(8421),Oe=j(4671),he=j(5032),Te=j(7669);function me(..._e){const fe=(0,Te.jO)(_e);return(0,C.e)((Se,be)=>{const De=_e.length,lt=new Array(De);let at=_e.map(()=>!1),Ye=!1;for(let dt=0;dt<De;dt++)(0,we.Xf)(_e[dt]).subscribe(new N.Q(be,rt=>{lt[dt]=rt,!Ye&&!at[dt]&&(at[dt]=!0,(Ye=at.every(Oe.y))&&(at=null))},he.Z));Se.subscribe(new N.Q(be,dt=>{if(Ye){const rt=[dt,...lt];be.next(fe?fe(...rt):rt)}}))})}},4408:(ye,ce,j)=>{"use strict";j.d(ce,{o:()=>he});var C=j(727);class N extends C.w0{constructor(me,_e){super()}schedule(me,_e=0){return this}}const we={setInterval(...Te){const{delegate:me}=we;return((null==me?void 0:me.setInterval)||setInterval)(...Te)},clearInterval(Te){const{delegate:me}=we;return((null==me?void 0:me.clearInterval)||clearInterval)(Te)},delegate:void 0};var Oe=j(8737);class he extends N{constructor(me,_e){super(me,_e),this.scheduler=me,this.work=_e,this.pending=!1}schedule(me,_e=0){if(this.closed)return this;this.state=me;const fe=this.id,Se=this.scheduler;return null!=fe&&(this.id=this.recycleAsyncId(Se,fe,_e)),this.pending=!0,this.delay=_e,this.id=this.id||this.requestAsyncId(Se,this.id,_e),this}requestAsyncId(me,_e,fe=0){return we.setInterval(me.flush.bind(me,this),fe)}recycleAsyncId(me,_e,fe=0){if(null!=fe&&this.delay===fe&&!1===this.pending)return _e;we.clearInterval(_e)}execute(me,_e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const fe=this._execute(me,_e);if(fe)return fe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(me,_e){let Se,fe=!1;try{this.work(me)}catch(be){fe=!0,Se=be||new Error("Scheduled action threw falsy error")}if(fe)return this.unsubscribe(),Se}unsubscribe(){if(!this.closed){const{id:me,scheduler:_e}=this,{actions:fe}=_e;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Oe.P)(fe,this),null!=me&&(this.id=this.recycleAsyncId(_e,me,null)),this.delay=null,super.unsubscribe()}}}},7565:(ye,ce,j)=>{"use strict";j.d(ce,{v:()=>we});var C=j(6063);class N{constructor(he,Te=N.now){this.schedulerActionCtor=he,this.now=Te}schedule(he,Te=0,me){return new this.schedulerActionCtor(this,he).schedule(me,Te)}}N.now=C.l.now;class we extends N{constructor(he,Te=N.now){super(he,Te),this.actions=[],this._active=!1,this._scheduled=void 0}flush(he){const{actions:Te}=this;if(this._active)return void Te.push(he);let me;this._active=!0;do{if(me=he.execute(he.state,he.delay))break}while(he=Te.shift());if(this._active=!1,me){for(;he=Te.shift();)he.unsubscribe();throw me}}}},4986:(ye,ce,j)=>{"use strict";j.d(ce,{z:()=>we});var C=j(4408);const we=new(j(7565).v)(C.o)},6063:(ye,ce,j)=>{"use strict";j.d(ce,{l:()=>C});const C={now:()=>(C.delegate||Date).now(),delegate:void 0}},233:(ye,ce,j)=>{"use strict";j.d(ce,{N:()=>he});var C=j(4408),we=j(7565);const he=new class Oe extends we.v{}(class N extends C.o{constructor(_e,fe){super(_e,fe),this.scheduler=_e,this.work=fe}schedule(_e,fe=0){return fe>0?super.schedule(_e,fe):(this.delay=fe,this.state=_e,this.scheduler.flush(this),this)}execute(_e,fe){return fe>0||this.closed?super.execute(_e,fe):this._execute(_e,fe)}requestAsyncId(_e,fe,Se=0){return null!=Se&&Se>0||null==Se&&this.delay>0?super.requestAsyncId(_e,fe,Se):_e.flush(this)}})},3410:(ye,ce,j)=>{"use strict";j.d(ce,{z:()=>C});const C={setTimeout(...N){const{delegate:we}=C;return((null==we?void 0:we.setTimeout)||setTimeout)(...N)},clearTimeout(N){const{delegate:we}=C;return((null==we?void 0:we.clearTimeout)||clearTimeout)(N)},delegate:void 0}},2202:(ye,ce,j)=>{"use strict";j.d(ce,{h:()=>N});const N=function C(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ye,ce,j)=>{"use strict";j.d(ce,{L:()=>C});const C="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(ye,ce,j)=>{"use strict";j.d(ce,{_6:()=>Te,jO:()=>Oe,yG:()=>he});var C=j(576);function we(me){return me[me.length-1]}function Oe(me){return(0,C.m)(we(me))?me.pop():void 0}function he(me){return function N(me){return me&&(0,C.m)(me.schedule)}(we(me))?me.pop():void 0}function Te(me,_e){return"number"==typeof we(me)?me.pop():_e}},8737:(ye,ce,j)=>{"use strict";function C(N,we){if(N){const Oe=N.indexOf(we);0<=Oe&&N.splice(Oe,1)}}j.d(ce,{P:()=>C})},3888:(ye,ce,j)=>{"use strict";function C(N){const Oe=N(he=>{Error.call(he),he.stack=(new Error).stack});return Oe.prototype=Object.create(Error.prototype),Oe.prototype.constructor=Oe,Oe}j.d(ce,{d:()=>C})},2806:(ye,ce,j)=>{"use strict";j.d(ce,{x:()=>we,O:()=>Oe});var C=j(2416);let N=null;function we(he){if(C.v.useDeprecatedSynchronousErrorHandling){const Te=!N;if(Te&&(N={errorThrown:!1,error:null}),he(),Te){const{errorThrown:me,error:_e}=N;if(N=null,me)throw _e}}else he()}function Oe(he){C.v.useDeprecatedSynchronousErrorHandling&&N&&(N.errorThrown=!0,N.error=he)}},9672:(ye,ce,j)=>{"use strict";function C(N,we,Oe,he=0,Te=!1){const me=we.schedule(function(){Oe(),Te?N.add(this.schedule(null,he)):this.unsubscribe()},he);if(N.add(me),!Te)return me}j.d(ce,{f:()=>C})},4671:(ye,ce,j)=>{"use strict";function C(N){return N}j.d(ce,{y:()=>C})},1144:(ye,ce,j)=>{"use strict";j.d(ce,{z:()=>C});const C=N=>N&&"number"==typeof N.length&&"function"!=typeof N},2206:(ye,ce,j)=>{"use strict";j.d(ce,{D:()=>N});var C=j(576);function N(we){return Symbol.asyncIterator&&(0,C.m)(null==we?void 0:we[Symbol.asyncIterator])}},576:(ye,ce,j)=>{"use strict";function C(N){return"function"==typeof N}j.d(ce,{m:()=>C})},3670:(ye,ce,j)=>{"use strict";j.d(ce,{c:()=>we});var C=j(8822),N=j(576);function we(Oe){return(0,N.m)(Oe[C.L])}},6495:(ye,ce,j)=>{"use strict";j.d(ce,{T:()=>we});var C=j(2202),N=j(576);function we(Oe){return(0,N.m)(null==Oe?void 0:Oe[C.h])}},8239:(ye,ce,j)=>{"use strict";j.d(ce,{t:()=>N});var C=j(576);function N(we){return(0,C.m)(null==we?void 0:we.then)}},3260:(ye,ce,j)=>{"use strict";j.d(ce,{Q:()=>we,L:()=>Oe});var C=j(5987),N=j(576);function we(he){return(0,C.FC)(this,arguments,function*(){const me=he.getReader();try{for(;;){const{value:_e,done:fe}=yield(0,C.qq)(me.read());if(fe)return yield(0,C.qq)(void 0);yield yield(0,C.qq)(_e)}}finally{me.releaseLock()}})}function Oe(he){return(0,N.m)(null==he?void 0:he.getReader)}},4482:(ye,ce,j)=>{"use strict";j.d(ce,{A:()=>N,e:()=>we});var C=j(576);function N(Oe){return(0,C.m)(null==Oe?void 0:Oe.lift)}function we(Oe){return he=>{if(N(he))return he.lift(function(Te){try{return Oe(Te,this)}catch(me){this.error(me)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(ye,ce,j)=>{"use strict";function C(){}j.d(ce,{Z:()=>C})},7849:(ye,ce,j)=>{"use strict";j.d(ce,{h:()=>we});var C=j(2416),N=j(3410);function we(Oe){N.z.setTimeout(()=>{const{onUnhandledError:he}=C.v;if(!he)throw Oe;he(Oe)})}},4532:(ye,ce,j)=>{"use strict";function C(N){return new TypeError(`You provided ${null!==N&&"object"==typeof N?"an invalid object":`'${N}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}j.d(ce,{z:()=>C})},8926:ye=>{function ce(C,N,we,Oe,he,Te,me){try{var _e=C[Te](me),fe=_e.value}catch(Se){return void we(Se)}_e.done?N(fe):Promise.resolve(fe).then(Oe,he)}ye.exports=function j(C){return function(){var N=this,we=arguments;return new Promise(function(Oe,he){var Te=C.apply(N,we);function me(fe){ce(Te,Oe,he,me,_e,"next",fe)}function _e(fe){ce(Te,Oe,he,me,_e,"throw",fe)}me(void 0)})}},ye.exports.__esModule=!0,ye.exports.default=ye.exports},5987:(ye,ce,j)=>{"use strict";function _e(Ae,$e,qe,et){return new(qe||(qe=Promise))(function(Ge,On){function Qn(Tn){try{rn(et.next(Tn))}catch(_o){On(_o)}}function ts(Tn){try{rn(et.throw(Tn))}catch(_o){On(_o)}}function rn(Tn){Tn.done?Ge(Tn.value):function xt(Ge){return Ge instanceof qe?Ge:new qe(function(On){On(Ge)})}(Tn.value).then(Qn,ts)}rn((et=et.apply(Ae,$e||[])).next())})}function rt(Ae){return this instanceof rt?(this.v=Ae,this):new rt(Ae)}function mt(Ae,$e,qe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var xt,et=qe.apply(Ae,$e||[]),Ge=[];return xt={},On("next"),On("throw"),On("return"),xt[Symbol.asyncIterator]=function(){return this},xt;function On(Ki){et[Ki]&&(xt[Ki]=function(Zs){return new Promise(function(gi,Ua){Ge.push([Ki,Zs,gi,Ua])>1||Qn(Ki,Zs)})})}function Qn(Ki,Zs){try{!function ts(Ki){Ki.value instanceof rt?Promise.resolve(Ki.value.v).then(rn,Tn):_o(Ge[0][2],Ki)}(et[Ki](Zs))}catch(gi){_o(Ge[0][3],gi)}}function rn(Ki){Qn("next",Ki)}function Tn(Ki){Qn("throw",Ki)}function _o(Ki,Zs){Ki(Zs),Ge.shift(),Ge.length&&Qn(Ge[0][0],Ge[0][1])}}function Et(Ae){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var qe,$e=Ae[Symbol.asyncIterator];return $e?$e.call(Ae):(Ae=function De(Ae){var $e="function"==typeof Symbol&&Symbol.iterator,qe=$e&&Ae[$e],et=0;if(qe)return qe.call(Ae);if(Ae&&"number"==typeof Ae.length)return{next:function(){return Ae&&et>=Ae.length&&(Ae=void 0),{value:Ae&&Ae[et++],done:!Ae}}};throw new TypeError($e?"Object is not iterable.":"Symbol.iterator is not defined.")}(Ae),qe={},et("next"),et("throw"),et("return"),qe[Symbol.asyncIterator]=function(){return this},qe);function et(Ge){qe[Ge]=Ae[Ge]&&function(On){return new Promise(function(Qn,ts){!function xt(Ge,On,Qn,ts){Promise.resolve(ts).then(function(rn){Ge({value:rn,done:Qn})},On)}(Qn,ts,(On=Ae[Ge](On)).done,On.value)})}}}j.d(ce,{mG:()=>_e,qq:()=>rt,FC:()=>mt,KL:()=>Et})},5e3:(ye,ce,j)=>{"use strict";j.d(ce,{deG:()=>Gf,tb:()=>oM,AFp:()=>nM,ip1:()=>tM,CZH:()=>wx,hGG:()=>gw,z2F:()=>Rx,sBO:()=>ew,Sil:()=>LM,_Vd:()=>wi,EJc:()=>IM,SBq:()=>Eu,qLn:()=>np,vpe:()=>Ba,tBr:()=>$f,XFs:()=>pn,OlP:()=>pt,zs3:()=>Ts,ZZ4:()=>Nx,aQg:()=>Bx,soG:()=>Sx,YKP:()=>Ui,h0i:()=>_r,PXZ:()=>$M,R0b:()=>xu,FiY:()=>Ni,Lbi:()=>sM,g9A:()=>rM,Qsj:()=>Kd,FYo:()=>Yd,JOm:()=>Bo,PiD:()=>er,tp0:()=>ks,Rgc:()=>um,dDg:()=>uM,GfV:()=>Re,s_b:()=>l_,ifc:()=>Gn,eFA:()=>fM,G48:()=>QM,Gpc:()=>be,X6Q:()=>JM,_c5:()=>mw,VLi:()=>zM,c2e:()=>aM,zSh:()=>Yh,wAp:()=>an,vHH:()=>Ye,cg1:()=>sm,kL8:()=>n_,dqk:()=>sn,sIi:()=>tf,CqO:()=>zp,QGY:()=>Gp,F4k:()=>pu,RDi:()=>m_,AaK:()=>_e,qOj:()=>Op,TTD:()=>lh,_Bn:()=>Ht,xp6:()=>tg,uIk:()=>Ti,ekj:()=>mf,Suo:()=>QE,Xpm:()=>Cu,lG2:()=>sa,Yz7:()=>gi,cJS:()=>yo,oAB:()=>gs,Yjl:()=>oh,Y36:()=>lf,_UZ:()=>zd,qZA:()=>Xs,TgZ:()=>Gd,EpF:()=>Hp,n5z:()=>oi,LFG:()=>ji,$8M:()=>Un,$Z:()=>Fy,NdJ:()=>Wd,CRH:()=>ex,oxw:()=>$p,Hsn:()=>hf,F$t:()=>Bg,Q6J:()=>fu,DdM:()=>H0,iGM:()=>vx,CHM:()=>hr,LSH:()=>Ca,Akn:()=>fo,YNc:()=>du,_uU:()=>mo,Oqu:()=>wl});var C=j(7579),N=j(727),we=j(8306),Oe=j(6451),he=j(3099);function Te(a){for(let l in a)if(a[l]===Te)return l;throw Error("Could not find renamed property on target object.")}function me(a,l){for(const d in l)l.hasOwnProperty(d)&&!a.hasOwnProperty(d)&&(a[d]=l[d])}function _e(a){if("string"==typeof a)return a;if(Array.isArray(a))return"["+a.map(_e).join(", ")+"]";if(null==a)return""+a;if(a.overriddenName)return`${a.overriddenName}`;if(a.name)return`${a.name}`;const l=a.toString();if(null==l)return""+l;const d=l.indexOf("\n");return-1===d?l:l.substring(0,d)}function fe(a,l){return null==a||""===a?null===l?"":l:null==l||""===l?a:a+" "+l}const Se=Te({__forward_ref__:Te});function be(a){return a.__forward_ref__=be,a.toString=function(){return _e(this())},a}function De(a){return lt(a)?a():a}function lt(a){return"function"==typeof a&&a.hasOwnProperty(Se)&&a.__forward_ref__===be}class Ye extends Error{constructor(l,d){super(function dt(a,l){return`NG0${Math.abs(a)}${l?": "+l:""}`}(l,d)),this.code=l}}function rt(a){return"string"==typeof a?a:null==a?"":String(a)}function mt(a){return"function"==typeof a?a.name||a.toString():"object"==typeof a&&null!=a&&"function"==typeof a.type?a.type.name||a.type.toString():rt(a)}function Bt(a,l){const d=l?` in ${l}`:"";throw new Ye(-201,`No provider for ${mt(a)} found${d}`)}function rn(a,l){null==a&&function Tn(a,l,d,m){throw new Error(`ASSERTION ERROR: ${a}`+(null==m?"":` [Expected=> ${d} ${m} ${l} <=Actual]`))}(l,a,null,"!=")}function gi(a){return{token:a.token,providedIn:a.providedIn||null,factory:a.factory,value:void 0}}function yo(a){return{providers:a.providers||[],imports:a.imports||[]}}function Ri(a){return ka(a,vo)||ka(a,Va)}function ka(a,l){return a.hasOwnProperty(l)?a[l]:null}function wu(a){return a&&(a.hasOwnProperty(bu)||a.hasOwnProperty(Rs))?a[bu]:null}const vo=Te({\u0275prov:Te}),bu=Te({\u0275inj:Te}),Va=Te({ngInjectableDef:Te}),Rs=Te({ngInjectorDef:Te});var pn=(()=>((pn=pn||{})[pn.Default=0]="Default",pn[pn.Host=1]="Host",pn[pn.Self=2]="Self",pn[pn.SkipSelf=4]="SkipSelf",pn[pn.Optional=8]="Optional",pn))();let Tl;function Br(a){const l=Tl;return Tl=a,l}function nh(a,l,d){const m=Ri(a);return m&&"root"==m.providedIn?void 0===m.value?m.value=m.factory():m.value:d&pn.Optional?null:void 0!==l?l:void Bt(_e(a),"Injector")}function Cr(a){return{toString:a}.toString()}var or=(()=>((or=or||{})[or.OnPush=0]="OnPush",or[or.Default=1]="Default",or))(),Gn=(()=>{return(a=Gn||(Gn={}))[a.Emulated=0]="Emulated",a[a.None=2]="None",a[a.ShadowDom=3]="ShadowDom",Gn;var a})();const nn="undefined"!=typeof globalThis&&globalThis,mn="undefined"!=typeof window&&window,Hi="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,sn=nn||"undefined"!=typeof global&&global||mn||Hi,Eo={},gn=[],ri=Te({\u0275cmp:Te}),Xn=Te({\u0275dir:Te}),Su=Te({\u0275pipe:Te}),is=Te({\u0275mod:Te}),xo=Te({\u0275fac:Te}),vr=Te({__NG_ELEMENT_ID__:Te});let ih=0;function Cu(a){return Cr(()=>{const d={},m={type:a.type,providersResolver:null,decls:a.decls,vars:a.vars,factory:null,template:a.template||null,consts:a.consts||null,ngContentSelectors:a.ngContentSelectors,hostBindings:a.hostBindings||null,hostVars:a.hostVars||0,hostAttrs:a.hostAttrs||null,contentQueries:a.contentQueries||null,declaredInputs:d,inputs:null,outputs:null,exportAs:a.exportAs||null,onPush:a.changeDetection===or.OnPush,directiveDefs:null,pipeDefs:null,selectors:a.selectors||gn,viewQuery:a.viewQuery||null,features:a.features||null,data:a.data||{},encapsulation:a.encapsulation||Gn.Emulated,id:"c",styles:a.styles||gn,_:null,setInput:null,schemas:a.schemas||null,tView:null},y=a.directives,M=a.features,T=a.pipes;return m.id+=ih++,m.inputs=sh(a.inputs,d),m.outputs=sh(a.outputs),M&&M.forEach(P=>P(m)),m.directiveDefs=y?()=>("function"==typeof y?y():y).map(ia):null,m.pipeDefs=T?()=>("function"==typeof T?T():T).map(ra):null,m})}function ia(a){return ar(a)||function _i(a){return a[Xn]||null}(a)}function ra(a){return function wo(a){return a[Su]||null}(a)}const Mo={};function gs(a){return Cr(()=>{const l={type:a.type,bootstrap:a.bootstrap||gn,declarations:a.declarations||gn,imports:a.imports||gn,exports:a.exports||gn,transitiveCompileScopes:null,schemas:a.schemas||null,id:a.id||null};return null!=a.id&&(Mo[a.id]=a.type),l})}function sh(a,l){if(null==a)return Eo;const d={};for(const m in a)if(a.hasOwnProperty(m)){let y=a[m],M=y;Array.isArray(y)&&(M=y[1],y=y[0]),d[y]=m,l&&(l[y]=M)}return d}const sa=Cu;function oh(a){return{type:a.type,name:a.name,factory:null,pure:!1!==a.pure,onDestroy:a.type.prototype.ngOnDestroy||null}}function ar(a){return a[ri]||null}function Er(a,l){const d=a[is]||null;if(!d&&!0===l)throw new Error(`Type ${_e(a)} does not have '\u0275mod' property.`);return d}function ut(a){return Array.isArray(a)&&"object"==typeof a[1]}function un(a){return Array.isArray(a)&&!0===a[1]}function yi(a){return 0!=(8&a.flags)}function vi(a){return 2==(2&a.flags)}function ur(a){return 1==(1&a.flags)}function Bn(a){return null!==a.template}function Ar(a){return 0!=(512&a[2])}function vc(a,l){return a.hasOwnProperty(xo)?a[xo]:null}class wv{constructor(l,d,m){this.previousValue=l,this.currentValue=d,this.firstChange=m}isFirstChange(){return this.firstChange}}function lh(){return Rf}function Rf(a){return a.type.prototype.ngOnChanges&&(a.setInput=iE),bv}function bv(){const a=mm(this),l=null==a?void 0:a.current;if(l){const d=a.previous;if(d===Eo)a.previous=l;else for(let m in l)d[m]=l[m];a.current=null,this.ngOnChanges(l)}}function iE(a,l,d,m){const y=mm(a)||function Sv(a,l){return a[Wa]=l}(a,{previous:Eo,current:null}),M=y.current||(y.current={}),T=y.previous,P=this.declaredInputs[d],F=T[P];M[P]=new wv(F&&F.currentValue,l,T===Eo),a[m]=l}lh.ngInherit=!0;const Wa="__ngSimpleChanges__";function mm(a){return a[Wa]||null}let gm;function m_(a){gm=a}function Si(a){return!!a.listen}const ja={createRenderer:(a,l)=>function _m(){return void 0!==gm?gm:"undefined"!=typeof document?document:void 0}()};function di(a){for(;Array.isArray(a);)a=a[0];return a}function kr(a,l){return di(l[a])}function si(a,l){return di(l[a.index])}function vm(a,l){return a.data[l]}function Dr(a,l){const d=l[a];return ut(d)?d:d[0]}function ch(a){return 4==(4&a[2])}function Ou(a){return 128==(128&a[2])}function $a(a,l){return null==l?null:a[l]}function Lu(a){a[18]=0}function If(a,l){a[5]+=l;let d=a,m=a[3];for(;null!==m&&(1===l&&1===d[5]||-1===l&&0===d[5]);)m[5]+=l,d=m,m=m[3]}const _n={lFrame:Nf(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function xm(){return _n.bindingsEnabled}function nt(){return _n.lFrame.lView}function Ne(){return _n.lFrame.tView}function hr(a){return _n.lFrame.contextLView=a,a[8]}function Fi(){let a=Of();for(;null!==a&&64===a.type;)a=a.parent;return a}function Of(){return _n.lFrame.currentTNode}function ss(a,l){const d=_n.lFrame;d.currentTNode=a,d.isParent=l}function Lf(){return _n.lFrame.isParent}function Ps(){_n.lFrame.isParent=!1}function qa(){return _n.isInCheckNoChangesMode}function Fu(a){_n.isInCheckNoChangesMode=a}function Nu(){return _n.lFrame.bindingIndex++}function li(a){const l=_n.lFrame,d=l.bindingIndex;return l.bindingIndex=l.bindingIndex+a,d}function Is(a,l){const d=_n.lFrame;d.bindingIndex=d.bindingRootIndex=a,Bu(l)}function Bu(a){_n.lFrame.currentDirectiveIndex=a}function Z(){return _n.lFrame.currentQueryIndex}function uh(a){_n.lFrame.currentQueryIndex=a}function Dv(a){const l=a[1];return 2===l.type?l.declTNode:1===l.type?a[6]:null}function Os(a,l,d){if(d&pn.SkipSelf){let y=l,M=a;for(;!(y=y.parent,null!==y||d&pn.Host||(y=Dv(M),null===y||(M=M[15],10&y.type))););if(null===y)return!1;l=y,a=M}const m=_n.lFrame=Pl();return m.currentTNode=l,m.lView=a,!0}function Qs(a){const l=Pl(),d=a[1];_n.lFrame=l,l.currentTNode=d.firstChild,l.lView=a,l.tView=d,l.contextLView=a,l.bindingIndex=d.bindingStartIndex,l.inI18n=!1}function Pl(){const a=_n.lFrame,l=null===a?null:a.child;return null===l?Nf(a):l}function Nf(a){const l={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:a,child:null,inI18n:!1};return null!==a&&(a.child=l),l}function Uu(){const a=_n.lFrame;return _n.lFrame=a.parent,a.currentTNode=null,a.lView=null,a}const ku=Uu;function ha(){const a=Uu();a.isParent=!0,a.tView=null,a.selectedIndex=-1,a.contextLView=null,a.elementDepthCount=0,a.currentDirectiveIndex=-1,a.currentNamespace=null,a.bindingRootIndex=-1,a.bindingIndex=-1,a.currentQueryIndex=0}function Gi(){return _n.lFrame.selectedIndex}function ys(a){_n.lFrame.selectedIndex=a}function Ei(){const a=_n.lFrame;return vm(a.tView,a.selectedIndex)}function dh(a,l){for(let d=l.directiveStart,m=l.directiveEnd;d<m;d++){const M=a.data[d].type.prototype,{ngAfterContentInit:T,ngAfterContentChecked:P,ngAfterViewInit:F,ngAfterViewChecked:H,ngOnDestroy:W}=M;T&&(a.contentHooks||(a.contentHooks=[])).push(-d,T),P&&((a.contentHooks||(a.contentHooks=[])).push(d,P),(a.contentCheckHooks||(a.contentCheckHooks=[])).push(d,P)),F&&(a.viewHooks||(a.viewHooks=[])).push(-d,F),H&&((a.viewHooks||(a.viewHooks=[])).push(d,H),(a.viewCheckHooks||(a.viewCheckHooks=[])).push(d,H)),null!=W&&(a.destroyHooks||(a.destroyHooks=[])).push(d,W)}}function fa(a,l,d){Uf(a,l,3,d)}function Ao(a,l,d,m){(3&a[2])===d&&Uf(a,l,d,m)}function hh(a,l){let d=a[2];(3&d)===l&&(d&=2047,d+=1,a[2]=d)}function Uf(a,l,d,m){const M=null!=m?m:-1,T=l.length-1;let P=0;for(let F=void 0!==m?65535&a[18]:0;F<T;F++)if("number"==typeof l[F+1]){if(P=l[F],null!=m&&P>=m)break}else l[F]<0&&(a[18]+=65536),(P<M||-1==M)&&(Mc(a,d,l,F),a[18]=(4294901760&a[18])+F+2),F++}function Mc(a,l,d,m){const y=d[m]<0,M=d[m+1],P=a[y?-d[m]:d[m]];if(y){if(a[2]>>11<a[18]>>16&&(3&a[2])===l){a[2]+=2048;try{M.call(P)}finally{}}}else try{M.call(P)}finally{}}class wc{constructor(l,d,m){this.factory=l,this.resolving=!1,this.canSeeViewProviders=d,this.injectImpl=m}}function Ol(a,l,d){const m=Si(a);let y=0;for(;y<d.length;){const M=d[y];if("number"==typeof M){if(0!==M)break;y++;const T=d[y++],P=d[y++],F=d[y++];m?a.setAttribute(l,P,F,T):l.setAttributeNS(T,P,F)}else{const T=M,P=d[++y];fh(T)?m&&a.setProperty(l,T,P):m?a.setAttribute(l,T,P):l.setAttribute(T,P),y++}}return y}function Ls(a){return 3===a||4===a||6===a}function fh(a){return 64===a.charCodeAt(0)}function kf(a,l){if(null!==l&&0!==l.length)if(null===a||0===a.length)a=l.slice();else{let d=-1;for(let m=0;m<l.length;m++){const y=l[m];"number"==typeof y?d=y:0===d||Cc(a,d,y,null,-1===d||2===d?l[++m]:null)}}return a}function Cc(a,l,d,m,y){let M=0,T=a.length;if(-1===l)T=-1;else for(;M<a.length;){const P=a[M++];if("number"==typeof P){if(P===l){T=-1;break}if(P>l){T=M-1;break}}}for(;M<a.length;){const P=a[M];if("number"==typeof P)break;if(P===d){if(null===m)return void(null!==y&&(a[M+1]=y));if(m===a[M+1])return void(a[M+2]=y)}M++,null!==m&&M++,null!==y&&M++}-1!==T&&(a.splice(T,0,l),M=T+1),a.splice(M++,0,d),null!==m&&a.splice(M++,0,m),null!==y&&a.splice(M++,0,y)}function Vf(a){return-1!==a}function ph(a){return 32767&a}function pa(a,l){let d=function Sm(a){return a>>16}(a),m=l;for(;d>0;)m=m[15],d--;return m}let eo=!0;function Tc(a){const l=eo;return eo=a,l}let mh=0;function gh(a,l){const d=Tm(a,l);if(-1!==d)return d;const m=l[1];m.firstCreatePass&&(a.injectorIndex=l.length,S_(m.data,a),S_(l,null),S_(m.blueprint,null));const y=Ln(a,l),M=a.injectorIndex;if(Vf(y)){const T=ph(y),P=pa(y,l),F=P[1].data;for(let H=0;H<8;H++)l[M+H]=P[T+H]|F[T+H]}return l[M+8]=y,M}function S_(a,l){a.push(0,0,0,0,0,0,0,0,l)}function Tm(a,l){return-1===a.injectorIndex||a.parent&&a.parent.injectorIndex===a.injectorIndex||null===l[a.injectorIndex+8]?-1:a.injectorIndex}function Ln(a,l){if(a.parent&&-1!==a.parent.injectorIndex)return a.parent.injectorIndex;let d=0,m=null,y=l;for(;null!==y;){const M=y[1],T=M.type;if(m=2===T?M.declTNode:1===T?y[6]:null,null===m)return-1;if(d++,y=y[15],-1!==m.injectorIndex)return m.injectorIndex|d<<16}return-1}function Fs(a,l,d){!function Lv(a,l,d){let m;"string"==typeof d?m=d.charCodeAt(0)||0:d.hasOwnProperty(vr)&&(m=d[vr]),null==m&&(m=d[vr]=mh++);const y=255&m;l.data[a+(y>>5)]|=1<<y}(a,l,d)}function Am(a,l,d){if(d&pn.Optional)return a;Bt(l,"NodeInjector")}function Ka(a,l,d,m){if(d&pn.Optional&&void 0===m&&(m=null),0==(d&(pn.Self|pn.Host))){const y=a[9],M=Br(void 0);try{return y?y.get(l,m,d&pn.Optional):nh(l,m,d&pn.Optional)}finally{Br(M)}}return Am(m,l,d)}function Fl(a,l,d,m=pn.Default,y){if(null!==a){const M=function zi(a){if("string"==typeof a)return a.charCodeAt(0)||0;const l=a.hasOwnProperty(vr)?a[vr]:void 0;return"number"==typeof l?l>=0?255&l:Hf:l}(d);if("function"==typeof M){if(!Os(l,a,m))return m&pn.Host?Am(y,d,m):Ka(l,d,m,y);try{const T=M(m);if(null!=T||m&pn.Optional)return T;Bt(d)}finally{ku()}}else if("number"==typeof M){let T=null,P=Tm(a,l),F=-1,H=m&pn.Host?l[16][6]:null;for((-1===P||m&pn.SkipSelf)&&(F=-1===P?Ln(a,l):l[P+8],-1!==F&&pr(m,!1)?(T=l[1],P=ph(F),l=pa(F,l)):P=-1);-1!==P;){const W=l[1];if(Dm(M,P,W.data)){const J=_h(P,l,d,T,m,H);if(J!==Za)return J}F=l[P+8],-1!==F&&pr(m,l[1].data[P+8]===H)&&Dm(M,P,l)?(T=W,P=ph(F),l=pa(F,l)):P=-1}}}return Ka(l,d,m,y)}const Za={};function Hf(){return new as(Fi(),nt())}function _h(a,l,d,m,y,M){const T=l[1],P=T.data[a+8],W=Ac(P,T,d,null==m?vi(P)&&eo:m!=T&&0!=(3&P.type),y&pn.Host&&M===P);return null!==W?Nl(l,T,W,P):Za}function Ac(a,l,d,m,y){const M=a.providerIndexes,T=l.data,P=1048575&M,F=a.directiveStart,W=M>>20,le=y?P+W:a.directiveEnd;for(let xe=m?P:P+W;xe<le;xe++){const We=T[xe];if(xe<F&&d===We||xe>=F&&We.type===d)return xe}if(y){const xe=T[F];if(xe&&Bn(xe)&&xe.type===d)return F}return null}function Nl(a,l,d,m){let y=a[d];const M=l.data;if(function w_(a){return a instanceof wc}(y)){const T=y;T.resolving&&function ht(a,l){const d=l?`. Dependency path: ${l.join(" > ")} > ${a}`:"";throw new Ye(-200,`Circular dependency in DI detected for ${a}${d}`)}(mt(M[d]));const P=Tc(T.canSeeViewProviders);T.resolving=!0;const F=T.injectImpl?Br(T.injectImpl):null;Os(a,m,pn.Default);try{y=a[d]=T.factory(void 0,M,a,m),l.firstCreatePass&&d>=m.directiveStart&&function Bf(a,l,d){const{ngOnChanges:m,ngOnInit:y,ngDoCheck:M}=l.type.prototype;if(m){const T=Rf(l);(d.preOrderHooks||(d.preOrderHooks=[])).push(a,T),(d.preOrderCheckHooks||(d.preOrderCheckHooks=[])).push(a,T)}y&&(d.preOrderHooks||(d.preOrderHooks=[])).push(0-a,y),M&&((d.preOrderHooks||(d.preOrderHooks=[])).push(a,M),(d.preOrderCheckHooks||(d.preOrderCheckHooks=[])).push(a,M))}(d,M[d],l)}finally{null!==F&&Br(F),Tc(P),T.resolving=!1,ku()}}return y}function Dm(a,l,d){return!!(d[l+(a>>5)]&1<<a)}function pr(a,l){return!(a&pn.Self||a&pn.Host&&l)}class as{constructor(l,d){this._tNode=l,this._lView=d}get(l,d,m){return Fl(this._tNode,this._lView,l,m,d)}}function oi(a){return Cr(()=>{const l=a.prototype.constructor,d=l[xo]||Dc(l),m=Object.prototype;let y=Object.getPrototypeOf(a.prototype).constructor;for(;y&&y!==m;){const M=y[xo]||Dc(y);if(M&&M!==d)return M;y=Object.getPrototypeOf(y)}return M=>new M})}function Dc(a){return lt(a)?()=>{const l=Dc(De(a));return l&&l()}:vc(a)}function Un(a){return function Ll(a,l){if("class"===l)return a.classes;if("style"===l)return a.styles;const d=a.attrs;if(d){const m=d.length;let y=0;for(;y<m;){const M=d[y];if(Ls(M))break;if(0===M)y+=2;else if("number"==typeof M)for(y++;y<m&&"string"==typeof d[y];)y++;else{if(M===l)return d[y+1];y+=2}}}return null}(Fi(),a)}const Ja="__parameters__";function Qa(a,l,d){return Cr(()=>{const m=function Ro(a){return function(...d){if(a){const m=a(...d);for(const y in m)this[y]=m[y]}}}(l);function y(...M){if(this instanceof y)return m.apply(this,M),this;const T=new y(...M);return P.annotation=T,P;function P(F,H,W){const J=F.hasOwnProperty(Ja)?F[Ja]:Object.defineProperty(F,Ja,{value:[]})[Ja];for(;J.length<=W;)J.push(null);return(J[W]=J[W]||[]).push(T),F}}return d&&(y.prototype=Object.create(d.prototype)),y.prototype.ngMetadataName=a,y.annotationCls=y,y})}class pt{constructor(l,d){this._desc=l,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof d?this.__NG_ELEMENT_ID__=d:void 0!==d&&(this.\u0275prov=gi({token:this,providedIn:d.providedIn||"root",factory:d.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Gf=new pt("AnalyzeForEntryComponents");function Ji(a,l){void 0===l&&(l=a);for(let d=0;d<a.length;d++){let m=a[d];Array.isArray(m)?(l===a&&(l=a.slice(0,d)),Ji(m,l)):l!==a&&l.push(m)}return l}function Bs(a,l){a.forEach(d=>Array.isArray(d)?Bs(d,l):l(d))}function Pm(a,l,d){l>=a.length?a.push(d):a.splice(l,0,d)}function Po(a,l){return l>=a.length-1?a.pop():a.splice(l,1)[0]}function Ci(a,l){const d=[];for(let m=0;m<a;m++)d.push(l);return d}function Rr(a,l,d){let m=ga(a,l);return m>=0?a[1|m]=d:(m=~m,function nl(a,l,d,m){let y=a.length;if(y==l)a.push(d,m);else if(1===y)a.push(m,a[0]),a[0]=d;else{for(y--,a.push(a[y-1],a[y]);y>l;)a[y]=a[y-2],y--;a[l]=d,a[l+1]=m}}(a,m,l,d)),m}function hi(a,l){const d=ga(a,l);if(d>=0)return a[1|d]}function ga(a,l){return function _a(a,l,d){let m=0,y=a.length>>d;for(;y!==m;){const M=m+(y-m>>1),T=a[M<<d];if(l===T)return M<<d;T>l?y=M:m=M+1}return~(y<<d)}(a,l,1)}const Io={},Eh="__NG_DI_FLAG__",va="ngTempTokenPath",Om=/\n/gm,Fv="__source",wr=Te({provide:String,useValue:Te});let Oo;function Ir(a){const l=Oo;return Oo=a,l}function Ea(a,l=pn.Default){if(void 0===Oo)throw new Ye(203,"");return null===Oo?nh(a,void 0,l):Oo.get(a,l&pn.Optional?null:void 0,l)}function ji(a,l=pn.Default){return(function ns(){return Tl}()||Ea)(De(a),l)}const $n=ji;function xh(a){const l=[];for(let d=0;d<a.length;d++){const m=De(a[d]);if(Array.isArray(m)){if(0===m.length)throw new Ye(900,"");let y,M=pn.Default;for(let T=0;T<m.length;T++){const P=m[T],F=Nv(P);"number"==typeof F?-1===F?y=P.token:M|=F:y=P}l.push(ji(y,M))}else l.push(ji(m))}return l}function Mh(a,l){return a[Eh]=l,a.prototype[Eh]=l,a}function Nv(a){return a[Eh]}const $f=Mh(Qa("Inject",a=>({token:a})),-1),Ni=Mh(Qa("Optional"),8),er=Mh(Qa("Self"),2),ks=Mh(Qa("SkipSelf"),4);class Yf{constructor(l){this.changingThisBreaksApplicationSecurity=l}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function wa(a){return a instanceof Yf?a.changingThisBreaksApplicationSecurity:a}const no=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Yu=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var tr=(()=>((tr=tr||{})[tr.NONE=0]="NONE",tr[tr.HTML=1]="HTML",tr[tr.STYLE=2]="STYLE",tr[tr.SCRIPT=3]="SCRIPT",tr[tr.URL=4]="URL",tr[tr.RESOURCE_URL=5]="RESOURCE_URL",tr))();function Ca(a){const l=function Qu(){const a=nt();return a&&a[12]}();return l?l.sanitize(tr.URL,a)||"":function Oc(a,l){const d=function Lc(a){return a instanceof Yf&&a.getTypeName()||null}(a);if(null!=d&&d!==l){if("ResourceURL"===d&&"URL"===l)return!0;throw new Error(`Required a safe ${l}, got a ${d} (see https://g.co/ng/security#xss)`)}return d===l}(a,"URL")?wa(a):function Ch(a){return(a=String(a)).match(no)||a.match(Yu)?a:"unsafe:"+a}(rt(a))}const Gm="__ngContext__";function Wr(a,l){a[Gm]=l}function W_(a){const l=function Ih(a){return a[Gm]||null}(a);return l?Array.isArray(l)?l:l.lView:null}function ed(a){return a.ngOriginalError}function $v(a,...l){a.error(...l)}class np{constructor(){this._console=console}handleError(l){const d=this._findOriginalError(l),m=function q_(a){return a&&a.ngErrorLogger||$v}(l);m(this._console,"ERROR",l),d&&m(this._console,"ORIGINAL ERROR",d)}_findOriginalError(l){let d=l&&ed(l);for(;d&&ed(d);)d=ed(d);return d||null}}const ME=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(sn))();function on(a){return a instanceof Function?a():a}var Bo=(()=>((Bo=Bo||{})[Bo.Important=1]="Important",Bo[Bo.DashCase=2]="DashCase",Bo))();function jr(a,l){return undefined(a,l)}function Ta(a){const l=a[3];return un(l)?l[3]:l}function so(a){return Wm(a[13])}function rp(a){return Wm(a[4])}function Wm(a){for(;null!==a&&!un(a);)a=a[4];return a}function al(a,l,d,m,y){if(null!=m){let M,T=!1;un(m)?M=m:ut(m)&&(T=!0,m=m[0]);const P=di(m);0===a&&null!==d?null==y?op(l,d,P):kc(l,d,P,y||null,!0):1===a&&null!==d?kc(l,d,P,y||null,!0):2===a?function ty(a,l,d){const m=Km(a,l);m&&function Ym(a,l,d,m){Si(a)?a.removeChild(l,d,m):l.removeChild(d)}(a,m,l,d)}(l,P,T):3===a&&l.destroyNode(P),null!=M&&function Ms(a,l,d,m,y){const M=d[7];M!==di(d)&&al(l,a,m,M,y);for(let P=10;P<d.length;P++){const F=d[P];Bh(F[1],F,a,l,m,M)}}(l,a,M,d,y)}}function Lh(a,l,d){if(Si(a))return a.createElement(l,d);{const m=null!==d?function Cv(a){const l=a.toLowerCase();return"svg"===l?"http://www.w3.org/2000/svg":"math"===l?"http://www.w3.org/1998/MathML/":null}(d):null;return null===m?a.createElement(l):a.createElementNS(m,l)}}function Fh(a,l){const d=a[9],m=d.indexOf(l),y=l[3];1024&l[2]&&(l[2]&=-1025,If(y,-1)),d.splice(m,1)}function id(a,l){if(a.length<=10)return;const d=10+l,m=a[d];if(m){const y=m[17];null!==y&&y!==a&&Fh(y,m),l>0&&(a[d-1][4]=m[4]);const M=Po(a,10+l);!function jm(a,l){Bh(a,l,l[11],2,null,null),l[0]=null,l[6]=null}(m[1],m);const T=M[19];null!==T&&T.detachView(M[1]),m[3]=null,m[4]=null,m[2]&=-129}return m}function K_(a,l){if(!(256&l[2])){const d=l[11];Si(d)&&d.destroyNode&&Bh(a,l,d,3,null,null),function $m(a){let l=a[13];if(!l)return sp(a[1],a);for(;l;){let d=null;if(ut(l))d=l[13];else{const m=l[10];m&&(d=m)}if(!d){for(;l&&!l[4]&&l!==a;)ut(l)&&sp(l[1],l),l=l[3];null===l&&(l=a),ut(l)&&sp(l[1],l),d=l&&l[4]}l=d}}(l)}}function sp(a,l){if(!(256&l[2])){l[2]&=-129,l[2]|=256,function qr(a,l){let d;if(null!=a&&null!=(d=a.destroyHooks))for(let m=0;m<d.length;m+=2){const y=l[d[m]];if(!(y instanceof wc)){const M=d[m+1];if(Array.isArray(M))for(let T=0;T<M.length;T+=2){const P=y[M[T]],F=M[T+1];try{F.call(P)}finally{}}else try{M.call(y)}finally{}}}}(a,l),function Xm(a,l){const d=a.cleanup,m=l[7];let y=-1;if(null!==d)for(let M=0;M<d.length-1;M+=2)if("string"==typeof d[M]){const T=d[M+1],P="function"==typeof T?T(l):di(l[T]),F=m[y=d[M+2]],H=d[M+3];"boolean"==typeof H?P.removeEventListener(d[M],F,H):H>=0?m[y=H]():m[y=-H].unsubscribe(),M+=2}else{const T=m[y=d[M+1]];d[M].call(T)}if(null!==m){for(let M=y+1;M<m.length;M++)m[M]();l[7]=null}}(a,l),1===l[1].type&&Si(l[11])&&l[11].destroy();const d=l[17];if(null!==d&&un(l[3])){d!==l[3]&&Fh(d,l);const m=l[19];null!==m&&m.detachView(a)}}}function Nh(a,l,d){return function Z_(a,l,d){let m=l;for(;null!==m&&40&m.type;)m=(l=m).parent;if(null===m)return d[0];if(2&m.flags){const y=a.data[m.directiveStart].encapsulation;if(y===Gn.None||y===Gn.Emulated)return null}return si(m,d)}(a,l.parent,d)}function kc(a,l,d,m,y){Si(a)?a.insertBefore(l,d,m,y):l.insertBefore(d,m,y)}function op(a,l,d){Si(a)?a.appendChild(l,d):l.appendChild(d)}function Uo(a,l,d,m,y){null!==m?kc(a,l,d,m,y):op(a,l,d)}function Km(a,l){return Si(a)?a.parentNode(l):l.parentNode}function J_(a,l,d){return Jv(a,l,d)}let Jv=function Zv(a,l,d){return 40&a.type?si(a,d):null};function lp(a,l,d,m){const y=Nh(a,m,l),M=l[11],P=J_(m.parent||l[6],m,l);if(null!=y)if(Array.isArray(d))for(let F=0;F<d.length;F++)Uo(M,y,d[F],P,!1);else Uo(M,y,d,P,!1)}function cp(a,l){if(null!==l){const d=l.type;if(3&d)return si(l,a);if(4&d)return Zm(-1,a[l.index]);if(8&d){const m=l.child;if(null!==m)return cp(a,m);{const y=a[l.index];return un(y)?Zm(-1,y):di(y)}}if(32&d)return jr(l,a)()||di(a[l.index]);{const m=ey(a,l);return null!==m?Array.isArray(m)?m[0]:cp(Ta(a[16]),m):cp(a,l.next)}}return null}function ey(a,l){return null!==l?a[16][6].projection[l.projection]:null}function Zm(a,l){const d=10+a+1;if(d<l.length){const m=l[d],y=m[1].firstChild;if(null!==y)return cp(m,y)}return l[7]}function Jm(a,l,d,m,y,M,T){for(;null!=d;){const P=m[d.index],F=d.type;if(T&&0===l&&(P&&Wr(di(P),m),d.flags|=4),64!=(64&d.flags))if(8&F)Jm(a,l,d.child,m,y,M,!1),al(l,a,y,P,M);else if(32&F){const H=jr(d,m);let W;for(;W=H();)al(l,a,y,W,M);al(l,a,y,P,M)}else 16&F?rd(a,l,m,d,y,M):al(l,a,y,P,M);d=T?d.projectionNext:d.next}}function Bh(a,l,d,m,y,M){Jm(d,m,a.firstChild,l,y,M,!1)}function rd(a,l,d,m,y,M){const T=d[16],F=T[6].projection[m.projection];if(Array.isArray(F))for(let H=0;H<F.length;H++)al(l,a,y,F[H],M);else Jm(a,l,F,T[3],y,M,!0)}function oo(a,l,d){Si(a)?a.setAttribute(l,"style",d):l.style.cssText=d}function Yl(a,l,d){Si(a)?""===d?a.removeAttribute(l,"class"):a.setAttribute(l,"class",d):l.className=d}function up(a,l,d){let m=a.length;for(;;){const y=a.indexOf(l,d);if(-1===y)return y;if(0===y||a.charCodeAt(y-1)<=32){const M=l.length;if(y+M===m||a.charCodeAt(y+M)<=32)return y}d=y+1}}const ny="ng-template";function iy(a,l,d){let m=0;for(;m<a.length;){let y=a[m++];if(d&&"class"===y){if(y=a[m],-1!==up(y.toLowerCase(),l,0))return!0}else if(1===y){for(;m<a.length&&"string"==typeof(y=a[m++]);)if(y.toLowerCase()===l)return!0;return!1}}return!1}function ry(a){return 4===a.type&&a.value!==ny}function Kl(a,l,d){return l===(4!==a.type||d?a.value:ny)}function Vc(a,l,d){let m=4;const y=a.attrs||[],M=function e0(a){for(let l=0;l<a.length;l++)if(Ls(a[l]))return l;return a.length}(y);let T=!1;for(let P=0;P<l.length;P++){const F=l[P];if("number"!=typeof F){if(!T)if(4&m){if(m=2|1&m,""!==F&&!Kl(a,F,d)||""===F&&1===l.length){if(Xr(m))return!1;T=!0}}else{const H=8&m?F:l[++P];if(8&m&&null!==a.attrs){if(!iy(a.attrs,H,d)){if(Xr(m))return!1;T=!0}continue}const J=od(8&m?"class":F,y,ry(a),d);if(-1===J){if(Xr(m))return!1;T=!0;continue}if(""!==H){let le;le=J>M?"":y[J+1].toLowerCase();const xe=8&m?le:null;if(xe&&-1!==up(xe,H,0)||2&m&&H!==le){if(Xr(m))return!1;T=!0}}}}else{if(!T&&!Xr(m)&&!Xr(F))return!1;if(T&&Xr(F))continue;T=!1,m=F|1&m}}return Xr(m)||T}function Xr(a){return 0==(1&a)}function od(a,l,d,m){if(null===l)return-1;let y=0;if(m||!d){let M=!1;for(;y<l.length;){const T=l[y];if(T===a)return y;if(3===T||6===T)M=!0;else{if(1===T||2===T){let P=l[++y];for(;"string"==typeof P;)P=l[++y];continue}if(4===T)break;if(0===T){y+=4;continue}}y+=M?1:2}return-1}return function t0(a,l){let d=a.indexOf(4);if(d>-1)for(d++;d<a.length;){const m=a[d];if("number"==typeof m)return-1;if(m===l)return d;d++}return-1}(l,a)}function Qm(a,l,d=!1){for(let m=0;m<l.length;m++)if(Vc(a,l[m],d))return!0;return!1}function Zl(a,l){e:for(let d=0;d<l.length;d++){const m=l[d];if(a.length===m.length){for(let y=0;y<a.length;y++)if(a[y]!==m[y])continue e;return!0}}return!1}function eg(a,l){return a?":not("+l.trim()+")":l}function n0(a){let l=a[0],d=1,m=2,y="",M=!1;for(;d<a.length;){let T=a[d];if("string"==typeof T)if(2&m){const P=a[++d];y+="["+T+(P.length>0?'="'+P+'"':"")+"]"}else 8&m?y+="."+T:4&m&&(y+=" "+T);else""!==y&&!Xr(T)&&(l+=eg(M,y),y=""),m=T,M=M||!Xr(m);d++}return""!==y&&(l+=eg(M,y)),l}const Mn={};function tg(a){oy(Ne(),nt(),Gi()+a,qa())}function oy(a,l,d,m){if(!m)if(3==(3&l[2])){const M=a.preOrderCheckHooks;null!==M&&fa(l,M,d)}else{const M=a.preOrderHooks;null!==M&&Ao(l,M,0,d)}ys(d)}function dp(a,l){return a<<17|l<<2}function ko(a){return a>>17&32767}function gr(a){return 2|a}function Yr(a){return(131068&a)>>2}function hp(a,l){return-131069&a|l<<2}function Vo(a){return 1|a}function gy(a,l){const d=a.contentQueries;if(null!==d)for(let m=0;m<d.length;m+=2){const y=d[m],M=d[m+1];if(-1!==M){const T=a.data[M];uh(y),T.contentQueries(2,l[M],M)}}}function Vh(a,l,d,m,y,M,T,P,F,H){const W=l.blueprint.slice();return W[0]=y,W[2]=140|m,Lu(W),W[3]=W[15]=a,W[8]=d,W[10]=T||a&&a[10],W[11]=P||a&&a[11],W[12]=F||a&&a[12]||null,W[9]=H||a&&a[9]||null,W[6]=M,W[16]=2==l.type?a[16]:W,W}function Ho(a,l,d,m,y){let M=a.data[l];if(null===M)M=function Yn(a,l,d,m,y){const M=Of(),T=Lf(),F=a.data[l]=function yy(a,l,d,m,y,M){return{type:d,index:m,insertBeforeIndex:null,injectorIndex:l?l.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:y,attrs:M,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:l,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,T?M:M&&M.parent,d,l,m,y);return null===a.firstChild&&(a.firstChild=F),null!==M&&(T?null==M.child&&null!==F.parent&&(M.child=F):null===M.next&&(M.next=F)),F}(a,l,d,m,y),function wm(){return _n.lFrame.inI18n}()&&(M.flags|=64);else if(64&M.type){M.type=d,M.value=m,M.attrs=y;const T=function da(){const a=_n.lFrame,l=a.currentTNode;return a.isParent?l:l.parent}();M.injectorIndex=null===T?-1:T.injectorIndex}return ss(M,!0),M}function dd(a,l,d,m){if(0===d)return-1;const y=l.length;for(let M=0;M<d;M++)l.push(m),a.blueprint.push(m),a.data.push(null);return y}function Hh(a,l,d){Qs(l);try{const m=a.viewQuery;null!==m&&ic(1,m,d);const y=a.template;null!==y&&dg(a,l,y,1,d),a.firstCreatePass&&(a.firstCreatePass=!1),a.staticContentQueries&&gy(a,l),a.staticViewQueries&&ic(2,a.viewQuery,d);const M=a.components;null!==M&&function _y(a,l){for(let d=0;d<l.length;d++)Ey(a,l[d])}(l,M)}catch(m){throw a.firstCreatePass&&(a.incompleteFirstPass=!0,a.firstCreatePass=!1),m}finally{l[2]&=-5,ha()}}function $c(a,l,d,m){const y=l[2];if(256==(256&y))return;Qs(l);const M=qa();try{Lu(l),function Xa(a){return _n.lFrame.bindingIndex=a}(a.bindingStartIndex),null!==d&&dg(a,l,d,2,m);const T=3==(3&y);if(!M)if(T){const H=a.preOrderCheckHooks;null!==H&&fa(l,H,null)}else{const H=a.preOrderHooks;null!==H&&Ao(l,H,0,null),hh(l,0)}if(function xp(a){for(let l=so(a);null!==l;l=rp(l)){if(!l[2])continue;const d=l[9];for(let m=0;m<d.length;m++){const y=d[m],M=y[3];0==(1024&y[2])&&If(M,1),y[2]|=1024}}}(l),function Ep(a){for(let l=so(a);null!==l;l=rp(l))for(let d=10;d<l.length;d++){const m=l[d],y=m[1];Ou(m)&&$c(y,m,y.template,m[8])}}(l),null!==a.contentQueries&&gy(a,l),!M)if(T){const H=a.contentCheckHooks;null!==H&&fa(l,H)}else{const H=a.contentHooks;null!==H&&Ao(l,H,1),hh(l,1)}!function u0(a,l){const d=a.hostBindingOpCodes;if(null!==d)try{for(let m=0;m<d.length;m++){const y=d[m];if(y<0)ys(~y);else{const M=y,T=d[++m],P=d[++m];Is(T,M),P(2,l[M])}}}finally{ys(-1)}}(a,l);const P=a.components;null!==P&&function d0(a,l){for(let d=0;d<l.length;d++)Mp(a,l[d])}(l,P);const F=a.viewQuery;if(null!==F&&ic(2,F,m),!M)if(T){const H=a.viewCheckHooks;null!==H&&fa(l,H)}else{const H=a.viewHooks;null!==H&&Ao(l,H,2),hh(l,2)}!0===a.firstUpdatePass&&(a.firstUpdatePass=!1),M||(l[2]&=-73),1024&l[2]&&(l[2]&=-1025,If(l[3],-1))}finally{ha()}}function Gh(a,l,d,m){const y=l[10],M=!qa(),T=ch(l);try{M&&!T&&y.begin&&y.begin(),T&&Hh(a,l,m),$c(a,l,d,m)}finally{M&&!T&&y.end&&y.end()}}function dg(a,l,d,m,y){const M=Gi(),T=2&m;try{ys(-1),T&&l.length>20&&oy(a,l,20,qa()),d(m,y)}finally{ys(M)}}function vp(a,l,d){!xm()||(function ci(a,l,d,m){const y=d.directiveStart,M=d.directiveEnd;a.firstCreatePass||gh(d,l),Wr(m,l);const T=d.initialInputs;for(let P=y;P<M;P++){const F=a.data[P],H=Bn(F);H&&bs(l,d,F);const W=Nl(l,a,P,d);Wr(W,l),null!==T&&_d(0,P-y,W,F,0,T),H&&(Dr(d.index,l)[8]=W)}}(a,l,d,si(d,l)),128==(128&d.flags)&&function lo(a,l,d){const m=d.directiveStart,y=d.directiveEnd,T=d.index,P=function x_(){return _n.lFrame.currentDirectiveIndex}();try{ys(T);for(let F=m;F<y;F++){const H=a.data[F],W=l[F];Bu(F),(null!==H.hostBindings||0!==H.hostVars||null!==H.hostAttrs)&&Yc(H,W)}}finally{ys(-1),Bu(P)}}(a,l,d))}function hg(a,l,d=si){const m=l.localNames;if(null!==m){let y=l.index+1;for(let M=0;M<m.length;M+=2){const T=m[M+1],P=-1===T?d(l,a):a[T];a[y++]=P}}}function zh(a){const l=a.tView;return null===l||l.incompleteFirstPass?a.tView=tc(1,null,a.template,a.decls,a.vars,a.directiveDefs,a.pipeDefs,a.viewQuery,a.schemas,a.consts):l}function tc(a,l,d,m,y,M,T,P,F,H){const W=20+m,J=W+y,le=function fg(a,l){const d=[];for(let m=0;m<l;m++)d.push(m<a?null:Mn);return d}(W,J),xe="function"==typeof H?H():H;return le[1]={type:a,blueprint:le,template:d,queries:null,viewQuery:P,declTNode:l,data:le.slice().fill(null,W),bindingStartIndex:W,expandoStartIndex:J,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof M?M():M,pipeRegistry:"function"==typeof T?T():T,firstChild:null,schemas:F,consts:xe,incompleteFirstPass:!1}}function jh(a,l,d,m){const y=_g(l);null===d?y.push(m):(y.push(d),a.firstCreatePass&&yg(a).push(m,y.length-1))}function fd(a,l,d){for(let m in a)if(a.hasOwnProperty(m)){const y=a[m];(d=null===d?{}:d).hasOwnProperty(m)?d[m].push(l,y):d[m]=[l,y]}return d}function Xc(a,l,d,m){let y=!1;if(xm()){const M=function Kc(a,l,d){const m=a.directiveRegistry;let y=null;if(m)for(let M=0;M<m.length;M++){const T=m[M];Qm(d,T.selectors,!1)&&(y||(y=[]),Fs(gh(d,l),a,T.type),Bn(T)?(md(a,d),y.unshift(T)):y.push(T))}return y}(a,l,d),T=null===m?null:{"":-1};if(null!==M){y=!0,co(d,a.data.length,M.length);for(let W=0;W<M.length;W++){const J=M[W];J.providersResolver&&J.providersResolver(J)}let P=!1,F=!1,H=dd(a,l,M.length,null);for(let W=0;W<M.length;W++){const J=M[W];d.mergedAttrs=kf(d.mergedAttrs,J.hostAttrs),qi(a,d,l,H,J),gd(H,J,T),null!==J.contentQueries&&(d.flags|=8),(null!==J.hostBindings||null!==J.hostAttrs||0!==J.hostVars)&&(d.flags|=128);const le=J.type.prototype;!P&&(le.ngOnChanges||le.ngOnInit||le.ngDoCheck)&&((a.preOrderHooks||(a.preOrderHooks=[])).push(d.index),P=!0),!F&&(le.ngOnChanges||le.ngDoCheck)&&((a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(d.index),F=!0),H++}!function Go(a,l){const m=l.directiveEnd,y=a.data,M=l.attrs,T=[];let P=null,F=null;for(let H=l.directiveStart;H<m;H++){const W=y[H],J=W.inputs,le=null===M||ry(l)?null:yd(J,M);T.push(le),P=fd(J,H,P),F=fd(W.outputs,H,F)}null!==P&&(P.hasOwnProperty("class")&&(l.flags|=16),P.hasOwnProperty("style")&&(l.flags|=32)),l.initialInputs=T,l.inputs=P,l.outputs=F}(a,d)}T&&function Zc(a,l,d){if(l){const m=a.localNames=[];for(let y=0;y<l.length;y+=2){const M=d[l[y+1]];if(null==M)throw new Ye(-301,!1);m.push(l[y],M)}}}(d,m,T)}return d.mergedAttrs=kf(d.mergedAttrs,d.attrs),y}function pd(a,l,d,m,y,M){const T=M.hostBindings;if(T){let P=a.hostBindingOpCodes;null===P&&(P=a.hostBindingOpCodes=[]);const F=~l.index;(function ws(a){let l=a.length;for(;l>0;){const d=a[--l];if("number"==typeof d&&d<0)return d}return 0})(P)!=F&&P.push(F),P.push(m,y,T)}}function Yc(a,l){null!==a.hostBindings&&a.hostBindings(1,l)}function md(a,l){l.flags|=2,(a.components||(a.components=[])).push(l.index)}function gd(a,l,d){if(d){if(l.exportAs)for(let m=0;m<l.exportAs.length;m++)d[l.exportAs[m]]=a;Bn(l)&&(d[""]=a)}}function co(a,l,d){a.flags|=1,a.directiveStart=l,a.directiveEnd=l+d,a.providerIndexes=l}function qi(a,l,d,m,y){a.data[m]=y;const M=y.factory||(y.factory=vc(y.type)),T=new wc(M,Bn(y),null);a.blueprint[m]=T,d[m]=T,pd(a,l,0,m,dd(a,d,y.hostVars,Mn),y)}function bs(a,l,d){const m=si(l,a),y=zh(d),M=a[10],T=vd(a,Vh(a,y,null,d.onPush?64:16,m,l,M,M.createRenderer(m,d),null,null));a[l.index]=T}function zs(a,l,d,m,y,M){const T=si(a,l);!function ds(a,l,d,m,y,M,T){if(null==M)Si(a)?a.removeAttribute(l,y,d):l.removeAttribute(y);else{const P=null==T?rt(M):T(M,m||"",y);Si(a)?a.setAttribute(l,y,P,d):d?l.setAttributeNS(d,y,P):l.setAttribute(y,P)}}(l[11],T,M,a.value,d,m,y)}function _d(a,l,d,m,y,M){const T=M[l];if(null!==T){const P=m.setInput;for(let F=0;F<T.length;){const H=T[F++],W=T[F++],J=T[F++];null!==P?m.setInput(d,J,H,W):d[W]=J}}}function yd(a,l){let d=null,m=0;for(;m<l.length;){const y=l[m];if(0!==y)if(5!==y){if("number"==typeof y)break;a.hasOwnProperty(y)&&(null===d&&(d=[]),d.push(y,a[y],l[m+1])),m+=2}else m+=2;else m+=4}return d}function mg(a,l,d,m){return new Array(a,!0,!1,l,null,0,m,d,null,null)}function Mp(a,l){const d=Dr(l,a);if(Ou(d)){const m=d[1];80&d[2]?$c(m,d,m.template,d[8]):d[5]>0&&wp(d)}}function wp(a){for(let m=so(a);null!==m;m=rp(m))for(let y=10;y<m.length;y++){const M=m[y];if(1024&M[2]){const T=M[1];$c(T,M,T.template,M[8])}else M[5]>0&&wp(M)}const d=a[1].components;if(null!==d)for(let m=0;m<d.length;m++){const y=Dr(d[m],a);Ou(y)&&y[5]>0&&wp(y)}}function Ey(a,l){const d=Dr(l,a),m=d[1];(function gg(a,l){for(let d=l.length;d<a.blueprint.length;d++)l.push(a.blueprint[d])})(m,d),Hh(m,d,d[8])}function vd(a,l){return a[13]?a[14][4]=l:a[13]=l,a[14]=l,l}function bp(a){for(;a;){a[2]|=64;const l=Ta(a);if(Ar(a)&&!l)return a;a=l}return null}function Ed(a,l,d){const m=l[10];m.begin&&m.begin();try{$c(a,l,a.template,d)}catch(y){throw hs(l,y),y}finally{m.end&&m.end()}}function xd(a){!function Sp(a){for(let l=0;l<a.components.length;l++){const d=a.components[l],m=W_(d),y=m[1];Gh(y,m,y.template,d)}}(a[8])}function ic(a,l,d){uh(0),l(a,d)}const ul=(()=>Promise.resolve(null))();function _g(a){return a[7]||(a[7]=[])}function yg(a){return a.cleanup||(a.cleanup=[])}function hs(a,l){const d=a[9],m=d?d.get(np,null):null;m&&m.handleError(l)}function Xh(a,l,d,m,y){for(let M=0;M<d.length;){const T=d[M++],P=d[M++],F=l[T],H=a.data[T];null!==H.setInput?H.setInput(F,y,m,P):F[P]=y}}function fi(a,l,d){const m=kr(l,a);!function nr(a,l,d){Si(a)?a.setValue(l,d):l.textContent=d}(a[11],m,d)}function Md(a,l,d){let m=d?a.styles:null,y=d?a.classes:null,M=0;if(null!==l)for(let T=0;T<l.length;T++){const P=l[T];"number"==typeof P?M=P:1==M?y=fe(y,P):2==M&&(m=fe(m,P+": "+l[++T]+";"))}d?a.styles=m:a.stylesWithoutHost=m,d?a.classes=y:a.classesWithoutHost=y}const wd=new pt("INJECTOR",-1);class Aa{get(l,d=Io){if(d===Io){const m=new Error(`NullInjectorError: No provider for ${_e(l)}!`);throw m.name="NullInjectorError",m}return d}}const Yh=new pt("Set Injector scope."),Jc={},Ss={};let bd;function rc(){return void 0===bd&&(bd=new Aa),bd}function Tp(a,l=null,d=null,m){const y=Kh(a,l,d,m);return y._resolveInjectorDefTypes(),y}function Kh(a,l=null,d=null,m){return new Qc(a,d,l||rc(),m)}class Qc{constructor(l,d,m,y=null){this.parent=m,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const M=[];d&&Bs(d,P=>this.processProvider(P,l,d)),Bs([l],P=>this.processInjectorType(P,[],M)),this.records.set(wd,Ws(void 0,this));const T=this.records.get(Yh);this.scope=null!=T?T.value:null,this.source=y||("object"==typeof l?null:_e(l))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(l=>l.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(l,d=Io,m=pn.Default){this.assertNotDestroyed();const y=Ir(this),M=Br(void 0);try{if(!(m&pn.SkipSelf)){let P=this.records.get(l);if(void 0===P){const F=function nu(a){return"function"==typeof a||"object"==typeof a&&a instanceof pt}(l)&&Ri(l);P=F&&this.injectableDefInScope(F)?Ws(uo(l),Jc):null,this.records.set(l,P)}if(null!=P)return this.hydrate(l,P)}return(m&pn.Self?rc():this.parent).get(l,d=m&pn.Optional&&d===Io?null:d)}catch(T){if("NullInjectorError"===T.name){if((T[va]=T[va]||[]).unshift(_e(l)),y)throw T;return function T_(a,l,d,m){const y=a[va];throw l[Fv]&&y.unshift(l[Fv]),a.message=function Bv(a,l,d,m=null){a=a&&"\n"===a.charAt(0)&&"\u0275"==a.charAt(1)?a.substr(2):a;let y=_e(l);if(Array.isArray(l))y=l.map(_e).join(" -> ");else if("object"==typeof l){let M=[];for(let T in l)if(l.hasOwnProperty(T)){let P=l[T];M.push(T+":"+("string"==typeof P?JSON.stringify(P):_e(P)))}y=`{${M.join(", ")}}`}return`${d}${m?"("+m+")":""}[${y}]: ${a.replace(Om,"\n  ")}`}("\n"+a.message,y,d,m),a.ngTokenPath=y,a[va]=null,a}(T,l,"R3InjectorError",this.source)}throw T}finally{Br(M),Ir(y)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(l=>this.get(l))}toString(){const l=[];return this.records.forEach((m,y)=>l.push(_e(y))),`R3Injector[${l.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ye(205,!1)}processInjectorType(l,d,m){if(!(l=De(l)))return!1;let y=wu(l);const M=null==y&&l.ngModule||void 0,T=void 0===M?l:M,P=-1!==m.indexOf(T);if(void 0!==M&&(y=wu(M)),null==y)return!1;if(null!=y.imports&&!P){let W;m.push(T);try{Bs(y.imports,J=>{this.processInjectorType(J,d,m)&&(void 0===W&&(W=[]),W.push(J))})}finally{}if(void 0!==W)for(let J=0;J<W.length;J++){const{ngModule:le,providers:xe}=W[J];Bs(xe,We=>this.processProvider(We,le,xe||gn))}}this.injectorDefTypes.add(T);const F=vc(T)||(()=>new T);this.records.set(T,Ws(F,Jc));const H=y.providers;if(null!=H&&!P){const W=l;Bs(H,J=>this.processProvider(J,W,H))}return void 0!==M&&void 0!==l.providers}processProvider(l,d,m){let y=js(l=De(l))?l:De(l&&l.provide);const M=function Sd(a,l,d){return Ap(a)?Ws(void 0,a.useValue):Ws(vg(a),Jc)}(l);if(js(l)||!0!==l.multi)this.records.get(y);else{let T=this.records.get(y);T||(T=Ws(void 0,Jc,!0),T.factory=()=>xh(T.multi),this.records.set(y,T)),y=l,T.multi.push(l)}this.records.set(y,M)}hydrate(l,d){return d.value===Jc&&(d.value=Ss,d.value=d.factory()),"object"==typeof d.value&&d.value&&function tu(a){return null!==a&&"object"==typeof a&&"function"==typeof a.ngOnDestroy}(d.value)&&this.onDestroy.add(d.value),d.value}injectableDefInScope(l){if(!l.providedIn)return!1;const d=De(l.providedIn);return"string"==typeof d?"any"===d||d===this.scope:this.injectorDefTypes.has(d)}}function uo(a){const l=Ri(a),d=null!==l?l.factory:vc(a);if(null!==d)return d;if(a instanceof pt)throw new Ye(204,!1);if(a instanceof Function)return function Fn(a){const l=a.length;if(l>0)throw Ci(l,"?"),new Ye(204,!1);const d=function th(a){const l=a&&(a[vo]||a[Va]);if(l){const d=function hm(a){if(a.hasOwnProperty("name"))return a.name;const l=(""+a).match(/^function\s*([^\s(]+)/);return null===l?"":l[1]}(a);return console.warn(`DEPRECATED: DI is instantiating a token "${d}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${d}" class.`),l}return null}(a);return null!==d?()=>d.factory(a):()=>new a}(a);throw new Ye(204,!1)}function vg(a,l,d){let m;if(js(a)){const y=De(a);return vc(y)||uo(y)}if(Ap(a))m=()=>De(a.useValue);else if(function eu(a){return!(!a||!a.useFactory)}(a))m=()=>a.useFactory(...xh(a.deps||[]));else if(function Eg(a){return!(!a||!a.useExisting)}(a))m=()=>ji(De(a.useExisting));else{const y=De(a&&(a.useClass||a.provide));if(!function Cs(a){return!!a.deps}(a))return vc(y)||uo(y);m=()=>new y(...xh(a.deps))}return m}function Ws(a,l,d=!1){return{factory:a,value:l,multi:d?[]:void 0}}function Ap(a){return null!==a&&"object"==typeof a&&wr in a}function js(a){return"function"==typeof a}let Ts=(()=>{class a{static create(d,m){var y;if(Array.isArray(d))return Tp({name:""},m,d,"");{const M=null!==(y=d.name)&&void 0!==y?y:"";return Tp({name:M},d.parent,d.providers,M)}}}return a.THROW_IF_NOT_FOUND=Io,a.NULL=new Aa,a.\u0275prov=gi({token:a,providedIn:"any",factory:()=>ji(wd)}),a.__NG_ELEMENT_ID__=-1,a})();function Jh(a,l){dh(W_(a)[1],Fi())}function Op(a){let l=function Ad(a){return Object.getPrototypeOf(a.prototype).constructor}(a.type),d=!0;const m=[a];for(;l;){let y;if(Bn(a))y=l.\u0275cmp||l.\u0275dir;else{if(l.\u0275cmp)throw new Ye(903,"");y=l.\u0275dir}if(y){if(d){m.push(y);const T=a;T.inputs=ho(a.inputs),T.declaredInputs=ho(a.declaredInputs),T.outputs=ho(a.outputs);const P=y.hostBindings;P&&Wo(a,P);const F=y.viewQuery,H=y.contentQueries;if(F&&g0(a,F),H&&Ay(a,H),me(a.inputs,y.inputs),me(a.declaredInputs,y.declaredInputs),me(a.outputs,y.outputs),Bn(y)&&y.data.animation){const W=a.data;W.animation=(W.animation||[]).concat(y.data.animation)}}const M=y.features;if(M)for(let T=0;T<M.length;T++){const P=M[T];P&&P.ngInherit&&P(a),P===Op&&(d=!1)}}l=Object.getPrototypeOf(l)}!function fl(a){let l=0,d=null;for(let m=a.length-1;m>=0;m--){const y=a[m];y.hostVars=l+=y.hostVars,y.hostAttrs=kf(y.hostAttrs,d=kf(d,y.hostAttrs))}}(m)}function ho(a){return a===Eo?{}:a===gn?[]:a}function g0(a,l){const d=a.viewQuery;a.viewQuery=d?(m,y)=>{l(m,y),d(m,y)}:l}function Ay(a,l){const d=a.contentQueries;a.contentQueries=d?(m,y,M)=>{l(m,y,M),d(m,y,M)}:l}function Wo(a,l){const d=a.hostBindings;a.hostBindings=d?(m,y)=>{l(m,y),d(m,y)}:l}let ef=null;function Dd(){if(!ef){const a=sn.Symbol;if(a&&a.iterator)ef=a.iterator;else{const l=Object.getOwnPropertyNames(Map.prototype);for(let d=0;d<l.length;++d){const m=l[d];"entries"!==m&&"size"!==m&&Map.prototype[m]===Map.prototype.entries&&(ef=m)}}}return ef}function tf(a){return!!Lp(a)&&(Array.isArray(a)||!(a instanceof Map)&&Dd()in a)}function Lp(a){return null!==a&&("function"==typeof a||"object"==typeof a)}function rr(a,l,d){return!Object.is(a[l],d)&&(a[l]=d,!0)}function Ti(a,l,d,m){const y=nt();return rr(y,Nu(),l)&&(Ne(),zs(Ei(),y,a,l,d,m)),Ti}function du(a,l,d,m,y,M,T,P){const F=nt(),H=Ne(),W=a+20,J=H.firstCreatePass?function Ld(a,l,d,m,y,M,T,P,F){const H=l.consts,W=Ho(l,a,4,T||null,$a(H,P));Xc(l,d,W,$a(H,F)),dh(l,W);const J=W.tViews=tc(2,W,m,y,M,l.directiveRegistry,l.pipeRegistry,null,l.schemas,H);return null!==l.queries&&(l.queries.template(l,W),J.queries=l.queries.embeddedTView(W)),W}(W,H,F,l,d,m,y,M,T):H.data[W];ss(J,!1);const le=F[11].createComment("");lp(H,F,le,J),Wr(le,F),vd(F,F[W]=mg(le,F,le,J)),ur(J)&&vp(H,F,J),null!=T&&hg(F,J,P)}function lf(a,l=pn.Default){const d=nt();return null===d?ji(a,l):Fl(Fi(),d,De(a),l)}function Fy(){throw new Error("invalid")}function fu(a,l,d){const m=nt();return rr(m,Nu(),l)&&function $i(a,l,d,m,y,M,T,P){const F=si(l,d);let W,H=l.inputs;!P&&null!=H&&(W=H[m])?(Xh(a,d,W,m,y),vi(l)&&function $h(a,l){const d=Dr(l,a);16&d[2]||(d[2]|=64)}(d,l.index)):3&l.type&&(m=function vy(a){return"class"===a?"className":"for"===a?"htmlFor":"formaction"===a?"formAction":"innerHtml"===a?"innerHTML":"readonly"===a?"readOnly":"tabindex"===a?"tabIndex":a}(m),y=null!=T?T(y,l.value||"",m):y,Si(M)?M.setProperty(F,m,y):fh(m)||(F.setProperty?F.setProperty(m,y):F[m]=y))}(Ne(),Ei(),m,a,l,m[11],d,!1),fu}function Vp(a,l,d,m,y){const T=y?"class":"style";Xh(a,d,l.inputs[T],T,m)}function Gd(a,l,d,m){const y=nt(),M=Ne(),T=20+a,P=y[11],F=y[T]=Lh(P,l,function Pv(){return _n.lFrame.currentNamespace}()),H=M.firstCreatePass?function Ny(a,l,d,m,y,M,T){const P=l.consts,H=Ho(l,a,2,y,$a(P,M));return Xc(l,d,H,$a(P,T)),null!==H.attrs&&Md(H,H.attrs,!1),null!==H.mergedAttrs&&Md(H,H.mergedAttrs,!0),null!==l.queries&&l.queries.elementStart(l,H),H}(T,M,y,0,l,d,m):M.data[T];ss(H,!0);const W=H.mergedAttrs;null!==W&&Ol(P,F,W);const J=H.classes;null!==J&&Yl(P,F,J);const le=H.styles;return null!==le&&oo(P,F,le),64!=(64&H.flags)&&lp(M,y,F,H),0===function y_(){return _n.lFrame.elementDepthCount}()&&Wr(F,y),function v_(){_n.lFrame.elementDepthCount++}(),ur(H)&&(vp(M,y,H),function Kr(a,l,d){if(yi(l)){const y=l.directiveEnd;for(let M=l.directiveStart;M<y;M++){const T=a.data[M];T.contentQueries&&T.contentQueries(1,d[M],M)}}}(M,H,y)),null!==m&&hg(y,H),Gd}function Xs(){let a=Fi();Lf()?Ps():(a=a.parent,ss(a,!1));const l=a;!function Em(){_n.lFrame.elementDepthCount--}();const d=Ne();return d.firstCreatePass&&(dh(d,a),yi(a)&&d.queries.elementEnd(a)),null!=l.classesWithoutHost&&function Do(a){return 0!=(16&a.flags)}(l)&&Vp(d,l,nt(),l.classesWithoutHost,!0),null!=l.stylesWithoutHost&&function oE(a){return 0!=(32&a.flags)}(l)&&Vp(d,l,nt(),l.stylesWithoutHost,!1),Xs}function zd(a,l,d,m){return Gd(a,l,d,m),Xs(),zd}function Hp(){return nt()}function Gp(a){return!!a&&"function"==typeof a.then}function pu(a){return!!a&&"function"==typeof a.subscribe}const zp=pu;function Wd(a,l,d,m){const y=nt(),M=Ne(),T=Fi();return function jp(a,l,d,m,y,M,T,P){const F=ur(m),W=a.firstCreatePass&&yg(a),J=l[8],le=_g(l);let xe=!0;if(3&m.type||P){const Pt=si(m,l),qt=P?P(Pt):Pt,it=le.length,ln=P?qn=>P(di(qn[m.index])):m.index;if(Si(d)){let qn=null;if(!P&&F&&(qn=function Uy(a,l,d,m){const y=a.cleanup;if(null!=y)for(let M=0;M<y.length-1;M+=2){const T=y[M];if(T===d&&y[M+1]===m){const P=l[7],F=y[M+2];return P.length>F?P[F]:null}"string"==typeof T&&(M+=2)}return null}(a,l,y,m.index)),null!==qn)(qn.__ngLastListenerFn__||qn).__ngNextListenerFn__=M,qn.__ngLastListenerFn__=M,xe=!1;else{M=$d(m,l,J,M,!1);const bi=d.listen(qt,y,M);le.push(M,bi),W&&W.push(y,ln,it,it+1)}}else M=$d(m,l,J,M,!0),qt.addEventListener(y,M,T),le.push(M),W&&W.push(y,ln,it,T)}else M=$d(m,l,J,M,!1);const We=m.outputs;let _t;if(xe&&null!==We&&(_t=We[y])){const Pt=_t.length;if(Pt)for(let qt=0;qt<Pt;qt+=2){const Cl=l[_t[qt]][_t[qt+1]].subscribe(M),d_=le.length;le.push(M,Cl),W&&W.push(y,m.index,d_,-(d_+1))}}}(M,y,y[11],T,a,l,!!d,m),Wd}function jd(a,l,d,m){try{return!1!==d(m)}catch(y){return hs(a,y),!1}}function $d(a,l,d,m,y){return function M(T){if(T===Function)return m;const P=2&a.flags?Dr(a.index,l):l;0==(32&l[2])&&bp(P);let F=jd(l,0,m,T),H=M.__ngNextListenerFn__;for(;H;)F=jd(l,0,H,T)&&F,H=H.__ngNextListenerFn__;return y&&!1===F&&(T.preventDefault(),T.returnValue=!1),F}}function $p(a=1){return function os(a){return(_n.lFrame.contextLView=function Il(a,l){for(;a>0;)l=l[15],a--;return l}(a,_n.lFrame.contextLView))[8]}(a)}function df(a,l){let d=null;const m=function sy(a){const l=a.attrs;if(null!=l){const d=l.indexOf(5);if(0==(1&d))return l[d+1]}return null}(a);for(let y=0;y<l.length;y++){const M=l[y];if("*"!==M){if(null===m?Qm(a,M,!0):Zl(m,M))return y}else d=y}return d}function Bg(a){const l=nt()[16][6];if(!l.projection){const m=l.projection=Ci(a?a.length:1,null),y=m.slice();let M=l.child;for(;null!==M;){const T=a?df(M,a):0;null!==T&&(y[T]?y[T].projectionNext=M:m[T]=M,y[T]=M),M=M.next}}}function hf(a,l=0,d){const m=nt(),y=Ne(),M=Ho(y,20+a,16,null,d||null);null===M.projection&&(M.projection=l),Ps(),64!=(64&M.flags)&&function Qv(a,l,d){rd(l[11],0,l,d,Nh(a,d,l),J_(d.parent||l[6],d,l))}(y,m,M)}function Yp(a,l,d,m,y){const M=a[d+1],T=null===l;let P=m?ko(M):Yr(M),F=!1;for(;0!==P&&(!1===F||T);){const W=a[P+1];lc(a[P],l)&&(F=!0,a[P+1]=m?Vo(W):gr(W)),P=m?ko(W):Yr(W)}F&&(a[d+1]=m?gr(M):Vo(M))}function lc(a,l){return null===a||null==l||(Array.isArray(a)?a[1]:a)===l||!(!Array.isArray(a)||"string"!=typeof l)&&ga(a,l)>=0}const Xi={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Hy(a){return a.substring(Xi.key,Xi.keyEnd)}function cc(a){return a.substring(Xi.value,Xi.valueEnd)}function Yo(a,l){const d=Xi.textEnd;let m=Xi.key=dc(a,l,d);return d===m?-1:(m=Xi.keyEnd=function Gg(a,l,d){let m;for(;l<d&&(45===(m=a.charCodeAt(l))||95===m||(-33&m)>=65&&(-33&m)<=90||m>=48&&m<=57);)l++;return l}(a,m,d),m=zy(a,m,d),m=Xi.value=dc(a,m,d),m=Xi.valueEnd=function _u(a,l,d){let m=-1,y=-1,M=-1,T=l,P=T;for(;T<d;){const F=a.charCodeAt(T++);if(59===F)return P;34===F||39===F?P=T=Wy(a,F,T,d):l===T-4&&85===M&&82===y&&76===m&&40===F?P=T=Wy(a,41,T,d):F>32&&(P=T),M=y,y=m,m=-33&F}return P}(a,m,d),zy(a,m,d))}function dc(a,l,d){for(;l<d&&a.charCodeAt(l)<=32;)l++;return l}function zy(a,l,d,m){return(l=dc(a,l,d))<d&&l++,l}function Wy(a,l,d,m){let y=-1,M=d;for(;M<m;){const T=a.charCodeAt(M++);if(T==l&&92!==y)return M;y=92==T&&92===y?0:T}throw new Error}function mf(a,l){return function Ko(a,l,d,m){const y=nt(),M=Ne(),T=li(2);M.firstUpdatePass&&Zp(M,a,T,m),l!==Mn&&rr(y,T,l)&&qy(M,M.data[Gi()],y,y[11],a,y[T+1]=function DE(a,l){return null==a||("string"==typeof l?a+=l:"object"==typeof a&&(a=_e(wa(a)))),a}(l,d),m,T)}(a,l,null,!0),mf}function fo(a){!function po(a,l,d,m){const y=Ne(),M=li(2);y.firstUpdatePass&&Zp(y,null,M,m);const T=nt();if(d!==Mn&&rr(T,M,d)){const P=y.data[Gi()];if(S0(P,m)&&!Kp(y,M)){let F=m?P.classesWithoutHost:P.stylesWithoutHost;null!==F&&(d=fe(F,d||"")),Vp(y,P,T,d,m)}else!function Xg(a,l,d,m,y,M,T,P){y===Mn&&(y=gn);let F=0,H=0,W=0<y.length?y[0]:null,J=0<M.length?M[0]:null;for(;null!==W||null!==J;){const le=F<y.length?y[F+1]:void 0,xe=H<M.length?M[H+1]:void 0;let _t,We=null;W===J?(F+=2,H+=2,le!==xe&&(We=J,_t=xe)):null===J||null!==W&&W<J?(F+=2,We=W):(H+=2,We=J,_t=xe),null!==We&&qy(a,l,d,m,We,_t,T,P),W=F<y.length?y[F]:null,J=H<M.length?M[H]:null}}(y,P,T,T[11],T[M+1],T[M+1]=function Jp(a,l,d){if(null==d||""===d)return gn;const m=[],y=wa(d);if(Array.isArray(y))for(let M=0;M<y.length;M++)a(m,y[M],!0);else if("object"==typeof y)for(const M in y)y.hasOwnProperty(M)&&a(m,M,y[M]);else"string"==typeof y&&l(m,y);return m}(a,l,d),m,M)}}(qg,jg,a,!1)}function jg(a,l){for(let d=function w0(a){return function Gy(a){Xi.key=0,Xi.keyEnd=0,Xi.value=0,Xi.valueEnd=0,Xi.textEnd=a.length}(a),Yo(a,dc(a,0,Xi.textEnd))}(l);d>=0;d=Yo(l,d))qg(a,Hy(l),cc(l))}function Kp(a,l){return l>=a.expandoStartIndex}function Zp(a,l,d,m){const y=a.data;if(null===y[d+1]){const M=y[Gi()],T=Kp(a,d);S0(M,m)&&null===l&&!T&&(l=!1),l=function b0(a,l,d,m){const y=function fr(a){const l=_n.lFrame.currentDirectiveIndex;return-1===l?null:a[l]}(a);let M=m?l.residualClasses:l.residualStyles;if(null===y)0===(m?l.classBindings:l.styleBindings)&&(d=yu(d=$g(null,a,l,d,m),l.attrs,m),M=null);else{const T=l.directiveStylingLast;if(-1===T||a[T]!==y)if(d=$g(y,a,l,d,m),null===M){let F=function jy(a,l,d){const m=d?l.classBindings:l.styleBindings;if(0!==Yr(m))return a[ko(m)]}(a,l,m);void 0!==F&&Array.isArray(F)&&(F=$g(null,a,l,F[1],m),F=yu(F,l.attrs,m),function pi(a,l,d,m){a[ko(d?l.classBindings:l.styleBindings)]=m}(a,l,m,F))}else M=function $y(a,l,d){let m;const y=l.directiveEnd;for(let M=1+l.directiveStylingLast;M<y;M++)m=yu(m,a[M].hostAttrs,d);return yu(m,l.attrs,d)}(a,l,m)}return void 0!==M&&(m?l.residualClasses=M:l.residualStyles=M),d}(y,M,l,m),function Vg(a,l,d,m,y,M){let T=M?l.classBindings:l.styleBindings,P=ko(T),F=Yr(T);a[m]=d;let W,H=!1;if(Array.isArray(d)){const J=d;W=J[1],(null===W||ga(J,W)>0)&&(H=!0)}else W=d;if(y)if(0!==F){const le=ko(a[P+1]);a[m+1]=dp(le,P),0!==le&&(a[le+1]=hp(a[le+1],m)),a[P+1]=function o0(a,l){return 131071&a|l<<17}(a[P+1],m)}else a[m+1]=dp(P,0),0!==P&&(a[P+1]=hp(a[P+1],m)),P=m;else a[m+1]=dp(F,0),0===P?P=m:a[F+1]=hp(a[F+1],m),F=m;H&&(a[m+1]=gr(a[m+1])),Yp(a,W,m,!0),Yp(a,W,m,!1),function Vy(a,l,d,m,y){const M=y?a.residualClasses:a.residualStyles;null!=M&&"string"==typeof l&&ga(M,l)>=0&&(d[m+1]=Vo(d[m+1]))}(l,W,a,m,M),T=dp(P,F),M?l.classBindings=T:l.styleBindings=T}(y,M,l,d,T,m)}}function $g(a,l,d,m,y){let M=null;const T=d.directiveEnd;let P=d.directiveStylingLast;for(-1===P?P=d.directiveStart:P++;P<T&&(M=l[P],m=yu(m,M.hostAttrs,y),M!==a);)P++;return null!==a&&(d.directiveStylingLast=P),m}function yu(a,l,d){const m=d?1:2;let y=-1;if(null!==l)for(let M=0;M<l.length;M++){const T=l[M];"number"==typeof T?y=T:y===m&&(Array.isArray(a)||(a=void 0===a?[]:["",a]),Rr(a,T,!!d||l[++M]))}return void 0===a?null:a}function qg(a,l,d){Rr(a,l,wa(d))}function qy(a,l,d,m,y,M,T,P){if(!(3&l.type))return;const F=a.data,H=F[P+1];vu(function fp(a){return 1==(1&a)}(H)?Yg(F,l,d,y,Yr(H),T):void 0)||(vu(M)||function ly(a){return 2==(2&a)}(H)&&(M=Yg(F,null,d,y,P,T)),function Or(a,l,d,m,y){const M=Si(a);if(l)y?M?a.addClass(d,m):d.classList.add(m):M?a.removeClass(d,m):d.classList.remove(m);else{let T=-1===m.indexOf("-")?void 0:Bo.DashCase;if(null==y)M?a.removeStyle(d,m,T):d.style.removeProperty(m);else{const P="string"==typeof y&&y.endsWith("!important");P&&(y=y.slice(0,-10),T|=Bo.Important),M?a.setStyle(d,m,y,T):d.style.setProperty(m,y,P?"important":"")}}}(m,T,kr(Gi(),d),y,M))}function Yg(a,l,d,m,y,M){const T=null===l;let P;for(;y>0;){const F=a[y],H=Array.isArray(F),W=H?F[1]:F,J=null===W;let le=d[y+1];le===Mn&&(le=J?gn:void 0);let xe=J?hi(le,m):W===m?le:void 0;if(H&&!vu(xe)&&(xe=hi(F,m)),vu(xe)&&(P=xe,T))return P;const We=a[y+1];y=T?ko(We):Yr(We)}if(null!==l){let F=M?l.residualClasses:l.residualStyles;null!=F&&(P=hi(F,m))}return P}function vu(a){return void 0!==a}function S0(a,l){return 0!=(a.flags&(l?16:32))}function mo(a,l=""){const d=nt(),m=Ne(),y=a+20,M=m.firstCreatePass?Ho(m,y,1,l,null):m.data[y],T=d[y]=function ql(a,l){return Si(a)?a.createText(l):a.createTextNode(l)}(d[11],l);lp(m,d,T,M),ss(M,!1)}function wl(a){return Qp("",a,""),wl}function Qp(a,l,d){const m=nt(),y=function au(a,l,d,m){return rr(a,Nu(),d)?l+rt(d)+m:Mn}(m,a,l,d);return y!==Mn&&fi(m,Gi(),y),Qp}const Sl=void 0;var rm=["en",[["a","p"],["AM","PM"],Sl],[["AM","PM"],Sl,Sl],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Sl,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Sl,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Sl,"{1} 'at' {0}",Sl],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function ov(a){const d=Math.floor(Math.abs(a)),m=a.toString().replace(/^[^.]*\.?/,"").length;return 1===d&&0===m?1:5}];let hc={};function sm(a){const l=function i_(a){return a.toLowerCase().replace(/_/g,"-")}(a);let d=om(l);if(d)return d;const m=l.split("-")[0];if(d=om(m),d)return d;if("en"===m)return rm;throw new Error(`Missing locale data for the locale "${a}".`)}function n_(a){return sm(a)[an.PluralCase]}function om(a){return a in hc||(hc[a]=sn.ng&&sn.ng.common&&sn.ng.common.locales&&sn.ng.common.locales[a]),hc[a]}var an=(()=>((an=an||{})[an.LocaleId=0]="LocaleId",an[an.DayPeriodsFormat=1]="DayPeriodsFormat",an[an.DayPeriodsStandalone=2]="DayPeriodsStandalone",an[an.DaysFormat=3]="DaysFormat",an[an.DaysStandalone=4]="DaysStandalone",an[an.MonthsFormat=5]="MonthsFormat",an[an.MonthsStandalone=6]="MonthsStandalone",an[an.Eras=7]="Eras",an[an.FirstDayOfWeek=8]="FirstDayOfWeek",an[an.WeekendRange=9]="WeekendRange",an[an.DateFormat=10]="DateFormat",an[an.TimeFormat=11]="TimeFormat",an[an.DateTimeFormat=12]="DateTimeFormat",an[an.NumberSymbols=13]="NumberSymbols",an[an.NumberFormats=14]="NumberFormats",an[an.CurrencyCode=15]="CurrencyCode",an[an.CurrencySymbol=16]="CurrencySymbol",an[an.CurrencyName=17]="CurrencyName",an[an.Currencies=18]="Currencies",an[an.Directionality=19]="Directionality",an[an.PluralCase=20]="PluralCase",an[an.ExtraData=21]="ExtraData",an))();const xf="en-US";let O0=xf;function je(a,l,d,m,y){if(a=De(a),Array.isArray(a))for(let M=0;M<a.length;M++)je(a[M],l,d,m,y);else{const M=Ne(),T=nt();let P=js(a)?a:De(a.provide),F=vg(a);const H=Fi(),W=1048575&H.providerIndexes,J=H.directiveStart,le=H.providerIndexes>>20;if(js(a)||!a.multi){const xe=new wc(F,y,lf),We=Lt(P,l,y?W:W+le,J);-1===We?(Fs(gh(H,T),M,P),Zt(M,a,l.length),l.push(P),H.directiveStart++,H.directiveEnd++,y&&(H.providerIndexes+=1048576),d.push(xe),T.push(xe)):(d[We]=xe,T[We]=xe)}else{const xe=Lt(P,l,W+le,J),We=Lt(P,l,W,W+le),_t=xe>=0&&d[xe],Pt=We>=0&&d[We];if(y&&!Pt||!y&&!_t){Fs(gh(H,T),M,P);const qt=function Yt(a,l,d,m,y){const M=new wc(a,d,lf);return M.multi=[],M.index=l,M.componentProviders=0,Jt(M,y,m&&!d),M}(y?Rn:Ft,d.length,y,m,F);!y&&Pt&&(d[We].providerFactory=qt),Zt(M,a,l.length,0),l.push(P),H.directiveStart++,H.directiveEnd++,y&&(H.providerIndexes+=1048576),d.push(qt),T.push(qt)}else Zt(M,a,xe>-1?xe:We,Jt(d[y?We:xe],F,!y&&m));!y&&m&&Pt&&d[We].componentProviders++}}}function Zt(a,l,d,m){const y=js(l),M=function dl(a){return!!a.useClass}(l);if(y||M){const F=(M?De(l.useClass):l).prototype.ngOnDestroy;if(F){const H=a.destroyHooks||(a.destroyHooks=[]);if(!y&&l.multi){const W=H.indexOf(d);-1===W?H.push(d,[m,F]):H[W+1].push(m,F)}else H.push(d,F)}}}function Jt(a,l,d){return d&&a.componentProviders++,a.multi.push(l)-1}function Lt(a,l,d,m){for(let y=d;y<m;y++)if(l[y]===a)return y;return-1}function Ft(a,l,d,m){return ge(this.multi,[])}function Rn(a,l,d,m){const y=this.multi;let M;if(this.providerFactory){const T=this.providerFactory.componentProviders,P=Nl(d,d[1],this.providerFactory.index,m);M=P.slice(0,T),ge(y,M);for(let F=T;F<P.length;F++)M.push(P[F])}else M=[],ge(y,M);return M}function ge(a,l){for(let d=0;d<a.length;d++)l.push((0,a[d])());return l}function Ht(a,l=[]){return d=>{d.providersResolver=(m,y)=>function Xt(a,l,d){const m=Ne();if(m.firstCreatePass){const y=Bn(a);je(d,m.data,m.blueprint,y,!0),je(l,m.data,m.blueprint,y,!1)}}(m,y?y(a):a,l)}}class tt{}class Ys{resolveComponentFactory(l){throw function hn(a){const l=Error(`No component factory found for ${_e(a)}. Did you add it to @NgModule.entryComponents?`);return l.ngComponent=a,l}(l)}}let wi=(()=>{class a{}return a.NULL=new Ys,a})();function go(){return Qr(Fi(),nt())}function Qr(a,l){return new Eu(si(a,l))}let Eu=(()=>{class a{constructor(d){this.nativeElement=d}}return a.__NG_ELEMENT_ID__=go,a})();function o_(a){return a instanceof Eu?a.nativeElement:a}class Yd{}let Kd=(()=>{class a{}return a.__NG_ELEMENT_ID__=()=>function V0(){const a=nt(),d=Dr(Fi().index,a);return function Sf(a){return a[11]}(ut(d)?d:a)}(),a})(),te=(()=>{class a{}return a.\u0275prov=gi({token:a,providedIn:"root",factory:()=>null}),a})();class Re{constructor(l){this.full=l,this.major=l.split(".")[0],this.minor=l.split(".")[1],this.patch=l.split(".").slice(2).join(".")}}const Ve=new Re("13.2.6"),ke={};function Ze(a,l,d,m,y=!1){for(;null!==d;){const M=l[d.index];if(null!==M&&m.push(di(M)),un(M))for(let P=10;P<M.length;P++){const F=M[P],H=F[1].firstChild;null!==H&&Ze(F[1],F,H,m)}const T=d.type;if(8&T)Ze(a,l,d.child,m);else if(32&T){const P=jr(d,l);let F;for(;F=P();)m.push(F)}else if(16&T){const P=ey(l,d);if(Array.isArray(P))m.push(...P);else{const F=Ta(l[16]);Ze(F[1],F,P,m,!0)}}d=y?d.projectionNext:d.next}return m}class fn{constructor(l,d){this._lView=l,this._cdRefInjectingView=d,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const l=this._lView,d=l[1];return Ze(d,l,d.firstChild,[])}get context(){return this._lView[8]}set context(l){this._lView[8]=l}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const l=this._lView[3];if(un(l)){const d=l[8],m=d?d.indexOf(this):-1;m>-1&&(id(l,m),Po(d,m))}this._attachedToViewContainer=!1}K_(this._lView[1],this._lView)}onDestroy(l){jh(this._lView[1],this._lView,null,l)}markForCheck(){bp(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Ed(this._lView[1],this._lView,this.context)}checkNoChanges(){!function Cn(a,l,d){Fu(!0);try{Ed(a,l,d)}finally{Fu(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Ye(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Xl(a,l){Bh(a,l,l[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(l){if(this._attachedToViewContainer)throw new Ye(902,"");this._appRef=l}}class bn extends fn{constructor(l){super(l),this._view=l}detectChanges(){xd(this._view)}checkNoChanges(){!function xy(a){Fu(!0);try{xd(a)}finally{Fu(!1)}}(this._view)}get context(){return null}}class Nn extends wi{constructor(l){super(),this.ngModule=l}resolveComponentFactory(l){const d=ar(l);return new Hn(d,this.ngModule)}}function In(a){const l=[];for(let d in a)a.hasOwnProperty(d)&&l.push({propName:a[d],templateName:d});return l}class Hn extends tt{constructor(l,d){super(),this.componentDef=l,this.ngModule=d,this.componentType=l.type,this.selector=function r0(a){return a.map(n0).join(",")}(l.selectors),this.ngContentSelectors=l.ngContentSelectors?l.ngContentSelectors:[],this.isBoundToModule=!!d}get inputs(){return In(this.componentDef.inputs)}get outputs(){return In(this.componentDef.outputs)}create(l,d,m,y){const M=(y=y||this.ngModule)?function jn(a,l){return{get:(d,m,y)=>{const M=a.get(d,ke,y);return M!==ke||m===ke?M:l.get(d,m,y)}}}(l,y.injector):l,T=M.get(Yd,ja),P=M.get(te,null),F=T.createRenderer(null,this.componentDef),H=this.componentDef.selectors[0][0]||"div",W=m?function Wh(a,l,d){if(Si(a))return a.selectRootElement(l,d===Gn.ShadowDom);let m="string"==typeof l?a.querySelector(l):l;return m.textContent="",m}(F,m,this.componentDef.encapsulation):Lh(T.createRenderer(null,this.componentDef),H,function ni(a){const l=a.toLowerCase();return"svg"===l?"svg":"math"===l?"math":null}(H)),J=this.componentDef.onPush?576:528,le=function su(a,l){return{components:[],scheduler:a||ME,clean:ul,playerHandler:l||null,flags:0}}(),xe=tc(0,null,null,1,0,null,null,null,null,null),We=Vh(null,xe,le,J,null,null,T,F,P,M);let _t,Pt;Qs(We);try{const qt=function hl(a,l,d,m,y,M){const T=d[1];d[20]=a;const F=Ho(T,20,2,"#host",null),H=F.mergedAttrs=l.hostAttrs;null!==H&&(Md(F,H,!0),null!==a&&(Ol(y,a,H),null!==F.classes&&Yl(y,a,F.classes),null!==F.styles&&oo(y,a,F.styles)));const W=m.createRenderer(a,l),J=Vh(d,zh(l),null,l.onPush?64:16,d[20],F,m,W,M||null,null);return T.firstCreatePass&&(Fs(gh(F,d),T,l.type),md(T,F),co(F,d.length,1)),vd(d,J),d[20]=J}(W,this.componentDef,We,T,F);if(W)if(m)Ol(F,W,["ng-version",Ve.full]);else{const{attrs:it,classes:ln}=function s0(a){const l=[],d=[];let m=1,y=2;for(;m<a.length;){let M=a[m];if("string"==typeof M)2===y?""!==M&&l.push(M,a[++m]):8===y&&d.push(M);else{if(!Xr(y))break;y=M}m++}return{attrs:l,classes:d}}(this.componentDef.selectors[0]);it&&Ol(F,W,it),ln&&ln.length>0&&Yl(F,W,ln.join(" "))}if(Pt=vm(xe,20),void 0!==d){const it=Pt.projection=[];for(let ln=0;ln<this.ngContentSelectors.length;ln++){const qn=d[ln];it.push(null!=qn?Array.from(qn):null)}}_t=function Ip(a,l,d,m,y){const M=d[1],T=function nc(a,l,d){const m=Fi();a.firstCreatePass&&(d.providersResolver&&d.providersResolver(d),qi(a,m,l,dd(a,l,1,null),d));const y=Nl(l,a,m.directiveStart,m);Wr(y,l);const M=si(m,l);return M&&Wr(M,l),y}(M,d,l);if(m.components.push(T),a[8]=T,y&&y.forEach(F=>F(T,l)),l.contentQueries){const F=Fi();l.contentQueries(1,T,F.directiveStart)}const P=Fi();return!M.firstCreatePass||null===l.hostBindings&&null===l.hostAttrs||(ys(P.index),pd(d[1],P,0,P.directiveStart,P.directiveEnd,l),Yc(l,T)),T}(qt,this.componentDef,We,le,[Jh]),Hh(xe,We,null)}finally{ha()}return new Zd(this.componentType,_t,Qr(Pt,We),We,Pt)}}class Zd extends class vn{}{constructor(l,d,m,y,M){super(),this.location=m,this._rootLView=y,this._tNode=M,this.instance=d,this.hostView=this.changeDetectorRef=new bn(y),this.componentType=l}get injector(){return new as(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(l){this.hostView.onDestroy(l)}}class _r{}class Ui{}const es=new Map;class NE extends _r{constructor(l,d){super(),this._parent=d,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Nn(this);const m=Er(l);this._bootstrapComponents=on(m.bootstrap),this._r3Injector=Kh(l,d,[{provide:_r,useValue:this},{provide:wi,useValue:this.componentFactoryResolver}],_e(l)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(l)}get(l,d=Ts.THROW_IF_NOT_FOUND,m=pn.Default){return l===Ts||l===_r||l===wd?this:this._r3Injector.get(l,d,m)}destroy(){const l=this._r3Injector;!l.destroyed&&l.destroy(),this.destroyCbs.forEach(d=>d()),this.destroyCbs=null}onDestroy(l){this.destroyCbs.push(l)}}class hv extends Ui{constructor(l){super(),this.moduleType=l,null!==Er(l)&&function mc(a){const l=new Set;!function d(m){const y=Er(m,!0),M=y.id;null!==M&&(function Na(a,l,d){if(l&&l!==d)throw new Error(`Duplicate module registered for ${a} - ${_e(l)} vs ${_e(l.name)}`)}(M,es.get(M),m),es.set(M,m));const T=on(y.imports);for(const P of T)l.has(P)||(l.add(P),d(P))}(a)}(l)}create(l){return new NE(this.moduleType,l)}}function H0(a,l,d){const m=function vt(){const a=_n.lFrame;let l=a.bindingRootIndex;return-1===l&&(l=a.bindingRootIndex=a.tView.bindingStartIndex),l}()+a,y=nt();return y[m]===Mn?function $s(a,l,d){return a[l]=d}(y,m,d?l.call(d):l()):function nf(a,l){return a[l]}(y,m)}function $0(a){return l=>{setTimeout(a,void 0,l)}}const Ba=class WE extends C.x{constructor(l=!1){super(),this.__isAsync=l}emit(l){super.next(l)}subscribe(l,d,m){var y,M,T;let P=l,F=d||(()=>null),H=m;if(l&&"object"==typeof l){const J=l;P=null===(y=J.next)||void 0===y?void 0:y.bind(J),F=null===(M=J.error)||void 0===M?void 0:M.bind(J),H=null===(T=J.complete)||void 0===T?void 0:T.bind(J)}this.__isAsync&&(F=$0(F),P&&(P=$0(P)),H&&(H=$0(H)));const W=super.subscribe({next:P,error:F,complete:H});return l instanceof N.w0&&l.add(W),W}};function fx(){return this._results[Dd()]()}class q0{constructor(l=!1){this._emitDistinctChangesOnly=l,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const d=Dd(),m=q0.prototype;m[d]||(m[d]=fx)}get changes(){return this._changes||(this._changes=new Ba)}get(l){return this._results[l]}map(l){return this._results.map(l)}filter(l){return this._results.filter(l)}find(l){return this._results.find(l)}reduce(l,d){return this._results.reduce(l,d)}forEach(l){this._results.forEach(l)}some(l){return this._results.some(l)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(l,d){const m=this;m.dirty=!1;const y=Ji(l);(this._changesDetected=!function tl(a,l,d){if(a.length!==l.length)return!1;for(let m=0;m<a.length;m++){let y=a[m],M=l[m];if(d&&(y=d(y),M=d(M)),M!==y)return!1}return!0}(m._results,y,d))&&(m._results=y,m.length=y.length,m.last=y[this.length-1],m.first=y[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let um=(()=>{class a{}return a.__NG_ELEMENT_ID__=X0,a})();const px=um,Xx=class extends px{constructor(l,d,m){super(),this._declarationLView=l,this._declarationTContainer=d,this.elementRef=m}createEmbeddedView(l){const d=this._declarationTContainer.tViews,m=Vh(this._declarationLView,d,l,16,null,d.declTNode,null,null,null,null);m[17]=this._declarationLView[this._declarationTContainer.index];const M=this._declarationLView[19];return null!==M&&(m[19]=M.createEmbeddedView(d)),Hh(d,m,l),new fn(m)}};function X0(){return pv(Fi(),nt())}function pv(a,l){return 4&a.type?new Xx(l,a,Qr(a,l)):null}let l_=(()=>{class a{}return a.__NG_ELEMENT_ID__=mx,a})();function mx(){return qE(Fi(),nt())}const jE=l_,Qd=class extends jE{constructor(l,d,m){super(),this._lContainer=l,this._hostTNode=d,this._hostLView=m}get element(){return Qr(this._hostTNode,this._hostLView)}get injector(){return new as(this._hostTNode,this._hostLView)}get parentInjector(){const l=Ln(this._hostTNode,this._hostLView);if(Vf(l)){const d=pa(l,this._hostLView),m=ph(l);return new as(d[1].data[m+8],d)}return new as(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(l){const d=$E(this._lContainer);return null!==d&&d[l]||null}get length(){return this._lContainer.length-10}createEmbeddedView(l,d,m){const y=l.createEmbeddedView(d||{});return this.insert(y,m),y}createComponent(l,d,m,y,M){const T=l&&!function Vl(a){return"function"==typeof a}(l);let P;if(T)P=d;else{const J=d||{};P=J.index,m=J.injector,y=J.projectableNodes,M=J.ngModuleRef}const F=T?l:new Hn(ar(l)),H=m||this.parentInjector;if(!M&&null==F.ngModule){const le=(T?H:this.parentInjector).get(_r,null);le&&(M=le)}const W=F.create(H,y,void 0,M);return this.insert(W.hostView,P),W}insert(l,d){const m=l._lView,y=m[1];if(function g_(a){return un(a[3])}(m)){const W=this.indexOf(l);if(-1!==W)this.detach(W);else{const J=m[3],le=new Qd(J,J[6],J[3]);le.detach(le.indexOf(l))}}const M=this._adjustIndex(d),T=this._lContainer;!function qm(a,l,d,m){const y=10+m,M=d.length;m>0&&(d[y-1][4]=l),m<M-10?(l[4]=d[y],Pm(d,10+m,l)):(d.push(l),l[4]=null),l[3]=d;const T=l[17];null!==T&&d!==T&&function Y_(a,l){const d=a[9];l[16]!==l[3][3][16]&&(a[2]=!0),null===d?a[9]=[l]:d.push(l)}(T,l);const P=l[19];null!==P&&P.insertView(a),l[2]|=128}(y,m,T,M);const P=Zm(M,T),F=m[11],H=Km(F,T[7]);return null!==H&&function Uc(a,l,d,m,y,M){m[0]=y,m[6]=l,Bh(a,m,d,1,y,M)}(y,T[6],F,m,H,P),l.attachToViewContainerRef(),Pm(mv(T),M,l),l}move(l,d){return this.insert(l,d)}indexOf(l){const d=$E(this._lContainer);return null!==d?d.indexOf(l):-1}remove(l){const d=this._adjustIndex(l,-1),m=id(this._lContainer,d);m&&(Po(mv(this._lContainer),d),K_(m[1],m))}detach(l){const d=this._adjustIndex(l,-1),m=id(this._lContainer,d);return m&&null!=Po(mv(this._lContainer),d)?new fn(m):null}_adjustIndex(l,d=0){return null==l?this.length+d:l}};function $E(a){return a[8]}function mv(a){return a[8]||(a[8]=[])}function qE(a,l){let d;const m=l[a.index];if(un(m))d=m;else{let y;if(8&a.type)y=di(m);else{const M=l[11];y=M.createComment("");const T=si(a,l);kc(M,Km(M,T),y,function SE(a,l){return Si(a)?a.nextSibling(l):l.nextSibling}(M,T),!1)}l[a.index]=d=mg(m,l,y,a),vd(l,d)}return new Qd(d,a,l)}class c_{constructor(l){this.queryList=l,this.matches=null}clone(){return new c_(this.queryList)}setDirty(){this.queryList.setDirty()}}class gv{constructor(l=[]){this.queries=l}createEmbeddedView(l){const d=l.queries;if(null!==d){const m=null!==l.contentQueries?l.contentQueries[0]:d.length,y=[];for(let M=0;M<m;M++){const T=d.getByIndex(M);y.push(this.queries[T.indexInDeclarationView].clone())}return new gv(y)}return null}insertView(l){this.dirtyQueriesWithMatches(l)}detachView(l){this.dirtyQueriesWithMatches(l)}dirtyQueriesWithMatches(l){for(let d=0;d<this.queries.length;d++)null!==tx(l,d).matches&&this.queries[d].setDirty()}}class YE{constructor(l,d,m=null){this.predicate=l,this.flags=d,this.read=m}}class _v{constructor(l=[]){this.queries=l}elementStart(l,d){for(let m=0;m<this.queries.length;m++)this.queries[m].elementStart(l,d)}elementEnd(l){for(let d=0;d<this.queries.length;d++)this.queries[d].elementEnd(l)}embeddedTView(l){let d=null;for(let m=0;m<this.length;m++){const y=null!==d?d.length:0,M=this.getByIndex(m).embeddedTView(l,y);M&&(M.indexInDeclarationView=m,null!==d?d.push(M):d=[M])}return null!==d?new _v(d):null}template(l,d){for(let m=0;m<this.queries.length;m++)this.queries[m].template(l,d)}getByIndex(l){return this.queries[l]}get length(){return this.queries.length}track(l){this.queries.push(l)}}class Y0{constructor(l,d=-1){this.metadata=l,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=d}elementStart(l,d){this.isApplyingToNode(d)&&this.matchTNode(l,d)}elementEnd(l){this._declarationNodeIndex===l.index&&(this._appliesToNextNode=!1)}template(l,d){this.elementStart(l,d)}embeddedTView(l,d){return this.isApplyingToNode(l)?(this.crossesNgTemplate=!0,this.addMatch(-l.index,d),new Y0(this.metadata)):null}isApplyingToNode(l){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const d=this._declarationNodeIndex;let m=l.parent;for(;null!==m&&8&m.type&&m.index!==d;)m=m.parent;return d===(null!==m?m.index:-1)}return this._appliesToNextNode}matchTNode(l,d){const m=this.metadata.predicate;if(Array.isArray(m))for(let y=0;y<m.length;y++){const M=m[y];this.matchTNodeWithReadOption(l,d,KE(d,M)),this.matchTNodeWithReadOption(l,d,Ac(d,l,M,!1,!1))}else m===um?4&d.type&&this.matchTNodeWithReadOption(l,d,-1):this.matchTNodeWithReadOption(l,d,Ac(d,l,m,!1,!1))}matchTNodeWithReadOption(l,d,m){if(null!==m){const y=this.metadata.read;if(null!==y)if(y===Eu||y===l_||y===um&&4&d.type)this.addMatch(d.index,-2);else{const M=Ac(d,l,y,!1,!1);null!==M&&this.addMatch(d.index,M)}else this.addMatch(d.index,m)}}addMatch(l,d){null===this.matches?this.matches=[l,d]:this.matches.push(l,d)}}function KE(a,l){const d=a.localNames;if(null!==d)for(let m=0;m<d.length;m+=2)if(d[m]===l)return d[m+1];return null}function ZE(a,l,d,m){return-1===d?function _x(a,l){return 11&a.type?Qr(a,l):4&a.type?pv(a,l):null}(l,a):-2===d?function yx(a,l,d){return d===Eu?Qr(l,a):d===um?pv(l,a):d===l_?qE(l,a):void 0}(a,l,m):Nl(a,a[1],d,l)}function K0(a,l,d,m){const y=l[19].queries[m];if(null===y.matches){const M=a.data,T=d.matches,P=[];for(let F=0;F<T.length;F+=2){const H=T[F];P.push(H<0?null:ZE(l,M[H],T[F+1],d.metadata.read))}y.matches=P}return y.matches}function JE(a,l,d,m){const y=a.queries.getByIndex(d),M=y.matches;if(null!==M){const T=K0(a,l,y,d);for(let P=0;P<M.length;P+=2){const F=M[P];if(F>0)m.push(T[P/2]);else{const H=M[P+1],W=l[-F];for(let J=10;J<W.length;J++){const le=W[J];le[17]===le[3]&&JE(le[1],le,H,m)}if(null!==W[9]){const J=W[9];for(let le=0;le<J.length;le++){const xe=J[le];JE(xe[1],xe,H,m)}}}}}return m}function vx(a){const l=nt(),d=Ne(),m=Z();uh(m+1);const y=tx(d,m);if(a.dirty&&ch(l)===(2==(2&y.metadata.flags))){if(null===y.matches)a.reset([]);else{const M=y.crossesNgTemplate?JE(d,l,m,[]):K0(d,l,y,m);a.reset(M,o_),a.notifyOnChanges()}return!0}return!1}function QE(a,l,d,m){const y=Ne();if(y.firstCreatePass){const M=Fi();(function xx(a,l,d){null===a.queries&&(a.queries=new _v),a.queries.track(new Y0(l,d))})(y,new YE(l,d,m),M.index),function Jx(a,l){const d=a.contentQueries||(a.contentQueries=[]);l!==(d.length?d[d.length-1]:-1)&&d.push(a.queries.length-1,l)}(y,a),2==(2&d)&&(y.staticContentQueries=!0)}!function Ex(a,l,d){const m=new q0(4==(4&d));jh(a,l,m,m.destroy),null===l[19]&&(l[19]=new gv),l[19].queries.push(new c_(m))}(y,nt(),d)}function ex(){return function Zx(a,l){return a[19].queries[l].queryList}(nt(),Z())}function tx(a,l){return a.queries.getByIndex(l)}function nx(...a){}const tM=new pt("Application Initializer");let wx=(()=>{class a{constructor(d){this.appInits=d,this.resolve=nx,this.reject=nx,this.initialized=!1,this.done=!1,this.donePromise=new Promise((m,y)=>{this.resolve=m,this.reject=y})}runInitializers(){if(this.initialized)return;const d=[],m=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let y=0;y<this.appInits.length;y++){const M=this.appInits[y]();if(Gp(M))d.push(M);else if(zp(M)){const T=new Promise((P,F)=>{M.subscribe({complete:P,error:F})});d.push(T)}}Promise.all(d).then(()=>{m()}).catch(y=>{this.reject(y)}),0===d.length&&m(),this.initialized=!0}}return a.\u0275fac=function(d){return new(d||a)(ji(tM,8))},a.\u0275prov=gi({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();const nM=new pt("AppId",{providedIn:"root",factory:function iM(){return`${bx()}${bx()}${bx()}`}});function bx(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const rM=new pt("Platform Initializer"),sM=new pt("Platform ID"),oM=new pt("appBootstrapListener");let aM=(()=>{class a{log(d){console.log(d)}warn(d){console.warn(d)}}return a.\u0275fac=function(d){return new(d||a)},a.\u0275prov=gi({token:a,factory:a.\u0275fac}),a})();const Sx=new pt("LocaleId",{providedIn:"root",factory:()=>$n(Sx,pn.Optional|pn.SkipSelf)||function PM(){return"undefined"!=typeof $localize&&$localize.locale||xf}()}),IM=new pt("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class OM{constructor(l,d){this.ngModuleFactory=l,this.componentFactories=d}}let LM=(()=>{class a{compileModuleSync(d){return new hv(d)}compileModuleAsync(d){return Promise.resolve(this.compileModuleSync(d))}compileModuleAndAllComponentsSync(d){const m=this.compileModuleSync(d),M=on(Er(d).declarations).reduce((T,P)=>{const F=ar(P);return F&&T.push(new Hn(F)),T},[]);return new OM(m,M)}compileModuleAndAllComponentsAsync(d){return Promise.resolve(this.compileModuleAndAllComponentsSync(d))}clearCache(){}clearCacheFor(d){}getModuleId(d){}}return a.\u0275fac=function(d){return new(d||a)},a.\u0275prov=gi({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();const NM=(()=>Promise.resolve(0))();function Cx(a){"undefined"==typeof Zone?NM.then(()=>{a&&a.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",a)}class xu{constructor({enableLongStackTrace:l=!1,shouldCoalesceEventChangeDetection:d=!1,shouldCoalesceRunChangeDetection:m=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ba(!1),this.onMicrotaskEmpty=new Ba(!1),this.onStable=new Ba(!1),this.onError=new Ba(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const y=this;y._nesting=0,y._outer=y._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(y._inner=y._inner.fork(new Zone.TaskTrackingZoneSpec)),l&&Zone.longStackTraceZoneSpec&&(y._inner=y._inner.fork(Zone.longStackTraceZoneSpec)),y.shouldCoalesceEventChangeDetection=!m&&d,y.shouldCoalesceRunChangeDetection=m,y.lastRequestAnimationFrameId=-1,y.nativeRequestAnimationFrame=function BM(){let a=sn.requestAnimationFrame,l=sn.cancelAnimationFrame;if("undefined"!=typeof Zone&&a&&l){const d=a[Zone.__symbol__("OriginalDelegate")];d&&(a=d);const m=l[Zone.__symbol__("OriginalDelegate")];m&&(l=m)}return{nativeRequestAnimationFrame:a,nativeCancelAnimationFrame:l}}().nativeRequestAnimationFrame,function VM(a){const l=()=>{!function kM(a){a.isCheckStableRunning||-1!==a.lastRequestAnimationFrameId||(a.lastRequestAnimationFrameId=a.nativeRequestAnimationFrame.call(sn,()=>{a.fakeTopEventTask||(a.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{a.lastRequestAnimationFrameId=-1,Ax(a),a.isCheckStableRunning=!0,Tx(a),a.isCheckStableRunning=!1},void 0,()=>{},()=>{})),a.fakeTopEventTask.invoke()}),Ax(a))}(a)};a._inner=a._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(d,m,y,M,T,P)=>{try{return lM(a),d.invokeTask(y,M,T,P)}finally{(a.shouldCoalesceEventChangeDetection&&"eventTask"===M.type||a.shouldCoalesceRunChangeDetection)&&l(),cM(a)}},onInvoke:(d,m,y,M,T,P,F)=>{try{return lM(a),d.invoke(y,M,T,P,F)}finally{a.shouldCoalesceRunChangeDetection&&l(),cM(a)}},onHasTask:(d,m,y,M)=>{d.hasTask(y,M),m===y&&("microTask"==M.change?(a._hasPendingMicrotasks=M.microTask,Ax(a),Tx(a)):"macroTask"==M.change&&(a.hasPendingMacrotasks=M.macroTask))},onHandleError:(d,m,y,M)=>(d.handleError(y,M),a.runOutsideAngular(()=>a.onError.emit(M)),!1)})}(y)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!xu.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(xu.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(l,d,m){return this._inner.run(l,d,m)}runTask(l,d,m,y){const M=this._inner,T=M.scheduleEventTask("NgZoneEvent: "+y,l,UM,nx,nx);try{return M.runTask(T,d,m)}finally{M.cancelTask(T)}}runGuarded(l,d,m){return this._inner.runGuarded(l,d,m)}runOutsideAngular(l){return this._outer.run(l)}}const UM={};function Tx(a){if(0==a._nesting&&!a.hasPendingMicrotasks&&!a.isStable)try{a._nesting++,a.onMicrotaskEmpty.emit(null)}finally{if(a._nesting--,!a.hasPendingMicrotasks)try{a.runOutsideAngular(()=>a.onStable.emit(null))}finally{a.isStable=!0}}}function Ax(a){a.hasPendingMicrotasks=!!(a._hasPendingMicrotasks||(a.shouldCoalesceEventChangeDetection||a.shouldCoalesceRunChangeDetection)&&-1!==a.lastRequestAnimationFrameId)}function lM(a){a._nesting++,a.isStable&&(a.isStable=!1,a.onUnstable.emit(null))}function cM(a){a._nesting--,Tx(a)}class HM{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ba,this.onMicrotaskEmpty=new Ba,this.onStable=new Ba,this.onError=new Ba}run(l,d,m){return l.apply(d,m)}runGuarded(l,d,m){return l.apply(d,m)}runOutsideAngular(l){return l()}runTask(l,d,m,y){return l.apply(d,m)}}let uM=(()=>{class a{constructor(d){this._ngZone=d,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),d.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{xu.assertNotInAngularZone(),Cx(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Cx(()=>{for(;0!==this._callbacks.length;){let d=this._callbacks.pop();clearTimeout(d.timeoutId),d.doneCb(this._didWork)}this._didWork=!1});else{let d=this.getPendingTasks();this._callbacks=this._callbacks.filter(m=>!m.updateCb||!m.updateCb(d)||(clearTimeout(m.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(d=>({source:d.source,creationLocation:d.creationLocation,data:d.data})):[]}addCallback(d,m,y){let M=-1;m&&m>0&&(M=setTimeout(()=>{this._callbacks=this._callbacks.filter(T=>T.timeoutId!==M),d(this._didWork,this.getPendingTasks())},m)),this._callbacks.push({doneCb:d,timeoutId:M,updateCb:y})}whenStable(d,m,y){if(y&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(d,m,y),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(d,m,y){return[]}}return a.\u0275fac=function(d){return new(d||a)(ji(xu))},a.\u0275prov=gi({token:a,factory:a.\u0275fac}),a})(),dM=(()=>{class a{constructor(){this._applications=new Map,Dx.addToWindow(this)}registerApplication(d,m){this._applications.set(d,m)}unregisterApplication(d){this._applications.delete(d)}unregisterAllApplications(){this._applications.clear()}getTestability(d){return this._applications.get(d)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(d,m=!0){return Dx.findTestabilityInTree(this,d,m)}}return a.\u0275fac=function(d){return new(d||a)},a.\u0275prov=gi({token:a,factory:a.\u0275fac}),a})();class GM{addToWindow(l){}findTestabilityInTree(l,d,m){return null}}function zM(a){Dx=a}let Mu,Dx=new GM;const hM=new pt("AllowMultipleToken");class $M{constructor(l,d){this.name=l,this.token=d}}function fM(a,l,d=[]){const m=`Platform: ${l}`,y=new pt(m);return(M=[])=>{let T=pM();if(!T||T.injector.get(hM,!1))if(a)a(d.concat(M).concat({provide:y,useValue:!0}));else{const P=d.concat(M).concat({provide:y,useValue:!0},{provide:Yh,useValue:"platform"});!function qM(a){if(Mu&&!Mu.destroyed&&!Mu.injector.get(hM,!1))throw new Ye(400,"");Mu=a.get(mM);const l=a.get(rM,null);l&&l.forEach(d=>d())}(Ts.create({providers:P,name:m}))}return function XM(a){const l=pM();if(!l)throw new Ye(401,"");return l}()}}function pM(){return Mu&&!Mu.destroyed?Mu:null}let mM=(()=>{class a{constructor(d){this._injector=d,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(d,m){const P=function YM(a,l){let d;return d="noop"===a?new HM:("zone.js"===a?void 0:a)||new xu({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==l?void 0:l.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==l?void 0:l.ngZoneRunCoalescing)}),d}(m?m.ngZone:void 0,{ngZoneEventCoalescing:m&&m.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:m&&m.ngZoneRunCoalescing||!1}),F=[{provide:xu,useValue:P}];return P.run(()=>{const H=Ts.create({providers:F,parent:this.injector,name:d.moduleType.name}),W=d.create(H),J=W.injector.get(np,null);if(!J)throw new Ye(402,"");return P.runOutsideAngular(()=>{const le=P.onError.subscribe({next:xe=>{J.handleError(xe)}});W.onDestroy(()=>{Px(this._modules,W),le.unsubscribe()})}),function KM(a,l,d){try{const m=d();return Gp(m)?m.catch(y=>{throw l.runOutsideAngular(()=>a.handleError(y)),y}):m}catch(m){throw l.runOutsideAngular(()=>a.handleError(m)),m}}(J,P,()=>{const le=W.injector.get(wx);return le.runInitializers(),le.donePromise.then(()=>(function LE(a){rn(a,"Expected localeId to be defined"),"string"==typeof a&&(O0=a.toLowerCase().replace(/_/g,"-"))}(W.injector.get(Sx,xf)||xf),this._moduleDoBootstrap(W),W))})})}bootstrapModule(d,m=[]){const y=gM({},m);return function WM(a,l,d){const m=new hv(d);return Promise.resolve(m)}(0,0,d).then(M=>this.bootstrapModuleFactory(M,y))}_moduleDoBootstrap(d){const m=d.injector.get(Rx);if(d._bootstrapComponents.length>0)d._bootstrapComponents.forEach(y=>m.bootstrap(y));else{if(!d.instance.ngDoBootstrap)throw new Ye(403,"");d.instance.ngDoBootstrap(m)}this._modules.push(d)}onDestroy(d){this._destroyListeners.push(d)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ye(404,"");this._modules.slice().forEach(d=>d.destroy()),this._destroyListeners.forEach(d=>d()),this._destroyed=!0}get destroyed(){return this._destroyed}}return a.\u0275fac=function(d){return new(d||a)(ji(Ts))},a.\u0275prov=gi({token:a,factory:a.\u0275fac}),a})();function gM(a,l){return Array.isArray(l)?l.reduce(gM,a):Object.assign(Object.assign({},a),l)}let Rx=(()=>{class a{constructor(d,m,y,M,T){this._zone=d,this._injector=m,this._exceptionHandler=y,this._componentFactoryResolver=M,this._initStatus=T,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const P=new we.y(H=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{H.next(this._stable),H.complete()})}),F=new we.y(H=>{let W;this._zone.runOutsideAngular(()=>{W=this._zone.onStable.subscribe(()=>{xu.assertNotInAngularZone(),Cx(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,H.next(!0))})})});const J=this._zone.onUnstable.subscribe(()=>{xu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{H.next(!1)}))});return()=>{W.unsubscribe(),J.unsubscribe()}});this.isStable=(0,Oe.T)(P,F.pipe((0,he.B)()))}bootstrap(d,m){if(!this._initStatus.done)throw new Ye(405,"");let y;y=d instanceof tt?d:this._componentFactoryResolver.resolveComponentFactory(d),this.componentTypes.push(y.componentType);const M=function jM(a){return a.isBoundToModule}(y)?void 0:this._injector.get(_r),P=y.create(Ts.NULL,[],m||y.selector,M),F=P.location.nativeElement,H=P.injector.get(uM,null),W=H&&P.injector.get(dM);return H&&W&&W.registerApplication(F,H),P.onDestroy(()=>{this.detachView(P.hostView),Px(this.components,P),W&&W.unregisterApplication(F)}),this._loadComponent(P),P}tick(){if(this._runningTick)throw new Ye(101,"");try{this._runningTick=!0;for(let d of this._views)d.detectChanges()}catch(d){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(d))}finally{this._runningTick=!1}}attachView(d){const m=d;this._views.push(m),m.attachToAppRef(this)}detachView(d){const m=d;Px(this._views,m),m.detachFromAppRef()}_loadComponent(d){this.attachView(d.hostView),this.tick(),this.components.push(d),this._injector.get(oM,[]).concat(this._bootstrapListeners).forEach(y=>y(d))}ngOnDestroy(){this._views.slice().forEach(d=>d.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return a.\u0275fac=function(d){return new(d||a)(ji(xu),ji(Ts),ji(np),ji(wi),ji(wx))},a.\u0275prov=gi({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();function Px(a,l){const d=a.indexOf(l);d>-1&&a.splice(d,1)}let yM=!0,vM=!1;function JM(){return vM=!0,yM}function QM(){if(vM)throw new Error("Cannot enable prod mode after platform setup.");yM=!1}let ew=(()=>{class a{}return a.__NG_ELEMENT_ID__=tw,a})();function tw(a){return function nw(a,l,d){if(vi(a)&&!d){const m=Dr(a.index,l);return new fn(m,m)}return 47&a.type?new fn(l[16],l):null}(Fi(),nt(),16==(16&a))}class wM{constructor(){}supports(l){return tf(l)}create(l){return new lw(l)}}const aw=(a,l)=>l;class lw{constructor(l){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=l||aw}forEachItem(l){let d;for(d=this._itHead;null!==d;d=d._next)l(d)}forEachOperation(l){let d=this._itHead,m=this._removalsHead,y=0,M=null;for(;d||m;){const T=!m||d&&d.currentIndex<SM(m,y,M)?d:m,P=SM(T,y,M),F=T.currentIndex;if(T===m)y--,m=m._nextRemoved;else if(d=d._next,null==T.previousIndex)y++;else{M||(M=[]);const H=P-y,W=F-y;if(H!=W){for(let le=0;le<H;le++){const xe=le<M.length?M[le]:M[le]=0,We=xe+le;W<=We&&We<H&&(M[le]=xe+1)}M[T.previousIndex]=W-H}}P!==F&&l(T,P,F)}}forEachPreviousItem(l){let d;for(d=this._previousItHead;null!==d;d=d._nextPrevious)l(d)}forEachAddedItem(l){let d;for(d=this._additionsHead;null!==d;d=d._nextAdded)l(d)}forEachMovedItem(l){let d;for(d=this._movesHead;null!==d;d=d._nextMoved)l(d)}forEachRemovedItem(l){let d;for(d=this._removalsHead;null!==d;d=d._nextRemoved)l(d)}forEachIdentityChange(l){let d;for(d=this._identityChangesHead;null!==d;d=d._nextIdentityChange)l(d)}diff(l){if(null==l&&(l=[]),!tf(l))throw new Ye(900,"");return this.check(l)?this:null}onDestroy(){}check(l){this._reset();let y,M,T,d=this._itHead,m=!1;if(Array.isArray(l)){this.length=l.length;for(let P=0;P<this.length;P++)M=l[P],T=this._trackByFn(P,M),null!==d&&Object.is(d.trackById,T)?(m&&(d=this._verifyReinsertion(d,M,T,P)),Object.is(d.item,M)||this._addIdentityChange(d,M)):(d=this._mismatch(d,M,T,P),m=!0),d=d._next}else y=0,function y0(a,l){if(Array.isArray(a))for(let d=0;d<a.length;d++)l(a[d]);else{const d=a[Dd()]();let m;for(;!(m=d.next()).done;)l(m.value)}}(l,P=>{T=this._trackByFn(y,P),null!==d&&Object.is(d.trackById,T)?(m&&(d=this._verifyReinsertion(d,P,T,y)),Object.is(d.item,P)||this._addIdentityChange(d,P)):(d=this._mismatch(d,P,T,y),m=!0),d=d._next,y++}),this.length=y;return this._truncate(d),this.collection=l,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let l;for(l=this._previousItHead=this._itHead;null!==l;l=l._next)l._nextPrevious=l._next;for(l=this._additionsHead;null!==l;l=l._nextAdded)l.previousIndex=l.currentIndex;for(this._additionsHead=this._additionsTail=null,l=this._movesHead;null!==l;l=l._nextMoved)l.previousIndex=l.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(l,d,m,y){let M;return null===l?M=this._itTail:(M=l._prev,this._remove(l)),null!==(l=null===this._unlinkedRecords?null:this._unlinkedRecords.get(m,null))?(Object.is(l.item,d)||this._addIdentityChange(l,d),this._reinsertAfter(l,M,y)):null!==(l=null===this._linkedRecords?null:this._linkedRecords.get(m,y))?(Object.is(l.item,d)||this._addIdentityChange(l,d),this._moveAfter(l,M,y)):l=this._addAfter(new cw(d,m),M,y),l}_verifyReinsertion(l,d,m,y){let M=null===this._unlinkedRecords?null:this._unlinkedRecords.get(m,null);return null!==M?l=this._reinsertAfter(M,l._prev,y):l.currentIndex!=y&&(l.currentIndex=y,this._addToMoves(l,y)),l}_truncate(l){for(;null!==l;){const d=l._next;this._addToRemovals(this._unlink(l)),l=d}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(l,d,m){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(l);const y=l._prevRemoved,M=l._nextRemoved;return null===y?this._removalsHead=M:y._nextRemoved=M,null===M?this._removalsTail=y:M._prevRemoved=y,this._insertAfter(l,d,m),this._addToMoves(l,m),l}_moveAfter(l,d,m){return this._unlink(l),this._insertAfter(l,d,m),this._addToMoves(l,m),l}_addAfter(l,d,m){return this._insertAfter(l,d,m),this._additionsTail=null===this._additionsTail?this._additionsHead=l:this._additionsTail._nextAdded=l,l}_insertAfter(l,d,m){const y=null===d?this._itHead:d._next;return l._next=y,l._prev=d,null===y?this._itTail=l:y._prev=l,null===d?this._itHead=l:d._next=l,null===this._linkedRecords&&(this._linkedRecords=new bM),this._linkedRecords.put(l),l.currentIndex=m,l}_remove(l){return this._addToRemovals(this._unlink(l))}_unlink(l){null!==this._linkedRecords&&this._linkedRecords.remove(l);const d=l._prev,m=l._next;return null===d?this._itHead=m:d._next=m,null===m?this._itTail=d:m._prev=d,l}_addToMoves(l,d){return l.previousIndex===d||(this._movesTail=null===this._movesTail?this._movesHead=l:this._movesTail._nextMoved=l),l}_addToRemovals(l){return null===this._unlinkedRecords&&(this._unlinkedRecords=new bM),this._unlinkedRecords.put(l),l.currentIndex=null,l._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=l,l._prevRemoved=null):(l._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=l),l}_addIdentityChange(l,d){return l.item=d,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=l:this._identityChangesTail._nextIdentityChange=l,l}}class cw{constructor(l,d){this.item=l,this.trackById=d,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class uw{constructor(){this._head=null,this._tail=null}add(l){null===this._head?(this._head=this._tail=l,l._nextDup=null,l._prevDup=null):(this._tail._nextDup=l,l._prevDup=this._tail,l._nextDup=null,this._tail=l)}get(l,d){let m;for(m=this._head;null!==m;m=m._nextDup)if((null===d||d<=m.currentIndex)&&Object.is(m.trackById,l))return m;return null}remove(l){const d=l._prevDup,m=l._nextDup;return null===d?this._head=m:d._nextDup=m,null===m?this._tail=d:m._prevDup=d,null===this._head}}class bM{constructor(){this.map=new Map}put(l){const d=l.trackById;let m=this.map.get(d);m||(m=new uw,this.map.set(d,m)),m.add(l)}get(l,d){const y=this.map.get(l);return y?y.get(l,d):null}remove(l){const d=l.trackById;return this.map.get(d).remove(l)&&this.map.delete(d),l}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function SM(a,l,d){const m=a.previousIndex;if(null===m)return m;let y=0;return d&&m<d.length&&(y=d[m]),m+l+y}class CM{constructor(){}supports(l){return l instanceof Map||Lp(l)}create(){return new dw}}class dw{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(l){let d;for(d=this._mapHead;null!==d;d=d._next)l(d)}forEachPreviousItem(l){let d;for(d=this._previousMapHead;null!==d;d=d._nextPrevious)l(d)}forEachChangedItem(l){let d;for(d=this._changesHead;null!==d;d=d._nextChanged)l(d)}forEachAddedItem(l){let d;for(d=this._additionsHead;null!==d;d=d._nextAdded)l(d)}forEachRemovedItem(l){let d;for(d=this._removalsHead;null!==d;d=d._nextRemoved)l(d)}diff(l){if(l){if(!(l instanceof Map||Lp(l)))throw new Ye(900,"")}else l=new Map;return this.check(l)?this:null}onDestroy(){}check(l){this._reset();let d=this._mapHead;if(this._appendAfter=null,this._forEach(l,(m,y)=>{if(d&&d.key===y)this._maybeAddToChanges(d,m),this._appendAfter=d,d=d._next;else{const M=this._getOrCreateRecordForKey(y,m);d=this._insertBeforeOrAppend(d,M)}}),d){d._prev&&(d._prev._next=null),this._removalsHead=d;for(let m=d;null!==m;m=m._nextRemoved)m===this._mapHead&&(this._mapHead=null),this._records.delete(m.key),m._nextRemoved=m._next,m.previousValue=m.currentValue,m.currentValue=null,m._prev=null,m._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(l,d){if(l){const m=l._prev;return d._next=l,d._prev=m,l._prev=d,m&&(m._next=d),l===this._mapHead&&(this._mapHead=d),this._appendAfter=l,l}return this._appendAfter?(this._appendAfter._next=d,d._prev=this._appendAfter):this._mapHead=d,this._appendAfter=d,null}_getOrCreateRecordForKey(l,d){if(this._records.has(l)){const y=this._records.get(l);this._maybeAddToChanges(y,d);const M=y._prev,T=y._next;return M&&(M._next=T),T&&(T._prev=M),y._next=null,y._prev=null,y}const m=new hw(l);return this._records.set(l,m),m.currentValue=d,this._addToAdditions(m),m}_reset(){if(this.isDirty){let l;for(this._previousMapHead=this._mapHead,l=this._previousMapHead;null!==l;l=l._next)l._nextPrevious=l._next;for(l=this._changesHead;null!==l;l=l._nextChanged)l.previousValue=l.currentValue;for(l=this._additionsHead;null!=l;l=l._nextAdded)l.previousValue=l.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(l,d){Object.is(d,l.currentValue)||(l.previousValue=l.currentValue,l.currentValue=d,this._addToChanges(l))}_addToAdditions(l){null===this._additionsHead?this._additionsHead=this._additionsTail=l:(this._additionsTail._nextAdded=l,this._additionsTail=l)}_addToChanges(l){null===this._changesHead?this._changesHead=this._changesTail=l:(this._changesTail._nextChanged=l,this._changesTail=l)}_forEach(l,d){l instanceof Map?l.forEach(d):Object.keys(l).forEach(m=>d(l[m],m))}}class hw{constructor(l){this.key=l,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function TM(){return new Nx([new wM])}let Nx=(()=>{class a{constructor(d){this.factories=d}static create(d,m){if(null!=m){const y=m.factories.slice();d=d.concat(y)}return new a(d)}static extend(d){return{provide:a,useFactory:m=>a.create(d,m||TM()),deps:[[a,new ks,new Ni]]}}find(d){const m=this.factories.find(y=>y.supports(d));if(null!=m)return m;throw new Ye(901,"")}}return a.\u0275prov=gi({token:a,providedIn:"root",factory:TM}),a})();function AM(){return new Bx([new CM])}let Bx=(()=>{class a{constructor(d){this.factories=d}static create(d,m){if(m){const y=m.factories.slice();d=d.concat(y)}return new a(d)}static extend(d){return{provide:a,useFactory:m=>a.create(d,m||AM()),deps:[[a,new ks,new Ni]]}}find(d){const m=this.factories.find(M=>M.supports(d));if(m)return m;throw new Ye(901,"")}}return a.\u0275prov=gi({token:a,providedIn:"root",factory:AM}),a})();const mw=fM(null,"core",[{provide:sM,useValue:"unknown"},{provide:mM,deps:[Ts]},{provide:dM,deps:[]},{provide:aM,deps:[]}]);let gw=(()=>{class a{constructor(d){}}return a.\u0275fac=function(d){return new(d||a)(ji(Rx))},a.\u0275mod=gs({type:a}),a.\u0275inj=yo({}),a})()},9565:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{FT:()=>StoreDevtoolsModule});var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(5e3),_ngrx_store__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2323),rxjs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(515),rxjs__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(8306),rxjs__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(9646),rxjs__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(6451),rxjs__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(233),rxjs__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(4707),rxjs_operators__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(3099),rxjs_operators__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(9300),rxjs_operators__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(4004),rxjs_operators__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(4351),rxjs_operators__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(1749),rxjs_operators__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(8372),rxjs_operators__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(262),rxjs_operators__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(5698),rxjs_operators__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(2722),rxjs_operators__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(3900),rxjs_operators__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(5684),rxjs_operators__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(5363),rxjs_operators__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(1365),rxjs_operators__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(5026);class StoreDevtoolsConfig{constructor(){this.maxAge=!1}}const STORE_DEVTOOLS_CONFIG=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.OlP("@ngrx/store-devtools Options"),INITIAL_OPTIONS=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.OlP("@ngrx/store-devtools Initial Config");function noMonitor(){return null}const DEFAULT_NAME="NgRx Store DevTools";function createConfig(ye){const ce={maxAge:!1,monitor:noMonitor,actionSanitizer:void 0,stateSanitizer:void 0,name:DEFAULT_NAME,serialize:!1,logOnly:!1,autoPause:!1,features:{pause:!0,lock:!0,persist:!0,export:!0,import:"custom",jump:!0,skip:!0,reorder:!0,dispatch:!0,test:!0}},j="function"==typeof ye?ye():ye,we=Object.assign({},ce,{features:j.features||!!j.logOnly&&{pause:!0,export:!0,test:!0}||ce.features},j);if(we.maxAge&&we.maxAge<2)throw new Error(`Devtools 'maxAge' cannot be less than 2, got ${we.maxAge}`);return we}const PERFORM_ACTION="PERFORM_ACTION",REFRESH="REFRESH",RESET="RESET",ROLLBACK="ROLLBACK",COMMIT="COMMIT",SWEEP="SWEEP",TOGGLE_ACTION="TOGGLE_ACTION",SET_ACTIONS_ACTIVE="SET_ACTIONS_ACTIVE",JUMP_TO_STATE="JUMP_TO_STATE",JUMP_TO_ACTION="JUMP_TO_ACTION",IMPORT_STATE="IMPORT_STATE",LOCK_CHANGES="LOCK_CHANGES",PAUSE_RECORDING="PAUSE_RECORDING";class PerformAction{constructor(ce,j){if(this.action=ce,this.timestamp=j,this.type=PERFORM_ACTION,void 0===ce.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?')}}class Refresh{constructor(){this.type=REFRESH}}class Reset{constructor(ce){this.timestamp=ce,this.type=RESET}}class Rollback{constructor(ce){this.timestamp=ce,this.type=ROLLBACK}}class Commit{constructor(ce){this.timestamp=ce,this.type=COMMIT}}class Sweep{constructor(){this.type=SWEEP}}class ToggleAction{constructor(ce){this.id=ce,this.type=TOGGLE_ACTION}}class SetActionsActive{constructor(ce,j,C=!0){this.start=ce,this.end=j,this.active=C,this.type=SET_ACTIONS_ACTIVE}}class JumpToState{constructor(ce){this.index=ce,this.type=JUMP_TO_STATE}}class JumpToAction{constructor(ce){this.actionId=ce,this.type=JUMP_TO_ACTION}}class ImportState{constructor(ce){this.nextLiftedState=ce,this.type=IMPORT_STATE}}class LockChanges{constructor(ce){this.status=ce,this.type=LOCK_CHANGES}}class PauseRecording{constructor(ce){this.status=ce,this.type=PAUSE_RECORDING}}function difference(ye,ce){return ye.filter(j=>ce.indexOf(j)<0)}function unliftState(ye){const{computedStates:ce,currentStateIndex:j}=ye;if(j>=ce.length){const{state:N}=ce[ce.length-1];return N}const{state:C}=ce[j];return C}function unliftAction(ye){return ye.actionsById[ye.nextActionId-1]}function liftAction(ye){return new PerformAction(ye,+Date.now())}function sanitizeActions(ye,ce){return Object.keys(ce).reduce((j,C)=>{const N=Number(C);return j[N]=sanitizeAction(ye,ce[N],N),j},{})}function sanitizeAction(ye,ce,j){return Object.assign(Object.assign({},ce),{action:ye(ce.action,j)})}function sanitizeStates(ye,ce){return ce.map((j,C)=>({state:sanitizeState(ye,j.state,C),error:j.error}))}function sanitizeState(ye,ce,j){return ye(ce,j)}function shouldFilterActions(ye){return ye.predicate||ye.actionsSafelist||ye.actionsBlocklist}function filterLiftedState(ye,ce,j,C){const N=[],we={},Oe=[];return ye.stagedActionIds.forEach((he,Te)=>{const me=ye.actionsById[he];!me||Te&&isActionFiltered(ye.computedStates[Te],me,ce,j,C)||(we[he]=me,N.push(he),Oe.push(ye.computedStates[Te]))}),Object.assign(Object.assign({},ye),{stagedActionIds:N,actionsById:we,computedStates:Oe})}function isActionFiltered(ye,ce,j,C,N){const we=j&&!j(ye,ce.action),Oe=C&&!ce.action.type.match(C.map(Te=>escapeRegExp(Te)).join("|")),he=N&&ce.action.type.match(N.map(Te=>escapeRegExp(Te)).join("|"));return we||Oe||he}function escapeRegExp(ye){return ye.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}const INIT_ACTION={type:_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.qg},RECOMPUTE="@ngrx/store-devtools/recompute",RECOMPUTE_ACTION={type:RECOMPUTE};function computeNextEntry(ye,ce,j,C,N){if(C)return{state:j,error:"Interrupted by an error up the chain"};let Oe,we=j;try{we=ye(j,ce)}catch(he){Oe=he.toString(),N.handleError(he)}return{state:we,error:Oe}}function recomputeStates(ye,ce,j,C,N,we,Oe,he,Te){if(ce>=ye.length&&ye.length===we.length)return ye;const me=ye.slice(0,ce),_e=we.length-(Te?1:0);for(let fe=ce;fe<_e;fe++){const Se=we[fe],be=N[Se].action,De=me[fe-1],lt=De?De.state:C,at=De?De.error:void 0,dt=Oe.indexOf(Se)>-1?De:computeNextEntry(j,be,lt,at,he);me.push(dt)}return Te&&me.push(ye[ye.length-1]),me}function liftInitialState(ye,ce){return{monitorState:ce(void 0,{}),nextActionId:1,actionsById:{0:liftAction(INIT_ACTION)},stagedActionIds:[0],skippedActionIds:[],committedState:ye,currentStateIndex:0,computedStates:[],isLocked:!1,isPaused:!1}}function liftReducerWith(ye,ce,j,C,N={}){return we=>(Oe,he)=>{let{monitorState:Te,actionsById:me,nextActionId:_e,stagedActionIds:fe,skippedActionIds:Se,committedState:be,currentStateIndex:De,computedStates:lt,isLocked:at,isPaused:Ye}=Oe||ce;function dt(ht){let Et=ht,yt=fe.slice(1,Et+1);for(let Bt=0;Bt<yt.length;Bt++){if(lt[Bt+1].error){Et=Bt,yt=fe.slice(1,Et+1);break}delete me[yt[Bt]]}Se=Se.filter(Bt=>-1===yt.indexOf(Bt)),fe=[0,...fe.slice(Et+1)],be=lt[Et].state,lt=lt.slice(Et),De=De>Et?De-Et:0}function rt(){me={0:liftAction(INIT_ACTION)},_e=1,fe=[0],Se=[],be=lt[De].state,De=0,lt=[]}Oe||(me=Object.create(me));let mt=0;switch(he.type){case LOCK_CHANGES:at=he.status,mt=1/0;break;case PAUSE_RECORDING:Ye=he.status,Ye?(fe=[...fe,_e],me[_e]=new PerformAction({type:"@ngrx/devtools/pause"},+Date.now()),_e++,mt=fe.length-1,lt=lt.concat(lt[lt.length-1]),De===fe.length-2&&De++,mt=1/0):rt();break;case RESET:me={0:liftAction(INIT_ACTION)},_e=1,fe=[0],Se=[],be=ye,De=0,lt=[];break;case COMMIT:rt();break;case ROLLBACK:me={0:liftAction(INIT_ACTION)},_e=1,fe=[0],Se=[],De=0,lt=[];break;case TOGGLE_ACTION:{const{id:ht}=he;Se=-1===Se.indexOf(ht)?[ht,...Se]:Se.filter(yt=>yt!==ht),mt=fe.indexOf(ht);break}case SET_ACTIONS_ACTIVE:{const{start:ht,end:Et,active:yt}=he,Bt=[];for(let Ut=ht;Ut<Et;Ut++)Bt.push(Ut);Se=yt?difference(Se,Bt):[...Se,...Bt],mt=fe.indexOf(ht);break}case JUMP_TO_STATE:De=he.index,mt=1/0;break;case JUMP_TO_ACTION:{const ht=fe.indexOf(he.actionId);-1!==ht&&(De=ht),mt=1/0;break}case SWEEP:fe=difference(fe,Se),Se=[],De=Math.min(De,fe.length-1);break;case PERFORM_ACTION:{if(at)return Oe||ce;if(Ye||Oe&&isActionFiltered(Oe.computedStates[De],he,N.predicate,N.actionsSafelist,N.actionsBlocklist)){const Et=lt[lt.length-1];lt=[...lt.slice(0,-1),computeNextEntry(we,he.action,Et.state,Et.error,j)],mt=1/0;break}N.maxAge&&fe.length===N.maxAge&&dt(1),De===fe.length-1&&De++;const ht=_e++;me[ht]=he,fe=[...fe,ht],mt=fe.length-1;break}case IMPORT_STATE:({monitorState:Te,actionsById:me,nextActionId:_e,stagedActionIds:fe,skippedActionIds:Se,committedState:be,currentStateIndex:De,computedStates:lt,isLocked:at,isPaused:Ye}=he.nextLiftedState);break;case _ngrx_store__WEBPACK_IMPORTED_MODULE_1__.qg:mt=0,N.maxAge&&fe.length>N.maxAge&&(lt=recomputeStates(lt,mt,we,be,me,fe,Se,j,Ye),dt(fe.length-N.maxAge),mt=1/0);break;case _ngrx_store__WEBPACK_IMPORTED_MODULE_1__.wb:if(lt.filter(Et=>Et.error).length>0)mt=0,N.maxAge&&fe.length>N.maxAge&&(lt=recomputeStates(lt,mt,we,be,me,fe,Se,j,Ye),dt(fe.length-N.maxAge),mt=1/0);else{if(!Ye&&!at){De===fe.length-1&&De++;const Et=_e++;me[Et]=new PerformAction(he,+Date.now()),fe=[...fe,Et],mt=fe.length-1,lt=recomputeStates(lt,mt,we,be,me,fe,Se,j,Ye)}lt=lt.map(Et=>Object.assign(Object.assign({},Et),{state:we(Et.state,RECOMPUTE_ACTION)})),De=fe.length-1,N.maxAge&&fe.length>N.maxAge&&dt(fe.length-N.maxAge),mt=1/0}break;default:mt=1/0}return lt=recomputeStates(lt,mt,we,be,me,fe,Se,j,Ye),Te=C(Te,he),{monitorState:Te,actionsById:me,nextActionId:_e,stagedActionIds:fe,skippedActionIds:Se,committedState:be,currentStateIndex:De,computedStates:lt,isLocked:at,isPaused:Ye}}}let DevtoolsDispatcher=(()=>{class ye extends _ngrx_store__WEBPACK_IMPORTED_MODULE_1__.UO{}return ye.\u0275fac=function(){let ce;return function(C){return(ce||(ce=_angular_core__WEBPACK_IMPORTED_MODULE_0__.n5z(ye)))(C||ye)}}(),ye.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_0__.Yz7({token:ye,factory:ye.\u0275fac}),ye})();const ExtensionActionTypes={START:"START",DISPATCH:"DISPATCH",STOP:"STOP",ACTION:"ACTION"},REDUX_DEVTOOLS_EXTENSION=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.OlP("@ngrx/store-devtools Redux Devtools Extension");let DevtoolsExtension=(()=>{class DevtoolsExtension{constructor(ye,ce,j){this.config=ce,this.dispatcher=j,this.devtoolsExtension=ye,this.createActionStreams()}notify(ye,ce){if(this.devtoolsExtension)if(ye.type===PERFORM_ACTION){if(ce.isLocked||ce.isPaused)return;const j=unliftState(ce);if(shouldFilterActions(this.config)&&isActionFiltered(j,ye,this.config.predicate,this.config.actionsSafelist,this.config.actionsBlocklist))return;const C=this.config.stateSanitizer?sanitizeState(this.config.stateSanitizer,j,ce.currentStateIndex):j,N=this.config.actionSanitizer?sanitizeAction(this.config.actionSanitizer,ye,ce.nextActionId):ye;this.sendToReduxDevtools(()=>this.extensionConnection.send(N,C))}else{const j=Object.assign(Object.assign({},ce),{stagedActionIds:ce.stagedActionIds,actionsById:this.config.actionSanitizer?sanitizeActions(this.config.actionSanitizer,ce.actionsById):ce.actionsById,computedStates:this.config.stateSanitizer?sanitizeStates(this.config.stateSanitizer,ce.computedStates):ce.computedStates});this.sendToReduxDevtools(()=>this.devtoolsExtension.send(null,j,this.getExtensionConfig(this.config)))}}createChangesObservable(){return this.devtoolsExtension?new rxjs__WEBPACK_IMPORTED_MODULE_3__.y(ye=>{const ce=this.devtoolsExtension.connect(this.getExtensionConfig(this.config));return this.extensionConnection=ce,ce.init(),ce.subscribe(j=>ye.next(j)),ce.unsubscribe}):rxjs__WEBPACK_IMPORTED_MODULE_2__.E}createActionStreams(){const ye=this.createChangesObservable().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.B)()),ce=ye.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.h)(he=>he.type===ExtensionActionTypes.START)),j=ye.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.h)(he=>he.type===ExtensionActionTypes.STOP)),C=ye.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.h)(he=>he.type===ExtensionActionTypes.DISPATCH),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.U)(he=>this.unwrapAction(he.payload)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.b)(he=>he.type===IMPORT_STATE?this.dispatcher.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.h)(Te=>Te.type===_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.wb),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.V)(1e3),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.b)(1e3),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.U)(()=>he),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.K)(()=>(0,rxjs__WEBPACK_IMPORTED_MODULE_11__.of)(he)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.q)(1)):(0,rxjs__WEBPACK_IMPORTED_MODULE_11__.of)(he))),we=ye.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.h)(he=>he.type===ExtensionActionTypes.ACTION),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.U)(he=>this.unwrapAction(he.payload))).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.R)(j)),Oe=C.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.R)(j));this.start$=ce.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.R)(j)),this.actions$=this.start$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_14__.w)(()=>we)),this.liftedActions$=this.start$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_14__.w)(()=>Oe))}unwrapAction(action){return"string"==typeof action?eval(`(${action})`):action}getExtensionConfig(ye){var ce;const j={name:ye.name,features:ye.features,serialize:ye.serialize,autoPause:null!==(ce=ye.autoPause)&&void 0!==ce&&ce};return!1!==ye.maxAge&&(j.maxAge=ye.maxAge),j}sendToReduxDevtools(ye){try{ye()}catch(ce){console.warn("@ngrx/store-devtools: something went wrong inside the redux devtools",ce)}}}return DevtoolsExtension.\u0275fac=function ye(ce){return new(ce||DevtoolsExtension)(_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(REDUX_DEVTOOLS_EXTENSION),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(STORE_DEVTOOLS_CONFIG),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(DevtoolsDispatcher))},DevtoolsExtension.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_0__.Yz7({token:DevtoolsExtension,factory:DevtoolsExtension.\u0275fac}),DevtoolsExtension})(),StoreDevtools=(()=>{class ye{constructor(j,C,N,we,Oe,he,Te,me){const _e=liftInitialState(Te,me.monitor),fe=liftReducerWith(Te,_e,he,me.monitor,me),Se=(0,rxjs__WEBPACK_IMPORTED_MODULE_15__.T)((0,rxjs__WEBPACK_IMPORTED_MODULE_15__.T)(C.asObservable().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_16__.T)(1)),we.actions$).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.U)(liftAction)),j,we.liftedActions$).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_17__.Q)(rxjs__WEBPACK_IMPORTED_MODULE_18__.N)),be=N.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.U)(fe)),De=new rxjs__WEBPACK_IMPORTED_MODULE_19__.t(1),lt=Se.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.M)(be),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_21__.R)(({state:rt},[mt,ht])=>{let Et=ht(rt,mt);return mt.type!==PERFORM_ACTION&&shouldFilterActions(me)&&(Et=filterLiftedState(Et,me.predicate,me.actionsSafelist,me.actionsBlocklist)),we.notify(mt,Et),{state:Et,action:mt}},{state:_e,action:null})).subscribe(({state:rt,action:mt})=>{De.next(rt),mt.type===PERFORM_ACTION&&Oe.next(mt.action)}),at=we.start$.subscribe(()=>{this.refresh()}),Ye=De.asObservable(),dt=Ye.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.U)(unliftState));this.extensionStartSubscription=at,this.stateSubscription=lt,this.dispatcher=j,this.liftedState=Ye,this.state=dt}dispatch(j){this.dispatcher.next(j)}next(j){this.dispatcher.next(j)}error(j){}complete(){}performAction(j){this.dispatch(new PerformAction(j,+Date.now()))}refresh(){this.dispatch(new Refresh)}reset(){this.dispatch(new Reset(+Date.now()))}rollback(){this.dispatch(new Rollback(+Date.now()))}commit(){this.dispatch(new Commit(+Date.now()))}sweep(){this.dispatch(new Sweep)}toggleAction(j){this.dispatch(new ToggleAction(j))}jumpToAction(j){this.dispatch(new JumpToAction(j))}jumpToState(j){this.dispatch(new JumpToState(j))}importState(j){this.dispatch(new ImportState(j))}lockChanges(j){this.dispatch(new LockChanges(j))}pauseRecording(j){this.dispatch(new PauseRecording(j))}}return ye.\u0275fac=function(j){return new(j||ye)(_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(DevtoolsDispatcher),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.UO),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.n$),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(DevtoolsExtension),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.Y$),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(_angular_core__WEBPACK_IMPORTED_MODULE_0__.qLn),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.Y6),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(STORE_DEVTOOLS_CONFIG))},ye.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_0__.Yz7({token:ye,factory:ye.\u0275fac}),ye})();const IS_EXTENSION_OR_MONITOR_PRESENT=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.OlP("@ngrx/store-devtools Is Devtools Extension or Monitor Present");function createIsExtensionOrMonitorPresent(ye,ce){return Boolean(ye)||ce.monitor!==noMonitor}function createReduxDevtoolsExtension(){const ye="__REDUX_DEVTOOLS_EXTENSION__";return"object"==typeof window&&void 0!==window[ye]?window[ye]:null}function createStateObservable(ye){return ye.state}let StoreDevtoolsModule=(()=>{class ye{static instrument(j={}){return{ngModule:ye,providers:[DevtoolsExtension,DevtoolsDispatcher,StoreDevtools,{provide:INITIAL_OPTIONS,useValue:j},{provide:IS_EXTENSION_OR_MONITOR_PRESENT,deps:[REDUX_DEVTOOLS_EXTENSION,STORE_DEVTOOLS_CONFIG],useFactory:createIsExtensionOrMonitorPresent},{provide:REDUX_DEVTOOLS_EXTENSION,useFactory:createReduxDevtoolsExtension},{provide:STORE_DEVTOOLS_CONFIG,deps:[INITIAL_OPTIONS],useFactory:createConfig},{provide:_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.FR,deps:[StoreDevtools],useFactory:createStateObservable},{provide:_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.mK,useExisting:DevtoolsDispatcher}]}}}return ye.\u0275fac=function(j){return new(j||ye)},ye.\u0275mod=_angular_core__WEBPACK_IMPORTED_MODULE_0__.oAB({type:ye}),ye.\u0275inj=_angular_core__WEBPACK_IMPORTED_MODULE_0__.cJS({}),ye})()},2323:(ye,ce,j)=>{"use strict";j.d(ce,{UO:()=>Ut,qg:()=>Bt,Y6:()=>Ae,mK:()=>Rs,n$:()=>Va,Y$:()=>Br,FR:()=>_c,yh:()=>Ha,CK:()=>ui,Aw:()=>la,cr:()=>rs,wb:()=>pn,qC:()=>wu,PH:()=>mt});var C=j(5e3),N=j(1135),we=j(8306),Oe=j(7579),he=j(233),Te=j(4004),_e=j(4671),fe=j(4482),Se=j(5403);function De(ie,Ue){return ie===Ue}var lt=j(5363),at=j(1365),Ye=j(5026);const dt={};function mt(ie,Ue){if(dt[ie]=(dt[ie]||0)+1,"function"==typeof Ue)return yt(ie,(...Le)=>Object.assign(Object.assign({},Ue(...Le)),{type:ie}));switch(Ue?Ue._as:"empty"){case"empty":return yt(ie,()=>({type:ie}));case"props":return yt(ie,Le=>Object.assign(Object.assign({},Le),{type:ie}));default:throw new Error("Unexpected config.")}}function yt(ie,Ue){return Object.defineProperty(Ue,"type",{value:ie,writable:!1})}const Bt="@ngrx/store/init";let Ut=(()=>{class ie extends N.X{constructor(){super({type:Bt})}next(pe){if("function"==typeof pe)throw new TypeError("\n        Dispatch expected an object, instead it received a function.\n        If you're using the createAction function, make sure to invoke the function\n        before dispatching the action. For example, someAction should be someAction().");if(void 0===pe)throw new TypeError("Actions must be objects");if(void 0===pe.type)throw new TypeError("Actions must have a type property");super.next(pe)}complete(){}ngOnDestroy(){super.complete()}}return ie.\u0275fac=function(pe){return new(pe||ie)},ie.\u0275prov=C.Yz7({token:ie,factory:ie.\u0275fac}),ie})();const Qt=[Ut],en=new C.OlP("@ngrx/store Internal Root Guard"),Pn=new C.OlP("@ngrx/store Internal Initial State"),Ae=new C.OlP("@ngrx/store Initial State"),$e=new C.OlP("@ngrx/store Reducer Factory"),qe=new C.OlP("@ngrx/store Internal Reducer Factory Provider"),et=new C.OlP("@ngrx/store Initial Reducers"),xt=new C.OlP("@ngrx/store Internal Initial Reducers"),Ge=new C.OlP("@ngrx/store Store Features"),On=new C.OlP("@ngrx/store Internal Store Reducers"),Qn=new C.OlP("@ngrx/store Internal Feature Reducers"),ts=new C.OlP("@ngrx/store Internal Feature Configs"),rn=new C.OlP("@ngrx/store Internal Store Features"),Tn=new C.OlP("@ngrx/store Internal Feature Reducers Token"),_o=new C.OlP("@ngrx/store Feature Reducers"),Ki=new C.OlP("@ngrx/store User Provided Meta Reducers"),Zs=new C.OlP("@ngrx/store Meta Reducers"),gi=new C.OlP("@ngrx/store Internal Resolved Meta Reducers"),Ua=new C.OlP("@ngrx/store User Runtime Checks Config"),yo=new C.OlP("@ngrx/store Internal User Runtime Checks Config"),Ri=new C.OlP("@ngrx/store Internal Runtime Checks"),ka=new C.OlP("@ngrx/store Check if Action types are unique");function th(ie,Ue={}){const pe=Object.keys(ie),Le={};for(let ut=0;ut<pe.length;ut++){const un=pe[ut];"function"==typeof ie[un]&&(Le[un]=ie[un])}const gt=Object.keys(Le);return function(un,yi){un=void 0===un?Ue:un;let vi=!1;const ur={};for(let Bn=0;Bn<gt.length;Bn++){const Ar=gt[Bn],Du=un[Ar],Zi=(0,Le[Ar])(Du,yi);ur[Ar]=Zi,vi=vi||Zi!==Du}return vi?ur:un}}function wu(...ie){return function(Ue){if(0===ie.length)return Ue;const pe=ie[ie.length-1];return ie.slice(0,-1).reduceRight((gt,ut)=>ut(gt),pe(Ue))}}function vo(ie,Ue){return Array.isArray(Ue)&&Ue.length>0&&(ie=wu.apply(null,[...Ue,ie])),(pe,Le)=>{const gt=ie(pe);return(ut,un)=>gt(ut=void 0===ut?Le:ut,un)}}class Va extends we.y{}class Rs extends Ut{}const pn="@ngrx/store/update-reducers";let Tl=(()=>{class ie extends N.X{constructor(pe,Le,gt,ut){super(ut(gt,Le)),this.dispatcher=pe,this.initialState=Le,this.reducers=gt,this.reducerFactory=ut}get currentReducers(){return this.reducers}addFeature(pe){this.addFeatures([pe])}addFeatures(pe){const Le=pe.reduce((gt,{reducers:ut,reducerFactory:un,metaReducers:yi,initialState:vi,key:ur})=>{const Bn="function"==typeof ut?function bu(ie){const Ue=Array.isArray(ie)&&ie.length>0?wu(...ie):pe=>pe;return(pe,Le)=>(pe=Ue(pe),(gt,ut)=>pe(gt=void 0===gt?Le:gt,ut))}(yi)(ut,vi):vo(un,yi)(ut,vi);return gt[ur]=Bn,gt},{});this.addReducers(Le)}removeFeature(pe){this.removeFeatures([pe])}removeFeatures(pe){this.removeReducers(pe.map(Le=>Le.key))}addReducer(pe,Le){this.addReducers({[pe]:Le})}addReducers(pe){this.reducers=Object.assign(Object.assign({},this.reducers),pe),this.updateReducers(Object.keys(pe))}removeReducer(pe){this.removeReducers([pe])}removeReducers(pe){pe.forEach(Le=>{this.reducers=function hm(ie,Ue){return Object.keys(ie).filter(pe=>pe!==Ue).reduce((pe,Le)=>Object.assign(pe,{[Le]:ie[Le]}),{})}(this.reducers,Le)}),this.updateReducers(pe)}updateReducers(pe){this.next(this.reducerFactory(this.reducers,this.initialState)),this.dispatcher.next({type:pn,features:pe})}ngOnDestroy(){this.complete()}}return ie.\u0275fac=function(pe){return new(pe||ie)(C.LFG(Rs),C.LFG(Ae),C.LFG(et),C.LFG($e))},ie.\u0275prov=C.Yz7({token:ie,factory:ie.\u0275fac}),ie})();const ns=[Tl,{provide:Va,useExisting:Tl},{provide:Rs,useExisting:Ut}];let Br=(()=>{class ie extends Oe.x{ngOnDestroy(){this.complete()}}return ie.\u0275fac=function(){let Ue;return function(Le){return(Ue||(Ue=C.n5z(ie)))(Le||ie)}}(),ie.\u0275prov=C.Yz7({token:ie,factory:ie.\u0275fac}),ie})();const nh=[Br];class _c extends we.y{}let Cr=(()=>{class ie extends N.X{constructor(pe,Le,gt,ut){super(ut);const ur=pe.pipe((0,lt.Q)(he.N)).pipe((0,at.M)(Le)).pipe((0,Ye.R)(or,{state:ut}));this.stateSubscription=ur.subscribe(({state:Bn,action:Ar})=>{this.next(Bn),gt.next(Ar)})}ngOnDestroy(){this.stateSubscription.unsubscribe(),this.complete()}}return ie.INIT=Bt,ie.\u0275fac=function(pe){return new(pe||ie)(C.LFG(Ut),C.LFG(Va),C.LFG(Br),C.LFG(Ae))},ie.\u0275prov=C.Yz7({token:ie,factory:ie.\u0275fac}),ie})();function or(ie={state:void 0},[Ue,pe]){const{state:Le}=ie;return{state:pe(Le,Ue),action:Ue}}const ea=[Cr,{provide:_c,useExisting:Cr}];let Ha=(()=>{class ie extends we.y{constructor(pe,Le,gt){super(),this.actionsObserver=Le,this.reducerManager=gt,this.source=pe}select(pe,...Le){return nn.call(null,pe,...Le)(this)}lift(pe){const Le=new ie(this,this.actionsObserver,this.reducerManager);return Le.operator=pe,Le}dispatch(pe){this.actionsObserver.next(pe)}next(pe){this.actionsObserver.next(pe)}error(pe){this.actionsObserver.error(pe)}complete(){this.actionsObserver.complete()}addReducer(pe,Le){this.reducerManager.addReducer(pe,Le)}removeReducer(pe){this.reducerManager.removeReducer(pe)}}return ie.\u0275fac=function(pe){return new(pe||ie)(C.LFG(_c),C.LFG(Ut),C.LFG(Tl))},ie.\u0275prov=C.Yz7({token:ie,factory:ie.\u0275fac}),ie})();const Gn=[Ha];function nn(ie,Ue,...pe){return function(gt){let ut;if("string"==typeof ie){const un=[Ue,...pe].filter(Boolean);ut=gt.pipe(function me(...ie){const Ue=ie.length;if(0===Ue)throw new Error("list of properties cannot be empty.");return(0,Te.U)(pe=>{let Le=pe;for(let gt=0;gt<Ue;gt++){const ut=null==Le?void 0:Le[ie[gt]];if(void 0===ut)return;Le=ut}return Le})}(ie,...un))}else{if("function"!=typeof ie)throw new TypeError(`Unexpected type '${typeof ie}' in select operator, expected 'string' or 'function'`);ut=gt.pipe((0,Te.U)(un=>ie(un,Ue)))}return ut.pipe(function be(ie,Ue=_e.y){return ie=null!=ie?ie:De,(0,fe.e)((pe,Le)=>{let gt,ut=!0;pe.subscribe(new Se.Q(Le,un=>{const yi=Ue(un);(ut||!ie(gt,yi))&&(ut=!1,gt=yi,Le.next(un))}))})}())}}const Hi="https://ngrx.io/guide/store/configuration/runtime-checks";function ta(ie){return void 0===ie}function sn(ie){return null===ie}function Ga(ie){return Array.isArray(ie)}function ri(ie){return"object"==typeof ie&&null!==ie}function is(ie){return"function"==typeof ie}function lr(ie){Object.freeze(ie);const Ue=is(ie);return Object.getOwnPropertyNames(ie).forEach(pe=>{if(!pe.startsWith("\u0275")&&function vr(ie,Ue){return Object.prototype.hasOwnProperty.call(ie,Ue)}(ie,pe)&&(!Ue||"caller"!==pe&&"callee"!==pe&&"arguments"!==pe)){const Le=ie[pe];(ri(Le)||is(Le))&&!Object.isFrozen(Le)&&lr(Le)}}),ie}function oa(ie,Ue=[]){return(ta(ie)||sn(ie))&&0===Ue.length?{path:["root"],value:ie}:Object.keys(ie).reduce((Le,gt)=>{if(Le)return Le;const ut=ie[gt];return function xo(ie){return is(ie)&&ie.hasOwnProperty("\u0275cmp")}(ut)?Le:!(ta(ut)||sn(ut)||function gn(ie){return"number"==typeof ie}(ut)||function Eo(ie){return"boolean"==typeof ie}(ut)||function Js(ie){return"string"==typeof ie}(ut)||Ga(ut))&&(function Su(ie){if(!function Xn(ie){return ri(ie)&&!Ga(ie)}(ie))return!1;const Ue=Object.getPrototypeOf(ie);return Ue===Object.prototype||null===Ue}(ut)?oa(ut,[...Ue,gt]):{path:[...Ue,gt],value:ut})},!1)}function aa(ie,Ue){if(!1===ie)return;const pe=ie.path.join("."),Le=new Error(`Detected unserializable ${Ue} at "${pe}". ${Hi}#strict${Ue}serializability`);throw Le.value=ie.value,Le.unserializablePath=pe,Le}function cr(ie){return(0,C.X6Q)()?Object.assign({strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!0,strictActionImmutability:!0,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1},ie):{strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!1,strictActionImmutability:!1,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1}}function Tu({strictActionSerializability:ie,strictStateSerializability:Ue}){return pe=>ie||Ue?function bo(ie,Ue){return function(pe,Le){Ue.action(Le)&&aa(oa(Le),"action");const gt=ie(pe,Le);return Ue.state()&&aa(oa(gt),"state"),gt}}(pe,{action:Le=>ie&&!Ct(Le),state:()=>Ue}):pe}function Tr({strictActionImmutability:ie,strictStateImmutability:Ue}){return pe=>ie||Ue?function Er(ie,Ue){return function(pe,Le){const gt=Ue.action(Le)?lr(Le):Le,ut=ie(pe,gt);return Ue.state()?lr(ut):ut}}(pe,{action:Le=>ie&&!Ct(Le),state:()=>Ue}):pe}function Ct(ie){return ie.type.startsWith("@ngrx")}function An({strictActionWithinNgZone:ie}){return Ue=>ie?function So(ie,Ue){return function(pe,Le){if(Ue.action(Le)&&!C.R0b.isInAngularZone())throw new Error(`Action '${Le.type}' running outside NgZone. ${Hi}#strictactionwithinngzone`);return ie(pe,Le)}}(Ue,{action:pe=>ie&&!Ct(pe)}):Ue}function Zn(ie){return[{provide:yo,useValue:ie},{provide:Ua,useFactory:Co,deps:[yo]},{provide:Ri,deps:[Ua],useFactory:cr},{provide:Zs,multi:!0,deps:[Ri],useFactory:Tr},{provide:Zs,multi:!0,deps:[Ri],useFactory:Tu},{provide:Zs,multi:!0,deps:[Ri],useFactory:An}]}function xr(){return[{provide:ka,multi:!0,deps:[Ri],useFactory:Li}]}function Co(ie){return ie}function Li(ie){if(!ie.strictActionTypeUniqueness)return;const Ue=Object.entries(dt).filter(([,pe])=>pe>1).map(([pe])=>pe);if(Ue.length)throw new Error(`Action types are registered more than once, ${Ue.map(pe=>`"${pe}"`).join(", ")}. ${Hi}#strictactiontypeuniqueness`)}let rs=(()=>{class ie{constructor(pe,Le,gt,ut,un,yi){}}return ie.\u0275fac=function(pe){return new(pe||ie)(C.LFG(Ut),C.LFG(Va),C.LFG(Br),C.LFG(Ha),C.LFG(en,8),C.LFG(ka,8))},ie.\u0275mod=C.oAB({type:ie}),ie.\u0275inj=C.cJS({}),ie})(),ui=(()=>{class ie{constructor(pe,Le,gt,ut,un){this.features=pe,this.featureReducers=Le,this.reducerManager=gt;const yi=pe.map((vi,ur)=>{const Ar=Le.shift()[ur];return Object.assign(Object.assign({},vi),{reducers:Ar,initialState:To(vi.initialState)})});gt.addFeatures(yi)}ngOnDestroy(){this.reducerManager.removeFeatures(this.features)}}return ie.\u0275fac=function(pe){return new(pe||ie)(C.LFG(rn),C.LFG(_o),C.LFG(Tl),C.LFG(rs),C.LFG(ka,8))},ie.\u0275mod=C.oAB({type:ie}),ie.\u0275inj=C.cJS({}),ie})(),la=(()=>{class ie{static forRoot(pe,Le={}){return{ngModule:rs,providers:[{provide:en,useFactory:ua,deps:[[Ha,new C.FiY,new C.tp0]]},{provide:Pn,useValue:Le.initialState},{provide:Ae,useFactory:To,deps:[Pn]},{provide:xt,useValue:pe},{provide:On,useExisting:pe instanceof C.OlP?pe:xt},{provide:et,deps:[C.zs3,xt,[new C.tBr(On)]],useFactory:ca},{provide:Ki,useValue:Le.metaReducers?Le.metaReducers:[]},{provide:gi,deps:[Zs,Ki],useFactory:yc},{provide:qe,useValue:Le.reducerFactory?Le.reducerFactory:th},{provide:$e,deps:[qe,gi],useFactory:vo},Qt,ns,nh,ea,Gn,Zn(Le.runtimeChecks),xr()]}}static forFeature(pe,Le,gt={}){return{ngModule:ui,providers:[{provide:ts,multi:!0,useValue:pe instanceof Object?{}:gt},{provide:Ge,multi:!0,useValue:{key:pe instanceof Object?pe.name:pe,reducerFactory:gt instanceof C.OlP||!gt.reducerFactory?th:gt.reducerFactory,metaReducers:gt instanceof C.OlP||!gt.metaReducers?[]:gt.metaReducers,initialState:gt instanceof C.OlP||!gt.initialState?void 0:gt.initialState}},{provide:rn,deps:[C.zs3,ts,Ge],useFactory:Sn},{provide:Qn,multi:!0,useValue:pe instanceof Object?pe.reducer:Le},{provide:Tn,multi:!0,useExisting:Le instanceof C.OlP?Le:Qn},{provide:_o,multi:!0,deps:[C.zs3,Qn,[new C.tBr(Tn)]],useFactory:Al},xr()]}}}return ie.\u0275fac=function(pe){return new(pe||ie)},ie.\u0275mod=C.oAB({type:ie}),ie.\u0275inj=C.cJS({}),ie})();function ca(ie,Ue){return Ue instanceof C.OlP?ie.get(Ue):Ue}function Sn(ie,Ue,pe){return pe.map((Le,gt)=>{if(Ue[gt]instanceof C.OlP){const ut=ie.get(Ue[gt]);return{key:Le.key,reducerFactory:ut.reducerFactory?ut.reducerFactory:th,metaReducers:ut.metaReducers?ut.metaReducers:[],initialState:ut.initialState}}return Le})}function Al(ie,Ue){return Ue.map(Le=>Le instanceof C.OlP?ie.get(Le):Le)}function To(ie){return"function"==typeof ie?ie():ie}function yc(ie,Ue){return ie.concat(Ue)}function ua(ie){if(ie)throw new TypeError("StoreModule.forRoot() called twice. Feature modules should use StoreModule.forFeature() instead.");return"guarded"}}},ye=>{ye(ye.s=5506)}]);